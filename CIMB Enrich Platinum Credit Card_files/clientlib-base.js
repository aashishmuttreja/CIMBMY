/*******************************************************************************
 * Copyright 2018 Adobe Systems Incorporated
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/

/**
 * Element.matches()
 * https://developer.mozilla.org/enUS/docs/Web/API/Element/matches#Polyfill
 */
if (!Element.prototype.matches) {
    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
}

// eslint-disable-next-line valid-jsdoc
/**
 * Element.closest()
 * https://developer.mozilla.org/enUS/docs/Web/API/Element/closest#Polyfill
 */
if (!Element.prototype.closest) {
    Element.prototype.closest = function(s) {
        "use strict";
        var el = this;
        if (!document.documentElement.contains(el)) {
            return null;
        }
        do {
            if (el.matches(s)) {
                return el;
            }
            el = el.parentElement || el.parentNode;
        } while (el !== null && el.nodeType === 1);
        return null;
    };
}

/*******************************************************************************
 * Copyright 2018 Adobe Systems Incorporated
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "tabs";

    var keyCodes = {
        END: 35,
        HOME: 36,
        ARROW_LEFT: 37,
        ARROW_UP: 38,
        ARROW_RIGHT: 39,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" +  NS + '-is="' + IS + '"]',
        active: {
            tab: "cmp-tabs__tab--active",
            tabpanel: "cmp-tabs__tabpanel--active"
        }
    };

    /**
     * Tabs Configuration
     *
     * @typedef {Object} TabsConfig Represents a Tabs configuration
     * @property {HTMLElement} element The HTMLElement representing the Tabs
     * @property {Object} options The Tabs options
     */

    /**
     * Tabs
     *
     * @class Tabs
     * @classdesc An interactive Tabs component for navigating a list of tabs
     * @param {TabsConfig} config The Tabs configuration
     */
    function Tabs(config) {
        var that = this;

        if (config && config.element) {
            init(config);
        }

        /**
         * Initializes the Tabs
         *
         * @private
         * @param {TabsConfig} config The Tabs configuration
         */
        function init(config) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            cacheElements(config.element);
            that._active = getActiveIndex(that._elements["tab"]);

            if (that._elements.tabpanel) {
                refreshActive();
                bindEvents();
            }

            if (window.Granite && window.Granite.author && window.Granite.author.MessageChannel) {
                /*
                 * Editor message handling:
                 * - subscribe to "cmp.panelcontainer" message requests sent by the editor frame
                 * - check that the message data panel container type is correct and that the id (path) matches this specific Tabs component
                 * - if so, route the "navigate" operation to enact a navigation of the Tabs based on index data
                 */
                new window.Granite.author.MessageChannel("cqauthor", window).subscribeRequestMessage("cmp.panelcontainer", function(message) {
                    if (message.data && message.data.type === "cmp-tabs" && message.data.id === that._elements.self.dataset["cmpPanelcontainerId"]) {
                        if (message.data.operation === "navigate") {
                            navigate(message.data.index);
                        }
                    }
                });
            }
        }

        /**
         * Returns the index of the active tab, if no tab is active returns 0
         *
         * @param {Array} tabs Tab elements
         * @returns {Number} Index of the active tab, 0 if none is active
         */
        function getActiveIndex(tabs) {
            if (tabs) {
                for (var i = 0; i < tabs.length; i++) {
                    if (tabs[i].classList.contains(selectors.active.tab)) {
                        return i;
                    }
                }
            }
            return 0;
        }

        /**
         * Caches the Tabs elements as defined via the {@code data-tabs-hook="ELEMENT_NAME"} markup API
         *
         * @private
         * @param {HTMLElement} wrapper The Tabs wrapper element
         */
        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                if (hook.closest("." + NS + "-" + IS) === that._elements.self) { // only process own tab elements
                    var capitalized = IS;
                    capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                    var key = hook.dataset[NS + "Hook" + capitalized];
                    if (that._elements[key]) {
                        if (!Array.isArray(that._elements[key])) {
                            var tmp = that._elements[key];
                            that._elements[key] = [tmp];
                        }
                        that._elements[key].push(hook);
                    } else {
                        that._elements[key] = hook;
                    }
                }
            }
        }

        /**
         * Binds Tabs event handling
         *
         * @private
         */
        function bindEvents() {
            var tabs = that._elements["tab"];
            if (tabs) {
                for (var i = 0; i < tabs.length; i++) {
                    (function(index) {
                        tabs[i].addEventListener("click", function(event) {
                            navigateAndFocusTab(index);
                        });
                        tabs[i].addEventListener("keydown", function(event) {
                            onKeyDown(event);
                        });
                    })(i);
                }
            }
        }

        /**
         * Handles tab keydown events
         *
         * @private
         * @param {Object} event The keydown event
         */
        function onKeyDown(event) {
            var index = that._active;
            var lastIndex = that._elements["tab"].length - 1;

            switch (event.keyCode) {
                case keyCodes.ARROW_LEFT:
                case keyCodes.ARROW_UP:
                    event.preventDefault();
                    if (index > 0) {
                        navigateAndFocusTab(index - 1);
                    }
                    break;
                case keyCodes.ARROW_RIGHT:
                case keyCodes.ARROW_DOWN:
                    event.preventDefault();
                    if (index < lastIndex) {
                        navigateAndFocusTab(index + 1);
                    }
                    break;
                case keyCodes.HOME:
                    event.preventDefault();
                    navigateAndFocusTab(0);
                    break;
                case keyCodes.END:
                    event.preventDefault();
                    navigateAndFocusTab(lastIndex);
                    break;
                default:
                    return;
            }
        }

        /**
         * Refreshes the tab markup based on the current {@code Tabs#_active} index
         *
         * @private
         */
        function refreshActive() {
            var tabpanels = that._elements["tabpanel"];
            var tabs = that._elements["tab"];

            if (tabpanels) {
                if (Array.isArray(tabpanels)) {
                    for (var i = 0; i < tabpanels.length; i++) {
                        if (i === parseInt(that._active)) {
                            tabpanels[i].classList.add(selectors.active.tabpanel);
                            tabpanels[i].removeAttribute("aria-hidden");
                            tabs[i].classList.add(selectors.active.tab);
                            tabs[i].setAttribute("aria-selected", true);
                            tabs[i].setAttribute("tabindex", "0");
                        } else {
                            tabpanels[i].classList.remove(selectors.active.tabpanel);
                            tabpanels[i].setAttribute("aria-hidden", true);
                            tabs[i].classList.remove(selectors.active.tab);
                            tabs[i].setAttribute("aria-selected", false);
                            tabs[i].setAttribute("tabindex", "-1");
                        }
                    }
                } else {
                    // only one tab
                    tabpanels.classList.add(selectors.active.tabpanel);
                    tabs.classList.add(selectors.active.tab);
                }
            }
        }

        /**
         * Focuses the element and prevents scrolling the element into view
         *
         * @param {HTMLElement} element Element to focus
         */
        function focusWithoutScroll(element) {
            var x = window.scrollX || window.pageXOffset;
            var y = window.scrollY || window.pageYOffset;
            element.focus();
            window.scrollTo(x, y);
        }

        /**
         * Navigates to the tab at the provided index
         *
         * @private
         * @param {Number} index The index of the tab to navigate to
         */
        function navigate(index) {
            that._active = index;
            refreshActive();
        }

        /**
         * Navigates to the item at the provided index and ensures the active tab gains focus
         *
         * @private
         * @param {Number} index The index of the item to navigate to
         */
        function navigateAndFocusTab(index) {
            navigate(index);
            focusWithoutScroll(that._elements["tab"][index]);
        }
    }

    /**
     * Reads options data from the Tabs wrapper element, defined via {@code data-cmp-*} data attributes
     *
     * @private
     * @param {HTMLElement} element The Tabs element to read options data from
     * @returns {Object} The options read from the component data attributes
     */
    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    /**
     * Document ready handler and DOM mutation observers. Initializes Tabs components as necessary.
     *
     * @private
     */
    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Tabs({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Tabs({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

}());

/*******************************************************************************
 * Copyright 2018 Adobe Systems Incorporated
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "carousel";

    var keyCodes = {
        SPACE: 32,
        END: 35,
        HOME: 36,
        ARROW_LEFT: 37,
        ARROW_UP: 38,
        ARROW_RIGHT: 39,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" +  NS + '-is="' + IS + '"]'
    };

    var properties = {
        /**
         * Determines whether the Carousel will automatically transition between slides
         *
         * @memberof Carousel
         * @type {Boolean}
         * @default false
         */
        "autoplay": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        },
        /**
         * Duration (in milliseconds) before automatically transitioning to the next slide
         *
         * @memberof Carousel
         * @type {Number}
         * @default 5000
         */
        "delay": {
            "default": 5000,
            "transform": function(value) {
                value = parseFloat(value);
                return !isNaN(value) ? value : null;
            }
        },
        /**
         * Determines whether automatic pause on hovering the carousel is disabled
         *
         * @memberof Carousel
         * @type {Boolean}
         * @default false
         */
        "autopauseDisabled": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        }
    };

    /**
     * Carousel Configuration
     *
     * @typedef {Object} CarouselConfig Represents a Carousel configuration
     * @property {HTMLElement} element The HTMLElement representing the Carousel
     * @property {Object} options The Carousel options
     */

    /**
     * Carousel
     *
     * @class Carousel
     * @classdesc An interactive Carousel component for navigating a list of generic items
     * @param {CarouselConfig} config The Carousel configuration
     */
    function Carousel(config) {
        var that = this;

        if (config && config.element) {
            init(config);
        }

        /**
         * Initializes the Carousel
         *
         * @private
         * @param {CarouselConfig} config The Carousel configuration
         */
        function init(config) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            setupProperties(config.options);
            cacheElements(config.element);

            that._active = 0;
            that._paused = false;

            if (that._elements.item) {
                refreshActive();
                bindEvents();
                resetAutoplayInterval();
                refreshPlayPauseActions();
            }

            if (window.Granite && window.Granite.author && window.Granite.author.MessageChannel) {
                /*
                 * Editor message handling:
                 * - subscribe to "cmp.panelcontainer" message requests sent by the editor frame
                 * - check that the message data panel container type is correct and that the id (path) matches this specific Carousel component
                 * - if so, route the "navigate" operation to enact a navigation of the Carousel based on index data
                 */
                new window.Granite.author.MessageChannel("cqauthor", window).subscribeRequestMessage("cmp.panelcontainer", function(message) {
                    if (message.data && message.data.type === "cmp-carousel" && message.data.id === that._elements.self.dataset["cmpPanelcontainerId"]) {
                        if (message.data.operation === "navigate") {
                            navigate(message.data.index);
                        }
                    }
                });
            }
        }

        /**
         * Caches the Carousel elements as defined via the {@code data-carousel-hook="ELEMENT_NAME"} markup API
         *
         * @private
         * @param {HTMLElement} wrapper The Carousel wrapper element
         */
        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                var capitalized = IS;
                capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                var key = hook.dataset[NS + "Hook" + capitalized];
                if (that._elements[key]) {
                    if (!Array.isArray(that._elements[key])) {
                        var tmp = that._elements[key];
                        that._elements[key] = [tmp];
                    }
                    that._elements[key].push(hook);
                } else {
                    that._elements[key] = hook;
                }
            }
        }

        /**
         * Sets up properties for the Carousel based on the passed options.
         *
         * @private
         * @param {Object} options The Carousel options
         */
        function setupProperties(options) {
            that._properties = {};

            for (var key in properties) {
                if (properties.hasOwnProperty(key)) {
                    var property = properties[key];
                    var value = null;

                    if (options && options[key] != null) {
                        value = options[key];

                        // transform the provided option
                        if (property && typeof property.transform === "function") {
                            value = property.transform(value);
                        }
                    }

                    if (value === null) {
                        // value still null, take the property default
                        value = properties[key]["default"];
                    }

                    that._properties[key] = value;
                }
            }
        }

        /**
         * Binds Carousel event handling
         *
         * @private
         */
        function bindEvents() {
            if (that._elements["previous"]) {
                that._elements["previous"].addEventListener("click", function() {
                    navigate(getPreviousIndex());
                });
            }

            if (that._elements["next"]) {
                that._elements["next"].addEventListener("click", function() {
                    navigate(getNextIndex());
                });
            }

            var indicators = that._elements["indicator"];
            if (indicators) {
                for (var i = 0; i < indicators.length; i++) {
                    (function(index) {
                        indicators[i].addEventListener("click", function(event) {
                            navigateAndFocusIndicator(index);
                        });
                    })(i);
                }
            }

            if (that._elements["pause"]) {
                if (that._properties.autoplay) {
                    that._elements["pause"].addEventListener("click", onPauseClick);
                }
            }

            if (that._elements["play"]) {
                if (that._properties.autoplay) {
                    that._elements["play"].addEventListener("click", onPlayClick);
                }
            }

            that._elements.self.addEventListener("keydown", onKeyDown);

            if (!that._properties.autopauseDisabled) {
                that._elements.self.addEventListener("mouseenter", onMouseEnter);
                that._elements.self.addEventListener("mouseleave", onMouseLeave);
            }
        }

        /**
         * Handles carousel keydown events
         *
         * @private
         * @param {Object} event The keydown event
         */
        function onKeyDown(event) {
            var index = that._active;
            var lastIndex = that._elements["indicator"].length - 1;

            switch (event.keyCode) {
                case keyCodes.ARROW_LEFT:
                case keyCodes.ARROW_UP:
                    event.preventDefault();
                    if (index > 0) {
                        navigateAndFocusIndicator(index - 1);
                    }
                    break;
                case keyCodes.ARROW_RIGHT:
                case keyCodes.ARROW_DOWN:
                    event.preventDefault();
                    if (index < lastIndex) {
                        navigateAndFocusIndicator(index + 1);
                    }
                    break;
                case keyCodes.HOME:
                    event.preventDefault();
                    navigateAndFocusIndicator(0);
                    break;
                case keyCodes.END:
                    event.preventDefault();
                    navigateAndFocusIndicator(lastIndex);
                    break;
                case keyCodes.SPACE:
                    if (that._properties.autoplay && (event.target !== that._elements["previous"] && event.target !== that._elements["next"])) {
                        event.preventDefault();
                        if (!that._paused) {
                            pause();
                        } else {
                            play();
                        }
                    }
                    if (event.target === that._elements["pause"]) {
                        that._elements["play"].focus();
                    }
                    if (event.target === that._elements["play"]) {
                        that._elements["pause"].focus();
                    }
                    break;
                default:
                    return;
            }
        }

        /**
         * Handles carousel mouseenter events
         *
         * @private
         * @param {Object} event The mouseenter event
         */
        function onMouseEnter(event) {
            clearAutoplayInterval();
        }

        /**
         * Handles carousel mouseleave events
         *
         * @private
         * @param {Object} event The mouseleave event
         */
        function onMouseLeave(event) {
            resetAutoplayInterval();
        }

        /**
         * Handles pause element click events
         *
         * @private
         * @param {Object} event The click event
         */
        function onPauseClick(event) {
            pause();
            that._elements["play"].focus();
        }

        /**
         * Handles play element click events
         *
         * @private
         * @param {Object} event The click event
         */
        function onPlayClick() {
            play();
            that._elements["pause"].focus();
        }

        /**
         * Pauses the playing of the Carousel. Sets {@code Carousel#_paused} marker.
         * Only relevant when autoplay is enabled
         *
         * @private
         */
        function pause() {
            that._paused = true;
            clearAutoplayInterval();
            refreshPlayPauseActions();
        }

        /**
         * Enables the playing of the Carousel. Sets {@code Carousel#_paused} marker.
         * Only relevant when autoplay is enabled
         *
         * @private
         */
        function play() {
            that._paused = false;

            // If the Carousel is hovered, don't begin auto transitioning until the next mouse leave event
            var hovered = false;
            if (that._elements.self.parentElement) {
                hovered = that._elements.self.parentElement.querySelector(":hover") === that._elements.self;
            }
            if (that._properties.autopauseDisabled || !hovered) {
                resetAutoplayInterval();
            }

            refreshPlayPauseActions();
        }

        /**
         * Refreshes the play/pause action markup based on the {@code Carousel#_paused} state
         *
         * @private
         */
        function refreshPlayPauseActions() {
            setActionDisabled(that._elements["pause"], that._paused);
            setActionDisabled(that._elements["play"], !that._paused);
        }

        /**
         * Refreshes the item markup based on the current {@code Carousel#_active} index
         *
         * @private
         */
        function refreshActive() {
            var items = that._elements["item"];
            var indicators = that._elements["indicator"];

            if (items) {
                if (Array.isArray(items)) {
                    for (var i = 0; i < items.length; i++) {
                        if (i === parseInt(that._active)) {
                            items[i].classList.add("cmp-carousel__item--active");
                            items[i].removeAttribute("aria-hidden");
                            indicators[i].classList.add("cmp-carousel__indicator--active");
                            indicators[i].setAttribute("aria-selected", true);
                            indicators[i].setAttribute("tabindex", "0");
                        } else {
                            items[i].classList.remove("cmp-carousel__item--active");
                            items[i].setAttribute("aria-hidden", true);
                            indicators[i].classList.remove("cmp-carousel__indicator--active");
                            indicators[i].setAttribute("aria-selected", false);
                            indicators[i].setAttribute("tabindex", "-1");
                        }
                    }
                } else {
                    // only one item
                    items.classList.add("cmp-carousel__item--active");
                    indicators.classList.add("cmp-carousel__indicator--active");
                }
            }
        }

        /**
         * Focuses the element and prevents scrolling the element into view
         *
         * @param {HTMLElement} element Element to focus
         */
        function focusWithoutScroll(element) {
            var x = window.scrollX || window.pageXOffset;
            var y = window.scrollY || window.pageYOffset;
            element.focus();
            window.scrollTo(x, y);
        }

        /**
         * Retrieves the next active index, with looping
         *
         * @private
         * @returns {Number} Index of the next carousel item
         */
        function getNextIndex() {
            return that._active === (that._elements["item"].length - 1) ? 0 : that._active + 1;
        }

        /**
         * Retrieves the previous active index, with looping
         *
         * @private
         * @returns {Number} Index of the previous carousel item
         */
        function getPreviousIndex() {
            return that._active === 0 ? (that._elements["item"].length - 1) : that._active - 1;
        }

        /**
         * Navigates to the item at the provided index
         *
         * @private
         * @param {Number} index The index of the item to navigate to
         */
        function navigate(index) {
            if (index < 0 || index > (that._elements["item"].length - 1)) {
                return;
            }

            that._active = index;
            refreshActive();

            // reset the autoplay transition interval following navigation, if not already hovering the carousel
            if (that._elements.self.parentElement) {
                if (that._elements.self.parentElement.querySelector(":hover") !== that._elements.self) {
                    resetAutoplayInterval();
                }
            }
        }

        /**
         * Navigates to the item at the provided index and ensures the active indicator gains focus
         *
         * @private
         * @param {Number} index The index of the item to navigate to
         */
        function navigateAndFocusIndicator(index) {
            navigate(index);
            focusWithoutScroll(that._elements["indicator"][index]);
        }

        /**
         * Starts/resets automatic slide transition interval
         *
         * @private
         */
        function resetAutoplayInterval() {
            if (that._paused || !that._properties.autoplay) {
                return;
            }
            clearAutoplayInterval();
            that._autoplayIntervalId = window.setInterval(function() {
                if (document.visibilityState && document.hidden) {
                    return;
                }
                var indicators = that._elements["indicators"];
                if (indicators !== document.activeElement && indicators.contains(document.activeElement)) {
                    // if an indicator has focus, ensure we switch focus following navigation
                    navigateAndFocusIndicator(getNextIndex());
                } else {
                    navigate(getNextIndex());
                }
            }, that._properties.delay);
        }

        /**
         * Clears/pauses automatic slide transition interval
         *
         * @private
         */
        function clearAutoplayInterval() {
            window.clearInterval(that._autoplayIntervalId);
            that._autoplayIntervalId = null;
        }

        /**
         * Sets the disabled state for an action and toggles the appropriate CSS classes
         *
         * @private
         * @param {HTMLElement} action Action to disable
         * @param {Boolean} [disable] {@code true} to disable, {@code false} to enable
         */
        function setActionDisabled(action, disable) {
            if (!action) {
                return;
            }
            if (disable !== false) {
                action.disabled = true;
                action.classList.add("cmp-carousel__action--disabled");
            } else {
                action.disabled = false;
                action.classList.remove("cmp-carousel__action--disabled");
            }
        }
    }

    /**
     * Reads options data from the Carousel wrapper element, defined via {@code data-cmp-*} data attributes
     *
     * @private
     * @param {HTMLElement} element The Carousel element to read options data from
     * @returns {Object} The options read from the component data attributes
     */
    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    /**
     * Document ready handler and DOM mutation observers. Initializes Carousel components as necessary.
     *
     * @private
     */
    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Carousel({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body             = document.querySelector("body");
        var observer         = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Carousel({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

}());

/*******************************************************************************
 * Copyright 2017 Adobe Systems Incorporated
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
if (window.Element && !Element.prototype.closest) {
    // eslint valid-jsdoc: "off"
    Element.prototype.closest =
        function(s) {
            "use strict";
            var matches = (this.document || this.ownerDocument).querySelectorAll(s);
            var el      = this;
            var i;
            do {
                i = matches.length;
                while (--i >= 0 && matches.item(i) !== el) {
                    // continue
                }
            } while ((i < 0) && (el = el.parentElement));
            return el;
        };
}

if (window.Element && !Element.prototype.matches) {
    Element.prototype.matches =
        Element.prototype.matchesSelector ||
        Element.prototype.mozMatchesSelector ||
        Element.prototype.msMatchesSelector ||
        Element.prototype.oMatchesSelector ||
        Element.prototype.webkitMatchesSelector ||
        function(s) {
            "use strict";
            var matches = (this.document || this.ownerDocument).querySelectorAll(s);
            var i       = matches.length;
            while (--i >= 0 && matches.item(i) !== this) {
                // continue
            }
            return i > -1;
        };
}

if (!Object.assign) {
    Object.assign = function(target, varArgs) { // .length of function is 2
        "use strict";
        if (target === null) {
            throw new TypeError("Cannot convert undefined or null to object");
        }

        var to = Object(target);

        for (var index = 1; index < arguments.length; index++) {
            var nextSource = arguments[index];

            if (nextSource !== null) {
                for (var nextKey in nextSource) {
                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                        to[nextKey] = nextSource[nextKey];
                    }
                }
            }
        }
        return to;
    };
}

(function(arr) {
    "use strict";
    arr.forEach(function(item) {
        if (item.hasOwnProperty("remove")) {
            return;
        }
        Object.defineProperty(item, "remove", {
            configurable: true,
            enumerable: true,
            writable: true,
            value: function remove() {
                this.parentNode.removeChild(this);
            }
        });
    });
})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);

/*******************************************************************************
 * Copyright 2016 Adobe Systems Incorporated
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "image";

    var EMPTY_PIXEL = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
    var LAZY_THRESHOLD = 0;
    var SRC_URI_TEMPLATE_WIDTH_VAR = "{.width}";

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]',
        image: '[data-cmp-hook-image="image"]',
        map: '[data-cmp-hook-image="map"]',
        area: '[data-cmp-hook-image="area"]'
    };

    var lazyLoader = {
        "cssClass": "cmp-image__image--is-loading",
        "style": {
            "height": 0,
            "padding-bottom": "" // will be replaced with % ratio
        }
    };

    var properties = {
        /**
         * An array of alternative image widths (in pixels).
         * Used to replace a {.width} variable in the src property with an optimal width if a URI template is provided.
         *
         * @memberof Image
         * @type {Number[]}
         * @default []
         */
        "widths": {
            "default": [],
            "transform": function(value) {
                var widths = [];
                value.split(",").forEach(function(item) {
                    item = parseFloat(item);
                    if (!isNaN(item)) {
                        widths.push(item);
                    }
                });
                return widths;
            }
        },
        /**
         * Indicates whether the image should be rendered lazily.
         *
         * @memberof Image
         * @type {Boolean}
         * @default false
         */
        "lazy": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        },
        /**
         * The image source.
         *
         * Can be a simple image source, or a URI template representation that
         * can be variable expanded - useful for building an image configuration with an alternative width.
         * e.g. '/path/image.coreimg{.width}.jpeg/1506620954214.jpeg'
         *
         * @memberof Image
         * @type {String}
         */
        "src": {
        }
    };

    var devicePixelRatio = window.devicePixelRatio || 1;

    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    function Image(config) {
        var that = this;

        function init(config) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            setupProperties(config.options);
            cacheElements(config.element);

            if (!that._elements.noscript) {
                return;
            }

            that._elements.container = that._elements.link ? that._elements.link : that._elements.self;

            unwrapNoScript();

            if (that._properties.lazy) {
                addLazyLoader();
            }

            if (that._elements.map) {
                that._elements.image.addEventListener("load", onLoad);
            }

            window.addEventListener("scroll", that.update);
            window.addEventListener("resize", onWindowResize);
            window.addEventListener("update", that.update);
            that._elements.image.addEventListener("cmp-image-redraw", that.update);
            that.update();
        }

        function loadImage() {
            var hasWidths = that._properties.widths && that._properties.widths.length > 0;
            var replacement = hasWidths ? "." + getOptimalWidth() : "";
            var url = that._properties.src.replace(SRC_URI_TEMPLATE_WIDTH_VAR, replacement);

            if (that._elements.image.getAttribute("src") !== url) {
                that._elements.image.setAttribute("src", url);
                if (!hasWidths) {
                    window.removeEventListener("scroll", that.update);
                }
            }

            if (that._lazyLoaderShowing) {
                that._elements.image.addEventListener("load", removeLazyLoader);
            }
        }

        function getOptimalWidth() {
            var container = that._elements.self;
            var containerWidth = container.clientWidth;
            while (containerWidth === 0 && container.parentNode) {
                container = container.parentNode;
                containerWidth = container.clientWidth;
            }
            var optimalWidth = containerWidth * devicePixelRatio;
            var len = that._properties.widths.length;
            var key = 0;

            while ((key < len - 1) && (that._properties.widths[key] < optimalWidth)) {
                key++;
            }

            return that._properties.widths[key].toString();
        }

        function addLazyLoader() {
            var width = that._elements.image.getAttribute("width");
            var height = that._elements.image.getAttribute("height");

            if (width && height) {
                var ratio = (height / width) * 100;
                var styles = lazyLoader.style;

                styles["padding-bottom"] = ratio + "%";

                for (var s in styles) {
                    if (styles.hasOwnProperty(s)) {
                        that._elements.image.style[s] = styles[s];
                    }
                }
            }
            that._elements.image.setAttribute("src", EMPTY_PIXEL);
            that._elements.image.classList.add(lazyLoader.cssClass);
            that._lazyLoaderShowing = true;
        }

        function unwrapNoScript() {
            var markup = decodeNoscript(that._elements.noscript.textContent.trim());
            var parser = new DOMParser();

            // temporary document avoids requesting the image before removing its src
            var temporaryDocument = parser.parseFromString(markup, "text/html");
            var imageElement = temporaryDocument.querySelector(selectors.image);
            imageElement.removeAttribute("src");
            that._elements.container.insertBefore(imageElement, that._elements.noscript);

            var mapElement = temporaryDocument.querySelector(selectors.map);
            if (mapElement) {
                that._elements.container.insertBefore(mapElement, that._elements.noscript);
            }

            that._elements.noscript.parentNode.removeChild(that._elements.noscript);
            if (that._elements.container.matches(selectors.image)) {
                that._elements.image = that._elements.container;
            } else {
                that._elements.image = that._elements.container.querySelector(selectors.image);
            }

            that._elements.map = that._elements.container.querySelector(selectors.map);
            that._elements.areas = that._elements.container.querySelectorAll(selectors.area);
        }

        function removeLazyLoader() {
            that._elements.image.classList.remove(lazyLoader.cssClass);
            for (var property in lazyLoader.style) {
                if (lazyLoader.style.hasOwnProperty(property)) {
                    that._elements.image.style[property] = "";
                }
            }
            that._elements.image.removeEventListener("load", removeLazyLoader);
            that._lazyLoaderShowing = false;
        }

        function isLazyVisible() {
            if (that._elements.container.offsetParent === null) {
                return false;
            }

            var wt = window.pageYOffset;
            var wb = wt + document.documentElement.clientHeight;
            var et = that._elements.container.getBoundingClientRect().top + wt;
            var eb = et + that._elements.container.clientHeight;

            return eb >= wt - LAZY_THRESHOLD && et <= wb + LAZY_THRESHOLD;
        }

        function resizeAreas() {
            if (that._elements.areas && that._elements.areas.length > 0) {
                for (var i = 0; i < that._elements.areas.length; i++) {
                    var width = that._elements.image.width;
                    var height = that._elements.image.height;

                    if (width && height) {
                        var relcoords = that._elements.areas[i].dataset.cmpRelcoords;
                        if (relcoords) {
                            var relativeCoordinates = relcoords.split(",");
                            var coordinates = new Array(relativeCoordinates.length);

                            for (var j = 0; j < coordinates.length; j++) {
                                if (j % 2 === 0) {
                                    coordinates[j] = parseInt(relativeCoordinates[j] * width);
                                } else {
                                    coordinates[j] = parseInt(relativeCoordinates[j] * height);
                                }
                            }

                            that._elements.areas[i].coords = coordinates;
                        }
                    }
                }
            }
        }

        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                var capitalized = IS;
                capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                var key = hook.dataset[NS + "Hook" + capitalized];
                that._elements[key] = hook;
            }
        }

        function setupProperties(options) {
            that._properties = {};

            for (var key in properties) {
                if (properties.hasOwnProperty(key)) {
                    var property = properties[key];
                    if (options && options[key] != null) {
                        if (property && typeof property.transform === "function") {
                            that._properties[key] = property.transform(options[key]);
                        } else {
                            that._properties[key] = options[key];
                        }
                    } else {
                        that._properties[key] = properties[key]["default"];
                    }
                }
            }
        }

        function onWindowResize() {
            that.update();
            resizeAreas();
        }

        function onLoad() {
            resizeAreas();
        }

        that.update = function() {
            if (that._properties.lazy) {
                if (isLazyVisible()) {
                    loadImage();
                }
            } else {
                loadImage();
            }
        };

        if (config && config.element) {
            init(config);
        }
    }

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Image({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body             = document.querySelector("body");
        var observer         = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Image({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

    /*
        on drag & drop of the component into a parsys, noscript's content will be escaped multiple times by the editor which creates
        the DOM for editing; the HTML parser cannot be used here due to the multiple escaping
     */
    function decodeNoscript(text) {
        text = text.replace(/&(amp;)*lt;/g, "<");
        text = text.replace(/&(amp;)*gt;/g, ">");
        return text;
    }

})();

/*******************************************************************************
 * Copyright 2017 Adobe Systems Incorporated
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "search";

    var DELAY = 300; // time before fetching new results when the user is typing a search string
    var LOADING_DISPLAY_DELAY = 300; // minimum time during which the loading indicator is displayed
    var PARAM_RESULTS_OFFSET = "resultsOffset";

    var keyCodes = {
        TAB: 9,
        ENTER: 13,
        ESCAPE: 27,
        ARROW_UP: 38,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]',
        item: {
            self: "[data-" + NS + "-hook-" + IS + '="item"]',
            title: "[data-" + NS + "-hook-" + IS + '="itemTitle"]',
            focused: "." + NS + "-search__item--is-focused"
        }
    };

    var properties = {
        /**
         * The minimum required length of the search term before results are fetched.
         *
         * @memberof Search
         * @type {Number}
         * @default 3
         */
        minLength: {
            "default": 3,
            transform: function(value) {
                value = parseFloat(value);
                return isNaN(value) ? null : value;
            }
        },
        /**
         * The maximal number of results fetched by a search request.
         *
         * @memberof Search
         * @type {Number}
         * @default 10
         */
        resultsSize: {
            "default": 10,
            transform: function(value) {
                value = parseFloat(value);
                return isNaN(value) ? null : value;
            }
        }
    };

    var idCount = 0;

    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    function toggleShow(element, show) {
        if (element) {
            if (show !== false) {
                element.style.display = "block";
                element.setAttribute("aria-hidden", false);
            } else {
                element.style.display = "none";
                element.setAttribute("aria-hidden", true);
            }
        }
    }

    function serialize(form) {
        var query = [];
        if (form && form.elements) {
            for (var i = 0; i < form.elements.length; i++) {
                var node = form.elements[i];
                if (!node.disabled && node.name) {
                    var param = [node.name, encodeURIComponent(node.value)];
                    query.push(param.join("="));
                }
            }
        }
        return query.join("&");
    }

    function mark(node, regex) {
        if (!node || !regex) {
            return;
        }

        // text nodes
        if (node.nodeType === 3) {
            var nodeValue = node.nodeValue;
            var match = regex.exec(nodeValue);

            if (nodeValue && match) {
                var element = document.createElement("mark");
                element.className = NS + "-search__item-mark";
                element.appendChild(document.createTextNode(match[0]));

                var after = node.splitText(match.index);
                after.nodeValue = after.nodeValue.substring(match[0].length);
                node.parentNode.insertBefore(element, after);
            }
        } else if (node.hasChildNodes()) {
            for (var i = 0; i < node.childNodes.length; i++) {
                // recurse
                mark(node.childNodes[i], regex);
            }
        }
    }

    function Search(config) {
        if (config.element) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");
        }

        this._cacheElements(config.element);
        this._setupProperties(config.options);

        this._action = this._elements.form.getAttribute("action");
        this._resultsOffset = 0;
        this._hasMoreResults = true;

        this._elements.input.addEventListener("input", this._onInput.bind(this));
        this._elements.input.addEventListener("focus", this._onInput.bind(this));
        this._elements.input.addEventListener("keydown", this._onKeydown.bind(this));
        this._elements.clear.addEventListener("click", this._onClearClick.bind(this));
        document.addEventListener("click", this._onDocumentClick.bind(this));
        this._elements.results.addEventListener("scroll", this._onScroll.bind(this));

        this._makeAccessible();
    }

    Search.prototype._displayResults = function() {
        if (this._elements.input.value.length === 0) {
            toggleShow(this._elements.clear, false);
            this._cancelResults();
        } else if (this._elements.input.value.length < this._properties.minLength) {
            toggleShow(this._elements.clear, true);
        } else {
            this._updateResults();
            toggleShow(this._elements.clear, true);
        }
    };

    Search.prototype._onScroll = function(event) {
        // fetch new results when the results to be scrolled down are less than the visible results
        if (this._elements.results.scrollTop + 2 * this._elements.results.clientHeight >= this._elements.results.scrollHeight) {
            this._resultsOffset += this._properties.resultsSize;
            this._displayResults();
        }
    };

    Search.prototype._onInput = function(event) {
        var self = this;
        self._cancelResults();
        // start searching when the search term reaches the minimum length
        this._timeout = setTimeout(function() {
            self._displayResults();
        }, DELAY);
    };

    Search.prototype._onKeydown = function(event) {
        var self = this;

        switch (event.keyCode) {
            case keyCodes.TAB:
                if (self._resultsOpen()) {
                    event.preventDefault();
                }
                break;
            case keyCodes.ENTER:
                event.preventDefault();
                if (self._resultsOpen()) {
                    var focused = self._elements.results.querySelector(selectors.item.focused);
                    if (focused) {
                        focused.click();
                    }
                }
                break;
            case keyCodes.ESCAPE:
                self._cancelResults();
                break;
            case keyCodes.ARROW_UP:
                if (self._resultsOpen()) {
                    event.preventDefault();
                    self._stepResultFocus(true);
                }
                break;
            case keyCodes.ARROW_DOWN:
                if (self._resultsOpen()) {
                    event.preventDefault();
                    self._stepResultFocus();
                } else {
                    // test the input and if necessary fetch and display the results
                    self._onInput();
                }
                break;
            default:
                return;
        }
    };

    Search.prototype._onClearClick = function(event) {
        event.preventDefault();
        this._elements.input.value = "";
        toggleShow(this._elements.clear, false);
        toggleShow(this._elements.results, false);
    };

    Search.prototype._onDocumentClick = function(event) {
        var inputContainsTarget =  this._elements.input.contains(event.target);
        var resultsContainTarget = this._elements.results.contains(event.target);

        if (!(inputContainsTarget || resultsContainTarget)) {
            toggleShow(this._elements.results, false);
        }
    };

    Search.prototype._resultsOpen = function() {
        return this._elements.results.style.display !== "none";
    };

    Search.prototype._makeAccessible = function() {
        var id = NS + "-search-results-" + idCount;
        this._elements.input.setAttribute("aria-owns", id);
        this._elements.results.id = id;
        idCount++;
    };

    Search.prototype._generateItems = function(data, results) {
        var self = this;

        data.forEach(function(item) {
            var el = document.createElement("span");
            el.innerHTML = self._elements.itemTemplate.innerHTML;
            el.querySelectorAll(selectors.item.title)[0].appendChild(document.createTextNode(item.title));
            el.querySelectorAll(selectors.item.self)[0].setAttribute("href", item.url);
            results.innerHTML += el.innerHTML;
        });
    };

    Search.prototype._markResults = function() {
        var nodeList = this._elements.results.querySelectorAll(selectors.item.self);
        var escapedTerm = this._elements.input.value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
        var regex = new RegExp("(" + escapedTerm + ")", "gi");

        for (var i = this._resultsOffset - 1; i < nodeList.length; ++i) {
            var result = nodeList[i];
            mark(result, regex);
        }
    };

    Search.prototype._stepResultFocus = function(reverse) {
        var results = this._elements.results.querySelectorAll(selectors.item.self);
        var focused = this._elements.results.querySelector(selectors.item.focused);
        var newFocused;
        var index = Array.prototype.indexOf.call(results, focused);
        var focusedCssClass = NS + "-search__item--is-focused";

        if (results.length > 0) {

            if (!reverse) {
                // highlight the next result
                if (index < 0) {
                    results[0].classList.add(focusedCssClass);
                } else if (index + 1 < results.length) {
                    results[index].classList.remove(focusedCssClass);
                    results[index + 1].classList.add(focusedCssClass);
                }

                // if the last visible result is partially hidden, scroll up until it's completely visible
                newFocused = this._elements.results.querySelector(selectors.item.focused);
                if (newFocused) {
                    var bottomHiddenHeight = newFocused.offsetTop + newFocused.offsetHeight - this._elements.results.scrollTop - this._elements.results.clientHeight;
                    if (bottomHiddenHeight > 0) {
                        this._elements.results.scrollTop += bottomHiddenHeight;
                    } else {
                        this._onScroll();
                    }
                }

            } else {
                // highlight the previous result
                if (index >= 1) {
                    results[index].classList.remove(focusedCssClass);
                    results[index - 1].classList.add(focusedCssClass);
                }

                // if the first visible result is partially hidden, scroll down until it's completely visible
                newFocused = this._elements.results.querySelector(selectors.item.focused);
                if (newFocused) {
                    var topHiddenHeight = this._elements.results.scrollTop - newFocused.offsetTop;
                    if (topHiddenHeight > 0) {
                        this._elements.results.scrollTop -= topHiddenHeight;
                    }
                }
            }
        }
    };

    Search.prototype._updateResults = function() {
        var self = this;
        if (self._hasMoreResults) {
            var request = new XMLHttpRequest();
            var url = self._action + "?" + serialize(self._elements.form) + "&" + PARAM_RESULTS_OFFSET + "=" + self._resultsOffset;

            request.open("GET", url, true);
            request.onload = function() {
                // when the results are loaded: hide the loading indicator and display the search icon after a minimum period
                setTimeout(function() {
                    toggleShow(self._elements.loadingIndicator, false);
                    toggleShow(self._elements.icon, true);
                }, LOADING_DISPLAY_DELAY);
                if (request.status >= 200 && request.status < 400) {
                    // success status
                    var data = JSON.parse(request.responseText);
                    if (data.length > 0) {
                        self._generateItems(data, self._elements.results);
                        self._markResults();
                        toggleShow(self._elements.results, true);
                    } else {
                        self._hasMoreResults = false;
                    }
                    // the total number of results is not a multiple of the fetched results:
                    // -> we reached the end of the query
                    if (self._elements.results.querySelectorAll(selectors.item.self).length % self._properties.resultsSize > 0) {
                        self._hasMoreResults = false;
                    }
                } else {
                    // error status
                }
            };
            // when the results are loading: display the loading indicator and hide the search icon
            toggleShow(self._elements.loadingIndicator, true);
            toggleShow(self._elements.icon, false);
            request.send();
        }
    };

    Search.prototype._cancelResults = function() {
        clearTimeout(this._timeout);
        this._elements.results.scrollTop = 0;
        this._resultsOffset = 0;
        this._hasMoreResults = true;
        this._elements.results.innerHTML = "";
    };

    Search.prototype._cacheElements = function(wrapper) {
        this._elements = {};
        this._elements.self = wrapper;
        var hooks = this._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

        for (var i = 0; i < hooks.length; i++) {
            var hook = hooks[i];
            var capitalized = IS;
            capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
            var key = hook.dataset[NS + "Hook" + capitalized];
            this._elements[key] = hook;
        }
    };

    Search.prototype._setupProperties = function(options) {
        this._properties = {};

        for (var key in properties) {
            if (properties.hasOwnProperty(key)) {
                var property = properties[key];
                if (options && options[key] != null) {
                    if (property && typeof property.transform === "function") {
                        this._properties[key] = property.transform(options[key]);
                    } else {
                        this._properties[key] = options[key];
                    }
                } else {
                    this._properties[key] = properties[key]["default"];
                }
            }
        }
    };

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Search({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Search({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

})();

/*******************************************************************************
 * Copyright 2016 Adobe Systems Incorporated
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "formText";
    var IS_DASH = "form-text";

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]'
    };

    var properties = {
        /**
         * A validation message to display if there is a type mismatch between the user input and expected input.
         *
         * @type {String}
         */
        constraintMessage: {
        },
        /**
         * A validation message to display if no input is supplied, but input is expected for the field.
         *
         * @type {String}
         */
        requiredMessage: {
        }
    };

    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    function FormText(config) {
        if (config.element) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");
        }

        this._cacheElements(config.element);
        this._setupProperties(config.options);

        this._elements.input.addEventListener("invalid", this._onInvalid.bind(this));
        this._elements.input.addEventListener("input", this._onInput.bind(this));
    }

    FormText.prototype._onInvalid = function(event) {
        event.target.setCustomValidity("");
        if (event.target.validity.typeMismatch) {
            if (this._properties.constraintMessage) {
                event.target.setCustomValidity(this._properties.constraintMessage);
            }
        } else if (event.target.validity.valueMissing) {
            if (this._properties.requiredMessage) {
                event.target.setCustomValidity(this._properties.requiredMessage);
            }
        }
    };

    FormText.prototype._onInput = function(event) {
        event.target.setCustomValidity("");
    };

    FormText.prototype._cacheElements = function(wrapper) {
        this._elements = {};
        this._elements.self = wrapper;
        var hooks = this._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS_DASH + "]");
        for (var i = 0; i < hooks.length; i++) {
            var hook = hooks[i];
            var capitalized = IS;
            capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
            var key = hook.dataset[NS + "Hook" + capitalized];
            this._elements[key] = hook;
        }
    };

    FormText.prototype._setupProperties = function(options) {
        this._properties = {};

        for (var key in properties) {
            if (properties.hasOwnProperty(key)) {
                var property = properties[key];
                if (options && options[key] != null) {
                    if (property && typeof property.transform === "function") {
                        this._properties[key] = property.transform(options[key]);
                    } else {
                        this._properties[key] = options[key];
                    }
                } else {
                    this._properties[key] = properties[key]["default"];
                }
            }
        }
    };

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new FormText({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new FormText({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

})();


$(document).ready(function () {
	
	// initialize cta modal and its overlay
	$('[data-component="cta-modal"]').each(function (index, el) {
		var elementID = el.id;

		window.components[elementID] = new Vue({
			el: el,
			name: 'cta-modal',
			data: function () {
				return {
					modalUrl: '',
					// showModal: false,
					// modalRawHTML: '',
				}
			},
			// moved these to modal-popup.js since we need <a href> to be possible to open modal popup
			/* computed: {
				source_rootOnly: function () {
					var url = new URL(window.location.origin + this.modalUrl);
					url.pathname = url.pathname.replace(/\.html$/i, '') + '/jcr:content/root.html';
					url.searchParams.set('wcmmode', 'disabled');
					return url.href;
				},
				mountingNode: function () {
					return {
						template: this.modalRawHTML||'<div></div>',
					}
				},
			},
			mounted: function () {
				var context = this;
				$.ajax({
					url: this.source_rootOnly,
				}).done(function (resp) {
					context.modalRawHTML = resp;
				}).fail(function (resp) {
	
				});
			}, */
			methods: {
				handleModalCTAClick: function () {
					window.modalPopup({
						show: true,
						contentUrl: this.modalUrl,
					});
				},
			},
		});
		
		
		// Plan B: using iFrame (not in use now)
		/* window.components[elementID] = new Vue({
			el: el,
			name: 'cta-modal',
			data: function () {
				return {
					showModal: false,
					modalUrl: '',
				}
			},
			computed: {
				source: function () {
					var url = new URL(window.location.origin + this.modalUrl);
					url.searchParams.set('wcmmode', 'disabled');
					return url.href;
				},
			},
			methods: {
				handleIframeLoaded: function () {
					this.triggerFrameResizer();
				},
				triggerFrameResizer: function () {
					if (!this.iFrameResize) {
						this.iFrameResize = iFrameResize(
							{
								heightCalculationMethod: 'lowestElement',
							},
							this.$el.querySelector('iframe')
						);
						
						this.iFrameResize.onMessage
						return;
					}
				},
			},
		}); */
	});
	
	
	$('[data-component="cta-calendar"]').each(function (index, el) {
		var elementID = el.id;
		var vueDefaultData = getVueAttrDataFromEl(el);

		window.components[elementID] = new Vue({
			el: el,
			name: 'cta-calendar',
			data: Object.assign({}, vueDefaultData),
			methods: {
				toggle: function(){
					
				},
				dateFormation: function(date){
					var d = new Date(date+' 00:00:00 UTC')
					var i = d.toISOString();
					var s = i.split('T')[0]
					var st = s.split('-')
					return st[0]+st[1]+st[2]
				},
                outlookDateFormation: function(date){
					var d = new Date(date)
                    var i = d.toISOString();
                    var s = i.split('T')[0]
					var st = s.split('-')
                    return st[0]+st[1]+st[2]
                },
				timeFormation: function(time){
					var t = time.split(':')
					return t.join('')

				},
                outlookTimeFormation: function(date){
					var d = new Date(date)
                    var i = d.toISOString();
                    var s = i.split('T')[1]
                    var t = s.split(":").join('');
                    var u = t.split(".")
					return u[0]
            	},
                timeZoneFormation: function(time){
					var t = time;
                    var s = t.split('+')
                    return escape(s[0]+" "+"%2B"+s[1])
                },
			},
			computed: {
				startDate: function(){
					return this.dateFormation(this.startDateFormat)
				},
				endDate: function(){
					return this.dateFormation(this.endDateFormat)
				},
				startTime: function(){
					return this.timeFormation(this.startTimeFormat)
				},
				endTime: function(){
					return this.timeFormation(this.endTimeFormat)
				},
				eventTitle: function(){
					return escape(this.eventTitleFormat)
				},
                outlookStartDate: function(){
					return this.outlookDateFormation(this.outlookStartDateFormat)
                },
                outlookEndDate: function(){
					return this.outlookDateFormation(this.outlookEndDateFormat)
                },
                outlookStartTime: function(){
					return this.outlookTimeFormation(this.outlookStartDateFormat)
                },
                outlookEndTime: function(){
					return this.outlookTimeFormation(this.outlookEndDateFormat)
                },
                timeZone: function(){
					return this.timeZoneFormation(this.timeZoneFormat)
                },
				mapUrlFormat: function(){
					// var m = this.mapUrl;
					// var map;
					// if(m.match('google')){
					// 	var mSplit = m.split('google')

					// 	map = mSplit[0] + 'google' + mSplit[1].replace(/:/g,"%3A").replace(/[+]/g,"%2B")
					// }else{
					// 	map = m;
					// }
					// return map
					return escape(this.mapUrl)
				}
				
			},
			created: function(){
				
				//this.mapUrl = this.mapUrl
				// console.log(this.mapUrl)
			}
		})
	})



	var hasDependenciesError = false;

	if (document.querySelector('[data-trigger="add-calendar"]')) {
		// load this only if there is datepicker in the page
		// loading it here because <script> tag in vue template is not allowed
		var xhr = jQuery.ajax({
			url: '/etc.clientlibs/cimb/clientlibs/clientlib-base/resources/js/add-calendar.js',
			dataType: 'text',
			async: false,
		});
		
		if (xhr.status === 200 && xhr.responseText) {
			eval.apply(null, [xhr.responseText]); // eval the script in window context
			var calendarToggle = $('.addtocalendar')
			var toggleBtn = calendarToggle.find('.btnCalendar')
			var calendarList = calendarToggle.find('.calendar-list')
			toggleBtn.on('click',function(){
				calendarList.toggleClass('active')
			})
			$(document.body).mousedown(function(event) {
				var target = $(event.target);
				if (!target.parents().andSelf().is('.addtocalendar')) { // Clicked outside
					calendarList.removeClass('active')
				}
			});
		} else {
			console.error('Unable to load add-calendar. XHR: ', xhr);
			hasDependenciesError = true;
		}
	}

	
	
});


$(window).load(function () {
	// detect sticky and execute its stickiness
	$('.cmp-ctabutton .isSticky').each(function (index, el) {
		if (window.isEditorMode()) return;
		// $(el).parent('.cmp-ctabutton').attr('data-sticky-bottom', '99');
		// $(el).parent('.cmp-ctabutton').addClass('fixed z-100');

		var btnEl = $(el).find('.btn');
		// var offsetLeft = btnEl.get(0).offsetLeft;
		var offsetLeft = btnEl.offset().left;
		// debugger;

		$(el)
			.attr('data-sticky-bottom', '99')
			.addClass('fixed z-100')
			.removeClass('invisible')
			.css({
				left: offsetLeft + 'px',
			})
		;
	});
	window.updateStickiesPosition();
});



$(document).ready(function () {
    Vue.use(VuePlyr);
    var componentDOM = $('[data-component="video-component"]');

    var COMPONENT_DEFAULT_DATA = {
        showOverlay: false,
        videoSrc: '',
        videoType: '',
        playing: false,
        isInlineVideo: false,

        options: {
            controls: ['progress', 'play', 'current-time', 'mute', 'volume', 'fullscreen'],
            // controls: [
            //     'play-large', // The large play button in the center
            //     'restart', // Restart playback
            //     'rewind', // Rewind by the seek time (default 10 seconds)
            //     'play', // Play/pause playback
            //     'fast-forward', // Fast forward by the seek time (default 10 seconds)
            //     'progress', // The progress bar and scrubber for playback and buffering
            //     'current-time', // The current time of playback
            //     'duration', // The full duration of the media
            //     'mute', // Toggle mute
            //     'volume', // Volume control
            //     'captions', // Toggle captions
            //     'settings', // Settings menu
            //     'pip', // Picture-in-picture (currently Safari only)
            //     'airplay', // Airplay (currently Safari only)
            //     'download', // Show a download button with a link to either the current source or a custom URL you specify in your options
            //     'fullscreen', // Toggle fullscreen
            // ],
            autoplay: false,
            hideControls: true,
            poster: ''
        },

        // optionsInline: {
        //     controls: ['progress', 'play', 'current-time', 'mute', 'volume', 'fullscreen'],
        //     autoplay: false,
        //     hideControls: false,
        //     poster: ''
        // },
    }
    
    var COMPONENT_OPTIONS = {
        name: 'video-component',
        data: function () {
            return _.cloneDeep(COMPONENT_DEFAULT_DATA);
        },
        mounted: function () {
            this.options.poster = this.$refs.poster.src;
        },
        computed: {
            youtubeID: function () {
                var context = this
                if (this.videoType == 'youtube') {
                    var s = context.videoSrc.split('?v=')[1].split('&')
					return s[0];
                }
                return '';
            },
            youtubeEmbedUrl: function () {
                return 'https://www.youtube.com/embed/' + this.youtubeID;
            },
            player: function () {
                return this.$refs.plyr.player;
            },
            isYoutube: function () {
                return this.videoType == 'youtube';
            },

            portalProps: function () {
                return (this.isInlineVideo ?
                    {
                        is: 'div',
                        class: {
                            'inline-video-wrapper': true,
                            'pointer-events-none': !this.showOverlay,
                        },
                    }
                    :
                    {
                        mountTo: '#portal-destination-plyrVideo',
                        append: true,
                        bail: true,
                        name: 'plyr-video',
                        is: 'mounting-portal',
                    }
                );
            },
        },
        methods: {
            handleDocumentKeydown: function (event) {
                if (event.keyCode == 27) {
                    this.hideVideo();
                }
            },
            play: function () {
                var context = this;
                // var play = setInterval(function () {
                    
                //     if (context.$refs.plyr) {
                //         try {
                //             context.player.play();
                //             if (context.player.playing) clearInterval(play);
                //         } catch (err) {
                //             clearInterval(play);
                //         }
                //     }
                // }, 100);
                
                this.$nextTick(function () {
                    context.player.play();
                });
            },
            showVideo: function () {
                var context = this;
                this.showOverlay = true;
                this.play();
                document.addEventListener('keydown', this.handleDocumentKeydown);
            },
            hideVideo: function () {
                var context = this;
                this.showOverlay = false;
                context.player.stop();
                document.removeEventListener('keydown', this.handleDocumentKeydown);
            },
            loadVideo: function () {
                // var context = this;
                // this.showOverlay = true;
                // this.stop();
            },
        },
    }
    
    Vue.component('video-component', _.cloneDeep(COMPONENT_OPTIONS));
    
    
    componentDOM.each(function (index, el) {
        var elementID = el.id;
        
        // only if instance is not under another vue component, we wrap it with .vue-root, and then initialize it as new root instance
        if ($(el).parents('[data-component]').length === 0) {
            window.components[elementID] = new Vue(Object.assign({
                el: $(el).wrap('<div class="vue-root"></div>').get(0),
            }));
        }
    });

});
$(document).ready(function () {
    var componentDOM = $('[data-component="accordion"]');
    
    // default data of component, if not provided via "data-vue-default" attribute
    var COMPONENT_DEFAULT_DATA = {
        isExpanded: false,
        isExpandedOnlyDesktop: isMobile()?false:true,
    }
    
    var AccordionComponent = Vue.component('accordion', {
        name: 'accordion',
        mixins: [SmoothReflow],
        data: function () {
            return Object.assign({}, COMPONENT_DEFAULT_DATA);
        },
        mounted: function () {
            var context = this;
            this.$smoothReflow();
        },
        watch: {
            isExpanded: function (newVal) {
                
                /* 
                    Detecting if there is any underlying table component within this accordion. If yes, then trigger event 'sticky-recalculate' for it.
                    See table.js for understanding of why this is required.
                */
                var tableComponentWithin = this.$el.querySelector('[data-component="table"]');
                if (newVal && tableComponentWithin) {
                    this.$nextTick(function () {
                        $(tableComponentWithin).trigger('sticky-recalculate');
                    });
                }
            },
        },
    });
    
    componentDOM.each(function (index, el) {
        var elementID = el.id;
        
        // only if instance is not under another vue component, we instantiate it
        if ($(el).parents('[data-component]').length === 0) {
            window.components[elementID] = new Vue({
                el: el,
                data: function () {
                    return Object.assign({}, COMPONENT_DEFAULT_DATA);
                },
            });
        }
    });
    
});
$(document).ready(function () {
    var componentDOM = $('[data-component="main-global-header"]');
    
    var viewportWidth = $(window).width();
    var viewportHeight = $(window).height();
    
    var headerDropdownMenu = {
        template: $('[data-template-id="header-dropdown-menu"]').html(),
        name: 'header-dropdown-menu',
        mixins: [SmoothReflow],
        data: function () {
            return {
                isDropdownVisible: false,
            }
        },
        props: {
            showIcon: {
                required: false,
                type: Boolean,
                default: true,
            },
        },
        methods: {
            handleClickOutside: function (event) {
                this.isDropdownVisible = false;
            },
        },
        mounted: function () {
            this.$smoothReflow();
        },
    }


    var searchSuggestions = {
        template: $('[data-template-id="search-suggestions"]').html(),
        name: 'search-suggestions',
        mixins: [SmoothReflow],
        props: {
            searchPageUrl: String,
            suggestionsSource: String,
        },
        data: function () {
            return {
                keyWord: '',
                suggestions: [],
                searching: false,
            }
        },
        methods: {
            clearSuggestions: function() {
                this.suggestions = [];
            },
            getSuggestions: function(e, val) {
                var _this = this;
                
                if (this.keyWord.length < 3) {
                    this.clearSuggestions()
                    _this.searching = false;
                    return;
                }
                
                _this.searching = true;
                var throttled = _.throttle(function() {
                    $.ajax({
                        url: _this.suggestionsSource + '?keyword=' + encodeURIComponent(_this.keyWord),
                        dataType: 'json',
                        success: function(resp) {
                            _this.suggestions = resp || [];
                            _this.suggestions = _this.suggestions.splice(0,10)
                            _this.searching = false;


                            if((_this.suggestions).length === 0){
                                $('.blank-result').removeClass('hidden')
                            }
                        },
                        error: function(err) {
                            _this.searching = false;
                            console.log("err",err)
                        }
                    })
                }, 100);

                throttled();
            },
            triggerSearch: function() {
                window.location.href = (this.searchPageUrl || '') + '?q=' + encodeURIComponent(this.keyWord);
            },
            clearSearch: function () {
                // to let the "watch" trigger to not clear the search result
                this.keyWord = '';

                if (this.$refs['search-input-header']) {
                    this.$refs['search-input-header'].focus();
                }
            },
        },
        created: function() {
        },
        mounted: function () {
            this.$smoothReflow();
            
        },
    }
    
    var headerAccordion = {
        template: $('[data-template-id="header-accordion"]').html(),
        name: 'header-accordion',
        mixins: [SmoothReflow],
        data: function () {
            return {
                isExpanded: false,
            }
        },
        mounted: function () {
            this.$smoothReflow();
        },
    }
    
    var COMPONENT_DEFAULT_DATA = {
        isMegaMenuVisible: false,
        isMobileView: false,
        activeNestedNav: [''],
        isMobileLoginMenuVisible: false,
        isSearchSuggestionsVisible: false,
        isSearchResultsVisible: false,
        // currentNestingLevel: 0,
    }
    
    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);

        window.components[elementID] = new Vue({
            name: 'main-global-header',
            el: el,
            components: {
                headerDropdownMenu: headerDropdownMenu,
                headerAccordion: headerAccordion,
                searchSuggestions: searchSuggestions,
            },
            mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            methods: {
                mobileMegamenuTransition_AfterEnter: function () {
                    this.mobileSwiper.update();
                },
                mobileMegamenuTransition_AfterLeave: function () {
                    this.activeNestedNav = [''];
                    this.mobileSwiper.slideTo(0, 0);
                },
                handleGoToNextLevel: function (navName) {
                    this.activeNestedNav.push(navName);
                    this.mobileSwiper.slideNext();
                },
                handleGoToPrevLevel: function () {
                    this.mobileSwiper.slidePrev();
                    this.activeNestedNav = this.activeNestedNav.slice(0, this.activeNestedNav.length-1);
                },
                handleMobileLoginBtnClick: function () {
                    this.isMobileLoginMenuVisible = !this.isMobileLoginMenuVisible;
                },
                handleSearchButtonClick: function() {
                    this.isSearchSuggestionsVisible = true;
                    fireSatellite("internal search");
                },
                hideSearchSuggestions: function() {
                    this.isSearchSuggestionsVisible = false;
                },
                handleEscKey: function(event) {
                    this.isSearchSuggestionsVisible = false;
                    this.isMegaMenuVisible = false;
                },
                backToPrevPage: function () {
                    window.history.back();
                },
                onResultPage: function() {
                    var searchResultDOM = $('div[data-component="search-result-component"]');
                    var isHeaderVisible = searchResultDOM.attr('data-headerFooter-hidden');
                    
                    if(isHeaderVisible === 'true') {
                        // hide header
                        this.isSearchResultsVisible = true;
                        // hide footer & notifications
                        $('footer').hide();
                        $('.notification').addClass('!hidden')
                        $('.cookie-notification').addClass('!hidden');
                    } 
                }
            },
            computed: {
                
            },
            watch: {
                isMegaMenuVisible: function (newValue, oldValue) {
                    if (newValue === true) {
                        // showing mega menu
                        this._documentOriginalOverflow = $('html').css('overflow');
                        $('html').css('overflow', 'hidden');
                    } else {
                        // hiding mega menu
                        $('html').css('overflow', this._documentOriginalOverflow);
                    }
                },
                isMobileLoginMenuVisible: function (newValue, oldValue) {
                    if (newValue === true) {
                        // showing mega menu
                        this._documentOriginalOverflow = $('html').css('overflow');
                        $('html').css('overflow', 'hidden');
                    } else {
                        // hiding mega menu
                        $('html').css('overflow', this._documentOriginalOverflow);
                    }
                },
            },
            mounted: function () {
                this.onResultPage();
                this.$smoothReflow();
                this._documentOriginalOverflow = $('html').css('overflow');
                
                initHeaderScroll($(this.$el));
                
                // trigger the scroll function
                setTimeout(function () {
                    window.scrollBy(0, -0.01);
                }, 150);
                
                this.mobileSwiper = initMobileSwiper($(this.$el));
                this.mobileSwiper.update();
            },
            created: function () {
                this.$eventHub.$on('showSearchSuggestions', this.handleSearchButtonClick)
                if (viewportWidth < 768) {
                    this.isMobileView = true;
                }
            },
        });
        
        function initHeaderScroll ($el) {
            var lastScrollTop = 0;
            var headerHeight = $el.outerHeight();
            var isDown = false;

            $(window).scroll(_.debounce(function (event) {
                var scrollTop = $(this).scrollTop();
                if (scrollTop > lastScrollTop) {
                    // scroll down
                    if (!isDown && scrollTop >= headerHeight) {
                        $el.addClass('scrollDir-down');
                        isDown = true;
                    }
                } else {
                    // scroll up
                    if (isDown && scrollTop < headerHeight) {
                        $el.removeClass('scrollDir-down');
                        isDown = false;
                    }
                }
                lastScrollTop = scrollTop;
            }, 10, { leading: true }));
        }
        

        function initMobileSwiper ($el) {
            var container = $el.find('.header-mobile-megaMenu .swiper-container');
             
            return new Swiper(container.get(0), {
                slidesPerView: 1,
                allowTouchMove: false,
            });
        }
        
    });
});

$(function() {
    
})



$(function () {

    var componentDOM = $('[data-component="eventHeroBanner"]');

    componentDOM.each(function (index, el) {
        
        var eventInfo = $(el).find('.banner-content .event-info');

        eventInfo.each(function () {
            //hide event info if info is not populated
            if($(this).children('p').length === 0) {
                // console.log('true')
                $(this).removeClass('flex').addClass('hidden')
            }

        })
    })

});


$(document).ready(function () {
	var componentDOM = $('[data-component="banner-carousel"]');

	componentDOM.each(function (index, el) {
		var $el = $(el);
		var windowSize = $(window).width();
		var swipperComponent = $el.find('.banner-carousel-container');
		var minPerPage;
		var swiperMain = new Swiper(swipperComponent, {
			//pagination: carousel-banner-pagination
			centeredSlides: true
		});

		function setImageBackground() {
			$el.find('.carousel-slide').each(function () {
				var imageUrl;
				if (windowSize < 767) {
					imageUrl = $(this).find('.img-mobile').val();
				} else {
					imageUrl = $(this).find('.img-desktop').val();
				}
				$(this).css('background-image', "url(" + imageUrl + ")");
			});
			if (windowSize < 768) {
				minPerPage = 1;
			} else if (windowSize < 1024) {
				minPerPage = 4;
			} else if (windowSize < 1280){
				minPerPage = 5;
			}else {
				minPerPage = 6;
			}
		}
		$(window).resize(function () {
			setImageBackground()
		});
		setImageBackground();

		var arr = [];
		// var minPerPage = 5;
		$el.find('.carousel-page-slide').each(function (index, val) {
			var obj = {};
			obj.id = index;
			obj.checkpoint = $(this).attr('data-checkpoint');
			arr.push(obj);
		});

		var page = parseToPages(arr, minPerPage);

		function parseToPages(elements, pageSize) {
			var result = [];
			while (elements.length) {
				result.push(elements.splice(0, pageSize));
			}
			return result;
		}

		var setting = {
			slidesPerView: 1,
			loop: false,
			noSwiping: false,
			allowTouchMove: false,
			slideToClickedSlide: true,
			breakpoints: {
				767: {
					slidesPerView: 2,
					centeredSlides: true
				}
			},
			navigation: {
				nextEl: $el.find('.carousel-banner-pagination .swiper-next'),
				prevEl: $el.find('.carousel-banner-pagination .swiper-prev'),
			},
			followFinger: false,
			virtual: {
				slides: (function () {
					var slides = [];
					var slide;
					for (var i = 0; i < page.length; i++) {

						$(page).each(function (index, val) {

							$el.find('.banner-carousel-container .swiper-slide').eq(index).attr('data-page', index);
							slide = '<div class="carousel-page-slide">'
							$(val).each(function (i, data) {
								//var _html = '<div class="p-0" data-index=' + data.id + '>'
								var _html = '<div class="absolute bg-red px-6 py-3 rounded-lg m-auto arrow-down text-center tooltips">'
								_html += '<p class="text-white text-lg md:text-3xl leading-tight">' + data.checkpoint + '</p>'
								_html += '</div>'
								_html += '<div class="status cursor-pointer">'
								_html += '<span>'
								_html += '<span class="selected"></span>'
								_html += '</span>'
								_html += '</div>'
								_html += '<div class="dot-wrapper cursor-pointer"  data-index=' + data.id + '>'
								_html += '<span class="dot ">'
								_html += '<div class="selected-page"></div>'
								_html += '</span>'
								_html += '</div>'
								_html += '<span class="divider"></span>'
								_html += '</div>'
								var _html2 = '<div class="carousel-page-wrapper" data-index="' + i + '">' + _html;
								slide += _html2;

							})
							slide += '</div>';
							slides.push(slide);
							//$el.find('.swiper-container').append(slide);
							//console.log(slide)
						});
						return slides;
					}
				}()),
			},
		}
		var _swiper = new Swiper($el.find('.swiper-container'), setting);


		function init() {
			var totalInPage = 0;
			$el.find('.selected-page').first().show();
			$el.parent().find('.tooltips').first().show();

			if ($el.find('.swiper-button-disabled').length == 2) {
				$el.find('.swiper-button-disabled').css('display', 'none');
				$el.find('.divider').last().hide();
			} else {
				if (windowSize > 767) {
					$el.find('.btn-nav').css('display', 'block');
				}
			}

			_swiper.on('reachEnd', function () {
				$el.find('.divider').last().hide();
			});

			swiperMain.on('slideChange', function (index) {
				$el.find('.selected-page').hide();
				$el.find('.tooltips').hide();
				var getActiveIndex = swiperMain.realIndex;
				var paginationIndex = $el.find('.carousel-slide').eq(getActiveIndex).attr('data-pagination');
				_swiper.slideTo(paginationIndex, 1000, true);
			});

			if (windowSize < 768) {
				totalInPage = 1;
				clickDot();
				var totalWidth = $el.find('.divider').closest('.swiper-slide').width();
				var elWidth = totalWidth - 25;
				$el.find('.divider').css('width', elWidth);		
				$el.find('.carousel-banner-pagination').parent().css('padding-left',0);
				$el.find('.carousel-banner-pagination').parent().css('padding-right',0);
				
				
				_swiper.on('slideChange', function (index) {
					$el.find('.dot-wrapper').on('click', function () {
						clickDot();
					});
					$el.find('.divider').css('width', elWidth);
				});

				_swiper.on('reachEnd', function () {
					$el.find('.dot-wrapper').last().on('click', function () {
						var index = $(this).attr('data-index')
						swiperMain.slideTo(index, 300, true);
						$el.find('.selected-page').hide();
						$el.find('.tooltips').hide();
						$(this).find('.selected-page').show();
						$(this).parent().find('.tooltips').show();
					});
				});
				swiperMain.on('slideChange', function (index) {
					if(swiperMain.isEnd){
						$el.find('.selected-page').hide();
						$el.find('.tooltips').hide();
						$el.find('.selected-page').last().show();
						$el.find('.tooltips').last().show();
					}else{
						$el.find(".swiper-slide-active").find('.selected-page').show();
						$el.find(".swiper-slide-active").find('.tooltips').show();
					}
				});
				
			} else if(windowSize < 1024){
				totalInPage = 4;
				clickDot();
				
				swiperMain.on('slideChange', function (index) {
					var getActiveIndex = swiperMain.realIndex;
					$el.find(".selected-page").eq(getActiveIndex).show();
					$el.find(".tooltips").eq(getActiveIndex).show();
				});
			} else if(windowSize < 1280){
				totalInPage = 5;
				clickDot();
				
				swiperMain.on('slideChange', function (index) {
					var getActiveIndex = swiperMain.realIndex;
					$el.find(".selected-page").eq(getActiveIndex).show();
					$el.find(".tooltips").eq(getActiveIndex).show();
				});
			} else {
				totalInPage = 6;
				clickDot();
				
				swiperMain.on('slideChange', function (index) {
					var getActiveIndex = swiperMain.realIndex;
					$el.find(".selected-page").eq(getActiveIndex).show();
					$el.find(".tooltips").eq(getActiveIndex).show();
				});
			}


			// swiperMain.on('click', function (index) {
			// 	swiperMain.slideNext(1000, true);	
			// });				

			var getPage = [];
			$el.find('.org-carousel-page-slide').each(function (i) {
				var obj = {};
				obj.id = i;
				obj.checkpoint = $(this).attr('data-checkpoint');
				getPage.push(obj);
			});

			var test = parseToPages(getPage, totalInPage);
			//console.log(length,test)
			$(test).each(function (index, val) {
				val.filter(function (data) {
					//console.log(index, data.id, parseInt($el.find('.carousel-slide').eq(data.id).attr('data-index')))
					if (data.id === parseInt($el.find('.carousel-slide').eq(data.id).attr('data-index'))) {
						return $el.find('.carousel-slide').eq(data.id).attr('data-pagination', index)
					}
				});
				return;
			})
			//alert($el.find('.carousel-slide').length)
		}

		function clickDot() {
			$el.find('.dot-wrapper').on('click', function () {
				var index = $(this).attr('data-index')
				swiperMain.slideTo(index, 300, true);
				$el.find('.selected-page').hide();
				$(this).find('.selected-page').show();
				$el.find('.tooltips').hide();
				$(this).parent().find('.tooltips').show();
			});
		}
		$el.find('.btn-nav').on('click', function () {
			reinit();
		})
		function reinit() {
			clickDot();
		}


		init();
	});
});



$(document).ready(function () {
	
	$('.main-global-footer').each(function (index, el) {
		var copyrightDOM = $(el).find('.copyright-text');
		var copyrightText = copyrightDOM.html();
		copyrightDOM.html(copyrightText.replace('{0}', new Date().getFullYear()));
	});
});
$(document).ready(function () {
    var componentDOM = $('[data-component="text"]');

    componentDOM.each(function (index, el) {
        $(el).find('.btn-read-more').click(function (event) {
            $(el).removeClass('mobile-show-cta-first');
            

            // $(el).find('.text-author-content').addClass('!block');
            // var btn = $(this);
            // autoHeightAnimate($(el).find('.text-author-content'), 300);
            // setTimeout(function () {
            //     btn.addClass('!hidden');
            // }, 300);
        });

        // $(el).find('[data-modal="modalpopup"]').click(function (event) {
        //     event.preventDefault();
        //     window.modalPopup({
        //         show: true,
        //         contentUrl: event.currentTarget.getAttribute('href'),
        //     });
        // });
    });
    
    // function autoHeightAnimate(element, time) {
    //     var curHeight = element.height();
    //     var autoHeight = element.css('height', 'auto').height();

    //     element.height(curHeight);
    //     element.stop().animate({ height: autoHeight }, time, 'swing', function () {
    //         element.css('height', 'auto');
    //     });
    // }

});



$(document).ready(function () {
    var componentDOM = $('[data-component="product-features"]');

    var COMPONENT_DEFAULT_DATA = {
        activeSlide: '',
    }

    var viewportWidth = $(window).width();
    var viewportHeight = $(window).height();

    var productFeaturesAccordion = {
        template: $('[data-template-id="product-features-accordion-template"]').html(),
        name: 'product-features-accordion',
        mixins: [SmoothReflow],
        data: function () {
            return {
                isExpanded: false,
            }
        },
        mounted: function () {
            this.$smoothReflow();
        },
    }

    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);

        window.components[elementID] = new Vue({
            name: 'product-features',
            el: el,
            components: {
                productFeaturesAccordion: productFeaturesAccordion,
            },
            mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            methods: {
                handleSvgPathClick: function (categoryName) {
                    // in mobile disable click <path>
                    // if (viewportWidth < 768) return;

                    this.handleSlideClick(categoryName);
                    this.$nextTick(function () {
                        // auto swipe to the active slide
                        this.productFeatureSwiper.slideTo(this.productFeatureSwiper.$el.find('.swiper-slide.active').index());
                    });
                },
                handleSlideClick: function (categoryName) {
                    var context = this;
                    this.activeSlide = categoryName;
                    
                    // var accordionRef = context.$refs['accordion-' + categoryName + '-0'];
                    // if (accordionRef) {
                    //     accordionRef.isExpanded = true;
                    // }
                },
                getRotateAttribute: function (idx, numBenefits) {

                    var arcSizeMapping = {
                        1 : {
                            0 : 1
                        },
                        2: {
                            0 : 65,
                            1 : 35
                        },
                        3: {
                            0: 60,
                            1: 25,
                            2: 15
                        }
                    };
                    var degrees = 0;
                    if (numBenefits < 4 || this.static.priority != "equal") {
                        if (idx > 0) {
                            // to offset the rotation of the current arc, we need to add up the size of previous chords
                            // from the current index, then multiply by 360 deg
                            var totalArcSizeFromIndex = 0;
                            for (var i = 0; i < idx; i++) {
                                totalArcSizeFromIndex += arcSizeMapping[numBenefits][i];
                            }
                            degrees = totalArcSizeFromIndex / 100 * 360;
                        }
                    }

                    if (numBenefits >= 4 || this.static.priority == "equal") {
                        if (idx > 0) {
                            degrees = idx / numBenefits * 360;
                        }
                    }

                    // Translate from center, take viewBox width, 36 / 2 = 18
                    var offset = 0;
                    if (isIE() || isSafari()) {
                        offset = 18;
                    }
                    return "rotate(" + degrees + "," + offset + "," + offset + ")";
                },
                setTabWidth: function() {
                    var $swiperParents = $(this.$el).find('.swiper-benefits');
                    $swiperParents.find('.swiper-container .swiper-slide').css('width', '29.5%');

                    var tabWidth = $swiperParents.find('.swiper-container .swiper-slide:first .tab-button').width();

                    $swiperParents.find('.swiper-container .swiper-slide .tab-button').each(function (i, tab) {
                        var $tabText = $(tab).find(".max-w-full");
                        var tabText = $tabText.text();
                        var words = tabText.split(" ");

                        var overflowingWords = [];
                        words.forEach(function (word, index) {
                            var width = calculateTextWidth(word, 1);
                            if (width > tabWidth) {
                                overflowingWords.push({
                                    "word": word,
                                    "width": width
                                });
                            }
                        });

                        var longestWord = null;
                        if (overflowingWords.length > 0) {
                            longestWord = _.sortBy(overflowingWords, 'width').reverse()[0];
                        }

                        if (longestWord) {
                            $(tab).parent().css("width", "calc(1.5rem + " + longestWord.width + "px)");
                        }

                        // Check to ensure that the text is always 2 lines
                        if (Math.ceil($tabText.height()) / convertRemToPixels(1) > 2) {
                            var width = tabWidth;
                            while (true) {
                                width += 1;
                                $(tab).parent().css("width", "calc(1.5rem + " + width + "px)");

                                if (Math.ceil($tabText.height()) / convertRemToPixels(1) <= 2) {
                                    break;
                                }
                            }
                        }
                    })
                }
            },
            computed: {

            },
            mounted: function () {
                var context = this;
                this.$smoothReflow();
                
                // this.$smoothReflow({
                //     el: this.$el.querySelector('.benefit-details-wrapper'),
                // });
                
                this.productFeatureSwiper = initProductFeatureSwiper($(this.$el).find('.swiper-benefits'), {
                    showOcto: this.static.showOcto,
                });
                // $('.product-features-accordion-wrapper:first .title-wrapper').click();
                
                this.$nextTick(function () {
                    if (context.productFeatureSwiper.isBeginning && context.productFeatureSwiper.isEnd) {
                        // swiper is disabled (probably from watchOverflow)
                        $(context.$el).find('.swiper-benefits .swiper-container').addClass('has-nav-hidden');
                    }
                });
                
                // feature request: auto expand first feature
                for (var refName in this.$refs) {
                    if (/^accordion-.*-0$/.test(refName)) {
                        // refName that starts with 'accordion-' and ends with '-0'
                        this.$refs[refName].isExpanded = true;
                    }
                }
                
                reorderPathElement(this.$el);

                var context = this;
                if (viewportWidth < 768) {
                    /*
                        For some reason on hard refreshes, the width is not set properly. In the while loop,
                        the loop only fires once.
                     */
                    setTimeout(function() {
                        context.setTabWidth();
                        context.productFeatureSwiper.update() // needed to recalculate the scrolling boundaries
                    }, 250)
                }

            },
            updated: function () {
                reorderPathElement(this.$el);
            },
        });

        function reorderPathElement (compEl) {
            /* Due to SVG elements not supporting z-index, on every update we have to use jQuery to switch the order of <path> element in DOM */
            var svgElement = $(compEl).find('.benefit-ring-svg');
            var activePathEl = svgElement.find('path.active');
            activePathEl.remove().appendTo(svgElement);
        }
        
    });

    function initProductFeatureSwiper(swiperParents, options) {
        var numSlides = swiperParents.find('.swiper-container .swiper-slide:not(.invisible)').length;
        var showOcto = options ? options.showOcto : true;
        var isMobile = (viewportWidth < 768);
        
        var numSlideThreshold = 3;
        
        // after adding hideOcto feature, below code is chaotic 🤷‍♂️
        
        if (!showOcto) {
            // hide Octo
            numSlideThreshold = isMobile ? 4 : 5;
            
            // calculate if nav should be hidden or not, quick fix instead of relying slide count to do so
            // var totalWidthOfSlides = 0;
            // var widthOfWrapper = swiperParents.find('.swiper-container .swiper-wrapper').width();

            // swiperParents.find('.swiper-container .swiper-slide').each(function (index, slide) {
            //     totalWidthOfSlides += $(slide).width();
            // });
            // console.log('totalWidthOfSlides = ', totalWidthOfSlides);
            // console.log('widthOfWrapper = ', widthOfWrapper);
            // if (totalWidthOfSlides <= widthOfWrapper) {
            //     swiperParents.find('.swiper-prev').remove();
            //     swiperParents.find('.swiper-next').remove();
            //     swiperParents.find('.swiper-slide.invisible').remove();
            //     swiperParents.find('.swiper-container').addClass('has-nav-hidden');
            // }
            // return;
            swiperParents.find('.swiper-slide.invisible').remove();
        }
        
        
        if (numSlides >= numSlideThreshold) {
            // more than 3 items
            // console.log('product features - a');
            swiperParents.find('.swiper-container .swiper-slide').css('width', '29.5%');
        } else {
            // would not be swipable
            // console.log('product features - b');

            swiperParents.addClass('swiper-no-overflow');
            
            if (viewportWidth < 768) {
                // mobile view
                
                swiperParents.find('.swiper-container .swiper-slide').css('width', 'calc(33.33% - 7px)');

                swiperParents
                    .find('.swiper-container .swiper-wrapper')
                    .addClass('justify-center')
                    // half of the 'spaceBetween' value
                    .css('margin-left', '3.5px')
                ;
                
                if (!showOcto) {
                    // octo hidden
                    swiperParents
                        .find('.swiper-container .swiper-wrapper')
                        .removeClass('justify-center')
                        .css('margin-left', '0')
                    ;
                }
            } else {
                // desktop view
                if (!showOcto) {
                    // octo hidden
                    swiperParents.find('.swiper-prev').remove();
                    swiperParents.find('.swiper-next').remove();
                    swiperParents.find('.swiper-slide.invisible').remove();
                }
            }
            // return null;
        }

        var swiper = new Swiper(swiperParents.find('.swiper-container').get(0), {
            slidesPerView: 'auto',
            spaceBetween: 10,
            navigation: {
                nextEl: swiperParents.find('.swiper-next').get(0),
                prevEl: swiperParents.find('.swiper-prev').get(0),
            },
            watchOverflow: true,
            breakpointsInverse: true,
            breakpoints: {
                1024: {
                    spaceBetween: 35,
                    slidesPerView: showOcto ? 3 : 5,
                    slidesPerGroup: showOcto ? 3 : 5,
                },
                768: {
                    spaceBetween: 18,
                    slidesPerView: showOcto ? 3 : 3,
                    slidesPerGroup: showOcto ? 3 : 3,
                },
                // 500: {
                //     spaceBetween: 15,
                // },
                // 640: {

                // },
            }
        });
        swiper.update();
        return swiper;
    }

});


$(document).ready(function () {
	var componentDOM = $('[data-component="cross-sell"]');

	var COMPONENT_DEFAULT_DATA = {
		desktopView: '',
		mobileDisabled: '',
		itemList: '',
		autoplayDuration: '',
	}

	componentDOM.each(function (index, el) {
		var elementID = el.id;
		var vueDefaultData = getVueAttrDataFromEl(el);

		window.components[elementID] = new Vue({
			name: 'cross-sell',
			el: el,
			data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
			// methods: {

			// },
			// computed: {

			// },
			mounted: function () {
				if (isMobile() && this.mobileDisabled === 'disable') {
					
				} else {
					initCrossSellSwiper($(this.$el).find('.cross-sell-container'), this.desktopView, this.mobileDisabled, this.itemList, this.autoplayDuration);
				}
			},
		})



	});

	function initCrossSellSwiper(swiperParents, desktopView, mobileDisabled, itemList, autoplayDuration) {

		var swiperWidth = swiperParents.get(0).offsetWidth;
        var mobileSizeInDesktop = swiperWidth < 1248 ? true : false;

		var autoplayConfig = (autoplayDuration && autoplayDuration > 0) ? {
			delay: parseFloat(autoplayDuration) * 1000,
			disableOnInteraction: false,
		} : false;

        var loopConfig = (autoplayDuration && autoplayDuration > 0) ? true : false;

		return new Swiper(swiperParents.find('.swiper-container').get(0), {
			slidesPerView: 'auto',
			spaceBetween: 39,
			//simulateTouch: desktopView === 'variant-vertical-desktop' ? false : true ,
			//allowTouchMove: desktopView === 'variant-vertical-desktop' ? false : true ,
			watchOverflow: true,
			loop: desktopView === 'variant-vertical-desktop' || desktopView === 'variant-row-desktop' || itemList < 4 ? false : true,
			loopFillGroupWithBlank: true,
            slidesPerGroup: mobileSizeInDesktop ? 1 : 3,
			pagination: {
				el: swiperParents.find('.swiper-pagination'), // correct
				clickable: true
			},
			breakpoints: {

				1280: {
					slidesPerView: 'auto',
					slidesPerGroup: 3,
					spaceBetween: 39,
				},
				1024: {
					slidesPerView: 'auto',
					slidesPerGroup: 1,
					spaceBetween: 17,
					loop: loopConfig,
					loopFillGroupWithBlank: false,
				},
				768: {
					slidesPerView: 'auto',
					slidesPerGroup: 1,
					spaceBetween: 17,
					loop: loopConfig,
					loopFillGroupWithBlank: false,
				},
				640: {
					slidesPerGroup: 1,
					spaceBetween: 17,
					loop: loopConfig,
					loopFillGroupWithBlank: false,
				},
				320: {
					slidesPerView: 1,
					slidesPerGroup: 1,
					spaceBetween: 20,
					loop: loopConfig,
					loopFillGroupWithBlank: false,
				},
			},
			autoplay: autoplayConfig,
			threshold: 20,
		})
	}
});


/*
$(document).ready(function() {
	var componentDOM = $('[data-component="cross-sell"]');

	componentDOM.each(function(index, el) {
		// logic start here
		var $el = $(el);
	});
});
*/

$(document).ready(function () {
    var componentDOM = $('[data-component="image-tile"]');

    componentDOM.each(function (index, el) {
        var $el = $(el);
        
        // remove background for tile standard desktop (background is on the wrapper)
        if(!isMobile() && $el.hasClass('tile-standard')){
            $el.removeClass('bg-apply');
        }
    });
});

$(document).ready(function () {

	var componentDOM = $('[data-component="carousel-component"]');

	var COMPONENT_DEFAULT_DATA = {
		numOfPlaceholders: 0,
		numList: 0,
		autoplayDuration: 0,
	}
	
	var COMPONENT_OPTIONS = {
		name: 'carousel-component',
		data: function () {
			return _.cloneDeep(COMPONENT_DEFAULT_DATA);
		},
		methods: {
			mobileExtraTile: function () {
				//detectForMobileClass widthAuto
				var mobileMatch = window.matchMedia("(max-width: 1024px)").matches;
				var $el = $(this.$el);
				if (mobileMatch) {
					if ($el.find(".widthAuto").length) {
						$el.find(".placeholder").addClass("widthAuto");
					}
				} else {
					if ($el.find(".widthAuto").length) {
						$el.find(".placeholder").removeClass("widthAuto");
					}
				}
			}
		},
		created: function () {
			this.mobileExtraTile();
		},
		mounted: function () {
			this.swiper = initCarouselSwiper($(this.$el).find('.carousel-container'), parseInt(this.numOfPlaceholders), parseInt(this.numList, 10), this.autoplayDuration);
		},
	}
	
	
	// this component will not run in editor mode
	if (window.isEditorMode()) {
		$(componentDOM).removeAttr('v-cloak').find('[v-cloak]').removeAttr('v-cloak');
		return;
	}
	
	
	Vue.component('carousel-component', _.cloneDeep(COMPONENT_OPTIONS));
	

	/* componentDOM.each(function (index, el) {
		var $el = $(el);
		var elementID = el.id;
		var vueDefaultData = getVueAttrDataFromEl(el);

		window.components[elementID] = new Vue({
			name: 'carousel-component',
			el: el,
			data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
			methods: {
				mobileExtraTile: function () {
					//detectForMobileClass widthAuto
					var mobileMatch = window.matchMedia("(max-width: 1024px)").matches
					if (mobileMatch) {
						if ($el.find(".widthAuto").length) {
							$el.find(".placeholder").addClass("widthAuto");
						}
					} else {
						if ($el.find(".widthAuto").length) {
							$el.find(".placeholder").removeClass("widthAuto");
						}
					}

				}

			},
			created: function () {
				this.mobileExtraTile();

			},
			//  computed: {

			// },
			mounted: function () {
				this.swiper = initCarouselSwiper($(this.$el).find('.carousel-container'), parseInt(this.numOfPlaceholders), parseInt(this.numList, 10), this.autoplayDuration);
				// console.log('this.swiper = ', this.swiper);
			},
		})
	}); */
	
	componentDOM.each(function (index, el) {
		var elementID = el.id;

		// only if instance is not under another vue component, we wrap it with .vue-root, and then initialize it as new root instance
		if ($(el).parents('[data-component]').length === 0) {
			window.components[elementID] = new Vue(Object.assign({
				el: $(el).wrap('<div class="vue-root"></div>').get(0),
			}));
		}
	});


	function initCarouselSwiper(swiperParents, numOfPlaceholders, numList, autoplayDuration) {

		var autoplayConfig = (autoplayDuration && autoplayDuration > 0) ? {
			delay: parseFloat(autoplayDuration) * 1000,
			disableOnInteraction: false,
		} : false;

		//console.log('numList = ', numList);

        var loopConfig = (autoplayDuration && autoplayDuration > 0) ? true : false;

		var enableLoop = numList > numOfPlaceholders ? true : false;
		return new Swiper(swiperParents.find('.swiper-container'), {
			slidesPerView: numOfPlaceholders,
			spaceBetween: 40,
			slidesPerGroup: numOfPlaceholders,

			// allowTouchMove: false,
			// simulateTouch: false,
			watchOverflow: true,
			loop: enableLoop,
      		loopFillGroupWithBlank: true,
			pagination: {
				el: swiperParents.find('.swiper-pagination'), // correct
				clickable: true,
			},
			observer: true,
			observeParents: true,
			breakpoints: {
				1024: {
					slidesPerView: 'auto',
					slidesPerGroup: 1,
					spaceBetween: 18,
                    loop: loopConfig,
      				loopFillGroupWithBlank: false,
                },

			},
			autoplay: autoplayConfig,
			threshold: 20,
		});


	}

});
$(document).ready(function () {
	
	Vue.component('carousel-rotating-banner', {
		name: 'carousel-rotating-banner',
		data: function () {
			return {
				autoplayDuration: 0,
			}
		},
		created: function () {
			
		},
		mounted: function () {
			var jQEl = $(this.$el);
			
			if (window.isEditorMode()) {
				jQEl.removeAttr('v-cloak').find('[v-cloak]').removeAttr('v-cloak');
				return;
			}
			
			this.swiperInstance = initCarouselSwiper(jQEl, this.autoplayDuration);
		},
		methods: {
			
		},
	});
	
	
	$('[data-component="carousel-rotating-banner"]').each(function (index, el) {
		var elementID = el.id;
		var jQEl = $(el);
		
		if (!window.isEditorMode()) {
			// not in editor's mode: manually add 'swiper-slide' class (❗ backend has not solution)
			jQEl.find('.swiper-wrapper').find('> *').addClass('swiper-slide');
		}

		// only if instance is not under another vue component, we instantiate it
		if (jQEl.parents('[data-component]').length === 0) {
			// manually wrap the entire dom with a div then reference it in component's el
			jQEl.wrap('<div></div>');
			
			var componentRootEl = jQEl.parent();
			
			// sanitize the root el first before we initiate Vue
			// remove all <script> tag since any script tag there should already execute
			componentRootEl.find('script').remove();
			
			window.components[elementID] = new Vue({
				el: componentRootEl.get(0),
			});
		}
	});



	function initCarouselSwiper(swiperParents, autoplayDuration) {
		
		var autoplayConfig = (autoplayDuration && autoplayDuration > 0) ? {
			delay: parseFloat(autoplayDuration) * 1000,
			disableOnInteraction: false,
		} : false;

        var loopConfig = (autoplayDuration && autoplayDuration > 0) ? true : false;

		return new Swiper(swiperParents.find('.swiper-container'), {
			slidesPerView: 1,
			spaceBetween: 0,
			// allowTouchMove: true,
			// simulateTouch: true,
			navigation: {
				nextEl: swiperParents.find('.btn-nav-next'),
				prevEl: swiperParents.find('.btn-nav-prev'),
			},
			loop: loopConfig,
			pagination: {
				el: swiperParents.find('.swiper-pagination'),
				clickable: true,
			},
			breakpoints: {

			},
			autoplay: autoplayConfig,
			threshold: 20,
		});


	}

});

// $(document).ready(function () {
//     Vue.component('switch-tab-standard', {
// 		name: 'switch-tab-standard',
// 		data: function () {
// 		},
// 		created: function () {
			
// 		},
// 		mounted: function () {
//             var jQEl = $(this.$el);
//             this.swiperInstance = initCarouselSwiper(jQEl);
// 		},
// 		methods: {
			
// 		},
//     });
    
//     $('[data-component="switch-tab-standard"]').each(function (index, el) {
//         var elementID = el.id;
// 		var jQEl = $(el);
//     })


//     function initCarouselSwiper(swiperParents, autoplayDuration) {
//         console.log('asdasd')
//     }

// });

$(document).ready(function () {

    var COMPONENT_DEFAULT_DATA = {
        activeTab: '',
        switchTabType: '',
    }
    
    var COMPONENT_OPTIONS = {
        name: 'switch-tab-two-section',
        data: function () {
            return _.cloneDeep(COMPONENT_DEFAULT_DATA);
        },
        mixins: [SmoothReflow],
        mounted: function () {
            var context = this;
            // smoothr reflow is to make height: auto transition possible
            this.$smoothReflow();
            this.swiper = initSwitchTabsSwiper($(this.$el).find('.swiper-switch-tabs'), this.switchTabType);
            // detect hash and activate the correct section if needed
            var hash = window.location.hash;
            var tabBtnEl = $(this.$el).find('.switch-tab-link[href="' + hash + '"]');

            if (tabBtnEl.length > 0) {
                // element found in this component
                this.activeTab = hash.substr(1);
                this.$nextTick(function () {
                    window.scrollToElement(tabBtnEl);
                });
            }
            
            
        },
        methods: {
            updateNestedCarousels: function () {
                var context = this;
                var carouselDOM = this.$el.querySelectorAll('.switch-tab-content.active [data-component="carousel-component"]');

                carouselDOM.forEach(function (rootDOM) {
                    var vueInstance = rootDOM.__vue__;
                    if (vueInstance && vueInstance.swiper) {
                        vueInstance.swiper.autoplay.stop();
                        vueInstance.swiper.autoplay.start();
                        vueInstance.swiper.update();
                    }
                });
            },
            changeTab: function (tabName) {
                var context = this;
                this.activeTab = tabName;
            },
        },
        watch: {
            activeTab: function () {
                var context = this;
                this.$nextTick(function () {
                    context.updateNestedCarousels();
                });
            },
        },
    }
    
    
    // this component will not run in editor mode
    if (window.isEditorMode()) {
        $('[data-component="switch-tab-two-section"]').removeAttr('v-cloak').find('[v-cloak]').removeAttr('v-cloak');
        // var vueDefaultData = getVueAttrDataFromEl(el);
        // initSwitchTabsSwiper($(el).find('.swiper-switch-tabs'), vueDefaultData.switchTabType || '');
        return;
    }

    
    Vue.component('switch-tab-two-section', _.cloneDeep(COMPONENT_OPTIONS));

    $('[data-component="switch-tab-two-section"]').each(function (index, el) {
        if ($(el).parents('[data-component]').length === 0) {
            window.components[el.id] = new Vue(Object.assign({
                el: $(el).wrap('<div class="vue-root"></div>').get(0),
            }));
        }
    })

    function initSwitchTabsSwiper(swiperParents, switchTabType) {
        var viewportWidth = $(window).width();
        var viewportHeight = $(window).height();

        var numSlides = swiperParents.find('.swiper-container .swiper-slide').length;
        if (numSlides > 4) {
            // more than 3 items
            // swiperParents.find('.swiper-container .swiper-slide').css('width', '45%');
        } else {
            swiperParents.removeClass('flex')
            // 3 items or less. Swiper will be deactivated.
            // swiperParents.find('.swiper-container .swiper-slide').css('width', 'calc(25% - 7px)');
            if (viewportWidth < 768) {

                // swiperParents
                //     .find('.swiper-container .swiper-wrapper')
                //     .addClass('justify-center')
                //     // half of the 'spaceBetween' value
                //     .css('margin-left', '3.5px')
                // ;
            }
        }

        return new Swiper(swiperParents.find('.swiper-container').get(0), {
            slidesPerView: 'auto',
            spaceBetween: 10,
            navigation: {
                nextEl: swiperParents.find('.swiper-next').get(0),
                prevEl: swiperParents.find('.swiper-prev').get(0),
            },
            watchOverflow: true,
            breakpointsInverse: true,
            breakpoints: {
                1024: {
                    spaceBetween: switchTabType === 'tab-red-box' ? 0 : 10,
                    slidesPerView: 'auto',
                    slidesPerGroup: 6,
                },
                768: {
                    spaceBetween: switchTabType === 'tab-red-box' ? 0 : 10,
                    slidesPerView: 'auto',
                },
                640: {
                    spaceBetween: switchTabType === 'tab-red-box' ? 0 : 10,
                    slidesPerView: 'auto',
                },
                320: {
                    spaceBetween: switchTabType === 'tab-red-box' ? 0 : 10,
                    slidesPerView: 'auto',
                },
            },
        });
    }

});

$(document).ready(function () {

    var COMPONENT_DEFAULT_DATA = {
        activeTab: '',
        switchTabType: '',
    }
    
    var COMPONENT_OPTIONS = {
        name: 'switch-tab-standard',
        data: function () {
            return _.cloneDeep(COMPONENT_DEFAULT_DATA);
        },
        mixins: [SmoothReflow],
        mounted: function () {
            var context = this;
            // smoothr reflow is to make height: auto transition possible 
            this.$smoothReflow();
            this.swiper = initSwitchTabsSwiper($(this.$el).find('.swiper-switch-tabs'), this.switchTabType);
            // detect hash and activate the correct section if needed
            var hash = window.location.hash;
            var tabBtnEl = $(this.$el).find('.switch-tab-link[href="' + hash + '"]');

            if (tabBtnEl.length > 0) {
                // element found in this component
                this.activeTab = hash.substr(1);
                this.$nextTick(function () {
                    window.scrollToElement(tabBtnEl);
                });
            }
        },
        methods: {
            updateNestedCarousels: function () {
                var context = this;
                var carouselDOM = this.$el.querySelectorAll('.switch-tab-content.active [data-component="carousel-component"]');

                carouselDOM.forEach(function (rootDOM) {
                    var vueInstance = rootDOM.__vue__;
                    if (vueInstance && vueInstance.swiper) {
                        vueInstance.swiper.autoplay.stop();
                        vueInstance.swiper.autoplay.start();
                        vueInstance.swiper.update();
                    }
                });
            },
            changeTab: function (tabName) {
                var context = this;
                this.activeTab = tabName;
            },
        },
        watch: {
            activeTab: function () {
                var context = this;
                this.$nextTick(function () {
                    context.updateNestedCarousels();
                });
            },
        },
    }
    
    // this component will not run in editor mode
    if (window.isEditorMode()) {
        $('[data-component="switch-tab-standard"]').removeAttr('v-cloak').find('[v-cloak]').removeAttr('v-cloak');
        // var vueDefaultData = getVueAttrDataFromEl(el);
        // initSwitchTabsSwiper($(el).find('.swiper-switch-tabs'), vueDefaultData.switchTabType || '');
        return;
    }
    
    
    Vue.component('switch-tab-standard', _.cloneDeep(COMPONENT_OPTIONS));
    

    // Vue.component('switch-tab-standard', {
    //     name: 'switch-tab-standard',
    //     data: function () {
    //     },
    //     created: function () {

    //     },
    //     mounted: function () {
    //         // var jQEl = $(this.$el);
    //         // this.swiperInstance = initCarouselSwiper(jQEl);
    //     },
    //     methods: {

    //     },
    // });

    $('[data-component="switch-tab-standard"]').each(function (index, el) {
        var elementID = el.id;
        
        if ($(el).parents('[data-component]').length === 0) {
            window.components[el.id] = new Vue(Object.assign({
                el: $(el).wrap('<div class="vue-root"></div>').get(0),
            }));
        }

    })

    function initSwitchTabsSwiper(swiperParents, switchTabType) {
        var viewportWidth = $(window).width();
        var viewportHeight = $(window).height();

        var numSlides = swiperParents.find('.swiper-container .swiper-slide').length;
        if (numSlides > 4) {
            // more than 3 items
            // swiperParents.find('.swiper-container .swiper-slide').css('width', '45%');
        } else {
            swiperParents.removeClass('flex')
            // 3 items or less. Swiper will be deactivated.
            // swiperParents.find('.swiper-container .swiper-slide').css('width', 'calc(25% - 7px)');
            if (viewportWidth < 768) {

                // swiperParents
                //     .find('.swiper-container .swiper-wrapper')
                //     .addClass('justify-center')
                //     // half of the 'spaceBetween' value
                //     .css('margin-left', '3.5px')
                // ;
            }
        }

        return new Swiper(swiperParents.find('.swiper-container').get(0), {
            slidesPerView: 'auto',
            spaceBetween: 10,
            navigation: {
                nextEl: swiperParents.find('.swiper-next').get(0),
                prevEl: swiperParents.find('.swiper-prev').get(0),
            },
            watchOverflow: true,
            breakpointsInverse: true,
            breakpoints: {
                1024: {
                    spaceBetween: switchTabType === 'tab-red-box' ? 0 : 10,
                    slidesPerView: 'auto',
                    slidesPerGroup: 6,
                },
                768: {
                    spaceBetween: switchTabType === 'tab-red-box' ? 0 : 10,
                    slidesPerView: 'auto',
                },
                640: {
                    spaceBetween: switchTabType === 'tab-red-box' ? 0 : 10,
                    slidesPerView: 'auto',
                },
                320: {
                    spaceBetween: switchTabType === 'tab-red-box' ? 0 : 10,
                    slidesPerView: 'auto',
                },
            },
        });
    }

});

$(document).ready(function () {
    var componentDOM = $('[data-component="divider"]');

    componentDOM.each(function (index, el) {
        var $el = $(el);
        if ($el.attr('data-layout') === 'vertical-divider') {
            // due to how absolute positioning work in css, position of parent of this divider's component must be 'relative'
            var thisCmpParent = $el.parents('.cmp-divider');
            var parentOfCmp = thisCmpParent.parent();
            parentOfCmp.addClass('relative');
        }
    });
});
window.initComponent['table'] = function initTable(parentEl) {

	var rootEl = parentEl.querySelector('.table-content');
	if (!rootEl) return;

	var tableEl = rootEl.querySelector('.table-scroll-area > table');
	var hasHeader = true;
	
	if (!tableEl) return; // probably author did not put any content in the component

	if (!tableEl.querySelector('tr > th')) {
		hasHeader = false;
		$(rootEl).addClass('isHeaderless');
	}

	function desktopLogic () {
		// code below was for "equalized column" config, no longer used
		/*
		var numColumnToFreeze = parseInt(rootEl.getAttribute('data-freeze-col-count')) || 0;
		if (rootEl.classList.contains('table-layout-fixed')) {
			var lockedColumnWidth = 0;
			var firstRow = tableEl.rows.item(0);
			var tableWidth = tableEl.clientWidth;

			for (var i = 0; i < numColumnToFreeze; i++) {
				var cell = firstRow.cells.item(i);
				lockedColumnWidth += cell.clientWidth;
			}

			var equalWidth = (tableWidth - lockedColumnWidth) / (firstRow.cells.length - numColumnToFreeze);

			for (var rowIndex in tableEl.rows) {
				if (!isNaN(parseInt(rowIndex))) {
					var cells = tableEl.rows.item(parseInt(rowIndex)).cells;
					for (var cellIndex in cells) {
						if (!isNaN(parseInt(cellIndex)) && cellIndex + 1 > numColumnToFreeze) {
							var cell = cells.item(parseInt(cellIndex))
							$(cell).css('width', equalWidth);
						}
					}
				}


			}
		}
		*/
	}

	function getTableCellIndexes (elm) {
		var td = $(elm).closest("td, th");
		var col = 0;
		td.prevAll().each(function () { col += $(this).prop('colspan'); });
		var row = td.closest("tr").index();
		var tbody = td.closest('thead,tbody,tfoot');
		var rowspans = tbody.find("td[rowspan],th[rowspan]");
		rowspans.each(function () {
			var rs = $(this);
			var rsIndex = rs.closest("tr").index();
			var rsQuantity = rs.prop("rowspan");
			if (row > rsIndex && row <= rsIndex + rsQuantity - 1) {
				var rsCol = 0;
				rs.prevAll().each(function () { rsCol += $(this).prop('colspan'); });
				if (rsCol <= col) col += rs.prop('colspan');
			}
		});
		return { row: row, col: col };
	}
	
	
	function _handleRowMouseEnter (rowIndex) {
		$(rootEl).find('table tr:nth-child(' + (rowIndex + 1) + ')').addClass('hovered');
	}
	function _handleRowMouseLeave (rowIndex) {
		$(rootEl).find('table tr:nth-child(' + (rowIndex + 1) + ')').removeClass('hovered');
	}
	function addMouseHoverListeners () {
		$(rootEl).find('table tr').on('mouseenter', function (event) {
			_handleRowMouseEnter( $(event.currentTarget).index() );
		});
		$(rootEl).find('table tr').on('mouseleave', function (event) {
			_handleRowMouseLeave( $(event.currentTarget).index() );
		});
	}
	
	
	
	function freezeTableColumn (numColumnToFreeze) {
		var wrapperEl = $(rootEl).find('.table-frozen-column');
		
		if (numColumnToFreeze <= 0) {
			wrapperEl.addClass('hidden');
			return;
		}
		
		var newTable = $('<table data-cloned data-frozen><tbody></tbody></table>');
		wrapperEl.append(newTable);

		var tableEl = parentEl.querySelector('.table-scroll-area table');
		var tableFullWidth = 0;
		
		Array.from(tableEl.rows).forEach(function (row, rowIndex) {
			var newRow = $('<tr></tr>');
			newTable.find('tbody').append(newRow);

			var tableWidth = 0;
			
			for (var i = 0; i < numColumnToFreeze; i++) {
				var cell = row.cells.item(i);
				var cellWidth = cell.getClientRects()[0].width;

				tableWidth += cellWidth;
				var height = row.cells.item(i).getClientRects()[0].height;

				// Get the index of the current cell that accounts for the colspan and rowspan
				var cellIndices = getTableCellIndexes(cell);
				if (cellIndices.col != i) {
					/*
					When a rowspan is applied on a given <td>, the subsequent <tr> will have 1 less <td>.
					Because the second row has one less <td>, we will have to adjust for the indices as
					relying on the normal indexes are no longer accurate.
					 */
					continue;
				}
				
				if (tableEl.rows.length - 1 == rowIndex) {
					// this is the last row
					height -= 1;
				}

				if (rowIndex == 0 && cell.tagName === 'TH') {
					var newTableHeaderCell = $('<th></th>');
					newTableHeaderCell.attr({
						width: cellWidth,
						height: height,
						colspan: cell.getAttribute('colspan'),
					});

					newTableHeaderCell.html(row.cells.item(i).innerHTML);
					newRow.append(newTableHeaderCell);
				} else {
					var newTableCell = $(newRow.get(0).insertCell(i));
					newTableCell.attr({
						width: cellWidth,
						height: height,
						colspan: cell.getAttribute('colspan'),
					});
					newTableCell.html(row.cells.item(i).innerHTML);
				}
			}
		});
	}
	
	
	function cloneTableHeader (tableHeader) {
		tableHeader.attr('data-table-header', '');
		var tableHeaderCloned = tableHeader.clone();
		var newStickyTable = $('<div class="table-scroll-wrapper overflow-hidden absolute z-20 max-w-full" data-sticky><div class="table-scroll-area max-w-full overflow-x-hidden overflow-y-hidden" data-cloned><table data-sticky-table><tbody></tbody></table></div></div>');
		newStickyTable.find('tbody').prepend(tableHeaderCloned);
		return newStickyTable;
	}
	
	function initSticky (stickyEl, settings) {
		var config = Object.assign({}, {
			sticky_class: 'sticked',
			spacer: false,
		}, settings);
		$(stickyEl).stick_in_parent(config);
	}
	
	function stickyHeaderLogic () {
		var newStickyTable = cloneTableHeader($(rootEl.querySelector('table tr:first-child')));
		$(rootEl).find('.table-scroll-area table').parent().parent().prepend(newStickyTable);
		
		// var scrollAreaCloned = $(rootEl).find('.table-scroll-area[data-cloned]');
		var scrollAreaCloned = $(newStickyTable).find('.table-scroll-area[data-cloned]');
		var scrollArea = $(rootEl).find('.table-scroll-area:not([data-cloned])');

		var overlayContentEL = $(rootEl).parents('.overlay-content');
		var isPartOfPopUpContent = (overlayContentEL.length > 0);
		var offsetTop = $('.main-global-header').height() || 0;

		if (isPartOfPopUpContent) {
			offsetTop = overlayContentEL.get(0).getBoundingClientRect().top;
		}
		
		
		// 👆 setup above done.
		// Now, onto the execution (init) of the sticky_kit library below 👇.
		
		/*
			Oddly, this solves the zero height issue and accordion is still "unexpanded" even after .click() on it.
			However we are not using this hack here. Just documenting down that this works.
		*/
		// $('.accordion-btn').click();
		
		/* 
			When newStickyTable's height() at this time is zero, it means that it is hidden in DOM (for e.g. inside accordion).
			Hence, we have to create a condition to detect this case and handle it
		*/
		if ($(newStickyTable).height() === 0) {
			// listen to a special event that would be triggered on rootEl. When this happens, it is a signal for us to init the sticky.
			$(rootEl).on('sticky-recalculate', function () {
				// trying to force recalc after init sticky, but does not work for unknown reason
				// $(document.body).trigger('sticky_kit:recalc');
				initSticky(newStickyTable, { offset_top: offsetTop });
			});
		} else {
			initSticky(newStickyTable, { offset_top: offsetTop });
		}
		
		
		
		$(newStickyTable).on('sticky_kit:stick', function (event) {
			scrollAreaCloned.scrollLeft(scrollArea.scrollLeft());
		});
		$(newStickyTable).on('sticky_kit:unstick', function (event) {
			scrollAreaCloned.scrollLeft(scrollArea.scrollLeft());
		});


		if (isPartOfPopUpContent) {
			// because sticky_kit plugin only attach listeners on 'window',
			// we manually trigger recalculate on modal content scroll
			$(rootEl).parents('.overlay-content').scroll(function () {
				$(document.body).trigger('sticky_kit:recalc');
			});

			// clean up when modal was closed
			$(window).on('modal-popup:visibility', function (event, payload) {
				if (!payload.visibility) {
					$(rootEl).parents('.overlay-content').off('scroll');
					$(window).off('modal-popup:visibility');
				}
			});
		}
		
		// sync the scrollLeft (horizontal scrolling) of the cloned with the original table
		$(rootEl).find('.table-scroll-area:not([data-cloned])').on('scroll', function (event) {
			$(rootEl).find('.table-scroll-area[data-cloned]').scrollLeft(event.currentTarget.scrollLeft);
		});
	}
	
	
	function copyFrozenColumnToStickyHeader (numColumnFrozen) {
		var frozedHeaderTh = $(rootEl).find('.table-frozen-column table tr th');
		var frozedHeaderTr = frozedHeaderTh.parent('tr');
		
		var newTable = $('<div class="table-frozen-column"><table class="table-frozen-sticky" data-cloned><tbody></tbody></table></div>');
		
		newTable.find('tbody').append(frozedHeaderTr.clone());
		$(rootEl).find('.table-scroll-wrapper[data-sticky]').append(newTable);
	}
	

	function mobileLogic () {
		
		var numColumnToFreeze = parseInt(rootEl.getAttribute('data-freeze-col-count')) || 0;
		freezeTableColumn(numColumnToFreeze);
		
		addMouseHoverListeners();
		
		
		var requiresStickyHeader = rootEl.classList.contains('lock-header');
		if (requiresStickyHeader && hasHeader) {
			stickyHeaderLogic();
			if (numColumnToFreeze > 0) {
				// handle interaction for frozen column + sticky header
				copyFrozenColumnToStickyHeader(numColumnToFreeze);
			}
		}
		
	}

	function forceSetColWidth () {
		// force-width logic
		// read 'data-cols-width-m' and 'data-cols-width-d' from dom
		var colWidth_m = rootEl.getAttribute('data-cols-width-m');
		var colWidth_d = rootEl.getAttribute('data-cols-width-d');

		var widthsToSet = [];

		if (colWidth_m && !window.matchMedia('(min-width: 768px)').matches) {
			widthsToSet = colWidth_m.split(',').map(function (val) { return val.trim() });
		}
		if (colWidth_d && window.matchMedia('(min-width: 768px)').matches) {
			widthsToSet = colWidth_d.split(',').map(function (val) { return val.trim() });
		}

		if (widthsToSet.length > 0) {
			var firstRow = tableEl.querySelector('tr');
			var cells = $(firstRow).children('*');
			widthsToSet.forEach(function (val, index) {
				if (cells[index]) {
					cells[index].style.width = val;
				}
			})
		}
	}
	
	
	
	forceSetColWidth();

	// set timeout or else width would not be correct, maybe browser need time to repaint forceSetColWidth() ?
	setTimeout(function () {
		if (window.matchMedia('(min-width: 768px)').matches) {
			desktopLogic();
		} else {
			mobileLogic();
		}
	}, 250);
	
	
	//Function for Table in Switch Tabs Component, on Click set each table width
	var isSwitchTab = $('.cmp-switchTab');
	if (!isSwitchTab) return;
	if (isSwitchTab.length) {
		isSwitchTab.each(function () {
			var _this = $(this)
			if ($(this).find('.cmp-table').length) {
				var switchNavi = $(this).find('.swiper-slide')
				switchNavi.on('click', function () {
					//This function refer from ==> forceSetColWidth()
					var tableContent = _this.find('.table-content')
					tableContent.each(function () {
						var _table = $(this).find('.table-scroll-area > table')
						var colWidth_m = $(this).data('cols-width-m');
						var colWidth_d = $(this).data('cols-width-d');

						var widthsToSet = [];

						if (colWidth_m && !window.matchMedia('(min-width: 768px)').matches) {
							widthsToSet = colWidth_m.split(',').map(function (val) { return val.trim() });
						}
						if (colWidth_d && window.matchMedia('(min-width: 768px)').matches) {
							widthsToSet = colWidth_d.split(',').map(function (val) { return val.trim() });
						}

						if (widthsToSet.length > 0) {
							var firstRow = _table.find('tr');
							var cells = $(firstRow).children('*');
							widthsToSet.forEach(function (val, index) {
								if (cells[index]) {
									cells[index].style.width = val;
								}
							})
						}
					})
				})
			}
		})
	}
}


document.addEventListener('DOMContentLoaded', function () {
	var tableComponentDOM = document.querySelectorAll('.cmp-table');
	
	tableComponentDOM.forEach(function (el) {
		window.initComponent['table'](el);
	});

});




$(document).ready(function () {
    var componentDOM = $('[data-component="tool-listing"]');

    var COMPONENT_DEFAULT_DATA = {
        filterSelection: ['All'],
        listing: [],
        isFiltered: false,
        
        // pagination related
        currentPageIndex: 0,
        initialDisplayCount: 6,
        subsequenceDisplayCount: 6,
    }

    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);

        window.components[elementID] = new Vue({
            name: 'tool-listing',
            el: el,
            // mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            methods: {
                handleFilterChange: function (filterName) {
                    if (filterName === 'All') {
                        this.filterSelection = ['All'];
                    } else {
                        // remove 'All'
                        if (this.filterSelection.includes('All')) {
                            this.filterSelection.splice(this.filterSelection.indexOf('All'), 1);
                        }
                        
                        if (this.filterSelection.includes(filterName)) {
                            // if only
                            if (this.filterSelection.length === 1) return;
                            // remove
                            this.filterSelection.splice(this.filterSelection.indexOf(filterName), 1);
                        } else {
                            // add
                            this.filterSelection.push(filterName);
                        }
                    }
                    this.currentPageIndex = 0;
                },
                handleLoadMore: function () {
                    this.currentPageIndex++;
                },
            },
            computed: {
                filters: function () {
                    var context = this;
                    var result = [];
                    
                    var grouped = this.listing.reduce(function (acc, item) {
                        item.tags.forEach(function (tag) {
                            if (tag in acc) {
                                acc[tag].count++;
                            } else {
                                acc[tag] = {
                                    value: tag,
                                    label: tag,
                                    count: 1,
                                }
                            }
                        });
                        return acc;
                    }, {});
                    
                    result = Object.values(grouped);
                    
                    // add 'All'
                    result.unshift({
                        value: 'All',
                        label: 'All',
                        count: this.listing.length,
                    })
                    
                    return result;
                },
                // displayListing: function () {
                //     var context = this;
                //     var result = [];
                    
                //     var foundItems = this.listing.filter(function (item) {
                //         return context.filterSelection.includes(item.listingTitle);
                //     });
                    
                //     foundItems.forEach(function (item) {
                //         Array.prototype.push.apply(result, item.Pages);
                //     });
                    
                //     return result;
                // },
                displayListing: function () {
                    var context = this;
                    var result = [];
                    var filterSelection = context.filterSelection;
                    
                    if (filterSelection.includes('All')) {
                        return this.listing;
                    }
                    
                    result = this.listing.filter(function (item) {
                        return filterSelection.some(function (filterSeleted) {
                            return item.tags.includes(filterSeleted);
                        });
                    });
                    
                    return result;
                },
                displayListingPaginated: function () {
                    return this.displayListing.slice(0, this.initialDisplayCount + (this.subsequenceDisplayCount* this.currentPageIndex));                    
                },
            },
            mounted: function () {
                var context = this;
                // this.$smoothReflow();
                
                context.$nextTick(function () {
                    initFilterSwiper($(context.$el).find('.filter-container .swiper-container'));
                });
            },
        });
    });
    
    
    
    function initFilterSwiper (parentWrapper) {
        return new Swiper(parentWrapper.get(0), {
            slidesPerView: 'auto',
            spaceBetween: 10,
            watchOverflow: true,
        });
    }
    
    
});

$(document).ready(function () {
    var componentDOM = $('[data-component="featured-container"]');

    var COMPONENT_DEFAULT_DATA = {
        itemList: '',
        autoplayDuration: '',        
    }

    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);

        window.components[elementID] = new Vue({
            name: 'featured-container',
            el: el,
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            // methods: {
               
            // },
            // computed: {

            // },
            mounted: function () {
                initCrossSellSwiper($(this.$el).find('.swiper-container'), this.itemList, this.autoplayDuration);
            },
        })
    });

    function initCrossSellSwiper(swiperParents, itemList, autoplayDuration) {

        var autoplayConfig = (autoplayDuration && autoplayDuration > 0) ? {
            delay: parseFloat(autoplayDuration) * 1000,
            disableOnInteraction: false,
        } : false;

        var loopConfig = (autoplayDuration && autoplayDuration > 0 && itemList > 1) ? true : false;
        
        itemList = Number(itemList)
        return new Swiper(swiperParents, {
            slidesPerView: 'auto',
            spaceBetween: 38,
            watchOverflow: true,
            slidesPerGroup: 3,
            loop: itemList > 3 ? true : false,
            loopFillGroupWithBlank: true,
            pagination: {
                el: swiperParents.find('.swiper-pagination'), // correct
                clickable: true
            },
            breakpoints: {
                1280: {
                    spaceBetween: 38,
                    slidesPerGroup: 3,
                    loop: loopConfig,
                },
                1024: {
                    spaceBetween: 18,
                    slidesPerGroup: 1,
                    loop: loopConfig,
                    loopFillGroupWithBlank: false,
                },
            },
            autoplay: autoplayConfig,
            threshold: 20,
        })
    }

});


$(function () {

    var vueDefaultData = {
        listings: [],
        inView: [],
        page: 0,
        count: 3,
        emptyListing: false,
    }

    document.querySelectorAll('[data-component="deals-listing"]').forEach(function (el) {

        var aemDefault = getVueAttrDataFromEl(el);
        var serviceURL = el.getAttribute('data-service-url');
        new Vue({
            name: 'deals-listing',
            el: el,
            data: Object.assign({}, vueDefaultData, aemDefault),
            methods: {
                getNext: function () {
                    //var list = this.listings.splice(0, 3);
                    var list = this.listings;
                    //console.log("listing", list);
                    //console.log("inView", this.inView);
                    //this.page++;
                    return list;
                },
                viewMore: function () {
                    // this.inView.push(this.getNext())
                    this.count += 6
                },
                getList: function () {
                    var _this = this
                    $.ajax({
                        url: serviceURL,
                        dataType: 'json',
                    }).done(function (resp) {
                        // console.log('data = ', resp);
                        _this.showList(resp)
                        
                        if (_this.listings.length === 0) {
                            _this.emptyListing = true;
                        } 
                        //console.log('listing',_this.listings)
                    }).fail(function (resp) {

                    });
                },
                showList: function (data) {
                    this.listings = data
                    this.inView.push(this.getNext())
                },
            },
            //    computed: {

            //    },
            watch: {
                count: function () {
                    //watch how many items display
                    var totalList = this.listings.length;
                    //console.log(this.count, "thiscount");
                    //console.log(totalList, "totalList");

                    if (this.count >= totalList) {
                        $(this.$el).find('button').hide();
                    }
                }
            },
            created: function () {
                //    var list = this.listings
                this.getList()
            },
            // mounted: function () {

            // }
        })
    })

})
$(document).ready(function() {
    var componentDOM = $('[data-component="product-listing"]');
    
    var viewportWidth = $(window).width();
    var viewportHeight = $(window).height();
    
    function debugLog (logType) {
        if (!window.location.search.includes('debug')) return;
        
        if (logType === 'log') {
            var items = [];
            Array.from(arguments).slice(1).forEach(function (item) {
                if (typeof item === 'object') {
                    items.push(JSON.parse(JSON.stringify(item)));
                } else {
                    items.push(item);
                }

            });
            console.log.apply(this, items);
        } else if (logType === 'group') {
            console.group(Array.from(arguments).slice(1)[0]);
        } else if (logType === 'groupEnd') {
            console.groupEnd(Array.from(arguments).slice(1)[0]);
        }
    }

    var COMPONENT_DEFAULT_DATA = {
        isLoading: true,
        isContentLoading: false,
        rawData: {},
        currentPageIndex: 0,
        primaryFilterSelection: ['@all'],
        secondaryFilterConfirmed: {
            slider: 0,
            multiChoice: [],
            singleChoice: '',
        },
        secondaryFilterDraft: {
            slider: 0,
            multiChoice: [],
            singleChoice: '',
        },
        secondaryFiltersVisible: false,
        secondaryFilterApplied: false,
        paramNames: {
            slider: '',
        },
        
        selectedForCompare: [
            
        ],
        isCompareToolbarExpanded: false,
        
        // static config
        itemsPerPage: isMobile() ? 9999 : 8,
        
        showCompareErrMsg: false,
    }
    
    componentDOM.each(function(index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);
        var serviceURL = el.getAttribute('data-service-url');
        
        window.components[elementID] = new Vue({
            name: 'product-listing',
            el: el,
            mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            methods: {
                handleLoadMore: function (event) {
                    this.currentPageIndex++;
                },
                handlePrimaryFilterChange: function (tagID) {
                    var context = this;
                    if (tagID === '@all') {
                        this.primaryFilterSelection = ['@all'];
                    } else {
                        // remove all first
                        this.$delete(this.primaryFilterSelection, this.primaryFilterSelection.indexOf('@all'));
                        
                        // then process the item
                        if (this.primaryFilterSelection.includes(tagID)) {
                            //  already in, remove it only if more than 1 item
                            if (this.primaryFilterSelection.length > 1) {
                                this.$delete(this.primaryFilterSelection, this.primaryFilterSelection.indexOf(tagID));
                            }
                        } else {
                            // not in, push it now
                            this.primaryFilterSelection.push(tagID);
                        }
                    }
                },
                handleSecFilterMultiSelectionChange: function (tagID) {
                    var context = this;
                    
                    // then process the item
                    if (this.secondaryFilterDraft.multiChoice.includes(tagID)) {
                        //  already in, remove it
                        this.$delete(this.secondaryFilterDraft.multiChoice, this.secondaryFilterDraft.multiChoice.indexOf(tagID));
                    } else {
                        // not in, push it now
                        this.secondaryFilterDraft.multiChoice.push(tagID);
                    }
                    
                    this.currentPageIndex = 0;
                },
                applySecFilters: function () {
                    this.secondaryFilterConfirmed = _.cloneDeep(this.secondaryFilterDraft);
                    this.secondaryFiltersVisible = false;
                    // this.applyBriefFakeLoading();
                    this.secondaryFilterApplied = true;
                    
                    // handle URL search param
                    // this.appendURLParams();
                },
                // appendURLParams: function () {
                //     var context = this;
                //     var params = new URLSearchParams(window.location.search);
                //     params.set(context.paramNames.slider, context.secondaryFilterConfirmed.slider);
                    
                //     var newURL = window.location.protocol + '//' + window.location.host + window.location.pathname + '?' + params.toString();

                //     window.history.pushState(JSON.stringify(params), '', newURL);
                // },
                handleCloseSecFilter: function () {
                    this.secondaryFilterDraft = _.cloneDeep(this.secondaryFilterConfirmed);
                    this.secondaryFiltersVisible = false;
                },
                updateCardSwiper: function () {
                    var context = this;
                    if (this._cardsSwiper) {
                        this._cardsSwiper.update();
                        this._cardsSwiper.slideTo(0);
                    }
                },
                // applyBriefFakeLoading: function () {
                //     var context = this;
                //     this.isContentLoading = true;
                //     setTimeout(function () {
                //         context.isContentLoading = false;
                //     }, 350);
                // },
                resetSecondaryFilters: function () {
                    this.secondaryFilterConfirmed.slider = _.get(this.secondaryFilterOptions, 'slider.max', 0);
                    this.secondaryFilterConfirmed.multiChoice = [];
                    this.secondaryFilterConfirmed.singleChoice = '';

                    this.secondaryFilterDraft.slider = _.get(this.secondaryFilterOptions, 'slider.max', 0);
                    this.secondaryFilterDraft.multiChoice = [];
                    this.secondaryFilterDraft.singleChoice = '';
                    
                    this.secondaryFilterApplied = false;
                },
                
                handleToolbarClicked: function () {
                    var context = this;
                    if (this.isCompareToolbarExpanded) {
                        return;
                    }
                    this.isCompareToolbarExpanded = true;
                },
                
                handleToggleProductCompare: function (productID) {
                    var productID = productID.split('?')[0];
                    
                    if (this.selectedForCompare.includes(productID)) {
                        // have to remove
                        this.$delete(this.selectedForCompare, this.selectedForCompare.indexOf(productID));
                        this.showCompareErrMsg = false;
                    } else {
                        // have to add
                        if (this.isCompareFull) {
                            this.showCompareErrMsg = true;
                            return;
                        };
                        this.selectedForCompare.push(productID);
                        
                        // auto expand the toolbar
                        this.isCompareToolbarExpanded = true;
                    }
                },
            },
            watch: {
                primaryFilterSelection: function () {
                    var context = this;
                    this.currentPageIndex = 0;
                    this.resetSecondaryFilters();
                },
                displayFitleredProducts: function () {
                    var context = this;
                    this.$nextTick(function () {
                        window.requestExternalSVGIcon(context.$el);
                        context.updateCardSwiper();
                    });
                    
                    // this.secondaryFilterDraft.slider = this.secondaryFilterOptions.slider.min;
                },
            },
            computed: {
                secondaryFilterOptions: function () {
                    var context = this;
                    var filters = {
                        slider: {
                            min: 0,
                            max: 0,
                            interval: 1,
                        },
                        level1: [],
                        level2: [],
                    }
                    
                    if (_.isEmpty(this.rawData)) return filters;
                    
                    filters.slider.interval = this.rawData.secondaryFilterSliderInterval;
                    filters.slider.min = this.rawData.secondarySliderMin;
                    filters.slider.max = this.rawData.secondarySliderMax;
                    
                    // prep for .reduce method
                    filters.level1 = {};
                    filters.level2 = {};
                    
                    var secondaryFiltersAvailable = {
                        level1: this.rawData.secondaryFilter.level1.map(function (item) { return item.tagID }),
                        level2: this.rawData.secondaryFilter.level2.map(function (item) { return item.tagID }),
                    }
                    
                    filters = this.filteredProducts_primary.reduce(function (acc, item, index) {
                        // if (index === 0) {
                        //     acc.slider.min = item.secondarySliderFilter;
                        //     acc.slider.max = item.secondarySliderFilter;
                        // } else {
                        //     acc.slider.min = Math.min(acc.slider.min, item.secondarySliderFilter);
                        //     acc.slider.max = Math.max(acc.slider.max, item.secondarySliderFilter);
                        // }
                        
                        var item_secFilters = item.secondaryFilter.map(function (item) { return item.tagID });
                        
                        var intersect_level1 = _.intersection(secondaryFiltersAvailable.level1, item_secFilters);
                        var intersect_level2 = _.intersection(secondaryFiltersAvailable.level2, item_secFilters);
                        
                        // console.log('intersect_level1 = ', intersect_level1);
                        // console.log('intersect_level2 = ', intersect_level2);
                        
                        intersect_level1.forEach(function (tagID) {
                            acc.level1[tagID] = true;
                        });
                        intersect_level2.forEach(function (tagID) {
                            acc.level2[tagID] = true;
                        });
                        
                        return acc;
                    }, filters);
                    
                    // convert obj to array, discarding the 'true' boolean value
                    filters.level1 = Object.keys(filters.level1).map(function (tagID) {
                        return context.rawData.secondaryFilter.level1.find(function (item) { return item.tagID === tagID });
                    });
                    filters.level2 = Object.keys(filters.level2).map(function (tagID) {
                        return context.rawData.secondaryFilter.level2.find(function (item) { return item.tagID === tagID });
                    });
                    
                    // interval rules: The value must be greater than 0 and can be divisible by (max - min).
                    var configuredInterval = filters.slider.interval;
                    var interval = configuredInterval;
                    if (!Number.isInteger((filters.slider.max - filters.slider.min) / configuredInterval)) {
                        var quotientInt = Math.round((filters.slider.max - filters.slider.min) / configuredInterval);
                        interval = (filters.slider.max - filters.slider.min) / quotientInt;
                    }
                    filters.slider.interval = interval;
                    
                    return filters;
                },
                displayPrimaryFilters: function () {
                    var context = this;
                    var result = [];
                    if (!('primaryFilter' in this.rawData)) return [];
                    if (this.rawData.primaryFilter.length === 0) return [];

                    result = [{
                        title: this.rawData.allTabTitle,
                        tagID: '@all',
                        // count: this.rawData.primaryFilter.reduce(function (acc, item) {
                        //     return acc+item.count;
                        // }, 0),
                        count: this.productsLength,
                        name: '@all',
                    }].concat(this.rawData.primaryFilter);

                    return result;
                },
                
                productsLength: function () {
                    if (!('productDetailInfos' in this.rawData)) return 0;
                    return this.rawData.productDetailInfos.length;
                },
                
                // products-processsing related
                filteredProducts_primary: function () {
                    var context = this;
                    var result = this.rawData.productDetailInfos||[];
                    
                    if (!this.primaryFilterSelection.includes('@all')) {
                        // process primary filter 
                        result = result.filter(function (product, index) {
                            return !!(product.primaryFilter.find(function (filterObj) {
                                return context.primaryFilterSelection.includes(filterObj.tagID);
                            }));
                        });
                    }
                    
                    return result;
                },
                
                filteredProducts_secondary: function () {
                    var context = this;
                    var result = this.filteredProducts_primary;
                    
                    var sec_slider = this.secondaryFilterConfirmed.slider;
                    var sec_multiChoice = this.secondaryFilterConfirmed.multiChoice;
                    var sec_singleChoice = this.secondaryFilterConfirmed.singleChoice;
                    
                    if (context.secondaryFilterApplied) {
                        debugLog('log', 'Process secondary filter...');
                        debugLog('log', 'sec_slider = ', sec_slider);
                        debugLog('log', 'sec_multiChoice = ', sec_multiChoice);
                        debugLog('log', 'sec_singleChoice = ', sec_singleChoice);
                        
                        // process secondary filter 
                        result = result.filter(function (product, index) {
                            var passSlider = true;
                            var passLevel1 = true;
                            var passLevel2 = true;
                            
                            debugLog('group', 'Product: ' + product.productName);
                            debugLog('log', 'product = ', product);

                            passSlider = product.secondarySliderFilter <= sec_slider;
                            debugLog('log', 'passSlider = ', passSlider);
                            
                            if (sec_multiChoice.length > 0 || sec_singleChoice) {
                                if (sec_multiChoice.length > 0) {
                                    passLevel1 = sec_multiChoice.some(function (tag) {
                                        return !!(product.secondaryFilter.find(function (item) {
                                            return item.tagID === tag;
                                        }));
                                    });
                                }
                                debugLog('log', 'passLevel1 = ', passLevel1);

                                if (sec_singleChoice) {
                                    passLevel2 = !!(product.secondaryFilter.find(function (item) {
                                        return item.tagID === sec_singleChoice;
                                    }));
                                }
                                debugLog('log', 'passLevel2 = ', passLevel2);
                            }
                            
                            debugLog('groupEnd');
                            
                            // return (passSlider && (passLevel1 || passLevel2));
                            return (passSlider && passLevel1 && passLevel2);
                        });
                    }
                    
                    return result;
                },
                
                level1_params: function () {
                    var context = this;
                    var lvl1 = _.get(context, 'rawData.secondaryFilter.level1', []);
                    var secondaryMultiChoiceItem = lvl1.filter(function (item) {
                        return context.secondaryFilterConfirmed.multiChoice.includes(item.tagID);
                    });

                    var result = (secondaryMultiChoiceItem.length > 0) ? secondaryMultiChoiceItem.map(function (item) {return item.name}).join(',') : '';
                    return result;
                },
                level2_params: function () {
                    var context = this;
                    
                    var lvl2 = _.get(context, 'rawData.secondaryFilter.level2', []);
                    var secondarySingleChoiceItem = lvl2.find(function (item) {
                        return item.tagID === context.secondaryFilterConfirmed.singleChoice;
                    });
                    var result = secondarySingleChoiceItem ? secondarySingleChoiceItem.name : '';
                    return result;
                },
                
                displayFitleredProducts: function () {
                    var context = this;
                    var result = [];

                    if (!('productDetailInfos' in this.rawData)) return [];

                    result = this.filteredProducts_secondary.slice(0, (context.itemsPerPage * (context.currentPageIndex + 1)));
                    
                    if (context.secondaryFilterApplied) {
                        // process url
                        result = result.map(function (item) {
                            var productPath = item.productPath;
                            var params = new URLSearchParams('?');
                            
                            // var nameOf_secondaryMultiChoice = context.secondaryFilterConfirmed.multiChoice.join(',');
                            // var nameOf_secondarySingleChoice = context.secondaryFilterConfirmed.singleChoice;
                            
                            var nameOf_secondaryMultiChoice = context.level1_params;
                            var nameOf_secondarySingleChoice = context.level2_params;
                            
                            if (context.paramNames.slider) {
                                params.set(context.paramNames.slider, context.secondaryFilterConfirmed.slider);
                            }
                            if (context.paramNames.level1 && nameOf_secondaryMultiChoice) {
                                params.set(context.paramNames.level1, nameOf_secondaryMultiChoice);
                            }
                            if (context.paramNames.level2 && nameOf_secondarySingleChoice) {
                                params.set(context.paramNames.level2, nameOf_secondarySingleChoice);
                            }

                            var newURL = productPath + '?' + params.toString().replace(/%2C/gi, ',');

                            return Object.assign({}, item, {
                                productPathWithQueryParam: newURL,
                                productPath: item.productPath,
                            });
                        });
                    }

                    return result;
                },
                
                
                isCompareFull: function () {
                    return this.selectedForCompare.length >= 3;
                },
                productsBeingCompared: function () {
                    var context = this;
                    return [0, 1, 2].map(function (i) {
                        var path = context.selectedForCompare[i];
                        if (context.rawData.productDetailInfos) {
                            return context.rawData.productDetailInfos.find(function (product) {
                                return product.productPath === path;
                            }) || null;
                        }
                        return null;
                    });
                },
                compareCtaUrl_full: function () {
                    var context = this;
                    
                    var queryVal = this.selectedForCompare.map(function (path) {
                        var split = path.split('/');
                        return split[split.length-1].replace('.html', '');
                    }).join(',');
                    
                    var params = new URLSearchParams('?');
                    params.set('p', queryVal);
                    
                    var newURL = context.compareCtaUrl + '?' + params.toString().replace(/%2C/gi, ',');
                    return newURL;
                },
            },
            mounted: function () {
                var context = this;
                this.$smoothReflow();
                
                if (this.$refs['comparison-toolbar']) {
                    // this.$smoothReflow({
                    //     el: this.$refs['comparison-toolbar'],
                    //     transition: 'height 0.75s',
                    // });
                    // this.$smoothReflow({
                    //     el: this.$refs['comparison-toolbar'].querySelector('.compare-full-msg'),
                    //     transition: 'height 0.75s',
                    // });
                }
                
                $.ajax({
                    url: serviceURL,
                    dataType: 'json',
                }).done(function (resp) {
                    debugLog('log', 'product-listing resp = ', resp);
                    context.isLoading = false;
                    context.rawData = resp;
                    context.secondaryFilterConfirmed.slider = _.get(resp, 'secondarySliderMax', 0);
                    context.secondaryFilterDraft.slider = _.get(resp, 'secondarySliderMax', 0);
                    
                    context.$nextTick(function () {
                        initPrimaryFilterSwiper($(context.$el).find('.filter-primary .swiper-container'));
                        this._cardsSwiper = initCardsSwiper($(context.$el));
                    });
                    
                }).fail(function (resp) {
                    
                });
            },
        });
    });

    function initPrimaryFilterSwiper(parentWrapper) {
        return new Swiper(parentWrapper.get(0), {
            slidesPerView: 'auto',
            spaceBetween: 10,
            watchOverflow: true,
        });
    }
    
    function initCardsSwiper(componentEl) {
        
        if (viewportWidth <= 767) {
            return new Swiper(componentEl.find('.product-grid .swiper-container').get(0), {
                slidesPerView: 'auto',
                spaceBetween: 10,
                // watchOverflow: true,
            });
        }
    }
    
});

$(document).ready(function() {
    var componentDOM = $('[data-component="news-listing"]');

    var viewportWidth = $(window).width();
    
    var colCount = 4;
    if (viewportWidth <= 1023) {
        colCount = 3;
    }
    if (viewportWidth <= 767) {
        colCount = 1;
    }
    
    var COMPONENT_DEFAULT_DATA = {
        isLoading: false,
        rawData: [],
        selectedYear: '',
        currentPageIndex: 0,
        isGridCalculating: false,
        colCount: colCount,
        itemsPerPage: isMobile() ? 4 : 12,
    }
    
    var QUERY_PARAM = 'year';

    componentDOM.each(function(index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);
        var serviceURL = el.getAttribute('data-service-url');
        
        window.components[elementID] = new Vue({
            name: 'news-listing',
            el: el,
            // mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            created: function () {
                var context = this;
                
                // read query string from URL
                var url = new URL(window.location.href);
                var queryFilters = [];
                if (url.searchParams.has(QUERY_PARAM)) {
                    queryFilters = url.searchParams.get(QUERY_PARAM).split(',');
                }
                
                
                $.ajax({
                    url: serviceURL,
                    dataType: 'json',
                }).done(function (resp) {
                    console.log('news-listing resp = ', resp);
                    context.isLoading = false;
                    context.rawData = resp;
                    
                    context.selectedYear = queryFilters[0] || context.rawData[0].year;

                    for(i = 0; i < context.rawData.length; i++){
						context.rawData[i].news.map(function (item) {
                        	return item.publishDate = context.dateFormat(item.publishDate)
                    	})
                    }

                }).fail(function (resp) {
                    
                });
            },
            methods: {
                handleLoadMore: function () {
                    this.currentPageIndex++;
                },
                handleSelectedYearChange: function (val) {
                    var context = this;
                    // reset page when filter changed
                    this.currentPageIndex = 0;
                    this.updateQueryString();
                },
                updateQueryString: function () {
                    var url = new URL(window.location.href);
                    var queryVal = this.selectedYear;

                    if (url.searchParams.has(QUERY_PARAM)) {
                        url.searchParams.set(QUERY_PARAM, queryVal);
                    } else {
                        url.searchParams.append(QUERY_PARAM, queryVal);
                    }

                    window.history.replaceState({}, '', url);
                },
                dateFormat: function(date){
                    if(date.slice(0,1) == 0 || date.slice(0,1) == "0"){
                        var date = date.slice(1,99)
                    }
                     return date
               },
            },
            // watch: {
            //     selectedYear: function () {
            //         var context = this;
            //         // reset page when filter changed
            //         this.currentPageIndex = 0;
            //     },
            // },
            computed: {
                filteredItems: function () {
                    var context = this;
                    var correctYearData = context.rawData.find(function (item) {
                        return item.year === context.selectedYear;
                    });
                    return correctYearData ? correctYearData.news : [];
                },
                filteredItemsPaginated: function () {
                    var context = this;
                    return this.filteredItems.slice(0, this.itemsPerPage*(this.currentPageIndex+1));
                },
                filteredItemsPaginatedGrouped: function () {
                    var context = this;
                    var grouped = [];
                    
                    for (var i = 0; i < this.colCount; i++) {
                        grouped[i] = [];
                    }
                    
                    for (var j = 0; j < this.filteredItemsPaginated.length; j++) {
                        var colIndex = j % this.colCount;
                        grouped[colIndex].push(this.filteredItemsPaginated[j]);
                    }
                    
                    return grouped;
                },
                yearOptions: function () {
                    return _.map(this.rawData, function (item) {
                        return {
                            label: item.year,
                            value: item.year,
                        }
                    });
                },
            },
            // mounted: function () {
            //     // this.$smoothReflow();
            // },
        });
    });
});


$(document).ready(function () {
    var componentDOM = $('[data-component="event-listing"]');

    var COMPONENT_DEFAULT_DATA = {
        dropdownValues: {
            category1: '',
            category2: '',
            category3: '',
            events: '',
        },
        isLoading: true,
        noResult: false,
        allData: true,
        monthYear: [],
        rawData: [],
        monthsArr: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        textLocation: 'Location',
        textCategory: 'Find By Type',
        textDate: 'All Events',
        listType: '',
        swiperActive: false,
        
        // pagination-related
        currentPageIndex: 0,
        VIEW_PER_PAGE: 6,
    }

    componentDOM.each(function(index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);
        var serviceURL = el.getAttribute('data-service-url');
        
        window.components[elementID] = new Vue({
            name: 'event-lisitng',
            el: el,
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            created: function () {
                var context = this;

                var d = new Date();
                var maxMonth = d.getMonth() + 6;
                for (i = d.getMonth(); i < maxMonth; i++){
                    var nd = new Date();
                    nd.setMonth(i);

                    var month = nd.getUTCMonth();
                    var year = nd.getUTCFullYear();
                    context.monthYear.push({
                        title: context.monthsArr[month] + " " + year,
                        value: context.monthsArr[month] + "-" + year
                    })
                }

                $.ajax({
                    // url: "http://www.mocky.io/v2/5e783d30330000773a09a1cf",
                    url: serviceURL,
                    dataType: 'json',
                }).done(function (resp) {
                    // console.log('event-listing resp = ', resp);
                    context.isLoading = false;
                    context.rawData = resp;

                    // console.log('resp = ',resp.locationFilter[0].value)

                    context.dropdownValues.events = resp.events;
                }).fail(function (resp) {
                    
                });
            },
            methods: {
                dropdownChanged: function (cat, val) {
                    this.allData = false;
                    var context = this;
                    if (cat === 'category1') {
                        this.updateQueryString();
                    } else if (cat === 'category2') {
                        this.updateQueryString();
                    }else if (cat === 'category3') {
                        this.updateQueryString();
                    }
                    
                    this.currentPageIndex = 0;
                    if(this.displayContentData.length){
                        this.noResult = false;
                    }else{
                        this.noResult = true;
                    }
                   
                },
                updateQueryString: function () {
                    var url = new URL(window.location.href);
                    var queryVal = this.dropdownValues.category3 + ',' + this.dropdownValues.category1 + ',' + this.dropdownValues.category2;
                    // console.log(this.dropdownValues.category3 + ',' + this.dropdownValues.category1 + ',' + this.dropdownValues.category2)
                    
                    if (url.searchParams.has('event-filter')) {
                        url.searchParams.set('event-filter', queryVal);
                    } else {
                        url.searchParams.append('event-filter', queryVal);
                    }

                    window.history.replaceState({}, '', url);
                },
                convertTime24to12: function (time24){
                    var tmpArr = time24.split(':'), time12;
                    if(+tmpArr[0] == 12) {
                    time12 = tmpArr[0] + ':' + tmpArr[1] + ' pm';
                    } else {
                    if(+tmpArr[0] == 00) {
                    time12 = '12:' + tmpArr[1] + ' am';
                    } else {
                    if(+tmpArr[0] > 12) {
                    time12 = (+tmpArr[0]-12) + ':' + tmpArr[1] + ' pm';
                    } else {
                    time12 = (+tmpArr[0]) + ':' + tmpArr[1] + ' am';
                    }
                    }
                    }
                    return time12;
                },
                timeSplit: function(time){
                    var getTime
                    getTime = time.split(' ')
                    getTime = getTime[0] +" "+ getTime[1] +" "+ getTime[2] +" | "+ this.convertTime24to12(getTime[getTime.length - 1]);
                    return getTime
                },
                dateFormat: function(d){
					if(d.slice(0,1) == 0 || d.slice(0,1) == '0'){
                        d = d.slice(1,99)
                    }
                    return d
                },
                viewMore: function () {
                    // this.inView.push(this.getNext())
                    // this.count += 6;
                    
                    this.currentPageIndex++;
                },
            },
            computed: {
                // showThumbnail: function () {
                //     // console.log('this.displayContentData = ', this.displayContentData)
                //     if (this.displayContentData.length === 0) return false;
                //     return ('image' in this.displayContentData[0]);
                // },
                displayContentData: function () {
                    var context = this;
                    var result = [];
                    var eventResult = [];
                    var eventVerify = false;
                    var locationVerify = false;
                    var typeVerify = false;
                    
                    if (!this.rawData.events) return [];
                    
                    // var eventsList = JSON.parse(JSON.stringify(this.rawData.events || '[]'));
                    // var eventsList = this.rawData.events;
                    var eventsList = JSON.parse(JSON.stringify(this.rawData.events));
                    
                    var d = new Date();
                    var maxMonth = d.getMonth() + 6;
                    
                    //Filter for type full-list
                    if(context.listType == "full-list"){
                        eventsList.forEach(function (eventObj) {
                            
                            var gotLocation = false;
                            var gotCategories = false;
                            var gotStartDate = false;
                            for (var j = 0; j < eventObj.locations.length; j++) {
                                if (eventObj.locations[j].value === context.dropdownValues.category1) {
                                    gotLocation = true;
                                }
                            }
                            for (var k = 0; k < eventObj.categories.length; k++) {
                                if (eventObj.categories[k].value === context.dropdownValues.category2) {
                                    gotCategories = true;
                                }
                            }

                            

                            var startDate = eventObj.startDateTime;
                            var endDate = eventObj.endDateTime;
                            var startDateSplit = startDate.split(' ')
                            var endDateSplit = endDate.split(' ')
                            var newStartDate = new Date(startDateSplit)
                            var newEndDate = new Date(endDateSplit)
                            // var dateFilter = new Date(context.dropdownValues.category3)
                            var dateFilter;
                            var dReplace = context.dropdownValues.category3;

                            if(dReplace !== "all-events"){
                                dReplace = dReplace.split('-').join(' ')
                                dateFilter = new Date('01' + ' ' + dReplace)
                            }else{
                                dateFilter = new Date(context.dropdownValues.category3)
                            }

                            if (startDateSplit[0].slice(0, 1) == 0 || startDateSplit[0].slice(0, 1) == '0') {
                                var dateBreak = startDateSplit[0].slice(1, 2)
                                startDateSplit[0] = startDateSplit[0].replace(startDateSplit[0], dateBreak)
                            }

                            var newStartDateFormat = startDateSplit.join(' ')
                            eventObj.startDateTime = eventObj.startDateTime.replace(eventObj.startDateTime, newStartDateFormat)


                            // if(newStartDate.getMonth() === dateFilter.getMonth()){
                            //     gotStartDate = true;
                            // }

                            if (newEndDate >= d && dateFilter.getMonth() >= newStartDate.getMonth() && newEndDate.getMonth() >= dateFilter.getMonth()) {
                                gotStartDate = true;
                            }

                            if (gotStartDate || context.dropdownValues.category3 === "all-events") {
                                eventVerify = true;
                            } else {
                                eventVerify = false;
                            }

                            if (gotLocation || context.dropdownValues.category1 === "all-location") {
                                locationVerify = true;
                            } else {
                                locationVerify = false;
                            }

                            if (gotCategories || context.dropdownValues.category2 === "all-type") {
                                typeVerify = true;
                            } else {
                                typeVerify = false;
                            }

                             console.log('eventVerify = ',eventVerify, '/', 'locationVerify = ', locationVerify, '/', 'typeVerify = ', typeVerify)

                            if (eventVerify && locationVerify && typeVerify) {
                                eventResult.push(eventObj)
                            }
                        });
                    }

                    //Filter for type summarised-list
                    if(context.listType == "summarised-list"){
                        for(i = 0; i < eventsList.length; i++){
                            var startDate = new Date(eventsList[i].startDateTime);
                            if(startDate >= d && eventResult.length < 3){
                                eventResult.push(eventsList[i])
                            }
                        }
                        eventResult.map(function (item) {
							return item.startDateTime = context.dateFormat(item.startDateTime)
                        })
                    }

                    //Filter for type manual-list
                    if(context.listType == "manual-list"){
                        eventResult = eventsList;
						eventResult.map(function (item) {
							return item.startDateTime = context.dateFormat(item.startDateTime)
                        })
                    }
                    
                    eventResult.map(function (item) {
                        return item.startDateTime = context.timeSplit(item.startDateTime)
                        
                    })

                   
                    return eventResult;
                    
                },
                dropdownOptions: function () {
                    var context = this;
                    var allEvent =  [];
                    allEvent = [{
                        label: this.textDate,
                        value: 'all-events',
                    }];
                    allLocation = [{
                        label: this.textLocation,
                        value: 'all-location',
                    }];
                    allType = [{
                        label: this.textCategory,
                        value: 'all-type',
                    }];
                    if (!this.rawData.locationFilter) return { category1: [], category2:[], category3:[]}
                    this.dropdownValues.category1 = allLocation[0].value;
                    this.dropdownValues.category2 = allType[0].value;
                    this.dropdownValues.category3 = allEvent[0].value;
                    return {
                        category1: allLocation.concat(this.rawData.locationFilter.map(function (item) {
                            return {
                                label: item.title,
                                value: item.value,
                            }
                        })),
                        category2: allType.concat(this.rawData.categoryFilter.map(function (item) {
                            return {
                                label: item.title,
                                value: item.value,
                            }
                        })),
                        category3: allEvent.concat(this.monthYear.map(function (item) {
                            return {
                                label: item.title,
                                value: item.value,
                            }
                        })),
                    }
                },
                
                displayData_paginated: function () {
                    var context = this;
                    if(this.displayContentData.length){
                        this.swiperActive = true;
                    }
                    
                    if(context.listType == "full-list"){
                        return this.displayContentData.slice(0, ((this.currentPageIndex + 1) * this.VIEW_PER_PAGE));
                    }else{
                        return this.displayContentData
                    }
                    
                },
                isLoadMoreBtnHidden: function () {
                    return (this.displayData_paginated.length >= this.displayContentData.length);
                },
                
            },
            watch: {
                // count: function () {
                //     //watch how many items display
                //     var totalList = this.displayContentData.length;
                //     //console.log(this.count, "thiscount");
                //     // console.log(totalList, "totalList");

                //     if (this.count >= totalList) {
                //         $(this.$el).find('button').hide();
                //     }
                // }

                swiperActive:function (){
                        if(this.swiperActive && this.listType !== "full-list"){
                            initEventSwiper($(this.$el).find('.result-container'),this.listType, this.displayContentData.length);
                        }
                    }
            },
            
        })
    })

    function initEventSwiper(swiperParents, listType, listLength) {

        
        return new Swiper(swiperParents.find('.swiper-container').get(0), {
            // logic here
            slidesPerView: 'auto',
            spaceBetween: 39,
            slidesPerGroup: 3,
            loop: listType == 'manual-list' && listLength > 3 ? true: false,
            loopFillGroupWithBlank: true,
            watchOverflow: true,
             
            pagination: {
                el: swiperParents.find('.swiper-pagination'), // correct
                clickable: true
            },
            breakpoints: {
                1024:{
                    slidesPerGroup: 1,
                    spaceBetween: 17,
                }
            }
            
        })

    }

})
$(document).ready(function() {
    var componentDOM = $('[data-component="director-listing"]');

    var COMPONENT_DEFAULT_DATA = {
        dropdownValues: {
            category1: '',
            category2: '',
        },
        isLoading: true,
        rawData: [],
    }

    componentDOM.each(function(index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);
        var serviceURL = el.getAttribute('data-service-url');
        
        window.components[elementID] = new Vue({
            name: 'director-lisitng',
            el: el,
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            created: function () {
                var context = this;
                
                // read query string from URL
                var url = new URL(window.location.href);
                var queryFilters = [];
                if (url.searchParams.has('director-filter')) {
                    queryFilters = url.searchParams.get('director-filter').split(',');
                }
                
                $.ajax({
                    url: serviceURL,
                    dataType: 'json',
                }).done(function (resp) {
                    console.log('director-listing resp = ', resp);
                    context.isLoading = false;
                    context.rawData = resp;
                    
                    // automatically select values
                    context.dropdownValues.category1 = queryFilters[0] || _.get(resp, '[0].value', '');
                    context.dropdownValues.category2 = queryFilters[1] || _.get(context.category2_options, '[0].value', '');
                }).fail(function (resp) {
                    
                });
            },
            methods: {
                dropdownChanged: function (cat, val) {
                    var context = this;
                    if (cat === 'category1') {
                        this.dropdownValues.category2 = _.get(this.category2_options, '[0].value', '');
                        this.updateQueryString();
                    } else if (cat === 'category2') {
                        this.updateQueryString();
                    }
                },
                updateQueryString: function () {
                    var url = new URL(window.location.href);
                    var queryVal = this.dropdownValues.category1 + ',' + this.dropdownValues.category2;
                    console.log('queryVal = ',queryVal)
                    
                    if (url.searchParams.has('director-filter')) {
                        url.searchParams.set('director-filter', queryVal);
                    } else {
                        url.searchParams.append('director-filter', queryVal);
                    }

                    window.history.replaceState({}, '', url);
                },
            },
            watch: {
                /* Below watch functions are not used anymore, kept for backup, can delete safely after Director Listing has been tested (22 Nov 2019) */
                // 'dropdownValues.category1': function (newValue) {
                //     var context = this;
                //     context.dropdownValues.category2 = _.get(this.category2_options, '[0].value', '');
                //     this.updateQueryString();
                // },
                // 'dropdownValues.category2': function (newValue) {
                //     this.updateQueryString();
                // }
            },
            computed: {
                showThumbnail: function () {
                    if (this.displayContentData.length === 0) return false;
                    return ('image' in this.displayContentData[0]);
                },
                displayContentData: function () {
                    var context = this;
                    var result = [];
                    var data_lvl1 = this.rawData.find(function (item) { return item.value === context.dropdownValues.category1 });
                    
                    if (!data_lvl1) return result;
                    
                    var data_lvl2 = data_lvl1.list.find(function (item) { return item.value === context.dropdownValues.category2 });
                    
                    if (!data_lvl2) return result;
                    
                    return data_lvl2.directors;
                },
                dropdownOptions: function () {
                    var context = this;
                    console.log('this.rawData = ', this.rawData)
                    
                    return {
                        category1: this.rawData.map(function (item) {
                            return {
                                label: item.title,
                                value: item.value,
                            }
                        }),
                        category2: this.category2_options,
                    }
                },
                category2_options: function () {
                    var context = this;
                    var detailsObj = this.rawData.find(function (item) { return item.value === context.dropdownValues.category1 });
                    
                    if (!detailsObj) return [];
                    
                    return detailsObj.list.map(function (item) {
                        return {
                            label: item.title,
                            value: item.value,
                        }
                    });
                },
                category2Title: function () {
                    var context = this;
                    if (context.dropdownOptions.category2.length === 0) return '';
                    var selectedCategory2 = context.dropdownOptions.category2.find(function (item) {
                        return item.value === context.dropdownValues.category2;
                    });
                    if (selectedCategory2) return selectedCategory2.label;
                    return '';
                },
            },
        });
    });
});

$(document).ready(function () {
    var componentDOM = $('[data-component="article-listing"]');

    var COMPONENT_DEFAULT_DATA = {
        isLoading: false,
        rawData: [],
        currentPageIndex: 0,
        
        initialDisplayCount: isMobile() ? 3 : 4,
        subsequenceDisplayCount: isMobile() ? 3 : 6,
    }
    
    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);
        var serviceURL = el.getAttribute('data-service-url');
        
        window.components[elementID] = new Vue({
            name: 'article-listing',
            el: el,
            // mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            created: function () {
                var context = this;
                
                $.ajax({
                    url: serviceURL,
                    dataType: 'json',
                }).done(function (resp) {
                    context.isLoading = false;
                    context.rawData = resp;
                }).fail(function (resp) {

                });
            },
            methods: {
                handleLoadMore: function () {
                    this.currentPageIndex++;
                },
            },
            watch: {
                
            },
            computed: {
                allItems: function () {
                    return this.rawData;
                },
                displayItems: function () {
                    return this.rawData.slice(0, this.initialDisplayCount + (this.subsequenceDisplayCount* this.currentPageIndex));
                },
            },
            // mounted: function () {
            //     // this.$smoothReflow();
            // },
        });
    });
});


$(function() {
    jsSocials.shares.whatsapp = {
        shareUrl: "https://api.whatsapp.com/send?&text={url}",
        countUrl: "",
        getCount: function(data) {
            return data.count;
        }
    };

    document.querySelectorAll('.cmp-social-share').forEach(function(el) {
        var shareContent = el.querySelector('.social-share-content')

        if (!shareContent) return;

        var shareOptions = shareContent.dataset.shareOptions || 'messenger';

        var buttonsEl = el.querySelector('.social-buttons')
        $(buttonsEl).jsSocials({
            shares: shareOptions.split(','),
            showCount: false,
        });

    })
})
$(document).ready(function () {

  var componentDOM = $('[data-component="news-tiles"]');

  componentDOM.each(function (index, el) {
    //var $el = $(el);
    //var newsTiles = $el.find('.new-tiles-container');


    var $el = $(el);
    var elementID = el.id;
    //var vueDefaultData = getVueAttrDataFromEl(el);

    window.components[elementID] = new Vue({
      name: 'news-tiles',
      el: el,
      // data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
      methods: {
        detectNumSlides: function () {
          var numSlides = $el.find('.swiper-container .swiper-slide').length;
          if (numSlides < 4) {
            $el.find('.news-tile-pagination').addClass('sm:hidden')
          }
          if (numSlides == 1 ) {
            $el.find('.news-tile-pagination').addClass('hidden')
          }

        } 

      },
      created: function () {
        this.detectNumSlides();
      },
      //  computed: {

      // },
      mounted: function () {
        initNewsTilesSwiper($(this.$el).find('.new-tiles-container'));
      },
    })

  });




  function initNewsTilesSwiper(swiperParents) {

    return new Swiper(swiperParents.find('.swiper-container'), {
      slidesPerView: 'auto',
      spaceBetween: 40,
      allowTouchMove: false,
      simulateTouch: false,
      pagination: {
        el: swiperParents.find('.swiper-pagination'), // correct
        clickable: true,
      },
      breakpoints: {
        1280: {
          simulateTouch: false,
          allowTouchMove: false,
//          slidesPerView: 4,
          slidesPerView: 'auto',
          spaceBetween: 40,
        },
        1024: {
          simulateTouch: true,
          allowTouchMove: false,
          slidesPerView: 'auto',
          spaceBetween: 17,
        },
        768: {
          simulateTouch: false,
          allowTouchMove: true,
          slidesPerView: 'auto',
          spaceBetween: 17,
        }
      }
    });

  }


});
$(document).ready(function () {
    var componentDOM = $('[data-component="statistic"]');
    var windowSize = $(window).width();
    
    componentDOM.each(function (index, el) {
        componentDOM.find('.statistics-item').each(function ( index, itemEl) {
            
            // removed logic
            /* var figureDesc = $(itemEl).find('.figure-desc');
            figureDesc.addClass('absolute');
            var figureBoxWidth = $(itemEl).find('.figure-box').outerWidth();
            var figureDescWidth = figureDesc.outerWidth();
            figureDesc.css('width', figureBoxWidth + 'px');
            figureDesc.removeClass('absolute'); */
            
            if (windowSize < 1024) {
                $(itemEl).addClass('block w-full');
            } else {
                $(itemEl).addClass('flex flex-col');
            }
        });
    });
        
    

 
    
});
$(document).ready(function () {
    var componentDOM = $('[data-component="topic"]');
    
    // default data of component, if not provided via "data-vue-default" attribute
    var COMPONENT_DEFAULT_DATA = {
        activeTab: '',
    }

    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);
        
        // this component will not run in editor mode
        if (window.isEditorMode()) {
            //$(el).find('[v-cloak]').removeAttr('v-cloak');
            $(el).removeAttr('v-cloak').find('[v-cloak]').removeAttr('v-cloak');
            return;
        }
        
        

        // for each accordion we found in the page, initialize it as Vue instance
        window.components[elementID] = new Vue({
            name: 'topic',
            el: el,
            mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            // methods: {

            // },
            // computed: {

            // },
            mounted: function () {
                // smoothr reflow is to make height: auto transition possible 
                this.$smoothReflow();
                initTopicTabsSwiper($(this.$el).find('.topic-container'));
                // detect hash and activate the correct section if needed
                var hash = window.location.hash;
                var tabBtnEl = $(this.$el).find('.topic-tab-link[href="' + hash + '"]');
                
                if ( tabBtnEl.length > 0 ) {
                    // element found in this component
                    this.activeTab = hash.substr(1);
                    this.$nextTick(function () {
                        window.scrollToElement(tabBtnEl);
                    });
                }
            },
        });
    });

    function initTopicTabsSwiper(swiperParents) {
       
        
        return new Swiper(swiperParents.find('.swiper-container').get(0), {
            slidesPerView: 'auto',
            spaceBetween: 10,
            allowTouchMove: false,
            pagination: false,
            breakpoints: {
                1280: {
                    allowTouchMove: true,
                    slidesPerView: 'auto',
                    spaceBetween: 10,
                },
                1024: {
                    allowTouchMove: true,
                    slidesPerView: 'auto',
                    spaceBetween: 10,
                },
                768: {
                    allowTouchMove: true,
                    slidesPerView: 'auto',
                    spaceBetween: 10,
                },
                640: {
                    allowTouchMove: true,
                    slidesPerView: 'auto',
                    spaceBetween: 10,
                },
                320: {
                    allowTouchMove: true,
                    slidesPerView: 2,
                    spaceBetween: 10,
                }
			},
			threshold: 20,
        });
    }

});

$(document).ready(function () {
    var componentDOM = $('[data-component="promo-tiles"]');
    componentDOM.each(function (index, el) {

        // breakpoint where swiper will be destroyed
        // and switches to a dual-column layout
        //const breakpoint = window.matchMedia('(min-width:1600px)');

        // keep track of swiper instances to destroy later
        //let mySwiper;
        
        var $el = $(el);
        var promoTiles = $el.find('.promo-tiles-container');

        //only for carouselTile
        var numSlides = $el.find('.carouselTile .swiper-slide').length;
        if (numSlides <= 1) {
            $el.find('.carouselTile-pagination').addClass('hidden');
        }

        var autoplayDuration = $el.find('.carouselTile').attr('data-autoplay');


        // Truncate title for IE 
        var checkIfIE = window.navigator.userAgent;
        var msie = checkIfIE.indexOf("MSIE");

        if(msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)) {
            var carouselTile = $(el).find('.carouselTile');
            var tileBackgroundColor = $(carouselTile).css("background-color");
            
            var css = '.promo-tiles .promo-tiles-container .carouselTile .textDesc.line-clamp::after {background-color: '+ tileBackgroundColor +';}'
            let style = document.createElement('style')
            style.type = "text/css"
            style.appendChild(document.createTextNode(css))
            document.head.appendChild(style)
        }

        // var showChar = 77;
        // var ellipsesText = "...";
        // var textToTruncate = $(el).find('.carouselTile .swiper-slide .item-title');

        // $(textToTruncate).each(function () {
        //     var content = $(this).html();
            
        //     if (content.length > showChar) {
        //         var truncateContent = content.substr(0, showChar);
        //         var html = truncateContent + ellipsesText
        //         $(this).html(html)
        //     }
        // })

        
        

        // const breakpointChecker = function () {

        //     // if larger viewport and multi-row layout needed
        //     if (breakpoint.matches === true) {
        //         // clean up old instances and inline styles when available
        //         if (mySwiper !== undefined) mySwiper.destroy(true, true);
        //         // or/and do nothing
        //         return carouselSwiper();

        //         // else if a small viewport and single column layout needed
        //     } else if (breakpoint.matches === false) {
        //         // fire small viewport version of swiper
        //          carouselSwiper();
        //         return enableSwiper();

        //     }

        // }



        var enableSwiper = function () {
            mySwiper = new Swiper(promoTiles.find('.multiTiles'), {
                slidesPerView: 1,
                spaceBetween: 20,
                allowTouchMove: false,
                freeMode: false,
                pagination: {
                    el: $el.find('.multiTiles-pagination'),
                    clickable: true, 
                },
                breakpoints: {
                    1024: {
                        allowTouchMove: false,
                        slidesPerView: 1,
                        spaceBetween: 20,
                    },
                    640: {
                        allowTouchMove: true,
                        slidesPerView: 1,
                        spaceBetween: 20, 
                    }
                },
            });

        };


        var carouselSwiper = function () {
            var autoplayConfig = (autoplayDuration && numSlides > 1 && autoplayDuration > 0) ? {
                delay: parseFloat(autoplayDuration) * 1000,
                disableOnInteraction: false,
            } : false;

            var infinite = (numSlides > 1) ? {
                loop: true,
            } : false;

            mySwiper2 = new Swiper(promoTiles.find('.carouselTile'), {
                slidesPerView: 1,
                spaceBetween: 0,
                allowTouchMove: true,
                freeMode: false,
                loop: infinite,
                pagination: {
                    el: $el.find('.carouselTile-pagination'),
                    clickable: true,
                },
                breakpoints: {
                    1024: {
                        allowTouchMove: true,
                        slidesPerView: 'auto',
                        spaceBetween: 20,
                    },

                },
                autoplay: autoplayConfig,
            });
            
        };

        

        carouselSwiper();
        enableSwiper();


        // keep an eye on viewport size changes
        // breakpoint.addListener(breakpointChecker);

        // kickstart
        // breakpointChecker();

    });

    
});
$(function () {

    var vueDefaultData = {
        serviceUrl: '',
        query: '',
        lastSearchedQuery: '',
        result: [],
        itemsPerPage: 10,
        currentPage: 1,
        searching: true,
        matchIgnoreText: true,
        arrIgnoreText: [],

        ignoredText: '',

        /*
            CR: clicking on the "clear" function should only clear the input,
            displayed results SHOULD NOT be cleared.
            Quick & dirty solution: Introduce a new data "shouldIgnoreNextQueryChange" that modifies how the "query" in "watch" function.
        */
        shouldIgnoreNextQueryChange: false,
    }



    document.querySelectorAll('[data-component="search-result-component"]').forEach(function (el) {

        var aemDefault = getVueAttrDataFromEl(el);
        new Vue({
            name: 'search-result-component',
            el: el,
            data: Object.assign({}, vueDefaultData, aemDefault),
            watch: {
                queryFiltered: function (value, oldValue) {
                    // var _this = this;
                    // var queryString = _this.query;


                    if (oldValue && value === '') {
                        return;
                    }

                    if (this.shouldIgnoreNextQueryChange) {
                        this.shouldIgnoreNextQueryChange = false;
                        return;
                    }
                    
                    if (!value && value.length < 3) {
                        this.lastSearchedQuery = '';
                        this.result = [];
                        return;
                    } else {
                        this.triggerSearch();
                    }
                },
            },
            computed: {
                filteredResults: function () {
                    var result = this.result.slice();
                    var noOfItems = this.currentPage * this.itemsPerPage;
                    if (noOfItems > this.result.length) return this.result;

                    return result.splice(0, noOfItems);
                },
                hasNext: function () {
                    return this.currentPage * this.itemsPerPage < this.result.length
                },
                ignoredTextArr: function () {
                    return this.ignoredText.toLowerCase().split(',').map(function (val) {
                        return val.trim();
                    });
                },
                queryFiltered: function () {
                    var query = this.query;
                    
                    
                    // filter ignore
                    // this.ignoredTextArr.forEach(function (item) {
                    //     query = query.replace(new RegExp(item, 'gi'), '');
                    // });
                    
                    
                    // trim it
                    query = query.trim();
                    
                    return query;
                },
            },
            methods: {
                triggerSearch: function () {
                    var context = this;
                    
                    if (this.query.length < 3) {
                        context.searching = false;
                        return;
                    }

                    this.searching = true;
                    
                    $.ajax({
                        url: context.serviceUrl + '?keyword=' + encodeURIComponent(context.queryFiltered),
                        dataType: 'json',
                        success: function (resp) {
                            context.lastSearchedQuery = context.queryFiltered;
                            context.result = resp || [];
                            
                            digitalData.page = {
                                pageInfo: {
                                    onsiteSearchTerm: context.queryFiltered,
                                    onsiteSearchResults: context.result.length
                                }
                            }
                            
                            this.searching = false;

                            $('.search-result-summary').removeClass('hidden')
                        },
                        error: function (err) {
                            this.searching = false;
                            console.log('error', err);
                        }
                    })
                },
                handleSearch: function () {
                    var url = new URL(window.location.href);
                    url.searchParams.set('q', this.query);
                    window.history.replaceState({}, '', url);
                },
                clearSearch: function () {
                    // to let the "watch" trigger to not clear the search result
                    this.shouldIgnoreNextQueryChange = true;

                    this.query = '';
                    // this.lastSearchedQuery = '';
                    // this.result = [];

                    if (this.$refs['search-input']) {
                        this.$refs['search-input'].focus();
                    }
                },
                
                injectInputValue: function () {
                    var searchInput = this.$refs['search-input'];
                    if(!$(searchInput).attr('value')) {
                        $(searchInput).attr('value', this.query);
                    }
                }
                // checkIgnoreText: function () {
                //     var getIgnoreText = $(el).data("ignore-keywords");

                //     if (!getIgnoreText == 'undefined') {
                //         this.arrIgnoreText = getIgnoreText.toLowerCase().split(',').map(function (val) {
                //             return val.trim()
                //         });
                //     }

                //     //console.log(arrIgnoreText, "aa");
                // },
            },
            mounted: function () {
                var search = new URLSearchParams(window.location.search);
                this.query = search.get('q') || '';

                //to inject input value - IE bug
                this.injectInputValue();
                
                // this.checkIgnoreText();
            }
        })
    })

})
$(document).ready(function () {
    var componentDOM = $('[data-component="cards"]');

    var COMPONENT_DEFAULT_DATA = {
        desktopDisabled:'',
        itemList: '',
        autoplayDuration: '',
    }
  
    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);

        // for each card we found in the page, initialize it as Vue instance
        window.components[elementID] = new Vue({
            name: 'cards',
            el: el,
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            // methods: {

            // },
            // computed: {

            // },
            mounted: function () {
                initCardsSwiper($(this.$el).find('.cards-container'), this.desktopDisabled, this.itemList, this.autoplayDuration);
            },
        })
    });

    function initCardsSwiper(swiperParents, desktopDisabled, itemList, autoplayDuration) {
        
        var autoplayConfig = (autoplayDuration && autoplayDuration > 0) ? {
            delay: parseFloat(autoplayDuration) * 1000,
            disableOnInteraction: false,
        } : false;

        var loopConfig = (autoplayDuration && autoplayDuration > 0) ? true : false;

        return new Swiper(swiperParents.find('.swiper-container').get(0), {
            // logic here
            observer: true,
            observeParents: true,
            slidesPerView: 'auto',
            slidesPerGroup: 3,
            spaceBetween: 39,
            // allowTouchMove: desktopDisabled === 'cards-desktop-disabled' ? false : true ,
            watchOverflow: true,
            loop: desktopDisabled === 'cards-desktop-disabled' || itemList < 4 ? false : true,
      		loopFillGroupWithBlank: true,
            pagination: {
            el: swiperParents.find('.swiper-pagination'), // correct
            clickable: true
            },
            breakpoints: {
                1280: {
                    slidesPerView: 'auto',
                    slidesPerGroup: 3,
                    spaceBetween: 39,
                    loop: desktopDisabled === 'cards-desktop-disabled' || itemList < 4 ? false : true,
      				loopFillGroupWithBlank: true,
                    }, 
                1024: {
                    slidesPerView: 'auto',
                    slidesPerGroup: 1,
                    spaceBetween: 17,
                    loop: loopConfig,
                    loopFillGroupWithBlank: false,
                },
                768:{
                    slidesPerView: 'auto',
                    spaceBetween: 17,
                    slidesPerGroup: 1,
                    loop: loopConfig,
      				loopFillGroupWithBlank: false,
                },
                640:{
                    slidesPerView: 'auto',
                    spaceBetween: 17,
                    slidesPerGroup: 1,
                    loop: loopConfig,
      				loopFillGroupWithBlank: false,
                }
            },
            autoplay: autoplayConfig,
            threshold: 20,
        })

    }

});
$(function () {
    var componentDOM = $('[data-component="eformpopup"]');

    var COMPONENT_DEFAULT_DATA = {
        isVisible: false,
        link: '#',
        customerType: null
    };

    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);

        window.components[elementID] = new Vue({
            name: 'eformpopup',
            el: el,
            mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            methods: {
                togglePopup: function() {
                    this.isVisible = !this.isVisible;
                },
                redirectToForm: function() {
                    console.log(this.productData);
                    var self = this;
                    var queryString = "";
                    switch (this.customerType) {
                        case "isNotExisting":
                        case "isExistingNoClicks":
                            Object.keys(this.productData).forEach(function (key, idx) {
                                var delimiter = idx == 0 ? '?' : '&';
                                if (typeof self.productData[key] != null) {
                                    var kv = delimiter + key + "=" + self.productData[key];
                                    queryString += kv;
                                }
                            });
                            break;
                        case "isExisting":
                            this.eFormUrl = "https://www.cimbclicks.com.my/clicks/#/";
                            break;
                    }

                    window.location.href = this.eFormUrl + queryString;
                }
            },
            computed: {
                existingNoClicksUrl: function() {
                    var self = this;
                    var queryString = "";
                    Object.keys(this.productData).forEach(function (key, idx) {
                        var delimiter = idx == 0 ? '?' : '&';
                        if (typeof self.productData[key] != null) {
                            var kv = delimiter + key + "=" + self.productData[key];
                            queryString += kv;
                        }
                    });
                    return this.eFormUrl + queryString;
                } 
            }
        });

        var vueInstance = window.components[elementID];

        window.triggerExternalSiteOverlay = function (options) {
            /* Expected options:
            	{
            		link: '',
            	}
            */
            vueInstance.isVisible = true;
            vueInstance.link = options.link;
        }
    });

});
$(document).ready(function () {
    var componentDOM = $('[data-component="external-site-popup"]');

    var COMPONENT_DEFAULT_DATA = {
        isVisible: false,
        isExternalPopup: false,
        isInternalPopup: false,
        rawHtmlTemp: '',
        link: '#',
        whitelistString: '',
    }

    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);

        window.components[elementID] = new Vue({
            name: 'external-site-popup',
            el: el,
            mixins: [SmoothReflow],
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            computed: {
                whitelistArray: function () {
                    var resultObj = {};
                    // remove duplicates, and trim leading www so that we can treat www and non-www as equal
                    // also trim url protocol, giving author the flexibility to include http:// or https:// or not
                    this.whitelistString.split(',').forEach(function (item) {
                        resultObj[trimLeadingWWW(trimUrlProtocol(item))] = true;
                    });
                    return Object.keys(resultObj);
                },
            },
        });
        
        var vueInstance = window.components[elementID];
        
        window.triggerExternalSiteOverlay = function (options) {
            /* Expected options: { link: '' }
            */
           vueInstance.isVisible = true;
            if(options.internal == "modalpopup"){
                vueInstance.isExternalPopup = false;
                vueInstance.isInternalPopup = true;
               
            }else{
                vueInstance.isInternalPopup = false;
                vueInstance.isExternalPopup = true;
                vueInstance.link = options.link;
            }
           
        }
        
        function trimUrlProtocol (str) {
            return str.replace(/^http:\/\//, '').replace(/^https:\/\//, '');
        }
        function trimLeadingWWW (str) {
            return str.replace(/^www./, '');
        }

        if(!(window.ActiveXObject) && "ActiveXObject" in window){
            // This is for IE fix
			$('a').on('click', (function (event) {
                var isInternal = $(this).data('modal');//var for check internal popup
                var href = $(this).attr('href');

                if(isInternal == "modalpopup"){// internal
                    // var wcm = window.getCookie('wcmmode');
                    // var hrefSplit = href.split(/\.(?=[^\.]+$)/);
                    // var tempPath;
                    // if(wcm == "preview" || wcm == "edit"){
                    //     tempPath = hrefSplit[0] + '/jcr:content/root.html?wcmmode=disabled';
                    // }else{
                    //     tempPath = hrefSplit[0] + '/jcr:content/root.html';
                    // }
                  
                    // event.preventDefault();

                    // $.ajax({
                    //     url: tempPath,                        
                    // }).done(function (resp) {
                    //     // console.log('temp = ', resp);
                    //     COMPONENT_DEFAULT_DATA.rawHtml = resp
                    //     $('.internal-popup-temp').html(COMPONENT_DEFAULT_DATA.rawHtml)
                       
                    // }).fail(function (resp) {
                        
                    // });

                    // window.triggerExternalSiteOverlay({
                    //     link: href,
                    //     internal: isInternal,
                    // });
                }else{//external
                    var isMail = href.split(':')[0];
                    var isTel = href.split(':')[0];
        
                    if (href && (href[0] === '#' || href[0] === '/') || isMail === 'mailto' || isTel === 'tel') {
                        // hash link, mailto, tel, considered as internal
                        return;
                    }
                    
                    var url = new URL(href);
                    // console.log('url = ', url);
                    var urlHostname = trimLeadingWWW(url.hostname);
                    var currentHostname = trimLeadingWWW(window.location.hostname);
        
                    var whitelistArr = vueInstance.whitelistArray;
        
                    // console.log('currentHostname = ', currentHostname);
                    // console.log('urlHostname = ', urlHostname);
                    // console.log('whitelistArr = ', whitelistArr);
        
                    if (
                        currentHostname !== urlHostname &&
                        !whitelistArr.includes(urlHostname)
                    ) {
                        event.preventDefault();
                        window.triggerExternalSiteOverlay({
                            link: href,
                            internal: isInternal,
                        });
                    }
                }
            }));
        }else{
            //Non IE
			 $(document).on('click', 'a', (function (event) {
                var isInternal = $(this).data('modal');//var for check internal popup
                var href = $(this).attr('href');
                
                if(isInternal == "modalpopup"){// internal
                    // var wcm = window.getCookie('wcmmode');
                    // var hrefSplit = href.split(/\.(?=[^\.]+$)/);
                    // var tempPath;
                    // if(wcm == "preview" || wcm == "edit"){
                    //     tempPath = hrefSplit[0] + '/jcr:content/root.html?wcmmode=disabled';
                    // }else{
                    //     tempPath = hrefSplit[0] + '/jcr:content/root.html';
                    // }
                  
                    // event.preventDefault();

                    // $.ajax({
                    //     url: tempPath,                        
                    // }).done(function (resp) {
                    //     // console.log('temp = ', resp);
                    //     COMPONENT_DEFAULT_DATA.rawHtml = resp
                    //     $('.internal-popup-temp').html(COMPONENT_DEFAULT_DATA.rawHtml)
                       
                    // }).fail(function (resp) {
                        
                    // });

                    // window.triggerExternalSiteOverlay({
                    //     link: href,
                    //     internal: isInternal,
                    // });
                    
                }else{// external
                    var isMail = href.split(':')[0];
                    var isTel = href.split(':')[0];
        
                    if (href && (href[0] === '#' || href[0] === '/') || isMail === 'mailto' || isTel === 'tel') {
                        // hash link, mailto, tel, considered as internal
                        return;
                    }
                    
                    var url = new URL(href);
                    // console.log('url = ', url);
                    var urlHostname = trimLeadingWWW(url.hostname);
                    var currentHostname = trimLeadingWWW(window.location.hostname);
        
                    var whitelistArr = vueInstance.whitelistArray;
        
                    // console.log('currentHostname = ', currentHostname);
                    // console.log('urlHostname = ', urlHostname);
                    // console.log('whitelistArr = ', whitelistArr);
        
                    if (
                        currentHostname !== urlHostname &&
                        !whitelistArr.includes(urlHostname)
                    ) {
                        event.preventDefault();
                        window.triggerExternalSiteOverlay({
                            link: href,
                            internal: isInternal,
                        });
                    }
                }
            }));
        }
    });

}); 

$(function() {
    function round_number(numbers, decimal) {
        return Math.round(numbers * Math.pow(10, decimal)) / Math.pow(10, decimal);
    }

    function PV(rate, periods, payment, future, type) {
        // Initialize type
        var type = (typeof type === 'undefined') ? 0 : type;
        // Evaluate rate and periods (TODO: replace with secure expression evaluator)
        rate = eval(rate);
        periods = eval(periods);
        // Return present value
        if (rate === 0) {
            return - payment * periods - future;
        } else {
            return (((1 - Math.pow(1 + rate, periods)) / rate) * payment * (1 + rate * type) - future) / Math.pow(1 + rate, periods);
        }
    }

    var tempalteCalcValue = document.querySelector('[data-template-id="calc-value"]');
    var CalcValue = {
        name: 'calc-value',
        template: tempalteCalcValue && tempalteCalcValue.innerHTML,
        props: {
            title: String,
            value: {
                type: [Number, String],
                default: ''
            },
            color: {
                default: 'default',
                type: String,
            },
            edit: Boolean,
            inputType: {
                default: 'float',
                type: String,
                validator: function (value) {
                    return ['float', 'integer'].indexOf(value) !== -1
                }
            },
            unit: String,
            unitPosition: {
                default: 'left',
                value: String,
                validator: function (value) {
                    return ['left', 'right'].indexOf(value) !== -1
                }
            }
        },
        data: function() {
            return {
                edited: false,
                inputValue: 0,
                prevInputValue: 0,
            }
        },
        watch: {
            inputValue: function(val) {
                this.$emit('input', val.toString().replace(/,/g,''))
            }
        },
        computed: {
            isFloat: function() {
                return this.inputType === 'float'
            },
            isEditableAndEdited: function() {
                return this.edit && this.edited
            }
        },
        methods:{
            handleInputChange: function (event) {
                if (event.key !== 'Backspace' && isNaN(parseInt(event.key)) && event.key !== 'Unidentified') {
                    this.inputValue = this.prevInputValue;
                } else {
                    this.prevInputValue = this.inputValue
                }
                
                this.edited = true;

                this.formatInputValue()
            },
            formatInputValue: function() {
                if (this.isFloat)
                    this.inputValue = numeral(this.inputValue.toString().replace(/\./g,'').replace(/,/g,'') / 100).format('0,0.00')
            },
            initialFormat: function() {
                if (this.isFloat)
                    this.inputValue = numeral(this.inputValue).format('0,0.00')
            },
            focusInput: function() {
                if (this.$refs.input) {
                    this.$refs.input.focus()
                }
            },
            moveCursorToEnd: function () {
                var el = event.target;
                if (typeof el.selectionStart == "number") {
                    el.selectionStart = el.selectionEnd = el.value.length;
                } else if (typeof el.createTextRange != "undefined") {
                    el.focus();
                    var range = el.createTextRange();
                    range.collapse(false);
                    range.select();
                }
            }
        },
        created: function() {
            this.inputValue = this.value;
            this.prevInputValue = this.value;
            this.initialFormat()
        },
    }

    var templateCalcValueBlock = document.querySelector('[data-template-id="calc-value-block"]');
    var CalcValueBlock = {
        name: 'calc-value-block',
        template: templateCalcValueBlock && templateCalcValueBlock.innerHTML,
        components: {
            CalcValue: CalcValue,
        },
        props: {
            title: String,
            value: [Number, String],
            iconName: String,
            unit: String,
            edit: Boolean,
            error: String,
            success: Boolean,
            tips: String,
            iconPath: String,
            unitPosition: {
                default: 'left',
                value: String,
                validator: function (value) {
                    return ['left', 'right'].indexOf(value) !== -1
                }
            },
            inputType: {
                default: 'float',
                type: String,
                validator: function (value) {
                    return ['float', 'integer'].indexOf(value) !== -1
                }
            },
        },
        methods: {
            handleInputChange: function(val) {
                this.$emit('input', val)
            },
            focusInput: function() {
                this.$refs.calcValue.focusInput();  
            }
        },
        data: function() {
            return {
            }
        },
    }

    Vue.use(VueInputAutoWidth);
    
    document.querySelectorAll('[data-component="calculator-car-loan-affordability"]').forEach(createCarLoanAffordabilityCalculator);
    document.querySelectorAll('[data-component="calculator-credit-card-interest"]').forEach(createCreditCardInterestCalculator);
    document.querySelectorAll('[data-component="calculator-home-loan-monthly-installment"]').forEach(createHomeLoanMonthlyInstallmentCalculator);
    document.querySelectorAll('[data-component="calculator-mortgage-affordability"]').forEach(createMortgageAffordabilityCalculator);
    document.querySelectorAll('[data-component="calculator-auto-financing-installment"]').forEach(createAutoFinancingInstallmentCalculator);


    function createCarLoanAffordabilityCalculator(el) {
        // skip if component already initialized
        if (el.id in components) return;
        
        var vueDefaultData = {
            affordabilityPerMonth: 0,
            duration: 1,
            interestRate: 2,
        }

        var aemDefault = getVueAttrDataFromEl(el);

        components[el.id] = new Vue({
            name: 'calculator-car-loan-affordability',
            el: el,
            data: Object.assign({}, vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue,
            },
            methods: {
                calc: function(monthpay, tenure, rate) {
                    if (rate > 10) {
                        rate = rate / 100;
                    }

                    var a = (rate / 100) / 12;
                    var b = 1. + a;
                    b = Math.pow(b, (tenure * 12)) - 1.;
                    var FC = a / b + a;
                    var RP = monthpay / FC

                    RP *= 100;
                    RP = Math.floor(RP);
                    RP /= 100;

                    RP = RP.toFixed(2);

                    var answerVal = monthpay * (tenure * 12) / (1 + ((rate / 100) * tenure));
                    answerVal = answerVal.toFixed(2)

                    return answerVal;
                }
            },
            computed: {
                eligibility: function () {
                    var value = this.calc(this.affordabilityPerMonth, this.duration, this.interestRate);
                    return numeral(value).format('0,00.00');
                },
            },
        });
    }


    function createCreditCardInterestCalculator(el) {
        // skip if component already initialized
        if (el.id in components) return;
        
        var vueDefaultData = {
            currentBalance: 5000,
            interestRate: 18.0,
        }

        var aemDefault = getVueAttrDataFromEl(el);

        components[el.id] = new Vue({
            name: 'calculator-credit-card-interest',
            el: el,
            data: Object.assign({},vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue,
            },
            methods: {
                calc: function(floatInterestRate, floatCurrentBalance) {
                    var floatTotalInterest = 0.00;
                    var floatTenure = 0.00;
                    var floatMinPayment = 0.00;
                    var floatInterestRateMonthly = (floatInterestRate / 100) / 12;
                    var floatTotalOutstanding = floatCurrentBalance * 1;
                
                    while (floatTotalOutstanding > 0) {
                        var floatThisMonthInterest = floatTotalOutstanding * floatInterestRateMonthly;
                        var floatThisMonthMin = floatTotalOutstanding * 0.05;
                        if (floatThisMonthMin < 50) {
                            if (floatTotalOutstanding <= 50) //last payment
                            {
                                floatThisMonthMin = floatTotalOutstanding + floatThisMonthInterest;
                            } else {
                                floatThisMonthMin = 50.00;
                            }
                        }
                        floatTotalOutstanding = floatTotalOutstanding + floatThisMonthInterest;
                        floatTotalInterest += floatThisMonthInterest
                        floatTotalOutstanding -= floatThisMonthMin;
                        floatTenure++;
                
                    }
                    floatMinPayment = floatCurrentBalance * 0.05;
                
                    if (floatMinPayment < 50) {
                        if (floatCurrentBalance <= 50) {
                            floatMinPayment = floatCurrentBalance;
                        } else {
                            floatMinPayment = 50.00;
                        }
                    }
                    floatMinPayment = parseFloat(floatMinPayment).toFixed(2);
                    floatTotalInterest = parseFloat(floatTotalInterest).toFixed(2);
            
                    return {
                        floatMinPayment: floatMinPayment,
                        floatTotalInterest: floatTotalInterest,
                        floatTenure: floatTenure
                    }
                }
            },
            computed: {
                minimumPayment: function () {
                    var values = this.calc(this.interestRate, this.currentBalance);
                    return numeral(values.floatMinPayment).format('0,00.00');
                },
                totalInterest: function () {
                    var values = this.calc(this.interestRate, this.currentBalance);
                    return numeral(values.floatTotalInterest).format('0,00.00');
                },
                tenure: function () {
                    var values = this.calc(this.interestRate, this.currentBalance);
                    return values.floatTenure;
                },
            },
        });
    }

    function createHomeLoanMonthlyInstallmentCalculator(el) {
        // skip if component already initialized
        if (el.id in components) return;
        
        var vueDefaultData = {
            loanAmount: 200000,
            loanPeriod: 30,
            interestRate: 3.0,
        }

        var aemDefault = getVueAttrDataFromEl(el);

        components[el.id] = new Vue({
            name: 'calculator-home-loan-monthly-installment',
            el: el,
            data: Object.assign({},vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue,
            },
            methods: {
                calc: function(amt,rate,tenure) {
                    var a = rate / 100. / 12.;
                    var b = 1. + a;
                    b = Math.pow(b, (tenure * 12)) - 1.;
                    var FC = a / b + a;
                    FC = FC.toFixed(10);
                    var RP = amt * FC;

                    var answerVal = (round_number(RP, 2)).toFixed(2);

                    return answerVal;
                }
            },
            computed: {
                totalInstallmentPayable: function () {
                    var value = this.calc(this.loanAmount, this.interestRate, this.loanPeriod);
                    return numeral(value).format('0,00.00');
                },
            },
        });
    }

    function createMortgageAffordabilityCalculator(el) {
        // skip if component already initialized
        if (el.id in components) return;
        
        var vueDefaultData = {
            // user input (via v-model)
            grossMonthlyIncome: 0,
            monthlyNetIncome: 0,
            totalMonthlyCommitment: 0,
            tenure: 0,
            interestRate: 4.50,
            
            // ?? neither user input nor computed
            futureValue: 0,
            endOrBeginning: 0,
            
            // computed - output
            // monthlyInstallmentAmount: 0,
            // maxIndicativeHouseLoanAmount: 0,
        }

        var aemDefault = getVueAttrDataFromEl(el);
        var DSR_CONFIG = [
            {
                dsr: 60,
                gFrom: 1,
                gTo: 2999.99,
                from: 1,
                to: 2999.99
            },
            {
                dsr: 70,
                gFrom: 2999.99,
                gTo: 9999999,
                from: 1,
                to: 2999.99
            },
            {
                dsr: 80,
                gFrom: 1,
                gTo: 9999999,
                from: 3000,
                to: 5000
            },
            {
                dsr: 85,
                gFrom: 1,
                gTo: 9999999,
                from: 5000.01,
                to: 7000
            },
            {
                dsr: 90,
                gFrom: 1,
                gTo: 9999999,
                from: 7000.01,
                to: 9999999
            }
        ];

        components[el.id] = new Vue({
            name: 'calculator-mortgage-affordability',
            el: el,
            data: Object.assign({},vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue,
            },
            methods: {
                PMT: function(rate, nperiod, pv, fv, type) {
                    if (!fv) fv = 0;
                    if (!type) type = 0;
                
                    if (rate == 0) return -(pv + fv)/nperiod;
                
                    var pvif = Math.pow(1 + rate, nperiod);
                    var pmt = rate / (pvif - 1) * -(pv * pvif + fv);
                
                    if (type == 1) {
                        pmt /= (1 + rate);
                    };
                
                    return pmt;
                },
                calc: function(grossMonthlyIncome, monthlyNetIncome, totalMonthlyCommitment, tenure, interestRate) {
                    var loanTenure = tenure * 12;
                    var monthlyLoanInterestRate = (interestRate / 12) / 100;
                    var dsrRange = DSR_CONFIG.find(function(item) {
                        return grossMonthlyIncome >= item.gFrom && grossMonthlyIncome <=item.gTo && monthlyNetIncome >= item.from && monthlyNetIncome <= item.to;
                    });
                    if (!dsrRange) dsrRange = { dsr: 0 }

                    var totalEligibilityDSR  = dsrRange.dsr;
                    var eligibilityTotalCommitment = monthlyNetIncome * totalEligibilityDSR / 100;

                    //results
                    var monthlyInstallmentAmount = Math.floor(eligibilityTotalCommitment - totalMonthlyCommitment);
                    var maxIndicativeHouseLoanAmount =  Math.floor(PV(monthlyLoanInterestRate, loanTenure, -monthlyInstallmentAmount, this.futureValue, this.endOrBeginning)/1000)*1000;
                    var monthlyInstallmentAmountPMT = this.PMT(monthlyLoanInterestRate, loanTenure, -maxIndicativeHouseLoanAmount);

                    return {
                        monthlyInstallmentAmount: monthlyInstallmentAmountPMT,
                        maxIndicativeHouseLoanAmount: maxIndicativeHouseLoanAmount
                    }
                }
            },
            computed: {
                monthlyInstallmentAmount: function () {
                    var values = this.calc(this.grossMonthlyIncome, this.monthlyNetIncome, this.totalMonthlyCommitment, this.tenure, this.interestRate);
                    return numeral(values.monthlyInstallmentAmount).format('0,00.00');
                },
                maxIndicativeHouseLoanAmount: function () {
                    var values = this.calc(this.grossMonthlyIncome, this.monthlyNetIncome, this.totalMonthlyCommitment, this.tenure, this.interestRate);
                    return numeral(values.maxIndicativeHouseLoanAmount).format('0,00.00');
                },
            },
        });
    }
    
    
    function createAutoFinancingInstallmentCalculator(el) {
        // skip if component already initialized
        if (el.id in components) return;
        
        var vueDefaultData = {
            principalAmount: 100000,
            duration: 5,
            interestRate: 2.5,
        }
        
        var aemDefault = getVueAttrDataFromEl(el);

        components[el.id] = new Vue({
            name: 'calculator-auto-financing-installment',
            el: el,
            data: Object.assign({}, vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue,
            },
            methods: {
                calc: function (principalAmount, tenure, rate) {
                    
                }
            },
            computed: {
                hiringCharges: function () {
                    var result = this.principalAmount * (this.interestRate/100) * this.duration;
                    return result;
                },
                installmentAmount: function () {
                    var result = this.totalInstallmentPayable / (this.duration * 12);
                    return result;
                },
                totalInstallmentPayable: function () {
                    var result = parseFloat(this.hiringCharges) + parseFloat(this.principalAmount);
                    return result;
                },
            },
            filters: {
                formatNumerals: function (val) {
                    return numeral(val).format('0,00.00');
                }
            },
        });
    }

})
$(function() {

    var vueDefaultData = {
        serviceUrl: '',
        searchPageUrl: '',
        keyWord: '',
        suggestions: [],
        searching: false,
        suggestionIsVisible: false,
        isInputButtonStyle: false,
    }

    document.querySelectorAll('[data-component="search-button-component"]').forEach(function(el) {
        var aemDefault = getVueAttrDataFromEl(el);
        new Vue({
            el: el,
            name: 'search-button-component',
            component: 'search-button-component',
            mixins: [SmoothReflow],
            
            data: Object.assign({}, vueDefaultData, aemDefault),
            
            methods: {
                showSearchSuggestions: function(){
                    this.$eventHub.$emit('showSearchSuggestions');
                },
                checkIsInputButtonStyle: function() {
                    if(el.classList.contains('input-search-button')){
                        this.isInputButtonStyle = true;
                    } 
                },
                clearSuggestions: function() {
                    this.suggestions = [];
                },
                getSuggestions: function(e, val) {
                    var _this = this;
                    if (this.keyWord.length < 3) {
                        this.clearSuggestions()
                        _this.searching = false;
                        return;
                    }
                    _this.searching = true;
                    var throttled = _.throttle(function() {
                        $.ajax({
                            url: _this.serviceUrl + '?keyword=' + encodeURIComponent(_this.keyWord),
                            dataType: 'json',
                            success: function(resp) {
                                _this.suggestions = resp || [];
                                _this.suggestions = _this.suggestions.splice(0,10)
                                _this.searching = false;

                                if((_this.suggestions).length === 0){
                                    $('.blank-result').removeClass('hidden')
                                }
                            },
                            error: function(err) {
                                _this.searching = false;
                                console.log("err",err)
                            }
                        })
                    }, 100);
    
                    throttled();
                },
                triggerSearch: function() {
                    window.location.href = (this.searchPageUrl || '') + '?q=' + encodeURIComponent(this.keyWord);
                },
                clearSearch: function () {
                    // to let the "watch" trigger to not clear the search result
                    this.keyWord = '';
    
                    if (this.$refs['search-input-header']) {
                        this.$refs['search-input-header'].focus();
                    }
                },
                //for search button - input
                suggestionsVisible: function () {
                    this.suggestionIsVisible = true;

                },
                handleClickOutside: function (event) {
                    this.suggestionIsVisible = false;
                },

            },
            mounted: function () {
                this.$smoothReflow();
                this.checkIsInputButtonStyle();
            },
        })
    })

    
});
$(document).ready(function () {
    var componentDOM = $('[data-component="notification"]');

    componentDOM.each(function (index, el) {
        var $el = $(el);
        var dateSetting = $el.attr('data-expiryDate');
        var dateTime = dateSetting.split('.')[0];
        var preGMT = dateSetting.split('.')[1];
        var GMT = preGMT.split('+')[1]
        var dateTimeGMT = dateTime + ' GMT+' + GMT;
        var dateCount = Math.round((new Date(dateTimeGMT) - new Date()) / 24 / 60 / 60 / 1000) + 1;
        var isValidNotification = Math.round((new Date() - new Date(dateTimeGMT)) / 24 / 60 / 60 / 1000) - 1;
        var userFlag = window.getCookie('notification_user_flag');

        $el.find('.btn-close-notification').click(function () {
            $el.addClass('hidden');
            window.setCookie('notification_user_flag', true, dateCount);
            // window.positionCookieNotification('[data-component="cookie-notification"]');
            window.updateStickiesPosition();
        });
        
        if (window.isEditorMode()) {
            $el.removeClass('hidden invisible');
            return;
        }

        if (isValidNotification <= 0) {
            // still valid
            $el.removeClass('hidden invisible');
            if (userFlag) {
                // user had clicked close
                $el.addClass('hidden');
            }
        } else {
            // not valid
            $el.addClass('hidden');

            if (userFlag) {
                window.setCookie('notification_user_flag', null, dateCount);
            }
        }
    });
});
$(document).ready(function () {
    var componentDOM = $('[data-component="cookie-notification"]');
    var COOKIE_IDENTIFIER = 'cookie_consent_user_flag';
	componentDOM.each(function (index, el) {
        var hasGivenConsent = window.getCookie(COOKIE_IDENTIFIER);
        
        if (hasGivenConsent) {
            // consent data found in cookie, notification will remain hidden
            return;
        }
        if (window.isEditorMode()) {
            $(el).removeClass('hidden');
            return;
        }
        // window.positionCookieNotification(el);
        $(el).removeClass('hidden');
    });
    window.updateStickiesPosition();
});


// sets the bottom position of cookie notification, taking account into notification component
// window.positionCookieNotification = function positionCookieNotification(el) {
//     var totalHeightOfFixedStack = 0;
//     $('[data-component="notification"]:not(.hidden)').each(function (index, notificationEL) {
//         totalHeightOfFixedStack += $(notificationEL).outerHeight();
//     });
//     $(el).css({
//         bottom: totalHeightOfFixedStack,
//     });
// }

/**
 * Master Data Dropdown
 *
 * AEM will return a list of pages containing the titles to frontend. This data is used to populate the dropdown only.
 * For the content of each master dropdown page, it is rendered by AEM into `master-data-content` and hidden at first.
 * When the vue component initializes, it will unhide the content based on the default page set.
 */
$(function() {

    var $componentDOM = $('[data-component=master-data-dropdown]');

    var COMPONENT_DEFAULT_DATA = {
        activePane: null
    };

    $componentDOM.each(function(index, el) {

        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);
        var componentType = $(this).data("component");

        if (componentType === 'master-data-dropdown') {
            window.components[elementID] = new Vue({
                name: 'master-data-dropdown',
                el: el,
                data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
                computed: {
                    dropdownOptions: function() {
                        var context = this;

                        var options = [];
                        context.pages.forEach(function(page, idx) {
                            options.push({
                                label: page.title,
                                value: page.title
                            })
                        });

                        return options;
                    }
                },
                methods: {
                    updateQueryString: function () {
                        var url = new URL(window.location.href);
                        var queryVal = this.activePane;

                        if (url.searchParams.has('filters')) {
                            url.searchParams.set('filters', queryVal);
                        } else {
                            url.searchParams.append('filters', queryVal);
                        }

                        window.history.replaceState({}, '', url);
                    },
                },
                watch : {
                    activePane: function(newValue, oldValue) {
                        if (oldValue != newValue) {
                            var $contentPanesContainer = $(this.$el).next('.master-data-content');
                            var $toShow = $contentPanesContainer.find('.content[data-pane="' + newValue + '"]');
                            $contentPanesContainer.find('.content').addClass('hidden').removeClass('in');
                            $toShow.removeClass('hidden');

                            /**
                             * This is to fix an issue with width of the swiper tabs not calculating properly.
                             * As the content for the dropdown is hidden at first, swiper is unable to calculate
                             * the width properly, hence, when a tab is shown, we will need to call update()
                             * on the swiper instance to recalculate the width.
                             */

                            if ($toShow.has('.switch-tab').length !== 0) {
                                var vueCompId = $toShow.find('.switch-tab').attr('id');
                                window.components[vueCompId].swiper.update()
                            }

                            setTimeout(function() {
                                $toShow.addClass('in')
                            }, 200);
                            
                            this.updateQueryString();
                        }
                    }
                },
                mounted: function () {
                    var context = this;
                    if (this.pages[0] !== undefined) this.activePane = this.pages[0].title;
                    
                    // read query string from URL
                    var url = new URL(window.location.href);
                    var queryFilters = [];
                    if (url.searchParams.has('filters')) {
                        queryFilters = url.searchParams.get('filters').split(',');
                        this.activePane = queryFilters[0];
                    }
                }
            });
        }

    })

});
$(document).ready(function () {

    var componentDOM = $('[data-component="countdown-component"]');

    componentDOM.each(function (index, el) {
        var $el = $(el);
        var countDownComponent = $el.find('.countdown-container');

        //get dynamic from html
        var getExpireDate = countDownComponent.data("expire-time");
        // console.log(getExpireDate)

        //countdown
        // Set the date we're counting down to
        var countDownDate = new Date("" + getExpireDate + "").getTime();

        // Update the count down every 1 second
        var x = setInterval(function () {
            // Get todays date and time
            var now = new Date().getTime();

            // Find the distance between now an the count down date
            var distance = countDownDate - now;

            // Time calculations for days, hours, minutes and seconds
            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);


            //target div individually
            $("#days").html(days + "<span>Days</span>");
            $("#hours").html(hours  + "<span>Hours</span>");
            $("#minutes").html(minutes + "<span>Minutes</span>");
            $("#seconds").html(seconds  + "<span>Seconds</span>");

            if (days < 10) {
                $("#days").html("0" + days + "<span>Days</span>")
            }
            if (hours < 10) {
                $("#hours").html("0" + hours + "<span>Hours</span>")
            }
            if (minutes < 10) {
                $("#minutes").html("0" + minutes + "<span>Minutes</span>")
            }
            if (seconds < 10) {
                $("#seconds").html("0" + seconds + "<span>Seconds</span>")
            }


            // If the count down is over, write some text 
            if (distance < 0) {
                clearInterval(x);
                $("#days").html("00" + "<span>Days</span>");
                $("#hours").html("00" + "<span>Hours</span>");
                $("#minutes").html("00" + "<span>Minutes</span>");
                $("#seconds").html("00" + "<span>Seconds</span>");
                $(".countdown-container .textBox").html("This deal has expired."); 
            }

        }, 1000);
        // countdown end



    }); //end
});
$(function() {
    function round_number (numbers, decimal) {
        return Math.round(numbers * Math.pow(10, decimal)) / Math.pow(10, decimal);
    }

    function PV (rate, periods, payment, future, type) {
        // Initialize type
        var type = (typeof type === 'undefined') ? 0 : type;
        // Evaluate rate and periods (TODO: replace with secure expression evaluator)
        rate = eval(rate);
        periods = eval(periods);
        // Return present value
        if (rate === 0) {
            return - payment * periods - future;
        } else {
            return (((1 - Math.pow(1 + rate, periods)) / rate) * payment * (1 + rate * type) - future) / Math.pow(1 + rate, periods);
        }
    }

    var templateCalcValue = document.querySelector('[data-template-id="calc-value-tools"]');
    var CalcValue = {
        name: 'calc-value-tools',
        template: templateCalcValue && templateCalcValue.innerHTML,
        props: {
            title: String,
            value: {
                type: [Number, String, Object],
                default: ''
            },
            color: {
                default: 'default',
                type: String,
            },
            edit: Boolean,
            inputType: {
                default: 'float',
                type: String,
                validator: function (value) {
                    return ['float', 'integer'].indexOf(value) !== -1
                }
            },
            unit: String,
            unitPosition: {
                default: 'left',
                value: String,
                validator: function (value) {
                    return ['left', 'right'].indexOf(value) !== -1
                }
            },
            error: String,
        },
        data: function() {
            return {
                edited: false,
                inputValue: 0,
                prevInputValue: 0,
                firstFocus: true,
                firstKeyIn: true,
                firstKeyUp: true,
                backValue: 0,
            }
        },
        watch: {
            inputValue: function(val) {
                this.$emit('input', val.toString().replace(/,/g,''))
            }
        },
        computed: {
            isFloat: function() {
                return this.inputType === 'float'
            },
            isEditableAndEdited: function() {
                return this.edit && this.edited
            }
        },
        methods:{
            isBackbtn: function() {
                
            },
            handleInputChange: function (event) {
                this.inputValue = this.inputValue.replace(/[^0-9]/g, '');
                if (event.key !== 'Backspace' && event.key !== 'Enter' && isNaN(parseInt(event.key)) && event.key !== 'Unidentified') {
					if(this.firstKeyUp){
                        this.firstKeyUp = false;
                        if(!this.isFloat){
                            //this.prevInputValue = 0;
                            //this.inputValue = this.prevInputValue;
                        }else{
                            if(!this.firstKeyUp){
                                //this.prevInputValue = 0;
                            }
                        }
                    }else{
                        if(this.firstKeyUp){
							this.inputValue = this.prevInputValue;
                        }
                    }
                } else {
                    this.prevInputValue = this.inputValue
                }
                this.edited = true;
                this.formatInputValue()
            },
            formatInputValue: function() {
                if (this.isFloat){
                    this.inputValue = numeral(this.inputValue.toString().replace(/\./g,'').replace(/,/g,'') / 100).format('0,0.00')
                    this.displayValue = this.inputValue
                }else{
                    this.inputValue = numeral(this.inputValue).format('0,0')
                }
            },
            initialFormat: function() {
                if (this.isFloat){
                    this.inputValue = numeral(this.inputValue).format('0,0.00')
                    this.displayValue = this.inputValue
                }else{
					this.inputValue = numeral(this.inputValue).format('0,0')
                }
            },
            focusInput: function() {
                this.edited = true;
                if (this.firstFocus == true) {
                    this.firstFocus = false;
                    if (this.isFloat){
                        this.inputValue = 0;
                        this.inputValue = numeral(this.inputValue.toString().replace(/\./g,'').replace(/,/g,'') / 100).format('0,0.00')
						this.displayValue = this.inputValue
                    }else{
                        this.inputValue = 0;
                    }
                }
                if (this.$refs.input) {
                    this.$refs.input.focus()
                }
            },
            moveCursorToEnd: function () {
                var el = event.target;
                if (typeof el.selectionStart == "number") {
                    el.selectionStart = el.selectionEnd = el.value.length;
                } else if (typeof el.createTextRange != "undefined") {
                    el.focus();
                    var range = el.createTextRange();
                    range.collapse(false);
                    range.select();
                }
            }
        },
        created: function() {
            this.inputValue = this.value;
            this.prevInputValue = this.value;
            this.displayValue = this.value;
            this.initialFormat()
        },
    }

    var templateCalcValueBlock = document.querySelector('[data-template-id="calc-value-block"]');
    var CalcValueBlock = {
        name: 'calc-value-block',
        template: templateCalcValueBlock && templateCalcValueBlock.innerHTML,
        components: {
            CalcValue: CalcValue,
        },
        props: {
            title: String,
            value: [Number, String, Object],
            iconName: String,
            unit: String,
            edit: Boolean,
            success: Boolean,
            tips: String,
            tipsColor: String,
            iconPath: String,
            validationRules: String,
            minMsg: String,
            maxMsg: String,
            defaultValue: [Number, String, Object],
            validationMsgs: {
                value: String,
                default: function() {
                    return {
                        min: '',
                        max: ''
                    }
                }
            },
            unitPosition: {
                default: 'left',
                value: String,
                validator: function (value) {
                    return ['left', 'right'].indexOf(value) !== -1
                }
            },
            inputType: {
                default: 'float',
                type: String,
                validator: function (value) {
                    return ['float', 'integer'].indexOf(value) !== -1
                }
            },
        },
        methods: {
            handleInputChange: function(val) {
                var _this = this;
                var valid = {min: null, max: null}
                this.error = null
                if (this.validationRules) {
                    var validations = _this.validationRules.split(',')
                    
                    validations.forEach(function(item) {
                        var validation = item.split(':')
                        switch(validation[0]) {
                            case 'min':
                                if (parseFloat(val) >= parseFloat(validation[1])) {
                                    valid['min'] = null
                                } else {
                                    if (_this.minMsg) {
                                        valid['min'] = _this.validationMsgs[validation[0]].replace('',_this.minMsg)
                                    }
                                    // else {
                                    //     valid['min'] = _this.validationMsgs[validation[0]].replace('[value]', validation[1])
                                    // }
                                }
                                break;
                            case 'max':
                                if (parseFloat(val) <= parseFloat(validation[1])) {
                                    valid['max'] = null
                                } else {
                                    if (_this.maxMsg) {
                                        valid['max'] = _this.validationMsgs[validation[0]].replace('', _this.maxMsg)
                                    }
                                    // else {
                                    //     valid['max'] = _this.validationMsgs[validation[0]].replace('[value]', validation[1])
                                    // }
                                }
                                break;
                            default:
                        }
                  
                    })
                }
                // if (parseFloat(val) == 0 || val.length  == 0) {
                //     this.error = "Value must be more than 0."
                // }
                
                for (var key in valid) {
                    if (valid[key]) {
                        this.error = valid[key]
                    }
                }

                var data = {
                    val: val,
                    error: this.error
                }

                this.$emit('input', data)
                // this.$emit('input', val)
                
            },
            focusInput: function() {
                this.$refs.calcValue.focusInput();  
            }
        },
        created: function () {
            if (this.defaultValue !== undefined) {
                this.value = this.defaultValue;
            }
        },
        data: function() {
            return {
                error: null,
            }
        },
    }

    Vue.use(VueInputAutoWidth);
    
    $('[data-component="calculator-tools"]').each(function (index, el) {
        createCarLoanAffordabilityCalculator(el.querySelector('.calculator-car-loan-affordability'), el.id);
        createCreditCardInterestCalculator(el.querySelector('.calculator-credit-card-interest'), el.id);
        createHomeLoanMonthlyInstallmentCalculator(el.querySelector('.calculator-home-loan-monthly-installment'), el.id);
        createMortgageAffordabilityCalculator(el.querySelector('.calculator-mortgage-affordability'), el.id);
        createAutoFinancingInstallmentCalculator(el.querySelector('.calculator-auto-financing-installment'), el.id);
    });



    function createCarLoanAffordabilityCalculator(el, id) {
        if (!el && (id in components)) return;
        
        var vueDefaultData = {
            amount: 0,
            duration: 0,
            interestRate: 0,
            eligibility: 0,
            
            inputValid1: false,
            inputValid2: false,
            inputValid3: false,
            decimal: false,
        }

        var aemDefault = getVueAttrDataFromEl(el);

        components[id] = new Vue({
            name: 'calculator-car-loan-affordability',
            el: el,
            data: Object.assign({}, vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue,
            },
            methods: {
                amountChanged: function(data) {
                    this.amount = data.val;
                    if (data.error !== null) {
                        this.inputValid1 = false;
                    } else {
                        this.inputValid1 = true;
                    }
                    this.checkValid();
                },
                durationChanged: function(data) {
                    this.duration = data.val;
                    if (data.error !== null) {
                        this.inputValid2 = false;
                    } else {
                        this.inputValid2 = true;
                    }
                    this.checkValid();
                },
                interestRateChanged: function(data) {
                    this.interestRate = data.val;
                    if (data.error !== null) {
                        this.inputValid3 = false;
                    } else {
                        this.inputValid3 = true;
                    }
                    this.checkValid();
                },
                checkValid: function() {
                    if (this.inputValid1 && this.inputValid2 && this.inputValid3) {
                        this.calculate();
                    } else {
                        var value = this.calc(0, 0, 0)
                        if(this.decimal == false || this.decimal == "false"){
                            this.eligibility = numeral(value).format('0,00.00');
                        }else{
                            this.eligibility = numeral(value).format('0,00');
                        }
                    }
                },
                calculate: function() {
                    var value = this.calc(this.amount, this.duration, this.interestRate)
                    if(this.decimal == false || this.decimal == "false"){
                        this.eligibility = numeral(value).format('0,00.00');
                    }else{
                        this.eligibility = numeral(value).format('0,00');
                    }
                },
                calc: function(monthpay, duration, rate) {
                    if (rate > 10) {
                        rate = rate / 100;
                    }

                    var a = (rate / 100) / 12;
                    var b = 1. + a;
                    b = Math.pow(b, (duration * 12)) - 1.;
                    var FC = a / b + a;
                    var RP = monthpay / FC

                    RP *= 100;
                    RP = Math.floor(RP);
                    RP /= 100;

                    RP = RP.toFixed(2);

                    var answerVal = monthpay * (duration * 12) / (1 + ((rate / 100) * duration));
                    answerVal = answerVal.toFixed(2)

                    return answerVal;
                }
            },
            created: function() {
                this.calculate();
            },
        });
    }


    function createCreditCardInterestCalculator(el, id) {
        if (!el && (id in components)) return;
        
        var vueDefaultData = {
            amount: 0,
            interestRate: 0,
            
            minimumPayment: 0,
            totalInterest: 0,
            duration: 0,
            inputValid1: false,
            inputValid2: false,
            decimal: false,
        }

        var aemDefault = getVueAttrDataFromEl(el);

        components[id] = new Vue({
            name: 'calculator-credit-card-interest',
            el: el,
            data: Object.assign({},vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue
            },
            methods: {
                amountChanged: function(data) {
                    this.amount = data.val;
                    if (data.error !== null) {
                        this.inputValid1 = false;
                    } else {
                        this.inputValid1 = true;
                    }
                    this.checkValid();
                    // this.ccLoanCurrentBalance = val
                    // this.calculate();
                },
                interestRateChanged: function(data) {
                    this.interestRate = data.val;
                    if (data.error !== null) {
                        this.inputValid2 = false;
                    } else {
                        this.inputValid2 = true;
                    }
                    this.checkValid();
                    // this.interestRate = val;
                    // this.calculate();
                },
                calculate: function() {
                    var values = this.calc(this.interestRate, this.amount);
                    if(this.decimal == false || this.decimal == "false"){
                        this.minimumPayment = numeral(values.floatMinPayment).format('0,00.00');
                        this.totalInterest = numeral(values.floatTotalInterest).format('0,00.00');
                    }else{
                        this.minimumPayment = numeral(values.floatMinPayment).format('0,00');
                        this.totalInterest = numeral(values.floatTotalInterest).format('0,00');
                    }
                    this.duration = values.floatDuration
                },
                checkValid: function() {
                    if (this.inputValid1 && this.inputValid2) {
                        this.calculate();
                    } else {
                        var values = this.calc(0, 0)
                        if(this.decimal == false || this.decimal == "false"){
                            this.minimumPayment = numeral(values.floatMinPayment).format('0,00.00');
                            this.totalInterest = numeral(values.floatTotalInterest).format('0,00.00');
                        }else{
                            this.minimumPayment = numeral(values.floatMinPayment).format('0,00');
                            this.totalInterest = numeral(values.floatTotalInterest).format('0,00');
                        }
                        this.duration = values.floatDuration
                    }
                },
                calc: function(floatInterestRate, floatCurrentBalance) {
                    var floatTotalInterest = 0.00;
                    var floatDuration = 0.00;
                    var floatMinPayment = 0.00;
                    var floatInterestRateMonthly = (floatInterestRate / 100) / 12;
                    var floatTotalOutstanding = floatCurrentBalance * 1;
                
                    while (floatTotalOutstanding > 0) {
                        var floatThisMonthInterest = floatTotalOutstanding * floatInterestRateMonthly;
                        var floatThisMonthMin = floatTotalOutstanding * 0.05;
                        if (floatThisMonthMin < 50) {
                            if (floatTotalOutstanding <= 50) //last payment
                            {
                                floatThisMonthMin = floatTotalOutstanding + floatThisMonthInterest;
                            } else {
                                floatThisMonthMin = 50.00;
                            }
                        }
                        floatTotalOutstanding = floatTotalOutstanding + floatThisMonthInterest;
                        floatTotalInterest += floatThisMonthInterest
                        floatTotalOutstanding -= floatThisMonthMin;
                        floatDuration++;
                
                    }
                    floatMinPayment = floatCurrentBalance * 0.05;
                
                    if (floatMinPayment < 50) {
                        if (floatCurrentBalance <= 50) {
                            floatMinPayment = floatCurrentBalance;
                        } else {
                            floatMinPayment = 50.00;
                        }
                    }
                    floatMinPayment = parseFloat(floatMinPayment).toFixed(2);
                    floatTotalInterest = parseFloat(floatTotalInterest).toFixed(2);
            
                    return {
                        floatMinPayment: floatMinPayment,
                        floatTotalInterest: floatTotalInterest,
                        floatDuration: floatDuration
                    }
                }
            },
            created: function() {
                this.calculate();
            }
        });
    }

    function createHomeLoanMonthlyInstallmentCalculator(el, id) {
        if (!el && (id in components)) return;
        
        var vueDefaultData = {
            amount: 0,
            duration: 0,
            interestRate: 0,
            
            totalInstallmentPayable: 0,
            inputValid1: false,
            inputValid2: false,
            inputValid3: false,
            decimal: false,
        }

        var aemDefault = getVueAttrDataFromEl(el);

        components[id] = new Vue({
            name: 'calculator-home-loan-monthly-installment',
            el: el,
            data: Object.assign({},vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue
            },
            
            methods: {
                calculate: function() {
                    var value = this.calc(this.amount, this.interestRate, this.duration);
                    if(this.decimal == false || this.decimal == "false"){
                        this.totalInstallmentPayable = numeral(value).format('0,00.00');
                    }else{
                        this.totalInstallmentPayable = numeral(value).format('0,00');
                    }
                },
                checkValid: function() {
                    if (this.inputValid1 && this.inputValid2 && this.inputValid3) {
                        this.calculate();
                    } else {
                        var value = this.calc(0, 0, 0)
                        if(this.decimal == false || this.decimal == "false"){
                            this.totalInstallmentPayable = numeral(value).format('0,00.00');
                        }else{
                            this.totalInstallmentPayable = numeral(value).format('0,00');
                        }
                    }
                },
                calc: function(amt,rate,duration) {
                    var a = rate / 100. / 12.;
                    var b = 1. + a;
                    b = Math.pow(b, (duration * 12)) - 1.;
                    var FC = a / b + a;
                    FC = FC.toFixed(10);
                    var RP = amt * FC;

                    var answerVal = (round_number(RP, 2)).toFixed(2);
                    return answerVal;
                },
                
                
                
                amountChanged: function (data) {
                    this.amount = data.val;
                    if (data.error !== null) {
                        this.inputValid1 = false;
                    } else {
                        this.inputValid1 = true;
                    }
                    this.checkValid();
                    // this.calculate();
                },
                durationChanged: function (data) {
                    this.duration = data.val;
                    if (data.error !== null) {
                        this.inputValid2 = false;
                    } else {
                        this.inputValid2 = true;
                    }
                    this.checkValid();
                    // this.calculate();
                },
                interestRateChanged: function (data) {
                    this.interestRate = data.val;
                    if (data.error !== null) {
                        this.inputValid3 = false;
                    } else {
                        this.inputValid3 = true;
                    }
                    this.checkValid();
                    // this.calculate();
                }
            },
            watch: {
                
            },
            created: function() {
                this.calculate();
            },
        });
    }

    function createMortgageAffordabilityCalculator(el, id) {
        if (!el && (id in components)) return;
        
        var vueDefaultData = {
            grossMonthlyIncome: 0,
            monthlyNetIncome: 0,
            totalMonthlyCommitment: 0,
            duration: 0,
            interestRate: 8,
            
            // ?? neither user input nor computed
            futureValue: 0,
            endOrBeginning: 0,
            
            // computed - output
            monthlyInstallmentAmount: 0,
            maxIndicativeHouseLoanAmount: 0,
            
            inputValid1: false,
            inputValid2: false,
            inputValid3: false,
            inputValid4: false,
            inputValid5: false,
            decimal: false,
        };
        
        var DSR_CONFIG = [
            {
                dsr: 60,
                gFrom: 1,
                gTo: 2999.99,
                from: 1,
                to: 2999.99
            },
            {
                dsr: 70,
                gFrom: 2999.99,
                gTo: 9999999,
                from: 1,
                to: 2999.99
            },
            {
                dsr: 80,
                gFrom: 1,
                gTo: 9999999,
                from: 3000,
                to: 5000
            },
            {
                dsr: 85,
                gFrom: 1,
                gTo: 9999999,
                from: 5000.01,
                to: 7000
            },
            {
                dsr: 90,
                gFrom: 1,
                gTo: 9999999,
                from: 7000.01,
                to: 9999999
            }
        ];

        var aemDefault = getVueAttrDataFromEl(el);

        components[id] = new Vue({
            name: 'calculator-mortgage-affordability',
            el: el,
            data: Object.assign({},vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue
            },
            methods: {
                calculate: function() {
                    var values = this.calc(this.grossMonthlyIncome,this.monthlyNetIncome, this.totalMonthlyCommitment, this.duration, this.interestRate);
                    if(this.decimal == false || this.decimal == "false"){
                        this.monthlyInstallmentAmount = numeral(values.monthlyInstallmentAmount).format('0,00.00');
                        this.maxIndicativeHouseLoanAmount = numeral(values.maxIndicativeHouseLoanAmount).format('0,00.00');
                    }else{
                        this.monthlyInstallmentAmount = numeral(values.monthlyInstallmentAmount).format('0,00');
                        this.maxIndicativeHouseLoanAmount = numeral(values.maxIndicativeHouseLoanAmount).format('0,00');
                    }
                },
                checkValid: function() {
                    if (this.inputValid1 && this.inputValid2 && this.inputValid3 && this.inputValid4 && this.inputValid5) {
                        this.calculate();
                    } else {
                        var values = this.calc(0, 0, 0, 0, 0 )
                        if(this.decimal == false || this.decimal == "false"){
                            this.monthlyInstallmentAmount = numeral(values.monthlyInstallmentAmount).format('0,00.00');
                            this.maxIndicativeHouseLoanAmount = numeral(values.maxIndicativeHouseLoanAmount).format('0,00.00');
                        }else{
                            this.monthlyInstallmentAmount = numeral(values.monthlyInstallmentAmount).format('0,00');
                            this.maxIndicativeHouseLoanAmount = numeral(values.maxIndicativeHouseLoanAmount).format('0,00');
                        }
                    }
                },
                PMT: function(rate, nperiod, pv, fv, type) {
                    if (!fv) fv = 0;
                    if (!type) type = 0;

                    if (rate == 0) return -(pv + fv)/nperiod;
                
                    var pvif = Math.pow(1 + rate, nperiod);
                    var pmt = rate / (pvif - 1) * -(pv * pvif + fv);
                
                    if (type == 1) {
                        pmt /= (1 + rate);
                    };
                
                    return pmt;
                },
                calc: function(grossMonthlyIncome,monthlyNetIncome,totalMonthlyCommitment,duration, interestRate) {
                    var loanDuration = duration * 12;
                    var monthlyLoanInterestRate = (interestRate / 12) / 100;
                    var dsrRange = DSR_CONFIG.find(function(item) {
                        return grossMonthlyIncome >= item.gFrom && grossMonthlyIncome <=item.gTo && monthlyNetIncome >= item.from && monthlyNetIncome <= item.to
                    });
                    if (!dsrRange) dsrRange = { dsr: 0 }

                    var totalEligibilityDSR  = dsrRange.dsr;
                    var eligibilityTotalCommitment = monthlyNetIncome * totalEligibilityDSR / 100;

                    //results
                    var monthlyInstallmentAmount = Math.floor(eligibilityTotalCommitment - totalMonthlyCommitment)
                    var maxIndicativeHouseLoanAmount =  Math.floor(PV(monthlyLoanInterestRate, loanDuration, -monthlyInstallmentAmount, this.futureValue, this.endOrBeginning)/1000)*1000
                    var monthlyInstallmentAmountPMT = this.PMT(monthlyLoanInterestRate,loanDuration,-maxIndicativeHouseLoanAmount)

                    return {
                        monthlyInstallmentAmount: monthlyInstallmentAmountPMT,
                        maxIndicativeHouseLoanAmount: maxIndicativeHouseLoanAmount
                    }
                },
                
                
                grossMonthlyIncomeChanged: function (data) {
                    this.grossMonthlyIncome = data.val;
                    if (data.error !== null) {
                        this.inputValid1 = false;
                    } else {
                        this.inputValid1 = true;
                    }
                    this.checkValid();
                },
                monthlyNetIncomeChanged: function (data) {
                    this.monthlyNetIncome = data.val;
                    if (data.error !== null) {
                        this.inputValid2 = false;
                    } else {
                        this.inputValid2 = true;
                    }
                    this.checkValid();
                },
                totalMonthlyCommitmentChanged: function (data) {
                    this.totalMonthlyCommitment = data.val;
                    if (data.error !== null) {
                        this.inputValid3 = false;
                    } else {
                        this.inputValid3 = true;
                    }
                    this.checkValid();
                },
                durationChanged: function (data) {
                    this.duration = data.val;
                    if (data.error !== null) {
                        this.inputValid4 = false;
                    } else {
                        this.inputValid4 = true;
                    }
                    this.checkValid();
                },
                interestRateChanged: function (data) {
                    this.interestRate = data.val;
                    if (data.error !== null) {
                        this.inputValid5 = false;
                    } else {
                        this.inputValid5 = true;
                    }
                    this.checkValid();
                },
            },
            watch: {
                
            },
            created: function() {
                this.calculate();
            },
        });
    }
    
    
    
    function createAutoFinancingInstallmentCalculator(el, id) {
        if (!el && (id in components)) return;
        
        var vueDefaultData = {
            amount: 0,
            duration: 0,
            interestRate: 0,
            inputValid1: false,
            inputValid2: false,
            inputValid3: false,
            isValidInput: false,
            decimal: false,
        }
        var decimalVal = ''
        var aemDefault = getVueAttrDataFromEl(el);

        components[id] = new Vue({
            name: 'calculator-auto-financing-installment',
            el: el,
            data: Object.assign({}, vueDefaultData, aemDefault),
            components: {
                CalcValueBlock: CalcValueBlock,
                CalcValue: CalcValue,
            },
            methods: {
                calc: function (amount, duration, rate) {
                    
                },
                
                amountChanged: function (data) {
                    this.amount = data.val;
                    if (data.error !== null) {
                        this.inputValid1 = false;
                    } else {
                        this.inputValid1 = true;
                    }
                    this.checkValid()
                },
                durationChanged: function (data) {
                    this.duration = data.val;
                    if (data.error !== null) {
                        this.inputValid2 = false;
                    } else {
                        this.inputValid2 = true;
                    }
                    this.checkValid()
                },
                interestRateChanged: function (data) {
                    this.interestRate = data.val;
                    if (data.error !== null) {
                        this.inputValid3 = false;
                    } else {
                        this.inputValid3 = true;
                    }
                    this.checkValid()
                },
                checkValid: function() {
                    if(this.inputValid1 && this.inputValid2 && this.inputValid3){
                        this.isValidInput = true;
                    }else{
						this.isValidInput = false;
                    }
                },
            },
            
            /* 
            Source code from CQ5 site:
            ====================================
            function refreshCarLoanCalculator() {
                var a = $('.calc-carloan .principal-amount').val();
                var b = $('.calc-carloan .interest-rate').val() / 100;
                var c = $('.calc-carloan .loan-tenure').val();

                var d = a * b * c; // total hiring charges
                var e = parseFloat(d) + parseFloat(a); // total amount payable
                var installment = e / (c * 12);

                toolsSetCalculatedValue('.calc-result-thiring', parseFloat(d).toFixed(2))
                toolsSetCalculatedValue('.calc-result-installment', parseFloat(installment).toFixed(2))
                toolsSetCalculatedValue('.calc-result-totalpayable', parseFloat(e).toFixed(2))
            }
            */
            computed: {
                hiringCharges: function () {
                    var result = this.amount * (this.interestRate / 100) * this.duration;
                    if(!this.isValidInput){
						result = 0;
                    }
                    return result;
                },
                installmentAmount: function () {
                    var result = this.totalInstallmentPayable / (this.duration * 12);
                    if(!this.isValidInput){
						result = 0;
                    }
                    return result;
                },
                totalInstallmentPayable: function () {
                    var result = parseFloat(this.hiringCharges) + parseFloat(this.amount);
                    if(!this.isValidInput){
						result = 0;
                    }
                    return result;
                },
            },
            filters: {
                formatNumerals: function (val) {
                    var deciFormat = ''
                    if(decimalVal == false || decimalVal == "false"){
                        deciFormat = '0,00.00'
                    }else{
                        deciFormat = '0,00'
                    }
                    //return numeral(val).format('0,00.00');
                    return numeral(val).format(deciFormat);
                }
            },
            created: function() {
                decimalVal = this.decimal
            },
        });
    }

})

$(function () {

    
    Vue.component('form-element-tabs', {
        name: 'form-element-tabs',
        data: function () {
            return {
                dataList: [],
                value: '',
            }
        },
        methods: {
            handleFocus: function (event) {
                if (!this.value && this.dataList.length > 0) {
                    this.value = this.dataList[0].value;
                }
            },
            handleKeydown: function (event) {
                switch (event.key) {
                    case 'Down':
                    case 'ArrowDown':
                    case 'Right':
                    case 'ArrowRight':
                        this.selectNext();
                        break;

                    case 'Up':
                    case 'ArrowUp':
                    case 'Left':
                    case 'ArrowLeft':
                        this.selectPrev();
                        break;
                }
            },
            selectNext: function () {
                if (this.currentIndex !== this.dataList.length-1) {
                    this.value = this.dataList[this.currentIndex+1].value;
                } else {
                    if (this.dataList[0]) this.value = this.dataList[0].value;
                }
            },
            selectPrev: function () {
                if (this.currentIndex !== 0) {
                    this.value = this.dataList[this.currentIndex - 1].value;
                } else {
                    if (this.dataList[this.dataList.length - 1]) this.value = this.dataList[this.dataList.length - 1].value;
                }
            },
        },
        computed: {
            currentIndex: function () {
                var context = this;
                return this.dataList.findIndex(function (item) {
                    return item.value === context.value;
                });
            }
        },
    });


});
$(document).ready(function () {

    Vue.component('form-element-checkboxes', {
        name: 'form-element-checkboxes',
        data: function () {
            return {
                dataList: [],
                userCheckedValues: {},
            }
        },
        mounted: function () {
            var context = this;
            
            if (Array.isArray(this.dataList)) {
                this.dataList.forEach(function (item) {
                    if (item.option === 'checked') {
                        context.$set(context.userCheckedValues, item.value, true);
                    }
                });
            }
        },
        methods: {
            handleChange: function (val, event) {
                if (event.target.checked) {
                    this.$set(this.userCheckedValues, val, true);
                } else {
                    this.$delete(this.userCheckedValues, val);
                }
            },
            handleBlur: function (event) {
                var context = this;
                var thisEl = $(this.$el);
                
                // getting focused element is so stupid because "body" will always be focused between blur and focus events.
                // So without timeout, document.activeElement on blur is ALWAYS BODY. What a stupid spec design.
                setTimeout(function () {
                    var focusedEl = $(document.activeElement);
                    if (thisEl.has(focusedEl).length === 0) {
                        // user focused out of this component
                        context.$refs.validator.validate();
                    }
                }, 100);
            },
        },
        computed: {
            finalValue: function () {
                return Object.keys(this.userCheckedValues).join(', ');
            },
        },
    });

});
$(function () {
    
    Vue.component('form-element-radios', {
        name: 'form-element-radios',
        data: function () {
            return {
                dataList: [],
                value: '',
            }
        },
        mounted: function() {
            var context = this;
            
            if (Array.isArray(this.dataList)) {
                var checkedItem = this.dataList.find(function (item) {
                    return item.option === 'checked';
                });
                
                if (checkedItem) {
                    this.value = checkedItem.value;
                }
            }
            
        },
    });

});
$(document).ready(function () {
	var componentDOM = $('[data-component="form-element-textfield"]');
	
	Vue.component('form-element-textfield', {
		name: 'form-element-textfield',
		data: function () {
			return {
				value: '',
				rules: {},
			}
		},
		computed: {
			validationRules: function () {
				// convert this.rules to a string that rules props of <validation-provider> accepts
				return Object.entries(this.rules)
					.map(function (entry, index) {
						var key = entry[0];
						var value = entry[1];
						
						if (typeof value === 'boolean') {
							if (value) {
								return key;
							}
							return '';
						} else {
							return key + ':' + value;
						}
					})
					.filter(function (val) { return !!val })
					.join('|')
				;
				
			},
		},
		
	});

	/* componentDOM.each(function (index, el) {
		var elementID = el.id;
		// only if instance is not under another vue component, we instantiate it
		if ($(el).parents('[data-component]').length === 0) {
			window.components[elementID] = new Vue({
				el: el,
			});
		}
	}); */

});
$(document).ready(function () {
    Vue.component('form-element-dropdown', {
        name: 'form-element-dropdown',
        data: function () {
            return {
                value: '',
                dropdownList: [],
            }
        },
        methods: {
            handleBlur: function (event) {
                this.$refs.validator.validate();
            },
        },
        computed: {
            dropdownListNormalized: function () {
                return this.dropdownList.map(function (item) {
                    return {
                        label: item.title,
                        value: item.value,
                    }
                })
            },
        },
    });

});
$(function () {

	var MS_IN_ONE_DAY = 8.64e+7;
	function getTomorrow(d) { return new Date(+new Date(d) + MS_IN_ONE_DAY) }
	function getYesterday(d) { return new Date(+new Date(d) - MS_IN_ONE_DAY) }
	
	
	function initDatePicker () {
		Vue.component('form-element-datepicker', {
			name: 'form-element-datepicker',
			components: {
				vuejsDatepicker: window.vuejsDatepicker,
			},
			data: function () {
				return {
					startDate: null,
					endDate: null,
					value: '',
				}
			},
			mounted: function () {
				var context = this;
				
				if (context.$refs.datepicker) {
					/* 
						Only run if inputType is 'calendar'.
						This is a workaround. Because we do not have access to <input> element directly (child of vuejs-datepicker),
						we rely on jQuery to access the dom and manually insert blur event handler
					*/
					$(context.$el).find('.datepicker-input').on('blur', function (event) {
						context.$refs.validator.validate();
					});
				}
			},
			computed: {
				disabledDate: function () {
					var result = {};
					
					if (this.startDate) result.to = new Date(this.startDate);
					
					if (this.endDate) {
						var endingDay = new Date(this.endDate);
						endingDay.setHours(23, 59, 59);
						result.from = endingDay;
					}
					
					return result;
				},
			},
		});
	}
	
	
	var hasDependenciesError = false;
	
	if (document.querySelector('form-element-datepicker[data-field-type="calendar"]')) {
		// load this only if there is datepicker in the page
		// loading it here because <script> tag in vue template is not allowed
		var xhr = jQuery.ajax({
			url: '/etc.clientlibs/cimb/clientlibs/clientlib-base/resources/js/vuejs-datepicker.custom.min.js',
			dataType: 'text',
			async: false,
		});
		
		if (xhr.status === 200 && xhr.responseText) {
			eval.apply(null, [xhr.responseText]); // eval the script in window context
		} else {
			console.error('Unable to load vuejs-datepicker. XHR: ', xhr);
			hasDependenciesError = true;
		}
	}
	
	
	if (document.querySelector('form-element-datepicker[data-field-type="input"]')) {
		var xhr = jQuery.ajax({
			url: '/etc.clientlibs/cimb/clientlibs/clientlib-base/resources/js/v-mask.js',
			dataType: 'text',
			async: false,
		});
		
		if (xhr.status === 200 && xhr.responseText) {
			eval.apply(null, [xhr.responseText]); // eval the script in window context
			Vue.directive('mask', VueMask.VueMaskDirective);
		} else {
			console.error('Unable to load v-mask. XHR: ', xhr);
			hasDependenciesError = true;
		}
	}
	
	if (!hasDependenciesError) initDatePicker();
	

});
$(document).ready(function () {
    
    
    function initRecaptcha() {
        Vue.component('form-element-recaptcha', {
            name: 'form-element-recaptcha',
            components: {
                VueRecaptcha: VueRecaptcha,
            },
            data: function () {
                return {
                    recaptchaResponse: '',
                }
            },
            methods: {
                
            },
            computed: {
                
            },
        });
    }

    if (document.querySelector('form-element-recaptcha')) {
        // load this only if there is <form-element-recaptcha> in the page
        // loading it here because <script> tag in vue template is not allowed
        var xhr = jQuery.ajax({
            url: '/etc.clientlibs/cimb/clientlibs/clientlib-base/resources/js/vue-recaptcha.1.3.0.min.js',
            dataType: 'text',
            async: false,
        });

        if (xhr.status === 200 && xhr.responseText) {
            // eval the script in window context
            eval.apply(null, [xhr.responseText]);
            initRecaptcha();
        } else {
            console.error('Unable to load vue-recaptcha. XHR: ', xhr);
        }
    }
});


$(document).ready(function () {

	var componentDOM = $('[data-component="form-container"]');

	componentDOM.each(function (index, el) {
		var $el = $(el);
		var elementID = el.id;
		// var vueDefaultData = getVueAttrDataFromEl(el);

		window.components[elementID] = new Vue({
			name: 'form-container',
			el: el,
			data: function () {
				return {
					submitEndpoint: '',
					formName: '',
					successMessage: '',
					endpointType: '',

					isSubmitting: false,

					hasEndpointError: false,
					hasNetworkError: false,
					hasSubmitted: false,

					leadID: '',
				}
			},
			computed: {
				showFormElements: function () {
					return (!this.hasSubmitted) && (!this.hasEndpointError);
				},
				successMessageProcessed: function () {
					return this.successMessage.replace(/\{0\}/gi, this.leadID);
				},
			},
			methods: {

				onSubmit: function (event) {
					var context = this;
					context.$refs.observer.validate().then(function (success) {
						if (success) {
							context.handleSubmit();
							return;
						} else {
							context.$nextTick(function () {
								context.scrollToFirstErrorElement();
							});
						}
					});

				},

				scrollToFirstErrorElement: function () {
					var context = this;
					// var el = context.$el.querySelector('.has-validation-error');
					var el = $(context.$el).find('.has-validation-error').first();

					if (el.length > 0) {
						var scrollToEl = el.parents('[data-component]').first();
						var topOffset = $('.main-global-header').height();
						var animateDuration = 300;

						// console.log('el.get(0) = ', el.get(0));
						// console.log('scrollToEl = ', scrollToEl);

						window.scrollToElement(scrollToEl, topOffset, animateDuration).then(function () {
							el.get(0).focus({ preventScroll: true });
						});
					}

					// validation failed
					// var errors = _.reduce(context.$refs.observer.errors, function(acc, value, key) {
					//     if (value.length > 0) {
					//         acc.push(key);
					//     }
					//     return acc;
					// }, []);
					// context.$refs.observer.refs[errors[0]].$el.focus();
					// var el = context.$refs.observer.refs[errors[0]].$el.querySelector('input');
					// el.focus();
				},
				
				
				getSubmitDataFromDOM: function () {
					var context = this;
					var submitData = {};
					var formEl = this.$refs.form;
					
					formEl.querySelectorAll('[name]').forEach(function (node) {
						// only take values from these tagName
						if (!(['input', 'textarea', 'select', 'button', 'a', 'img', 'form', 'meta'].includes(node.tagName.toLowerCase()))) {
							return;
						}

						var recordThisNode = true;
						var valueToSet = node.value;
						var nameToSet = node.name;

						if (node.type === 'radio' && !node.checked) {
							recordThisNode = false;
						}

						if (recordThisNode) {
							
							/* 
								Special case handle (due to 1View form unable to accept + in mobile number).
								If node has [data-type="mobileNumber"], then we remove all the + manually
							*/
							if (context.endpointType === 'one-view' && node.getAttribute('data-type') === 'mobileNumber' ) {
								valueToSet = valueToSet.replace(/\+/gi, '');
							}
							
							_.set(submitData, nameToSet, valueToSet);
						};
					});
					
					return submitData;
				},
				

				handleSubmit: function () {
					var context = this;
					if (this.isSubmitting) return;

					var submitData = this.getSubmitDataFromDOM();
					console.log('submitData = ', submitData);

					this.isSubmitting = true;
					$.ajax({
						type: 'POST',
						url: this.submitEndpoint,
						contentType: 'application/json',
						// dataType: 'json',
						data: JSON.stringify(submitData),
					})
					.done(this.onSubmitSuccess)
					.fail(this.onSubmitError)
					.always(function () {
						context.isSubmitting = false;
					});
				},

				onSubmitSuccess: function (resp) {
					this.hasSubmitted = true;
					console.log('onSubmitSuccess resp: ', resp);

					if (typeof resp === 'string') {
						try {
							resp = JSON.parse(resp);
						} catch (err) {
							console.log('resp is a string and cannot be parsed to an object');
							return;
						}
					}
					/* Sample response:
						{
							"statusCode": "00",
							"leadID": "1-ARCYJ3",
							"message": "Form has been Submitted successfully to OneView",
							"description": "Transaction Successful"
						}
					*/
					this.leadID = resp.leadID || '';
				},
				onSubmitError: function (resp) {
					console.error('onSubmitError resp: ', resp);

					var statusCodeInitial = resp.status ? String(resp.status).substr(0, 1) : null;

					if (statusCodeInitial && (statusCodeInitial == '4' || statusCodeInitial == '5')) {
						this.hasEndpointError = true;
					} else {
						this.hasNetworkError = true;
					}
				},

				scrollToTop: function () {
					var context = this;
					this.$nextTick(function () {
						scrollToElement(this.$el);
					});
				},
			},
			watch: {
				hasEndpointError: function (newValue, oldValue) {
					if (newValue && !oldValue) {
						this.scrollToTop();
					}
				},
				hasSubmitted: function (newValue, oldValue) {
					if (newValue && !oldValue) {
						this.scrollToTop();
					}
				},
			},
		});
	});


});
$(document).ready(function () {
    var componentDOM = $('[data-component="highlight-tiles"]');

    var COMPONENT_DEFAULT_DATA = {
		listings1: '',
        listings2: '',
        listings3: '',
        listings4: '',
        listings5: '',
        firstItem: {},
        promoList: '',
        autoplayDuration: '',
        autoplayCarouselTile: '',
        bgcolor: '',
        carouselLength: '',
        
    }

    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);

        window.components[elementID] = new Vue({
            name: 'highlight-tiles',
            el: el,
            data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
            methods: {
				getList: function () {

                    var listCount = Object.keys(this.promoList).length;
                    var currentDate = new Date()

                    for ( i = 0; i < listCount; i++){
                        if(this.promoList["list"+(i+1)].length){
                            for ( j = 0; j < this.promoList["list"+(i+1)].length; j++){
                                if(!this.promoList["list"+(i+1)][j].expiryDate){
                                    this["listings"+(i+1)] = this.promoList["list"+(i+1)][j]
                                    this["listings"+(i+1)].image = encodeURI(this["listings"+(i+1)].image)
                                    break;
                                }else{
                                    var listDate = new Date(this.promoList["list"+(i+1)][j].expiryDate)
                                    var splitCurrentDate = currentDate.toString().split(' ')
                                    var currentNewDate = new Date(splitCurrentDate[1]+splitCurrentDate[2]+", "+splitCurrentDate[3]+" 00:00:00")
                                    Granite.I18n.setLocale("ms");
                                    Granite.I18n.get("mins read");

                                    var newDateFormat = listDate.toString().split(' ')
                                    if(listDate >= currentNewDate){
                                        this["listings"+(i+1)] = this.promoList["list"+(i+1)][j]
                                        this["listings"+(i+1)].image = encodeURI(this["listings"+(i+1)].image)
                                        var languageMonth =  Granite.I18n.get(newDateFormat[1]);
                                        this["listings"+(i+1)].expiryDate = this["listings"+(i+1)].expiryDate.replace(this["listings"+(i+1)].expiryDate,newDateFormat[2]+' '+languageMonth+' '+newDateFormat[3])
                                        break;
                                    }
                                }
                            }
                        }
                    }
                },
                carouselTileDuration: function () {
                    var autoplayDuration2 = $(el).find('.carouselTile').attr('data-autoplay');
                    this.autoplayCarouselTile = autoplayDuration2;
                },
                checkNumberOfCarousel: function () {
                    var numberOfCarousel = $(el).find('.carouselTile .swiper-slide').length;
                    this.carouselLength = numberOfCarousel;
                },
                truncateText: function () {

                    var checkIfIE = window.navigator.userAgent;
                    var msie = checkIfIE.indexOf("MSIE");

                    if(msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)) {
                        // Truncate title FOR IE
                        var carouselTile = $(el).find('.carouselTile');
                        var tileBackgroundColor = $(carouselTile).css("background-color");

                        this.bgcolor = tileBackgroundColor

                        var css = '.highlight-tiles .highlight-tiles-container .carouselTile .textDesc.line-clamp::after {background-color: '+ this.bgcolor +';}'
                        let style = document.createElement('style')
                        style.type = "text/css"
                        style.appendChild(document.createTextNode(css))
                        document.head.appendChild(style)

                    }
                }
            },
            
            mounted: function () {
                this.carouselTileDuration();
                this.checkNumberOfCarousel();

                // this.truncateText();

				enableSwiper($(this.$el).find('.multiTiles '), this.autoplayDuration);
				carouselSwiper($(this.$el).find('.carouselTile'), this.carouselLength, this.autoplayCarouselTile);
                hrefDisable($(this.$el).find('a[href=""]'))


            },
            created: function () {
                this.getList()
                this.truncateText();
            },
            computed: {
                // cssVars: function() {
                //     return {
                //       '--bg-color': this.bgcolor,
                //     }
                // }
            },
        })
    });

    

    function enableSwiper(swiperParents, autoplayDuration) {

        var autoplayConfig = (autoplayDuration && autoplayDuration > 0) ? {
            delay: parseFloat(autoplayDuration) * 1000,
            disableOnInteraction: false,
        } : false;

        var loopConfig = (autoplayDuration && autoplayDuration > 0) ? true : false;

        return new Swiper(swiperParents, {
            slidesPerView: 1,
            spaceBetween: 20,
            freeMode: false,
            watchOverflow: true,
            pagination: {
                el: swiperParents.find('.multiTiles-pagination'), // correct
                clickable: true
            },
           breakpoints: {
               1024: {
                   slidesPerView: 1,
                   spaceBetween: 20,
               },
				768: {
                    loop: loopConfig,
					autoplay: autoplayConfig,
                },
               640: {
                   allowTouchMove: true,
                   slidesPerView: 1,
                   spaceBetween: 20, 
                   loop: loopConfig,
                   autoplay: autoplayConfig,
               }
           },
            autoplay: autoplayConfig,
            threshold: 20,
        })
    }

    function carouselSwiper(swiperParents, carouselLength, autoplayCarouselTile) {
        var autoplayConfig2 = (autoplayCarouselTile && carouselLength > 1 && autoplayCarouselTile > 0) ? {
            delay: parseFloat(autoplayCarouselTile) * 1000,
            disableOnInteraction: false,
        } : false;

        var infinite = (carouselLength > 1) ? {
            loop: true,
        } : false;

        return new Swiper(swiperParents, {
            slidesPerView: 1,
            spaceBetween: 0,
            allowTouchMove: true,
            freeMode: false,
            watchOverflow: true,
            loop: infinite,
            pagination: {
                el: swiperParents.find('.carouselTile-pagination'), // correct
                clickable: true
            },
            threshold: 20,
            breakpoints: {
                1024: {
                    allowTouchMove: true,
                    slidesPerView: 'auto',
                    spaceBetween: 20,
                },
            },
            autoplay: autoplayConfig2,
        })
        
    }

   

    function hrefDisable(tile){
		 tile.click(function(e) {
        	e.preventDefault();
    });
    }

});
window.initComponent['rate-charges-table']= function initTableRC(parentEl) {
    var rootEl = parentEl.querySelector('.rc-table')
    if (!rootEl) return;

    var tableEl = rootEl.querySelector('.table-scroll-area  > table');
    var hasHeader = true;

    if (!tableEl) return;

    if (!tableEl.querySelector('tr > th')) {
		hasHeader = false;
		$(rootEl).addClass('isHeaderless');
    }

    function getTableCellIndexes (elm) {
		var td = $(elm).closest("td, th");
		var col = 0;
		td.prevAll().each(function () { col += $(this).prop('colspan'); });
		var row = td.closest("tr").index();
		var tbody = td.closest('thead,tbody,tfoot');
		var rowspans = tbody.find("td[rowspan],th[rowspan]");
		rowspans.each(function () {
			var rs = $(this);
			var rsIndex = rs.closest("tr").index();
			var rsQuantity = rs.prop("rowspan");
			if (row > rsIndex && row <= rsIndex + rsQuantity - 1) {
				var rsCol = 0;
				rs.prevAll().each(function () { rsCol += $(this).prop('colspan'); });
				if (rsCol <= col) col += rs.prop('colspan');
			}
		});
		return { row: row, col: col };
	}

    function _handleRowMouseEnter (rowIndex) {
		$(rootEl).find('table tr:nth-child(' + (rowIndex + 1) + ')').addClass('hovered');
	}
	function _handleRowMouseLeave (rowIndex) {
		$(rootEl).find('table tr:nth-child(' + (rowIndex + 1) + ')').removeClass('hovered');
	}
	function addMouseHoverListeners () {
		$(rootEl).find('table tr').on('mouseenter', function (event) {
			_handleRowMouseEnter( $(event.currentTarget).index() );
		});
		$(rootEl).find('table tr').on('mouseleave', function (event) {
			_handleRowMouseLeave( $(event.currentTarget).index() );
		});
    }
    
    function freezeTableColumn (numColumnToFreeze) {
		var wrapperEl = $(rootEl).find('.table-frozen-column');
		
		if (numColumnToFreeze <= 0) {
			wrapperEl.addClass('hidden');
			return;
		}
		
		var newTable = $('<table data-cloned data-frozen><tbody></tbody></table>');
		wrapperEl.append(newTable);

		var tableEl = parentEl.querySelector('.table-scroll-area  table');
		var tableFullWidth = 0;
		
		Array.from(tableEl.rows).forEach(function (row, rowIndex) {
			var newRow = $('<tr></tr>');
			newTable.find('tbody').append(newRow);

			var tableWidth = 0;
			
			for (var i = 0; i < numColumnToFreeze; i++) {
				var cell = row.cells.item(i);
				var cellWidth = cell.getClientRects()[0].width;

				tableWidth += cellWidth;
				var height = row.cells.item(i).getClientRects()[0].height;

				// Get the index of the current cell that accounts for the colspan and rowspan
				var cellIndices = getTableCellIndexes(cell);
				if (cellIndices.col != i) {
					/*
					When a rowspan is applied on a given <td>, the subsequent <tr> will have 1 less <td>.
					Because the second row has one less <td>, we will have to adjust for the indices as
					relying on the normal indexes are no longer accurate.
					 */
					continue;
				}
				
				if (tableEl.rows.length - 1 == rowIndex) {
					// this is the last row
					height -= 1;
				}

				if (rowIndex == 0 && cell.tagName === 'TH') {
					var newTableHeaderCell = $('<th></th>');
					newTableHeaderCell.attr({
						width: cellWidth,
						height: height,
						colspan: cell.getAttribute('colspan'),
					});

					newTableHeaderCell.html(row.cells.item(i).innerHTML);
					newRow.append(newTableHeaderCell);
				} else {
					var newTableCell = $(newRow.get(0).insertCell(i));
					newTableCell.attr({
						width: cellWidth,
						height: height,
						colspan: cell.getAttribute('colspan'),
					});
					newTableCell.html(row.cells.item(i).innerHTML);
				}
			}
		});
	}

    function cloneTableHeader (tableHeader) {
		tableHeader.attr('data-table-header', '');
		var tableHeaderCloned = tableHeader.clone();
		var newStickyTable = $('<div class="table-scroll-wrapper overflow-hidden absolute z-20 max-w-full" data-sticky><div class="table-scroll-area max-w-full overflow-x-hidden overflow-y-hidden" data-cloned><table data-sticky-table><tbody></tbody></table></div></div>');
		newStickyTable.find('tbody').prepend(tableHeaderCloned);
		return newStickyTable;
    }
    
    
    function initSticky (stickyEl, settings) {
        var config = Object.assign({}, {
            sticky_class: 'sticked',
            spacer: false,
        }, settings);
        $(stickyEl).stick_in_parent(config);
    }


    function stickyHeaderLogic () {
		var newStickyTable = cloneTableHeader($(rootEl.querySelector('table tr:first-child')));
		$(rootEl).find('.table-scroll-area table').parent().parent().prepend(newStickyTable);
		
		// var scrollAreaCloned = $(rootEl).find('.table-scroll-area[data-cloned]');
		var scrollAreaCloned = $(newStickyTable).find('.table-scroll-area[data-cloned]');
		var scrollArea = $(rootEl).find('.table-scroll-area:not([data-cloned])');

        var offsetTop = $('.main-global-header').height() || 0;

        if ($(newStickyTable).height() === 0) {
			// listen to a special event that would be triggered on rootEl. When this happens, it is a signal for us to init the sticky.
			$(rootEl).on('sticky-recalculate', function () {
				// trying to force recalc after init sticky, but does not work for unknown reason
				// $(document.body).trigger('sticky_kit:recalc');
                initSticky(newStickyTable, { offset_top: offsetTop });
			});
		} else {
            initSticky(newStickyTable, { offset_top: offsetTop });
            
		}
		$(newStickyTable).on('sticky_kit:stick', function (event) {
			scrollAreaCloned.scrollLeft(scrollArea.scrollLeft());
		});
		$(newStickyTable).on('sticky_kit:unstick', function (event) {
			scrollAreaCloned.scrollLeft(scrollArea.scrollLeft());
        });

        // sync the scrollLeft (horizontal scrolling) of the cloned with the original table
		$(rootEl).find('.table-scroll-area:not([data-cloned])').on('scroll', function (event) {
			$(rootEl).find('.table-scroll-area[data-cloned]').scrollLeft(event.currentTarget.scrollLeft);
        });
    }

    function copyFrozenColumnToStickyHeader (numColumnFrozen) {
        var frozedHeaderTh = $(rootEl).find('.table-frozen-column table tr th');
        var frozedHeaderTr = frozedHeaderTh.parent('tr');
		
		var newTable = $('<div class="table-frozen-column md:hidden"><table class="table-frozen-sticky" data-cloned><tbody></tbody></table></div>');
		
		newTable.find('tbody').append(frozedHeaderTr.clone());
		$(rootEl).find('.table-scroll-wrapper[data-sticky]').append(newTable);
    }
    
    function mobileLogic () {
        var numColumnToFreeze = 1;
        freezeTableColumn(numColumnToFreeze)
		addMouseHoverListeners();
        var requiresStickyHeader = rootEl.classList.contains('lock-header');
        if (requiresStickyHeader && hasHeader) {
			stickyHeaderLogic();
			if (numColumnToFreeze > 0) {
				// handle interaction for frozen column + sticky header
				copyFrozenColumnToStickyHeader(numColumnToFreeze);
			}
        }
        

    }

    // function forceSetColWidth () {
    //     // var firstRowWidth = $()
	// 	// force-width logic
	// 	// read 'data-cols-width-m' and 'data-cols-width-d' from dom
    //     // var colWidth_m = rootEl.getAttribute('data-cols-width-m');
    //     var colWidth_m = 115;

	// 	var widthsToSet = [];

	// 	// if (colWidth_m && !window.matchMedia('(min-width: 768px)').matches) {
	// 	// 	widthsToSet = colWidth_m.split(',').map(function (val) { return val.trim() });
	// 	// }
	// 	// if (colWidth_d && window.matchMedia('(min-width: 768px)').matches) {
	// 	// 	widthsToSet = colWidth_d.split(',').map(function (val) { return val.trim() });
	// 	// }

	// 	if (widthsToSet.length > 0) {
    //         var firstRow = tableEl.querySelector('th');
	// 		var cells = $(firstRow).children('*');
	// 		widthsToSet.forEach(function (val, index) {
	// 			if (cells) {
	// 				cells.style.width = val;
	// 			}
	// 		})
	// 	}
	// }
    // forceSetColWidth();
    
    // set timeout or else width would not be correct, maybe browser need time to repaint forceSetColWidth() ?
	setTimeout(function () {
		if (window.matchMedia('(min-width: 768px)').matches) {
			// desktopLogic();
		} else {
			mobileLogic();
		}
	}, 250);

}

document.addEventListener('DOMContentLoaded', function () {

    var componentDOM = $('[data-component="rates-charges-component"]');
    var md = window.matchMedia('(min-width: 769px)');

    componentDOM.each(function (index, el) {

        var $el = $(el);
        var tableCurrency = $el.find('.table-scroll-area');
        var mobileTableCurrency = $el.find('.table-frozen-column');

        var goldTable = $(el).find('.table-gold-investment');

        if(goldTable.length) {
            $(el).removeClass('ignoreMobileRightPadding')
        }

        var getTableHeader = tableCurrency.find('th');
        var h = 0;

        // to make cloned table header to have same header as an actual table header height
        getTableHeader.each(function () {
            h =  Math.max($(this).outerHeight(), h);
        })
        mobileTableCurrency.find('th').css('height', h);


        window.initComponent['rate-charges-table'](el);
    })

	var tableComponentDOM = document.querySelectorAll('.cmp-rates-charges');

    tableComponentDOM.forEach(function (el) {
        window.initComponent['rate-charges-table'](el);
	});

});


    

$(document).ready(function () {

    var componentDOM = $('[data-component="testimonial"]');

    componentDOM.each(function (index, el) {
        var vueDefaultData = getVueAttrDataFromEl(el);
        var elementID = el.id;
        // console.log(vueDefaultData)
        window.components[elementID] = new Vue({
            name:'testimonial',
            el: el,
            data: vueDefaultData,

            computed: {
                // styleObj: function () {
                //     var obj = {
                //         'padding' : '15px 0',
                //     }

                //     if (this.imageUrl) {
                //         obj['background-image'] =  this.imageUrl;
                //     }

                //     return obj;
                // }
            },

            mounted: function () {
                var context = this;
                // console.log(this.imageUrl)
            }
        })
    })
})
$(document).ready(function () {
    var componentDOM = $('[data-component="speaker-tile"]');

    var COMPONENT_DEFAULT_DATA = {
        desktopView:'',
        mobileView:'',
        itemCount:'',
        autoplayDuration: '',
    }

    componentDOM.each(function (index, el) {
        var elementID = el.id;
        var vueDefaultData = getVueAttrDataFromEl(el);
    
        window.components[elementID] = new Vue({
            name: 'speaker-tile',
            el: el,
            data: Object.assign({},COMPONENT_DEFAULT_DATA,vueDefaultData),
            // methods: {

            // },
            // computed: {

            // },
            mounted: function () {
                // console.log('this.itemList',this.itemList)
                initCrossSellSwiper($(this.$el).find('.speaker-tile-container'),this.desktopView, this.mobileView, this.itemCount, this.autoplayDuration);
            },
        })
    });

    function initCrossSellSwiper(swiperParents, desktopView, mobileView, itemCount, autoplayDuration) {
        itemCount = Number(itemCount)
        var autoplayConfig = (autoplayDuration && autoplayDuration > 0) ? {
            delay: parseFloat(autoplayDuration) * 1000,
            disableOnInteraction: false,
        } : false;

         var mobileAutoplayConfig = (autoplayDuration && autoplayDuration > 0 && mobileView !== 'carousel-mobile-disabled') ? {
            delay: parseFloat(autoplayDuration) * 1000,
            disableOnInteraction: false,
        } : false;

        var loopConfig = (autoplayDuration && autoplayDuration > 0) ? true : false;
        var mobileLoopConfig = (autoplayDuration && autoplayDuration > 0 && mobileView !== 'carousel-mobile-disabled') ? true : false;
        
        return new Swiper(swiperParents.find('.swiper-container').get(0), {
            slidesPerView: 'auto',
            spaceBetween: desktopView == 'carousel-desktop-disabled' ? 0 : 39,
            watchOverflow: true,
            loopFillGroupWithBlank: true,
            slidesPerGroup: 3,
            loop: desktopView == 'carousel-desktop-disabled' || itemCount < 4 ? false : true,
            pagination: {
                el: swiperParents.find('.swiper-pagination'), // correct
                clickable: true,
            },
            breakpoints: {
                1280: {
                    slidesPerGroup: 1,
                    spaceBetween: 39,
                    loop: false,
                },
                1024:{
                    slidesPerGroup: 1,
                    loop: mobileLoopConfig,
                    spaceBetween: 17,
                    allowTouchMove: mobileView == 'carousel-mobile-disabled' ? false : true,
                    autoplay: mobileAutoplayConfig,
                }
            },
            autoplay: autoplayConfig,
        })
    }
    
})

$(document).ready(function () {
	var componentDOM = $('[data-component="branch-locator"]');

	var COMPONENT_DEFAULT_DATA = {
		rawData_location: null,
		rawData_tagging: null,
		
		filterValues: {
			state: '',
			area: '',
			tags: [],
			draftTags: [],
		},
		isBranchListLoading: true,
		userGeolocation: null,
		
		branchCodeShowingDetails: null,
		
		currentPageIndex: 0,
		ITEMS_PER_PAGE: 10,
		
		daysOfWeekLabels: [ 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday' ],
		
		allAreasText: '',
		filterOverlayVisible: false,
		
		chartOptions: {
			chart: {
				height: 320,
				type: 'line',
				zoom: {
					enabled: false
				},
				toolbar: {
					show: false,
				},
				animations: {
					enabled: false,
				},
			},
			colors: ['#c4161c'],
			dataLabels: {
				enabled: true,
				offsetY: -8,
				style: {
					fontSize: '18px',
					fontFamily: 'Noto Sans',
					fontWeight: 'bold',
					colors: ['#333739'],
				},
				background: {
					enabled: false,
				},
			},
			stroke: {
				curve: 'straight',
				width: 2,
			},
			tooltip: {
				enabled: false,
			},
			markers: {
				size: 7,
				hover: {
					size: 10
				},
			},

			grid: {
				borderColor: '#e0e0e0',
				xaxis: {
					lines: {
						show: true,
					}
				},
				yaxis: {
					lines: {
						show: false,
					}
				},  
				row: {
					
				},
				padding: {
					top: 15,
					left: 15,
				},
			},
			yaxis: {
				show: false,
				min: 0,
				max: function (max) {
					if (max <= 10) return 10;
					return max;
				},
			},
			xaxis: {
				type: 'numeric',
				// type: 'category',
				// Note: Use "⠀" character to display blank label instead of spacebar.
				// categories: ['⠀', '9am', '10am', '11am', '12pm', '1pm', '2pm', '3pm', '4pm', '5pm', '⠀' ],
				// categories: [8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
				axisBorder: {
					height: 2,
					color: '#B7B7B7',
					// offsetX: -10,
				},
				// offsetX: 10,
				// axisTicks: {
				// 	show: false,
				// },
				tickAmount: 8,
				// tickPlacement: 'between',
				labels: {
					style: {
						colors: ['#333739'],
						fontSize: '14px',
						fontFamily: 'Noto Sans',
						// cssClass: 'apexcharts-yaxis-label',
					},
					hideOverlappingLabels: false,
					showDuplicates: true,
					formatter: function formatter (value, timestamp, index) {
						var isAM = (value - 12 <= 0);
						if (value === 12) isAM = false;
						if (value === 24) isAM = true;
						var hour = (value - 12 <= 0) ? value : value - 12;
						
						if (value === 8 || value === 18) return '⠀';
						return hour + (isAM ? 'am' : 'pm');
					},
				},
			},
			
			responsive: [
				{
					breakpoint: 767,
					options: {
						chart: {
							height: 220,
						},
						dataLabels: {
							offsetY: -7,
							style: {
								fontSize: '14px',
							},
						},
						markers: {
							size: 5,
							hover: {
								size: 7
							},
						},
						grid: {
							padding: {
								top: 7,
								left: 7,
							},
						},
						xaxis: {
							labels: {
								style: {
									fontSize: '12px',
								},
								formatter: function formatter(value, timestamp, index) {
									var isAM = (value - 12 <= 0);
									if (value === 12) isAM = false;
									if (value === 24) isAM = true;
									var hour = (value - 12 <= 0) ? value : value - 12;

									if (value === 8 || value === 18) return '⠀';
									return hour + (isAM ? 'a' : 'p');
								},
							},
						},
					},
				},
			],
		},
		
		rawData_QMS: {},
		isQMSDataLoading: false,
	}
	
	
	// function removeAtCharFromString (s) {
	// 	return s.replace(/@/g, '');
	// }
	
	var queryStringHelpers = {
		toUrl: function (s) {
			if (s === '@current-location' || s === '@all-areas') {
				// remove the @
				return s.slice(1);
			}
			return s;
		},
		// reverse the above
		toValue: function (s) {
			if (s === 'current-location' || s === 'all-areas') {
				// add the @
				return '@' + s;
			}
			return s;
		},
	}
	
	var QUERY_KEY_LOCATION = 'l';
	var QUERY_KEY_TAGS = 't';
	
	
	
	function calcDisplacement (positionA, positionB) {
		var lat1 = positionA.latitude;
		var lon1 = positionA.longitude;

		var lat2 = positionB.latitude;
		var lon2 = positionB.longitude;
		
		var R = 6371; // km
		var dLat = (lat2 - lat1) * Math.PI / 180;
		var dLon = (lon2 - lon1) * Math.PI / 180;
		var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
			Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
			Math.sin(dLon / 2) * Math.sin(dLon / 2);
		var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
		var d = R * c;
		return d;
	}
	
	
	// utility function to convert javascript built-ins to plain object
	function cloneAsObject(obj) {
		if (obj === null || !(obj instanceof Object)) {
			return obj;
		}
		var temp = (obj instanceof Array) ? [] : {};
		// ReSharper disable once MissingHasOwnPropertyInForeach
		for (var key in obj) {
			temp[key] = cloneAsObject(obj[key]);
		}
		return temp;
	}
	
	function formatLastUpdatedTime(timeString) {
		var d;
		try {
			d = new Date(timeString);
		} catch (err) {
			throw err;
		}


		var hours = d.getHours();
		hours = (hours > 12) ? (hours - 12) : hours;
		if (hours == '0') hours = 12; // some Android browser bug where it will show 0

		var ampm = d.getHours() >= 12 ? 'pm' : 'am';

		// var minutes = d.toLocaleTimeString(undefined, {
		// 	minute: '2-digit',
		// });
		var minutes = d.getMinutes();
		if (minutes < 10) minutes = '0' + minutes;

		// needed format: 01:00 PM, 15 Jan 2020, Wednesday
		return (
			hours + ':' + minutes + ' ' + ampm +
			', ' +
			d.toLocaleDateString(undefined, {
				day: 'numeric',
			}) + ' ' +
			d.toLocaleDateString(undefined, {
				month: 'short',
			}) + ' ' +
			d.toLocaleDateString(undefined, {
				year: 'numeric',
			}) + ', ' +
			d.toLocaleDateString(undefined, {
				weekday: 'long',
			})
		);
	}
	
	
	componentDOM.each(function (index, el) {
		var elementID = el.id;
		var vueDefaultData = getVueAttrDataFromEl(el);
		var serviceUrl = el.getAttribute('data-service-url');
		var qmsServiceUrl = el.getAttribute('data-qms-service-url') || '';
		
		var queryFilters = {
			location: [],
			tags: [],
		}
		
		var url = new URL(window.location.href);
		if (url.searchParams.has(QUERY_KEY_LOCATION)) {
			queryFilters.location = url.searchParams.get(QUERY_KEY_LOCATION).split(',');
			queryFilters.location = queryFilters.location.map(queryStringHelpers.toValue);
		}
		if (url.searchParams.has(QUERY_KEY_TAGS)) {
			queryFilters.tags = url.searchParams.get(QUERY_KEY_TAGS).split(',');
		}
		
		function getQmsApiUrl (branchCode) {
			return qmsServiceUrl.replace('[branchCode]', branchCode);
		}


		window.components[elementID] = new Vue({
			name: 'branch-locator',
			el: el,
			components: {
				apexChart: VueApexCharts,
			},
			mixins: [SmoothReflow],
			data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
			mounted: function () {
				
			},
			created: function () {
				var context = this;
				this._swipers = {};
				
				$.ajax({
					url: serviceUrl,
					dataType: 'json',
				}).done(function (resp) {
					console.log('branch-locator serviceUrl resp = ', resp);
					
					context.rawData_location = resp.location;
					context.filterValues.state = queryFilters.location[0] || _.get(context.filterLocation_state, '[0].value', '');
					context.filterValues.area = queryFilters.location[1] || _.get(context.filterLocation_area, '[0].value', '');
					
					context.rawData_tagging = resp.tagging;
					if (queryFilters.tags) context.filterValues.tags = queryFilters.tags;
					
					window.navigator.geolocation.getCurrentPosition(context.onGeoSuccess, context.onGeoError);
					
					
					var defaultTagFilter = $(context.$el).attr('data-default-tag-filter');
					if (defaultTagFilter) {
						defaultTagFilter.split(',').forEach(function (tag) {
							var tagToPush = tag.trim();
							if (!context.filterValues.tags.includes(tagToPush)) {
								context.filterValues.tags.push(tagToPush);
							}
						});
						context.updateQueryString();
					}
					
				}).fail(function (resp) {
					
				}).always(function () {
					context.isBranchListLoading = false;
				});
				
			},
			methods: {
				smoothReflowEveryBranchItem: function () {
					var context = this;
					context.$nextTick(function () {
						context.$el.querySelectorAll('.branch-item').forEach(function (el) {
							context.$smoothReflow({
								el: el,
							});
						});
					});
				},
				handleTagChange: function (val, event, options) {
					var options = options || {};
					var isDraft = !!options.isDraft;
					
					var tagArrToModify = isDraft ? this.filterValues.draftTags : this.filterValues.tags;
					
					if (event.target.checked) {
						tagArrToModify.push(val);
					} else {
						this.$delete(tagArrToModify, tagArrToModify.indexOf(val));
					}
					
					if (!isDraft) {
						// not draft that changed, so need to perform the following
						this.branchCodeShowingDetails = null;
						this.currentPageIndex = 0;
						this.updateQueryString();
					}
				},
				handleLocationDropdownChanged: function (dropdownName, val) {
					var context = this;
					if (dropdownName === 'state') {
						if (val === '@current-location') {
							this.filterValues.area = '';
						} else {
							this.filterValues.area = _.get(this.filterLocation_area, '[0].value', '');
						}
						
					} else if (dropdownName === 'area') {
						
					}
					this.branchCodeShowingDetails = null;
					this.currentPageIndex = 0;
					this.updateQueryString();
				},
				
				updateQueryString: function () {
					var url = new URL(window.location.href);
					var queryLoc_val = queryStringHelpers.toUrl(this.filterValues.state) + ',' + queryStringHelpers.toUrl(this.filterValues.area);
					
					if (this.filterValues.state === '@current-location') {
						// do not save any query string for this case
						url.searchParams.delete(QUERY_KEY_LOCATION);
					} else {
						url.searchParams.set(QUERY_KEY_LOCATION, queryLoc_val);
					}

					var queryTag_val = this.filterValues.tags.join(',');
					if (!queryTag_val) {
						url.searchParams.delete(QUERY_KEY_TAGS);
					} else {
						url.searchParams.set(QUERY_KEY_TAGS, queryTag_val);
					}
					
					// manually replace '%2C' with comma, for aesthetic reason -.-
					var newURL = url.toString().replace(/%2C/gi, ',');
					window.history.replaceState({}, '', newURL);
				},
				
				handleBranchDetailToggle: function (branchCode) {
					var context = this;
					var isCurrentlyShowing = (context.branchCodeShowingDetails === branchCode);
					context.branchCodeShowingDetails = isCurrentlyShowing ? null : branchCode;
					
					if (!isCurrentlyShowing) {
						// initialize swiper, if needed
						this.requestQMSData(branchCode).then(function () {
							context.initQMSSwiper(branchCode).then(function () {
								window.scrollToElement(context.$el.querySelector('.branch-item[data-branch-code="' + branchCode + '"] .btn-qms-accordion'));
							});
						}).catch(function () {
							// error in api, do nothing
						});
					}
				},
				initQMSSwiper: function (branchCode) {
					var context = this;
					return new Promise(function (resolve, reject) {
						context.$nextTick(function () {
							var branchDOM = $(context.$el).find('.branch-item[data-branch-code="' + branchCode + '"]');
							if (!branchDOM.find('.swiper-container').hasClass('swiper-container-initialized')) {
								context._swipers[branchCode] = initSwiper(branchDOM);

								// auto slide to whatever day it is today
								// 0 = Sunday, 1 = Monday ...
								var todayDayOfWeek = new Date().getDay();
								var slideToIndex = todayDayOfWeek - 1;

								if (todayDayOfWeek === 0) slideToIndex = 6;

								context._swipers[branchCode].slideTo(slideToIndex, 0);
								resolve();
							}
						});
					});
				},
				
				
				onGeoSuccess: function (position) {
					var latitude = position.coords.latitude;
					var longitude = position.coords.longitude;
					console.log('Geolocation data success. Latitude, longitude = ', latitude, longitude);
					window.position = position;
					this.$set(this, 'userGeolocation', cloneAsObject(position));
					
					if (!queryFilters.location[0]) {
						// no query string, so default to select current location since user accepted the permission
						this.filterValues.state = '@current-location';
						this.handleLocationDropdownChanged('state', '@current-location');
					}
				},
				onGeoError: function () {
					console.log('Unable to get geolocation data');
					this.$set(this, 'userGeolocation', new Error('Unable to get geolocation data'));
				},
				
				
				handleShowFilterOverlay: function () {
					// copy over tags to drafts
					this.filterValues.draftTags = this.filterValues.tags.concat();
					
					this.filterOverlayVisible = true;
				},
				handleCloseFilterOverlay: function () {
					// discard drafts
					this.filterValues.draftTags = this.filterValues.tags.concat();
					
					this.filterOverlayVisible = false;
				},
				handleApplyFilterOverlay: function () {
					
					// commit drafts
					this.filterValues.tags = this.filterValues.draftTags.concat();
					
					this.filterOverlayVisible = false;
				},
				
				
				requestQMSData: function (branchCode) {
					var context = this;
					var qmsServiceUrl = getQmsApiUrl(branchCode);
					
					return new Promise(function (resolve, reject) {
						/*
						setTimeout(function () {
							context.rawData_QMS[branchCode] = [
								{
									"date": "2020-01-27",
									"day": "MONDAY",
									"data": [
										{
											"id": "09",
											"peopleWaiting": "3",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "10",
											"peopleWaiting": "2",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "11",
											"peopleWaiting": "1",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "12",
											"peopleWaiting": "4",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "13",
											"peopleWaiting": "5",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "14",
											"peopleWaiting": "5",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "15",
											"peopleWaiting": "2",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "16",
											"peopleWaiting": "1",
											"timeStamp": "2020-02-08 01:01:24",
										},
									]
								},
								{
									"date": "2020-01-28",
									"day": "TUESDAY",
									"data": [
										{
											"id": "09",
											"peopleWaiting": "4",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "10",
											"peopleWaiting": "6",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "11",
											"peopleWaiting": "12",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "12",
											"peopleWaiting": "11",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "13",
											"peopleWaiting": "5",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "14",
											"peopleWaiting": "3",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "15",
											"peopleWaiting": "7",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "16",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
									]
								},
								{
									"date": "2020-01-29",
									"day": "WEDNESDAY",
									"data": [
										{
											"id": "09",
											"peopleWaiting": "4",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "10",
											"peopleWaiting": "6",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "11",
											"peopleWaiting": "1",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "12",
											"peopleWaiting": "3",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "13",
											"peopleWaiting": "5",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "14",
											"peopleWaiting": "1",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "15",
											"peopleWaiting": "2",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "16",
											"peopleWaiting": "2",
											"timeStamp": "2020-02-08 01:01:24",
										},
									]
								},
								{
									"date": "2020-01-30",
									"day": "THURSDAY",
									"data": [
										{
											"id": "09",
											"peopleWaiting": "95",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "10",
											"peopleWaiting": "46",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "11",
											"peopleWaiting": "125",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "12",
											"peopleWaiting": "52",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "13",
											"peopleWaiting": "23",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "14",
											"peopleWaiting": "17",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "15",
											"peopleWaiting": "26",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "16",
											"peopleWaiting": "88",
											"timeStamp": "2020-02-08 01:01:24",
										},
									]
								},
								{
									"date": "2020-01-31",
									"day": "FRIDAY",
									"data": [
										{
											"id": "09",
											"peopleWaiting": "5",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "10",
											"peopleWaiting": "64",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "11",
											"peopleWaiting": "32",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "12",
											"peopleWaiting": "56",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "13",
											"peopleWaiting": "51",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "14",
											"peopleWaiting": "26",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "15",
											"peopleWaiting": "14",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "16",
											"peopleWaiting": "47",
											"timeStamp": "2020-02-08 01:01:24",
										},
									]
								},
								{
									"date": "2020-02-01",
									"day": "SATURDAY",
									"data": [
										{
											"id": "09",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "10",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "11",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "12",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "13",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "14",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "15",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "16",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
									]
								},
								{
									"date": "2020-02-02",
									"day": "SUNDAY",
									"data": [
										{
											"id": "09",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "10",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "11",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "12",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "13",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "14",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "15",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
										{
											"id": "16",
											"peopleWaiting": "0",
											"timeStamp": "2020-02-08 01:01:24",
										},
									]
								},
							];
							context.isQMSDataLoading = false;
							resolve();
						}, 1500);
						return;
						*/
						
						if (branchCode in context.rawData_QMS) {
							resolve();
							return;
						}
						
						context.isQMSDataLoading = true;
						
						$.ajax({
							url: qmsServiceUrl,
							dataType: 'json',
						}).done(function (resp) {
							// context.rawData_QMS[branchCode] = resp;
							context.$set(context.rawData_QMS, branchCode, resp);
							resolve();
						}).fail(function (resp) {
							reject();
						}).always(function () {
							context.isQMSDataLoading = false;
						});
					});
				},
			},
			computed: {
				filterLocation_state: function () {
					var context = this;
					var myCurrentLocation =  [];
					
					if (this.userGeolocation && !(this.userGeolocation instanceof Error)) {
						// user has permitted geolocation
						myCurrentLocation = [{
							label: $('[data-template-id="current-location-label"]').html(),
							value: '@current-location',
						}];
					}
					if (!context.rawData_location) return myCurrentLocation;
					
					return myCurrentLocation.concat(context.rawData_location.map(function (data) {
						return {
							label: data.label,
							value: data.value,
						}
					}));
				},

				filterLocation_area: function () {
					var context = this;
					if (!context.filterValues.state || !context.rawData_location) return [];

					var stateData = context.rawData_location.find(function (data) {
						return data.value === context.filterValues.state;
					});
					
					if (!stateData) return [];
					
					return [{
						label: context.allAreasText,
						value: '@all-areas',
					}].concat(stateData.areas.map(function (data) {
						return {
							label: data.label,
							value: data.value,
						}
					}));
				},
				
				filterTagging: function () {
					var context = this;
					if (!context.rawData_tagging) return [];
					
					return context.rawData_tagging;
				},
				
				
				
				/* 
					Below 3 properties are purely for authors to identify which branch has problem only:
					- allBranchesExtracted
					- allBranchesExtracted_withoutDuplicate
					- allBranchesExtracted_difference_withDuplicate
					- hasDuplicatedBranchCode
				*/
				allBranchesExtracted: function () {
					var context = this;
					var result = [];
					var allBranchesData = this.rawData_location;
					
					if (!allBranchesData) return [];
					
					allBranchesData.forEach(function (dataLocation) {
						dataLocation.areas.forEach(function (dataArea) {
							result = result.concat(dataArea.branches);
						});
					});
					
					return result;
				},
				allBranchesExtracted_withoutDuplicate: function () {
					var context = this;
					var result = this.allBranchesExtracted;
					
					if (!result) return [];
					
					// ❗ remove duplicated branchCode item. CODE IS DUPLICATED FOR
					// "allBranchesExtracted_withoutDuplicate" and "branchesFiltered_withoutDuplicate" computed propery
					result = _.uniqBy(result, function (branch) {
						// branchCode is used as a criteria, but when it is missing (not an error, it is possible because ATM has not branchCode), then their address + lat + long is used
						if ('branchCode' in branch && (branch.branchCode)) {
							return branch.branchCode;
						}
						return branch.branchAddress + ':' + branch.latitude + ',' + branch.longitude;
					});
					return result;
				},
				allBranchesExtracted_difference_withDuplicate: function () {
					var context = this;
					var arr1 = this.allBranchesExtracted;
					var arr2 = this.allBranchesExtracted_withoutDuplicate;
					return _.difference(arr1, arr2);
				},
				hasDuplicatedBranchCode: function () {
					return this.allBranchesExtracted_difference_withDuplicate.length > 0;
				},
				
				
				
				
				
				
				branchesFiltered: function () {
					var context = this;
					var result = [];
					var allBranches = this.rawData_location;
					
					if (!allBranches) return [];
					
					var branchListForSelectedLocation = [];
					
					if (this.filterValues.state === '@current-location') {
						// filter by displacement, since user selected his current location
						var DISPLACEMENT_LIMIT = 10; // in km
						branchListForSelectedLocation = allBranches
							.reduce(function (acc, data) {
								return acc.concat(data.areas.reduce(function (acc2, data2) {
									return acc2.concat(data2.branches);
								}, []));
							}, [])
							.reduce(function (acc, branch) {
								// filtering and adding a new properties, displacement
								var displacement = calcDisplacement(context.userGeolocation.coords, {
									latitude: parseFloat(branch.latitude),
									longitude: parseFloat(branch.longitude),
								});
								console.log('Displacement with ' + branch.branchName + ' = ', displacement);
								
								if (displacement <= DISPLACEMENT_LIMIT) {
									acc.push(Object.assign({}, branch, {
										displacementFromUserLoc: displacement
									}));
								}
								
								return acc;
							}, [])
							.sort(function (branchA, branchB) {
								return branchA.displacementFromUserLoc - branchB.displacementFromUserLoc;
							})
						;
					} else {
						// filter by state + area
						allBranches.forEach(function (dataLocation) {
							if (dataLocation.value === context.filterValues.state) {
								// found the state
								dataLocation.areas.forEach(function (dataArea) {
									if (context.filterValues.area === '@all-areas') {
										// all area required, just concat
										branchListForSelectedLocation = branchListForSelectedLocation.concat(dataArea.branches);
									} else if (dataArea.value === context.filterValues.area) {
										// found the area
										branchListForSelectedLocation = dataArea.branches;
									}
								});
							}
						});
					}
					
					if (branchListForSelectedLocation.length === 0) return [];

					if (this.filterValues.tags.length === 0) {
						// no tags selected, return everything
						return branchListForSelectedLocation;
					}
					
					result = branchListForSelectedLocation.filter(function (branch) {
						return !!(branch.listTaggingList.find(function (tag) {
							return context.filterValues.tags.includes(tag.value);
						}));
					});
					
					return result;
				},
				
				branchesFiltered_withoutDuplicate: function () {
					var context = this;
					var result = this.branchesFiltered;
					
					// ❗ remove duplicated branchCode item. CODE IS DUPLICATED FOR
					// "allBranchesExtracted_withoutDuplicate" and "branchesFiltered_withoutDuplicate" computed propery
					result = _.uniqBy(result, function (branch) {
						// branchCode is used as a criteria, but when it is missing (not an error, it is possible because ATM has not branchCode), then their address + lat + long is used
						if ('branchCode' in branch && (branch.branchCode)) {
							return branch.branchCode;
						}
						return branch.branchAddress + ':' + branch.latitude + ',' + branch.longitude;
					});
					return result;
				},
				
				branchesToDisplay: function () {
					return this.branchesFiltered_withoutDuplicate.slice(0, (this.currentPageIndex+1) * this.ITEMS_PER_PAGE);
				},
				
				branchesDisplayedProcessed: function () {
					return this.branchesToDisplay.map(function (branch) {
						return Object.assign({}, branch, {
							computedServices: branch.listTaggingList.map(function (tag) { return tag.label; }).join(', '),
						});
					});
				},
				
				
				/* This computed transforms:
					{'0123': [ {day: 'MONDAY', ...}, {day: 'TUESDAY', ... }, { ... } ]}
					into
					{'0123': { MONDAY: {...}, TUESDAY: {...}, ... }}
					
					& also remove those where time is outside 9am to 5pm

					& also processes hourly date by sorting it by "id",
					so that earlier time always come first in the array
				*/
				rawData_QMS_groupedByDay: function () {
					var context = this;
					var rawQMSData = context.rawData_QMS;
					if (!rawQMSData) return {};
					
					var result = {};
					
					Object.keys(rawQMSData).forEach(function (key) {
						var val = rawQMSData[key];
						var grouped = _.groupBy(val, 'day');
						
						Object.keys(grouped).forEach(function (day) {
							// remove them from their array parent
							grouped[day] = grouped[day][0];
							
							// remove those where time is outside 9am to 5pm
							grouped[day].data = grouped[day].data.filter(function (data) {
								var hourInt = parseInt(data.id);
								return ((hourInt >= 9) && (hourInt <= 17))
							});
							
							
							// proceed to sort the data by timeStamp
							grouped[day].data = _.sortBy(grouped[day].data, function (data) {
								return new Date(data.timeStamp);
							});
						});
						
						
						result[key] = grouped;
					});
					
					return result;
				},
				
				
				qmsData_toBeConsumed: function () {
					var context = this;
					var rawQMSData = context.rawData_QMS_groupedByDay[context.branchCodeShowingDetails];
					
					if (!rawQMSData) return [];
					
					/* var CHART_CLOSED_DATA = [{
						data: [
							{ x: 9, y: null },
							{ x: 9.5, y: 0 },
							{ x: 10.5, y: 0 },
							{ x: 11.5, y: 0 },
							{ x: 12.5, y: 0 },
							{ x: 13.5, y: 0 },
							{ x: 14.5, y: 0 },
							{ x: 15.5, y: 0 },
							{ x: 16.5, y: 0 },
							{ x: 17, y: null },
						],
					}]; */
					
					var ZERO_DATA_OPTIONS = _.cloneDeep(context.chartOptions);
					delete ZERO_DATA_OPTIONS.yaxis.min;
					delete ZERO_DATA_OPTIONS.yaxis.max;
					
					var DAY_KEYS = [
						// these are not label, these are used programatically
						'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY'
					];
					
					var finalData = DAY_KEYS.reduce(function (acc, dayKey, dayIndex) {
						var todayData = rawQMSData[dayKey];
						var dayLabel = context.daysOfWeekLabels[dayIndex];
						
						var resultData = {
							dayLabel: dayLabel,
							chartOptions: context.chartOptions,
							// closed: false,
							chartData: [],
							
							noData: false,
							
							lastNumPeople: 0,
							lastTimeStamp: '',
						}
						
						
						
						if (!todayData || todayData.data.length === 0) {
							resultData.noData = true;
						} else {
							// has data
							var chartData;
							
							// check is it considered "closed"
							var allDataZero = todayData.data.every(function (dObj) {
								return dObj.peopleWaiting == 0; // use loose equality on purpose
							});
							
							if (allDataZero) {
								resultData.chartOptions = Object.assign({}, ZERO_DATA_OPTIONS);
								// resultData.closed = true;
								// chartData = JSON.parse(JSON.stringify(CHART_CLOSED_DATA)); // quick deep clone
							}
							
							// if (allDataZero) {
							// 	// closed
							// 	resultData.chartOptions = Object.assign({}, ZERO_DATA_OPTIONS);
							// 	resultData.closed = true;
							// 	chartData = JSON.parse(JSON.stringify(CHART_CLOSED_DATA)); // quick deep clone
							// } else {
							// 	// today is open
							// }
							chartData = [{
								data: [9, 9.5, 10.5, 11.5, 12.5, 13.5, 14.5, 15.5, 16.5, 17].reduce(function (acc, xValue) {
									var result = null;
									
									if (xValue === 9 || xValue === 17) {
										result = { x: xValue, y: null };
										acc.push(result);
										return acc;
									}
									
									// for e.g. 15.5 -> we taking 15 from data
									var hourVal = parseInt(xValue);

									var thisHourData = todayData.data.find(function (dObj) {
										return dObj.id && (dObj.id == hourVal);
									});

									if (thisHourData) {
										result = { x: xValue, y: parseInt(thisHourData.peopleWaiting) };
									} else {
										// no data, no need to do anything (let it be missing x and y value)
									}
									
									
									if (result) {
										acc.push(result);
									}
									return acc;
								}, []),
							}];
							
							var lastData = _.last(todayData.data);
							resultData.lastNumPeople = lastData ? lastData.peopleWaiting : 0;
							resultData.lastTimeStamp = lastData ? formatLastUpdatedTime(lastData.timeStamp) : '';
							resultData.chartData = chartData;
						}
						
						acc.push(resultData);
						return acc;
					}, []);
					
					return finalData;
				},
				
				
				qmsMetadata: function () {
					var context = this;
					
					var result = null;
					
					_.forEachRight(this.qmsData_toBeConsumed, function (data) {
						if (data.noData === false) {
							// this has data
							result = {};
							result.numCustomer = data.lastNumPeople;
							result.lastUpdated = data.lastTimeStamp;
							return false; // have to exit the loop early
						}
					});
					
					return result;
				},
				
			},
			watch: {
				// only need this for QMS "Show Details" expanded area
				// branchesDisplayed: function () {
				// 	var context = this;
				// 	context.smoothReflowEveryBranchItem();
				// },
			},
		});
	});
	
	
	
	function initSwiper(swiperParents, options) {
		return new Swiper(swiperParents.find('.swiper-container'), {
			slidesPerView: 1,
			spaceBetween: 0,
			// navigation: {
			// 	nextEl: swiperParents.find('.btn-nav-next'),
			// 	prevEl: swiperParents.find('.btn-nav-prev'),
			// },
			loop: false,
			pagination: {
				el: swiperParents.find('.swiper-pagination'),
				clickable: true,
			},
			breakpoints: {
				
			},
			autoplay: false,
			threshold: 20,
		});
	}
	
	
});


$(document).ready(function () {
	var componentDOM = $('[data-component="comparison-tool"]');

	var COMPONENT_DEFAULT_DATA = {
		isProductDataLoading: true,
		isCompareToolbarExpanded: true,
		rawData: null,

		isCardSelectorOverlayVisible: false,

		confirmedSelection: [],
		draftSelection: [],

		showDraftFullError: false,
	}


	// function encodeHtml(rawStr) {
	// 	return rawStr.replace(/[\u00A0-\u9999<>\&]/gim, function (i) {
	// 		return '&#' + i.charCodeAt(0) + ';';
	// 	});
	// }


	var QUERY_PARAMETER = 'p';

	componentDOM.each(function (index, el) {
		var elementID = el.id;
		var vueDefaultData = getVueAttrDataFromEl(el);
		var serviceUrl = el.getAttribute('data-service-url');

		var configuredRootPath = el.getAttribute('data-configured-root-path');


		window.components[elementID] = new Vue({
			name: 'comparison-tool',
			el: el,
			// mixins: [SmoothReflow],
			data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
			mounted: function () {

			},
			created: function () {
				var context = this;

				var url = new URL(window.location.href);
				if (url.searchParams.has(QUERY_PARAMETER)) {
					context.confirmedSelection = url.searchParams
						.get(QUERY_PARAMETER)
						.split(',')
						;

					context.draftSelection = context.confirmedSelection.concat();
				}

				$.ajax({
					url: serviceUrl,
					dataType: 'json',
				}).done(function (resp) {
					console.log('comparisonTool resp = ', resp);
					context.rawData = resp;
				}).fail(function (resp) {

				}).always(function () {
					context.isProductDataLoading = false;
				});
			},
			methods: {
				handleToolbarClicked: function () {
					var context = this;
					if (this.isCompareToolbarExpanded) {
						return;
					}
					this.isCompareToolbarExpanded = true;
				},

				handleShowSelectorOverlay: function () {
					this.resetDraftToConfirmed();
					this.showDraftFullError = false;
					this.isCardSelectorOverlayVisible = true;
				},
				handleSelectorOverlay_apply: function () {
					var context = this;

					this.commitSelection();
					this.isCardSelectorOverlayVisible = false;
				},
				handleSelectorOverlay_cancel: function () {
					var context = this;

					this.resetDraftToConfirmed();
					this.isCardSelectorOverlayVisible = false;
				},
				handleRemoveProduct: function (path) {
					var context = this;
					this.$delete(this.confirmedSelection, this.confirmedSelection.indexOf(path));

					// in mobile, need to auto scroll to left side
					this.handleScrollContainerClick('left', 0);
				},

				commitSelection: function () {
					this.confirmedSelection = this.draftSelection.concat();
				},
				resetDraftToConfirmed: function () {
					this.draftSelection = this.confirmedSelection.concat();
				},
				handleSelectorOverlay_productClick: function (productName) {
					if (this.draftSelection.includes(productName)) {
						// remove it
						this.$delete(this.draftSelection, this.draftSelection.indexOf(productName));
						this.showDraftFullError = false;
					} else {
						// add it
						if (this.draftSelection.length >= 3) {
							// it is full
							this.showDraftFullError = true;
							return;
						}
						this.draftSelection.push(productName);
					}
				},

				handleScrollContainerClick: function (dir, duration) {

					var container = this.$el.querySelector('.comparison-fixed-container');
					var maxScrollLeft = container.scrollWidth - container.clientWidth;
					var scrollLeftVal = dir === 'left' ? 0 : maxScrollLeft;

					var duration = (duration === null || duration === undefined) ? 400 : duration;

					$(container).animate({
						scrollLeft: scrollLeftVal
					}, {
						duration: duration,
					});
				},


				updateQueryString: function () {
					var url = new URL(window.location.href);

					if (this.confirmedSelection.length === 0) {
						// no product selected, need to delete
						url.searchParams.delete(QUERY_PARAMETER);
					} else {
						var queryVal = this.confirmedSelection.join(',');
						// has something, need to set
						if (url.searchParams.has(QUERY_PARAMETER)) {
							url.searchParams.set(QUERY_PARAMETER, queryVal);
						} else {
							url.searchParams.append(QUERY_PARAMETER, queryVal);
						}
					}

					var newURL = url.toString().replace(/%2C/gi, ',');
					window.history.replaceState({}, '', newURL);
				},

				triggerPopUpModal: function (url) {
					if (url) {
						window.modalPopup({
							show: true,
							contentUrl: url,
						});
					}
				},
			},
			computed: {
				isCompareFull: function () {
					return this.confirmedSelection.length >= 3;
				},

				productsBeingCompared: function () {
					var context = this;

					if (!context.rawData) return [];

					return context.confirmedSelection.map(function (productName) {
						var product = context.rawData.find(function (product) {
							return product.productName === productName;
						});

						if (!product) product = { comparisonTools: [] };

						return Object.assign({}, product, {
							// always ensure 6 features
							comparisonFeatures: [0, 1, 2, 3, 4, 5].map(function (index) {
								var feature = product.comparisonTools[index];
								if (!feature) return {};
								return feature;
							}),
						});
					});
				},
				productsBeingCompared_filled: function () {
					var context = this;
					return [0, 1, 2].map(function (i) {
						return context.productsBeingCompared[i] || null;
					});
				},



				isDraftFull: function () {
					return this.draftSelection.length >= 3;
				},
				productsInOverlay: function () {
					var context = this;
					if (!context.rawData) return [];
					return this.rawData.map(function (product) {
						return Object.assign({}, product, {
							isSelected: context.draftSelection.includes(product.productName),
						});
					});
				},

			},
			watch: {
				productsBeingCompared: function () {
					var context = this;
					this.$nextTick(function () {
						window.requestExternalSVGIcon(context.$el);
					});
				},
				confirmedSelection: function () {
					this.updateQueryString();
				},
			}
		});
	});


});


$(document).ready(function () {
    var elementDOM = $('[data-component="solution-card"]')
    

    elementDOM.each(function (index, el) {
        var vueDefaultData = getVueAttrDataFromEl(el);
        var elementId = el.id;

        window.components[elementId] = new Vue({
            name: 'solution-card',
            el: el,
            data: vueDefaultData,

            mounted: function () {
                // var _this = this;
            },

            methods: {
                equalHeight: function(groupBox) {
                    tallest = 0;
                    groupBox.each(function() {
                        thisHeight = $(this).height(); 
                        // In case that box-sizing: border-box is used, this becomes "thisHeight = $(this).outerHeight();"
                        if(thisHeight > tallest) {
                            tallest = thisHeight;
                        }
                    });
                    groupBox.height(tallest);
                }
            },
            created: function () {
                var solutionCard = $(el).find('.solution-card');
                var titleBox = $(solutionCard).find('.title-box');
                var descriptionBox = $(solutionCard).find('.description-box');
                var md = window.matchMedia('(min-width: 769px)');

                if(md.matches) {
                    this.equalHeight(titleBox)
                    this.equalHeight(descriptionBox)
                
                    if(solutionCard.length < 3) {
                        solutionCard.css('width', '410px');
                    }
        
                    if(solutionCard.length > 3) {
                        solutionCard.parent('.sc-parent').addClass('justify-start').removeClass('justify-center')
                    }
                }
            }
            
        })
       
    })
});
// function equalHeight(groupBox) {
   
// }
$(document).ready(function () {
	var componentDOM = $('[data-component="event-notification"]');

	var COMPONENT_DEFAULT_DATA = {
		isLoading: true,
		rawData: [],

		leadDay: null,
		
		isDismissed: false,
		currentEpochTime: -999999,
		// isComponentVisible: true,
	}
	
	var COOKIE_DISMISS_KEY = 'event_notification_dismissed';
	
	
	function humanReadableDuration(inputInSeconds) {
		if (typeof inputInSeconds !== 'number') throw new TypeError('Invalid input of type ', typeof inputInSeconds);
		if (inputInSeconds < 0) throw new RangeError('Input must be positive');
		if (inputInSeconds === 0) return 'now';

		var seconds = inputInSeconds;
		var minutes = Math.floor(seconds / 60);
		var hours = Math.floor(minutes / 60);
		var days = Math.floor(hours / 24);
		// var years = Math.floor(days / 365);

		days = days;
		hours = hours - (days * 24);
		minutes = minutes - (days * 24 * 60) - (hours * 60);
		seconds = seconds - (days * 24 * 60 * 60) - (hours * 60 * 60) - (minutes * 60);

		var result = {};
		// if (days > 0) result.days = days;
		// if (hours > 0) result.hours = hours;
		// if (minutes > 0) result.minutes = minutes;
		// if (seconds > 0) result.seconds = seconds;
		result = {
			days: days,
			hours: hours,
			minutes: minutes,
			seconds: Math.round(seconds),
		}

		return result;
	}
	
	function isDOMHidden (el) {
		var style = window.getComputedStyle(el);
		return (style.display === 'none');
	}
	
	/* Function to compute if this component is supposed to be visible or not, based on business rule:
		- Lowest priority compared to "Notification" and "Cookies Notification" component
	*/
	function shouldEventNotificationBeVisible () {
		var notiComp = $('[data-component="notification"]').toArray();
		var cookieNotiComp = $('[data-component="cookie-notification"]').toArray();
		
		var everyNotiHidden = notiComp.every(isDOMHidden);
		var everyCookieNotiHidden = cookieNotiComp.every(isDOMHidden);
		
		// either every notification comp is hidden, or every cookie notification comp is hidden, then true
		return everyNotiHidden || everyCookieNotiHidden;
	}
	

	componentDOM.each(function (index, el) {
		var elementID = el.id;
		var vueDefaultData = getVueAttrDataFromEl(el);
		var serviceURL = el.getAttribute('data-service-url');

		window.components[elementID] = new Vue({
			name: 'event-notification',
			el: el,
			// mixins: [SmoothReflow],
			data: Object.assign({}, COMPONENT_DEFAULT_DATA, vueDefaultData),
			created: function () {
				var context = this;
				
				this.currentEpochTime = Date.now();
				this._epochInterval = setInterval(this.updateEpoch, 1000);
				
				var cookie = window.getCookie(COOKIE_DISMISS_KEY);
				if (cookie == 'true') {
					this.isDismissed = true;
				}
				
				if (!shouldEventNotificationBeVisible()) {
					this.isDismissed = true;
				}
				
				/* 
				context.isLoading = false;
				
				this.rawData = [
					{
						"title": "Event 1",
						"path": "/content/cimb/malaysia/en/personal/admin/phase-1c-uat/angeline/event-detail-page-testing/event-1.html",
						"image": "/content/dam/cimb/personal/images/malaysia/day-to-day-banking/financing/product-images/HomeFlexi.png",
						"altText": "Event 1",
						"label": "Event 1",
						"locations": [],
						"categories": [
							{
								"title": "Low Risk Investments",
								"value": "low-risk-investments"
							},
							{
								"title": "Higher Returns",
								"value": "potentially-higher-returns"
							}
						],
						"startDateTime": "25 Mar 2020 10:00:00",
						"endDateTime": "01 Apr 2020 18:00:00"
					},
					{
						"title": "Event 2",
						"path": "/content/cimb/malaysia/en/personal/admin/phase-1c-uat/angeline/event-detail-page-testing/event-2.html",
						"image": "/content/dam/cimb/personal/images/malaysia/day-to-day-banking/financing/product-images/HomeFlexi.png",
						"altText": "Event 2",
						"label": "Event 2",
						"locations": [],
						"categories": [
							{
								"title": "PETRONAS Debit Mastercard",
								"value": "petronas-debit-mastercard"
							}
						],
						"startDateTime": "24 Mar 2020 10:00:00",
						"endDateTime": "24 Mar 2020 18:00:00"
					},
					{
						"title": "Event 3",
						"path": "/content/cimb/malaysia/en/personal/admin/phase-1c-uat/angeline/event-detail-page-testing/event-3.html",
						"image": "/content/dam/cimb/personal/images/malaysia/day-to-day-banking/financing/product-images/HomeFlexi.png",
						"altText": "Award Conference 2020",
						"label": "Award Conference 2020",
						"locations": [],
						"categories": [
							{
								"title": "Attractive Interest Rate",
								"value": "attractive-interest-rate"
							}
						],
						"startDateTime": "23 Mar 2020 10:00:00",
						"endDateTime": "23 Mar 2020 23:00:00"
					}
				];
				return;
				
				this.rawData = [
					// {
					// 	"title": "EVENT PAGE (1 JAN TO 31 MAR)",
					// 	"path": "/content/cimb/malaysia/en/personal/admin/cimb-work1/event-page--1-jan-to-31-mar-.html",
					// 	"image": "/content/dam/cimb/personal/images/malaysia/Home-Testing.PNG",
					// 	"altText": "Event Page",
					// 	"label": null,
					// 	"locations": [
					// 		{
					// 			"title": "Answered",
					// 			"value": "answered"
					// 		}
					// 	],
					// 	"categories": [

					// 	],
					// 	"startDateTime": "01 Jan 2020 09:30:00",
					// 	"endDateTime": "31 Mar 2020 18:20:00"
					// },
					{
						"title": "EVENT PAGE (1 APR TO 2 APR)",
						"path": "/content/cimb/malaysia/en/personal/admin/cimb-work1/event-page--1-apr-to-2-apr-.html",
						"image": "/content/dam/cimb/personal/images/malaysia/Home-Testing.PNG",
						"altText": "Event Page",
						"label": null,
						"locations": [
							{
								"title": "Answered",
								"value": "answered"
							}
						],
						"categories": [

						],
						"startDateTime": "01 Apr 2020 09:00:00",
						"endDateTime": "02 Apr 2020 18:00:00"
					},
					{
						"title": "EVENT PAGE (1 MAY TO 3 MAY)",
						"path": "/content/cimb/malaysia/en/personal/admin/cimb-work1/event-page--1-may-to-3-may-.html",
						"image": "/content/dam/cimb/personal/images/malaysia/Home-Testing.PNG",
						"altText": "Event Page 3",
						"label": null,
						"locations": [
							{
								"title": "Running",
								"value": "running"
							}
						],
						"categories": [

						],
						"startDateTime": "01 May 2020 09:00:00",
						"endDateTime": "03 May 2020 18:00:00"
					}
				];
				return;
				*/

				$.ajax({
					url: serviceURL,
					dataType: 'json',
				}).done(function (resp) {
					context.isLoading = false;
					context.rawData = resp.events;

					console.log('event-notification serviceUrl resp = ', resp);
				}).fail(function (resp) {
					context.isLoading = false;
				});
			},
			methods: {
				handleBtnCloseClick: function (event) {
					window.setCookie(COOKIE_DISMISS_KEY, true, 0);
					this.isDismissed = true;
				},
				clearIntervalEpoch: function () {
					clearInterval(this.this._epochInterval);
				},
				updateEpoch: function () {
					// this.currentEpochTime++;
					this.currentEpochTime = Date.now();
				},
			},
			watch: {
				isComponentVisible: function (newVal) {
					this.$nextTick(window.updateStickiesPosition);
				},
			},
			computed: {
				isComponentVisible: function () {
					if (this.isDismissed) return false;
					return ((!this.isLoading) && this.displayedEvent);
				},
				eventData_processed: function () {
					var context = this;
					
					return (
						// first, do some calculation and add some epoch timestamp
						this.rawData.map(function (event) {
							var leadDate = new Date();
							var epochStartTime = +new Date(event.startDateTime);
							var epochEndTime = +new Date(event.endDateTime);
							
							leadDate.setTime(epochStartTime - context.leadEpoch);
							leadDate.setHours(0, 0, 0);
							
							return Object.assign({}, event, {
								epochStartTime: epochStartTime,
								epochEndTime: epochEndTime,
								leadStartTime: leadDate.getTime(),
							});
						})
						// second, sort by start time - in ascending order
						.sort(function (eventA, eventB) {
							return eventA.epochStartTime - eventB.epochStartTime;
						})
					);
				},
				eventData_withoutExpiredEvent: function () {
					var context = this;
					if (!this.rawData) return [];
					return this.eventData_processed.filter(function (event) {
						return (event.epochEndTime - context.currentEpochTime) > 0;
					});
				},
				leadEpoch: function () {
					return (parseInt(this.leadDay) || 0) * 8.64e+7;
				},
				displayedEvent: function () {
					var context = this;
					var result = null;
					
					if (!this.rawData) return result;
					
					result = this.eventData_withoutExpiredEvent.reduce(function (acc, eventDetail) {
						if (acc) return acc; // already found, skip all the rest
						
						var isHappeningNow = (context.currentEpochTime >= eventDetail.epochStartTime) && (context.currentEpochTime < eventDetail.epochEndTime);
						if (isHappeningNow) {
							return Object.assign({ isHappeningNow: true, }, eventDetail);
						}
						
						// var leadStartTime = eventDetail.epochStartTime - context.leadEpoch;
						// var leadEndTime = eventDetail.epochStartTime;
						// var isNowInLeadPeriod = (context.currentEpochTime > leadStartTime) && (context.currentEpochTime <= leadEndTime);
						
						var leadEndTime = eventDetail.epochStartTime;
						var isNowInLeadPeriod = (context.currentEpochTime >= eventDetail.leadStartTime) && (context.currentEpochTime < leadEndTime);
						if (isNowInLeadPeriod) {
							return Object.assign({ isHappeningNow: false, }, eventDetail)
						}

						return null;
					}, null);
					
					return result;
				},
				countdown: function () {
					var context = this;
					if (!this.displayedEvent) return null;
					var timeLeftInSeconds = (this.displayedEvent.epochStartTime - this.currentEpochTime) / 1000;
					return humanReadableDuration(timeLeftInSeconds);
				},
			},
		});
	});
});

$(document).ready(function () {
	var componentDOM = $('[data-component="radio-cta-button"]');
	
	var COMPONENT_OPTIONS = {
		name: 'radio-cta-button',
		data: function () {
			return {
				value: '',
			}
		},
	}
	
	Vue.component('radio-cta-button', Object.assign({}, COMPONENT_OPTIONS));
	
	
	componentDOM.each(function(index, el) {
		if ($(el).parents('[data-component]').length === 0) {
			window.components[el.id] = new Vue(Object.assign({
				el: el,
			}, COMPONENT_OPTIONS));
			
			// NOTE: 👇 is the correct way, but not touching this first until phase 2
			// window.components[elementID] = new Vue(Object.assign({
			// 	el: $(el).wrap('<div class="vue-root"></div>').get(0),
			// }));
		}
	});
	
	
});
$(document).ready(function () {
	var componentDOM = $('[data-component="product-hero-banner"]');
	
	
	function initializePopUpCTA (componentRootEl, ctaEl) {
		ctaEl.click(function (event) {
			event.preventDefault();
			window.modalPopup({
				show: true,
				contentUrl: ctaEl.attr('href'),
			});
		});
	}
	
	componentDOM.each(function (index, el) {
		var $el = $(el);
		var ctaTypePopUp = $el.find('[data-cta-type="popup"]');
		if (ctaTypePopUp.length > 0) {
			initializePopUpCTA($el, ctaTypePopUp);
		}
	});
});

/**
 * Swiper 4.5.0
 * Most modern mobile touch slider and framework with hardware accelerated transitions
 * http://www.idangero.us/swiper/
 *
 * Copyright 2014-2019 Vladimir Kharlampidi
 *
 * Released under the MIT License
 *
 * Released on: February 22, 2019
 */
!function (e, t) { "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).Swiper = t() }(this, function () { "use strict"; var f = "undefined" == typeof document ? { body: {}, addEventListener: function () { }, removeEventListener: function () { }, activeElement: { blur: function () { }, nodeName: "" }, querySelector: function () { return null }, querySelectorAll: function () { return [] }, getElementById: function () { return null }, createEvent: function () { return { initEvent: function () { } } }, createElement: function () { return { children: [], childNodes: [], style: {}, setAttribute: function () { }, getElementsByTagName: function () { return [] } } }, location: { hash: "" } } : document, J = "undefined" == typeof window ? { document: f, navigator: { userAgent: "" }, location: {}, history: {}, CustomEvent: function () { return this }, addEventListener: function () { }, removeEventListener: function () { }, getComputedStyle: function () { return { getPropertyValue: function () { return "" } } }, Image: function () { }, Date: function () { }, screen: {}, setTimeout: function () { }, clearTimeout: function () { } } : window, l = function (e) { for (var t = 0; t < e.length; t += 1)this[t] = e[t]; return this.length = e.length, this }; function L(e, t) { var a = [], i = 0; if (e && !t && e instanceof l) return e; if (e) if ("string" == typeof e) { var s, r, n = e.trim(); if (0 <= n.indexOf("<") && 0 <= n.indexOf(">")) { var o = "div"; for (0 === n.indexOf("<li") && (o = "ul"), 0 === n.indexOf("<tr") && (o = "tbody"), 0 !== n.indexOf("<td") && 0 !== n.indexOf("<th") || (o = "tr"), 0 === n.indexOf("<tbody") && (o = "table"), 0 === n.indexOf("<option") && (o = "select"), (r = f.createElement(o)).innerHTML = n, i = 0; i < r.childNodes.length; i += 1)a.push(r.childNodes[i]) } else for (s = t || "#" !== e[0] || e.match(/[ .<>:~]/) ? (t || f).querySelectorAll(e.trim()) : [f.getElementById(e.trim().split("#")[1])], i = 0; i < s.length; i += 1)s[i] && a.push(s[i]) } else if (e.nodeType || e === J || e === f) a.push(e); else if (0 < e.length && e[0].nodeType) for (i = 0; i < e.length; i += 1)a.push(e[i]); return new l(a) } function r(e) { for (var t = [], a = 0; a < e.length; a += 1)-1 === t.indexOf(e[a]) && t.push(e[a]); return t } L.fn = l.prototype, L.Class = l, L.Dom7 = l; var t = { addClass: function (e) { if (void 0 === e) return this; for (var t = e.split(" "), a = 0; a < t.length; a += 1)for (var i = 0; i < this.length; i += 1)void 0 !== this[i] && void 0 !== this[i].classList && this[i].classList.add(t[a]); return this }, removeClass: function (e) { for (var t = e.split(" "), a = 0; a < t.length; a += 1)for (var i = 0; i < this.length; i += 1)void 0 !== this[i] && void 0 !== this[i].classList && this[i].classList.remove(t[a]); return this }, hasClass: function (e) { return !!this[0] && this[0].classList.contains(e) }, toggleClass: function (e) { for (var t = e.split(" "), a = 0; a < t.length; a += 1)for (var i = 0; i < this.length; i += 1)void 0 !== this[i] && void 0 !== this[i].classList && this[i].classList.toggle(t[a]); return this }, attr: function (e, t) { var a = arguments; if (1 === arguments.length && "string" == typeof e) return this[0] ? this[0].getAttribute(e) : void 0; for (var i = 0; i < this.length; i += 1)if (2 === a.length) this[i].setAttribute(e, t); else for (var s in e) this[i][s] = e[s], this[i].setAttribute(s, e[s]); return this }, removeAttr: function (e) { for (var t = 0; t < this.length; t += 1)this[t].removeAttribute(e); return this }, data: function (e, t) { var a; if (void 0 !== t) { for (var i = 0; i < this.length; i += 1)(a = this[i]).dom7ElementDataStorage || (a.dom7ElementDataStorage = {}), a.dom7ElementDataStorage[e] = t; return this } if (a = this[0]) { if (a.dom7ElementDataStorage && e in a.dom7ElementDataStorage) return a.dom7ElementDataStorage[e]; var s = a.getAttribute("data-" + e); return s || void 0 } }, transform: function (e) { for (var t = 0; t < this.length; t += 1) { var a = this[t].style; a.webkitTransform = e, a.transform = e } return this }, transition: function (e) { "string" != typeof e && (e += "ms"); for (var t = 0; t < this.length; t += 1) { var a = this[t].style; a.webkitTransitionDuration = e, a.transitionDuration = e } return this }, on: function () { for (var e, t = [], a = arguments.length; a--;)t[a] = arguments[a]; var i = t[0], r = t[1], n = t[2], s = t[3]; function o(e) { var t = e.target; if (t) { var a = e.target.dom7EventData || []; if (a.indexOf(e) < 0 && a.unshift(e), L(t).is(r)) n.apply(t, a); else for (var i = L(t).parents(), s = 0; s < i.length; s += 1)L(i[s]).is(r) && n.apply(i[s], a) } } function l(e) { var t = e && e.target && e.target.dom7EventData || []; t.indexOf(e) < 0 && t.unshift(e), n.apply(this, t) } "function" == typeof t[1] && (i = (e = t)[0], n = e[1], s = e[2], r = void 0), s || (s = !1); for (var d, p = i.split(" "), c = 0; c < this.length; c += 1) { var u = this[c]; if (r) for (d = 0; d < p.length; d += 1) { var h = p[d]; u.dom7LiveListeners || (u.dom7LiveListeners = {}), u.dom7LiveListeners[h] || (u.dom7LiveListeners[h] = []), u.dom7LiveListeners[h].push({ listener: n, proxyListener: o }), u.addEventListener(h, o, s) } else for (d = 0; d < p.length; d += 1) { var v = p[d]; u.dom7Listeners || (u.dom7Listeners = {}), u.dom7Listeners[v] || (u.dom7Listeners[v] = []), u.dom7Listeners[v].push({ listener: n, proxyListener: l }), u.addEventListener(v, l, s) } } return this }, off: function () { for (var e, t = [], a = arguments.length; a--;)t[a] = arguments[a]; var i = t[0], s = t[1], r = t[2], n = t[3]; "function" == typeof t[1] && (i = (e = t)[0], r = e[1], n = e[2], s = void 0), n || (n = !1); for (var o = i.split(" "), l = 0; l < o.length; l += 1)for (var d = o[l], p = 0; p < this.length; p += 1) { var c = this[p], u = void 0; if (!s && c.dom7Listeners ? u = c.dom7Listeners[d] : s && c.dom7LiveListeners && (u = c.dom7LiveListeners[d]), u && u.length) for (var h = u.length - 1; 0 <= h; h -= 1) { var v = u[h]; r && v.listener === r ? (c.removeEventListener(d, v.proxyListener, n), u.splice(h, 1)) : r && v.listener && v.listener.dom7proxy && v.listener.dom7proxy === r ? (c.removeEventListener(d, v.proxyListener, n), u.splice(h, 1)) : r || (c.removeEventListener(d, v.proxyListener, n), u.splice(h, 1)) } } return this }, trigger: function () { for (var e = [], t = arguments.length; t--;)e[t] = arguments[t]; for (var a = e[0].split(" "), i = e[1], s = 0; s < a.length; s += 1)for (var r = a[s], n = 0; n < this.length; n += 1) { var o = this[n], l = void 0; try { l = new J.CustomEvent(r, { detail: i, bubbles: !0, cancelable: !0 }) } catch (e) { (l = f.createEvent("Event")).initEvent(r, !0, !0), l.detail = i } o.dom7EventData = e.filter(function (e, t) { return 0 < t }), o.dispatchEvent(l), o.dom7EventData = [], delete o.dom7EventData } return this }, transitionEnd: function (t) { var a, i = ["webkitTransitionEnd", "transitionend"], s = this; function r(e) { if (e.target === this) for (t.call(this, e), a = 0; a < i.length; a += 1)s.off(i[a], r) } if (t) for (a = 0; a < i.length; a += 1)s.on(i[a], r); return this }, outerWidth: function (e) { if (0 < this.length) { if (e) { var t = this.styles(); return this[0].offsetWidth + parseFloat(t.getPropertyValue("margin-right")) + parseFloat(t.getPropertyValue("margin-left")) } return this[0].offsetWidth } return null }, outerHeight: function (e) { if (0 < this.length) { if (e) { var t = this.styles(); return this[0].offsetHeight + parseFloat(t.getPropertyValue("margin-top")) + parseFloat(t.getPropertyValue("margin-bottom")) } return this[0].offsetHeight } return null }, offset: function () { if (0 < this.length) { var e = this[0], t = e.getBoundingClientRect(), a = f.body, i = e.clientTop || a.clientTop || 0, s = e.clientLeft || a.clientLeft || 0, r = e === J ? J.scrollY : e.scrollTop, n = e === J ? J.scrollX : e.scrollLeft; return { top: t.top + r - i, left: t.left + n - s } } return null }, css: function (e, t) { var a; if (1 === arguments.length) { if ("string" != typeof e) { for (a = 0; a < this.length; a += 1)for (var i in e) this[a].style[i] = e[i]; return this } if (this[0]) return J.getComputedStyle(this[0], null).getPropertyValue(e) } if (2 === arguments.length && "string" == typeof e) { for (a = 0; a < this.length; a += 1)this[a].style[e] = t; return this } return this }, each: function (e) { if (!e) return this; for (var t = 0; t < this.length; t += 1)if (!1 === e.call(this[t], t, this[t])) return this; return this }, html: function (e) { if (void 0 === e) return this[0] ? this[0].innerHTML : void 0; for (var t = 0; t < this.length; t += 1)this[t].innerHTML = e; return this }, text: function (e) { if (void 0 === e) return this[0] ? this[0].textContent.trim() : null; for (var t = 0; t < this.length; t += 1)this[t].textContent = e; return this }, is: function (e) { var t, a, i = this[0]; if (!i || void 0 === e) return !1; if ("string" == typeof e) { if (i.matches) return i.matches(e); if (i.webkitMatchesSelector) return i.webkitMatchesSelector(e); if (i.msMatchesSelector) return i.msMatchesSelector(e); for (t = L(e), a = 0; a < t.length; a += 1)if (t[a] === i) return !0; return !1 } if (e === f) return i === f; if (e === J) return i === J; if (e.nodeType || e instanceof l) { for (t = e.nodeType ? [e] : e, a = 0; a < t.length; a += 1)if (t[a] === i) return !0; return !1 } return !1 }, index: function () { var e, t = this[0]; if (t) { for (e = 0; null !== (t = t.previousSibling);)1 === t.nodeType && (e += 1); return e } }, eq: function (e) { if (void 0 === e) return this; var t, a = this.length; return new l(a - 1 < e ? [] : e < 0 ? (t = a + e) < 0 ? [] : [this[t]] : [this[e]]) }, append: function () { for (var e, t = [], a = arguments.length; a--;)t[a] = arguments[a]; for (var i = 0; i < t.length; i += 1) { e = t[i]; for (var s = 0; s < this.length; s += 1)if ("string" == typeof e) { var r = f.createElement("div"); for (r.innerHTML = e; r.firstChild;)this[s].appendChild(r.firstChild) } else if (e instanceof l) for (var n = 0; n < e.length; n += 1)this[s].appendChild(e[n]); else this[s].appendChild(e) } return this }, prepend: function (e) { var t, a; for (t = 0; t < this.length; t += 1)if ("string" == typeof e) { var i = f.createElement("div"); for (i.innerHTML = e, a = i.childNodes.length - 1; 0 <= a; a -= 1)this[t].insertBefore(i.childNodes[a], this[t].childNodes[0]) } else if (e instanceof l) for (a = 0; a < e.length; a += 1)this[t].insertBefore(e[a], this[t].childNodes[0]); else this[t].insertBefore(e, this[t].childNodes[0]); return this }, next: function (e) { return 0 < this.length ? e ? this[0].nextElementSibling && L(this[0].nextElementSibling).is(e) ? new l([this[0].nextElementSibling]) : new l([]) : this[0].nextElementSibling ? new l([this[0].nextElementSibling]) : new l([]) : new l([]) }, nextAll: function (e) { var t = [], a = this[0]; if (!a) return new l([]); for (; a.nextElementSibling;) { var i = a.nextElementSibling; e ? L(i).is(e) && t.push(i) : t.push(i), a = i } return new l(t) }, prev: function (e) { if (0 < this.length) { var t = this[0]; return e ? t.previousElementSibling && L(t.previousElementSibling).is(e) ? new l([t.previousElementSibling]) : new l([]) : t.previousElementSibling ? new l([t.previousElementSibling]) : new l([]) } return new l([]) }, prevAll: function (e) { var t = [], a = this[0]; if (!a) return new l([]); for (; a.previousElementSibling;) { var i = a.previousElementSibling; e ? L(i).is(e) && t.push(i) : t.push(i), a = i } return new l(t) }, parent: function (e) { for (var t = [], a = 0; a < this.length; a += 1)null !== this[a].parentNode && (e ? L(this[a].parentNode).is(e) && t.push(this[a].parentNode) : t.push(this[a].parentNode)); return L(r(t)) }, parents: function (e) { for (var t = [], a = 0; a < this.length; a += 1)for (var i = this[a].parentNode; i;)e ? L(i).is(e) && t.push(i) : t.push(i), i = i.parentNode; return L(r(t)) }, closest: function (e) { var t = this; return void 0 === e ? new l([]) : (t.is(e) || (t = t.parents(e).eq(0)), t) }, find: function (e) { for (var t = [], a = 0; a < this.length; a += 1)for (var i = this[a].querySelectorAll(e), s = 0; s < i.length; s += 1)t.push(i[s]); return new l(t) }, children: function (e) { for (var t = [], a = 0; a < this.length; a += 1)for (var i = this[a].childNodes, s = 0; s < i.length; s += 1)e ? 1 === i[s].nodeType && L(i[s]).is(e) && t.push(i[s]) : 1 === i[s].nodeType && t.push(i[s]); return new l(r(t)) }, remove: function () { for (var e = 0; e < this.length; e += 1)this[e].parentNode && this[e].parentNode.removeChild(this[e]); return this }, add: function () { for (var e = [], t = arguments.length; t--;)e[t] = arguments[t]; var a, i; for (a = 0; a < e.length; a += 1) { var s = L(e[a]); for (i = 0; i < s.length; i += 1)this[this.length] = s[i], this.length += 1 } return this }, styles: function () { return this[0] ? J.getComputedStyle(this[0], null) : {} } }; Object.keys(t).forEach(function (e) { L.fn[e] = t[e] }); var e, a, i, s, ee = { deleteProps: function (e) { var t = e; Object.keys(t).forEach(function (e) { try { t[e] = null } catch (e) { } try { delete t[e] } catch (e) { } }) }, nextTick: function (e, t) { return void 0 === t && (t = 0), setTimeout(e, t) }, now: function () { return Date.now() }, getTranslate: function (e, t) { var a, i, s; void 0 === t && (t = "x"); var r = J.getComputedStyle(e, null); return J.WebKitCSSMatrix ? (6 < (i = r.transform || r.webkitTransform).split(",").length && (i = i.split(", ").map(function (e) { return e.replace(",", ".") }).join(", ")), s = new J.WebKitCSSMatrix("none" === i ? "" : i)) : a = (s = r.MozTransform || r.OTransform || r.MsTransform || r.msTransform || r.transform || r.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,")).toString().split(","), "x" === t && (i = J.WebKitCSSMatrix ? s.m41 : 16 === a.length ? parseFloat(a[12]) : parseFloat(a[4])), "y" === t && (i = J.WebKitCSSMatrix ? s.m42 : 16 === a.length ? parseFloat(a[13]) : parseFloat(a[5])), i || 0 }, parseUrlQuery: function (e) { var t, a, i, s, r = {}, n = e || J.location.href; if ("string" == typeof n && n.length) for (s = (a = (n = -1 < n.indexOf("?") ? n.replace(/\S*\?/, "") : "").split("&").filter(function (e) { return "" !== e })).length, t = 0; t < s; t += 1)i = a[t].replace(/#\S+/g, "").split("="), r[decodeURIComponent(i[0])] = void 0 === i[1] ? void 0 : decodeURIComponent(i[1]) || ""; return r }, isObject: function (e) { return "object" == typeof e && null !== e && e.constructor && e.constructor === Object }, extend: function () { for (var e = [], t = arguments.length; t--;)e[t] = arguments[t]; for (var a = Object(e[0]), i = 1; i < e.length; i += 1) { var s = e[i]; if (null != s) for (var r = Object.keys(Object(s)), n = 0, o = r.length; n < o; n += 1) { var l = r[n], d = Object.getOwnPropertyDescriptor(s, l); void 0 !== d && d.enumerable && (ee.isObject(a[l]) && ee.isObject(s[l]) ? ee.extend(a[l], s[l]) : !ee.isObject(a[l]) && ee.isObject(s[l]) ? (a[l] = {}, ee.extend(a[l], s[l])) : a[l] = s[l]) } } return a } }, te = (i = f.createElement("div"), { touch: J.Modernizr && !0 === J.Modernizr.touch || !!(0 < J.navigator.maxTouchPoints || "ontouchstart" in J || J.DocumentTouch && f instanceof J.DocumentTouch), pointerEvents: !!(J.navigator.pointerEnabled || J.PointerEvent || "maxTouchPoints" in J.navigator && 0 < J.navigator.maxTouchPoints), prefixedPointerEvents: !!J.navigator.msPointerEnabled, transition: (a = i.style, "transition" in a || "webkitTransition" in a || "MozTransition" in a), transforms3d: J.Modernizr && !0 === J.Modernizr.csstransforms3d || (e = i.style, "webkitPerspective" in e || "MozPerspective" in e || "OPerspective" in e || "MsPerspective" in e || "perspective" in e), flexbox: function () { for (var e = i.style, t = "alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient".split(" "), a = 0; a < t.length; a += 1)if (t[a] in e) return !0; return !1 }(), observer: "MutationObserver" in J || "WebkitMutationObserver" in J, passiveListener: function () { var e = !1; try { var t = Object.defineProperty({}, "passive", { get: function () { e = !0 } }); J.addEventListener("testPassiveListener", null, t) } catch (e) { } return e }(), gestures: "ongesturestart" in J }), I = { isIE: !!J.navigator.userAgent.match(/Trident/g) || !!J.navigator.userAgent.match(/MSIE/g), isEdge: !!J.navigator.userAgent.match(/Edge/g), isSafari: (s = J.navigator.userAgent.toLowerCase(), 0 <= s.indexOf("safari") && s.indexOf("chrome") < 0 && s.indexOf("android") < 0), isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(J.navigator.userAgent) }, n = function (e) { void 0 === e && (e = {}); var t = this; t.params = e, t.eventsListeners = {}, t.params && t.params.on && Object.keys(t.params.on).forEach(function (e) { t.on(e, t.params.on[e]) }) }, o = { components: { configurable: !0 } }; n.prototype.on = function (e, t, a) { var i = this; if ("function" != typeof t) return i; var s = a ? "unshift" : "push"; return e.split(" ").forEach(function (e) { i.eventsListeners[e] || (i.eventsListeners[e] = []), i.eventsListeners[e][s](t) }), i }, n.prototype.once = function (a, i, e) { var s = this; if ("function" != typeof i) return s; function r() { for (var e = [], t = arguments.length; t--;)e[t] = arguments[t]; i.apply(s, e), s.off(a, r), r.f7proxy && delete r.f7proxy } return r.f7proxy = i, s.on(a, r, e) }, n.prototype.off = function (e, i) { var s = this; return s.eventsListeners && e.split(" ").forEach(function (a) { void 0 === i ? s.eventsListeners[a] = [] : s.eventsListeners[a] && s.eventsListeners[a].length && s.eventsListeners[a].forEach(function (e, t) { (e === i || e.f7proxy && e.f7proxy === i) && s.eventsListeners[a].splice(t, 1) }) }), s }, n.prototype.emit = function () { for (var e = [], t = arguments.length; t--;)e[t] = arguments[t]; var a, i, s, r = this; return r.eventsListeners && ("string" == typeof e[0] || Array.isArray(e[0]) ? (a = e[0], i = e.slice(1, e.length), s = r) : (a = e[0].events, i = e[0].data, s = e[0].context || r), (Array.isArray(a) ? a : a.split(" ")).forEach(function (e) { if (r.eventsListeners && r.eventsListeners[e]) { var t = []; r.eventsListeners[e].forEach(function (e) { t.push(e) }), t.forEach(function (e) { e.apply(s, i) }) } })), r }, n.prototype.useModulesParams = function (a) { var i = this; i.modules && Object.keys(i.modules).forEach(function (e) { var t = i.modules[e]; t.params && ee.extend(a, t.params) }) }, n.prototype.useModules = function (i) { void 0 === i && (i = {}); var s = this; s.modules && Object.keys(s.modules).forEach(function (e) { var a = s.modules[e], t = i[e] || {}; a.instance && Object.keys(a.instance).forEach(function (e) { var t = a.instance[e]; s[e] = "function" == typeof t ? t.bind(s) : t }), a.on && s.on && Object.keys(a.on).forEach(function (e) { s.on(e, a.on[e]) }), a.create && a.create.bind(s)(t) }) }, o.components.set = function (e) { this.use && this.use(e) }, n.installModule = function (t) { for (var e = [], a = arguments.length - 1; 0 < a--;)e[a] = arguments[a + 1]; var i = this; i.prototype.modules || (i.prototype.modules = {}); var s = t.name || Object.keys(i.prototype.modules).length + "_" + ee.now(); return (i.prototype.modules[s] = t).proto && Object.keys(t.proto).forEach(function (e) { i.prototype[e] = t.proto[e] }), t.static && Object.keys(t.static).forEach(function (e) { i[e] = t.static[e] }), t.install && t.install.apply(i, e), i }, n.use = function (e) { for (var t = [], a = arguments.length - 1; 0 < a--;)t[a] = arguments[a + 1]; var i = this; return Array.isArray(e) ? (e.forEach(function (e) { return i.installModule(e) }), i) : i.installModule.apply(i, [e].concat(t)) }, Object.defineProperties(n, o); var d = { updateSize: function () { var e, t, a = this, i = a.$el; e = void 0 !== a.params.width ? a.params.width : i[0].clientWidth, t = void 0 !== a.params.height ? a.params.height : i[0].clientHeight, 0 === e && a.isHorizontal() || 0 === t && a.isVertical() || (e = e - parseInt(i.css("padding-left"), 10) - parseInt(i.css("padding-right"), 10), t = t - parseInt(i.css("padding-top"), 10) - parseInt(i.css("padding-bottom"), 10), ee.extend(a, { width: e, height: t, size: a.isHorizontal() ? e : t })) }, updateSlides: function () { var e = this, t = e.params, a = e.$wrapperEl, i = e.size, s = e.rtlTranslate, r = e.wrongRTL, n = e.virtual && t.virtual.enabled, o = n ? e.virtual.slides.length : e.slides.length, l = a.children("." + e.params.slideClass), d = n ? e.virtual.slides.length : l.length, p = [], c = [], u = [], h = t.slidesOffsetBefore; "function" == typeof h && (h = t.slidesOffsetBefore.call(e)); var v = t.slidesOffsetAfter; "function" == typeof v && (v = t.slidesOffsetAfter.call(e)); var f = e.snapGrid.length, m = e.snapGrid.length, g = t.spaceBetween, b = -h, w = 0, y = 0; if (void 0 !== i) { var x, T; "string" == typeof g && 0 <= g.indexOf("%") && (g = parseFloat(g.replace("%", "")) / 100 * i), e.virtualSize = -g, s ? l.css({ marginLeft: "", marginTop: "" }) : l.css({ marginRight: "", marginBottom: "" }), 1 < t.slidesPerColumn && (x = Math.floor(d / t.slidesPerColumn) === d / e.params.slidesPerColumn ? d : Math.ceil(d / t.slidesPerColumn) * t.slidesPerColumn, "auto" !== t.slidesPerView && "row" === t.slidesPerColumnFill && (x = Math.max(x, t.slidesPerView * t.slidesPerColumn))); for (var E, S = t.slidesPerColumn, C = x / S, M = Math.floor(d / t.slidesPerColumn), z = 0; z < d; z += 1) { T = 0; var P = l.eq(z); if (1 < t.slidesPerColumn) { var k = void 0, $ = void 0, L = void 0; "column" === t.slidesPerColumnFill ? (L = z - ($ = Math.floor(z / S)) * S, (M < $ || $ === M && L === S - 1) && S <= (L += 1) && (L = 0, $ += 1), k = $ + L * x / S, P.css({ "-webkit-box-ordinal-group": k, "-moz-box-ordinal-group": k, "-ms-flex-order": k, "-webkit-order": k, order: k })) : $ = z - (L = Math.floor(z / C)) * C, P.css("margin-" + (e.isHorizontal() ? "top" : "left"), 0 !== L && t.spaceBetween && t.spaceBetween + "px").attr("data-swiper-column", $).attr("data-swiper-row", L) } if ("none" !== P.css("display")) { if ("auto" === t.slidesPerView) { var I = J.getComputedStyle(P[0], null), D = P[0].style.transform, O = P[0].style.webkitTransform; if (D && (P[0].style.transform = "none"), O && (P[0].style.webkitTransform = "none"), t.roundLengths) T = e.isHorizontal() ? P.outerWidth(!0) : P.outerHeight(!0); else if (e.isHorizontal()) { var A = parseFloat(I.getPropertyValue("width")), H = parseFloat(I.getPropertyValue("padding-left")), N = parseFloat(I.getPropertyValue("padding-right")), G = parseFloat(I.getPropertyValue("margin-left")), B = parseFloat(I.getPropertyValue("margin-right")), X = I.getPropertyValue("box-sizing"); T = X && "border-box" === X ? A + G + B : A + H + N + G + B } else { var Y = parseFloat(I.getPropertyValue("height")), V = parseFloat(I.getPropertyValue("padding-top")), F = parseFloat(I.getPropertyValue("padding-bottom")), R = parseFloat(I.getPropertyValue("margin-top")), q = parseFloat(I.getPropertyValue("margin-bottom")), W = I.getPropertyValue("box-sizing"); T = W && "border-box" === W ? Y + R + q : Y + V + F + R + q } D && (P[0].style.transform = D), O && (P[0].style.webkitTransform = O), t.roundLengths && (T = Math.floor(T)) } else T = (i - (t.slidesPerView - 1) * g) / t.slidesPerView, t.roundLengths && (T = Math.floor(T)), l[z] && (e.isHorizontal() ? l[z].style.width = T + "px" : l[z].style.height = T + "px"); l[z] && (l[z].swiperSlideSize = T), u.push(T), t.centeredSlides ? (b = b + T / 2 + w / 2 + g, 0 === w && 0 !== z && (b = b - i / 2 - g), 0 === z && (b = b - i / 2 - g), Math.abs(b) < .001 && (b = 0), t.roundLengths && (b = Math.floor(b)), y % t.slidesPerGroup == 0 && p.push(b), c.push(b)) : (t.roundLengths && (b = Math.floor(b)), y % t.slidesPerGroup == 0 && p.push(b), c.push(b), b = b + T + g), e.virtualSize += T + g, w = T, y += 1 } } if (e.virtualSize = Math.max(e.virtualSize, i) + v, s && r && ("slide" === t.effect || "coverflow" === t.effect) && a.css({ width: e.virtualSize + t.spaceBetween + "px" }), te.flexbox && !t.setWrapperSize || (e.isHorizontal() ? a.css({ width: e.virtualSize + t.spaceBetween + "px" }) : a.css({ height: e.virtualSize + t.spaceBetween + "px" })), 1 < t.slidesPerColumn && (e.virtualSize = (T + t.spaceBetween) * x, e.virtualSize = Math.ceil(e.virtualSize / t.slidesPerColumn) - t.spaceBetween, e.isHorizontal() ? a.css({ width: e.virtualSize + t.spaceBetween + "px" }) : a.css({ height: e.virtualSize + t.spaceBetween + "px" }), t.centeredSlides)) { E = []; for (var j = 0; j < p.length; j += 1) { var U = p[j]; t.roundLengths && (U = Math.floor(U)), p[j] < e.virtualSize + p[0] && E.push(U) } p = E } if (!t.centeredSlides) { E = []; for (var K = 0; K < p.length; K += 1) { var _ = p[K]; t.roundLengths && (_ = Math.floor(_)), p[K] <= e.virtualSize - i && E.push(_) } p = E, 1 < Math.floor(e.virtualSize - i) - Math.floor(p[p.length - 1]) && p.push(e.virtualSize - i) } if (0 === p.length && (p = [0]), 0 !== t.spaceBetween && (e.isHorizontal() ? s ? l.css({ marginLeft: g + "px" }) : l.css({ marginRight: g + "px" }) : l.css({ marginBottom: g + "px" })), t.centerInsufficientSlides) { var Z = 0; if (u.forEach(function (e) { Z += e + (t.spaceBetween ? t.spaceBetween : 0) }), (Z -= t.spaceBetween) < i) { var Q = (i - Z) / 2; p.forEach(function (e, t) { p[t] = e - Q }), c.forEach(function (e, t) { c[t] = e + Q }) } } ee.extend(e, { slides: l, snapGrid: p, slidesGrid: c, slidesSizesGrid: u }), d !== o && e.emit("slidesLengthChange"), p.length !== f && (e.params.watchOverflow && e.checkOverflow(), e.emit("snapGridLengthChange")), c.length !== m && e.emit("slidesGridLengthChange"), (t.watchSlidesProgress || t.watchSlidesVisibility) && e.updateSlidesOffset() } }, updateAutoHeight: function (e) { var t, a = this, i = [], s = 0; if ("number" == typeof e ? a.setTransition(e) : !0 === e && a.setTransition(a.params.speed), "auto" !== a.params.slidesPerView && 1 < a.params.slidesPerView) for (t = 0; t < Math.ceil(a.params.slidesPerView); t += 1) { var r = a.activeIndex + t; if (r > a.slides.length) break; i.push(a.slides.eq(r)[0]) } else i.push(a.slides.eq(a.activeIndex)[0]); for (t = 0; t < i.length; t += 1)if (void 0 !== i[t]) { var n = i[t].offsetHeight; s = s < n ? n : s } s && a.$wrapperEl.css("height", s + "px") }, updateSlidesOffset: function () { for (var e = this.slides, t = 0; t < e.length; t += 1)e[t].swiperSlideOffset = this.isHorizontal() ? e[t].offsetLeft : e[t].offsetTop }, updateSlidesProgress: function (e) { void 0 === e && (e = this && this.translate || 0); var t = this, a = t.params, i = t.slides, s = t.rtlTranslate; if (0 !== i.length) { void 0 === i[0].swiperSlideOffset && t.updateSlidesOffset(); var r = -e; s && (r = e), i.removeClass(a.slideVisibleClass), t.visibleSlidesIndexes = [], t.visibleSlides = []; for (var n = 0; n < i.length; n += 1) { var o = i[n], l = (r + (a.centeredSlides ? t.minTranslate() : 0) - o.swiperSlideOffset) / (o.swiperSlideSize + a.spaceBetween); if (a.watchSlidesVisibility) { var d = -(r - o.swiperSlideOffset), p = d + t.slidesSizesGrid[n]; (0 <= d && d < t.size || 0 < p && p <= t.size || d <= 0 && p >= t.size) && (t.visibleSlides.push(o), t.visibleSlidesIndexes.push(n), i.eq(n).addClass(a.slideVisibleClass)) } o.progress = s ? -l : l } t.visibleSlides = L(t.visibleSlides) } }, updateProgress: function (e) { void 0 === e && (e = this && this.translate || 0); var t = this, a = t.params, i = t.maxTranslate() - t.minTranslate(), s = t.progress, r = t.isBeginning, n = t.isEnd, o = r, l = n; 0 === i ? n = r = !(s = 0) : (r = (s = (e - t.minTranslate()) / i) <= 0, n = 1 <= s), ee.extend(t, { progress: s, isBeginning: r, isEnd: n }), (a.watchSlidesProgress || a.watchSlidesVisibility) && t.updateSlidesProgress(e), r && !o && t.emit("reachBeginning toEdge"), n && !l && t.emit("reachEnd toEdge"), (o && !r || l && !n) && t.emit("fromEdge"), t.emit("progress", s) }, updateSlidesClasses: function () { var e, t = this, a = t.slides, i = t.params, s = t.$wrapperEl, r = t.activeIndex, n = t.realIndex, o = t.virtual && i.virtual.enabled; a.removeClass(i.slideActiveClass + " " + i.slideNextClass + " " + i.slidePrevClass + " " + i.slideDuplicateActiveClass + " " + i.slideDuplicateNextClass + " " + i.slideDuplicatePrevClass), (e = o ? t.$wrapperEl.find("." + i.slideClass + '[data-swiper-slide-index="' + r + '"]') : a.eq(r)).addClass(i.slideActiveClass), i.loop && (e.hasClass(i.slideDuplicateClass) ? s.children("." + i.slideClass + ":not(." + i.slideDuplicateClass + ')[data-swiper-slide-index="' + n + '"]').addClass(i.slideDuplicateActiveClass) : s.children("." + i.slideClass + "." + i.slideDuplicateClass + '[data-swiper-slide-index="' + n + '"]').addClass(i.slideDuplicateActiveClass)); var l = e.nextAll("." + i.slideClass).eq(0).addClass(i.slideNextClass); i.loop && 0 === l.length && (l = a.eq(0)).addClass(i.slideNextClass); var d = e.prevAll("." + i.slideClass).eq(0).addClass(i.slidePrevClass); i.loop && 0 === d.length && (d = a.eq(-1)).addClass(i.slidePrevClass), i.loop && (l.hasClass(i.slideDuplicateClass) ? s.children("." + i.slideClass + ":not(." + i.slideDuplicateClass + ')[data-swiper-slide-index="' + l.attr("data-swiper-slide-index") + '"]').addClass(i.slideDuplicateNextClass) : s.children("." + i.slideClass + "." + i.slideDuplicateClass + '[data-swiper-slide-index="' + l.attr("data-swiper-slide-index") + '"]').addClass(i.slideDuplicateNextClass), d.hasClass(i.slideDuplicateClass) ? s.children("." + i.slideClass + ":not(." + i.slideDuplicateClass + ')[data-swiper-slide-index="' + d.attr("data-swiper-slide-index") + '"]').addClass(i.slideDuplicatePrevClass) : s.children("." + i.slideClass + "." + i.slideDuplicateClass + '[data-swiper-slide-index="' + d.attr("data-swiper-slide-index") + '"]').addClass(i.slideDuplicatePrevClass)) }, updateActiveIndex: function (e) { var t, a = this, i = a.rtlTranslate ? a.translate : -a.translate, s = a.slidesGrid, r = a.snapGrid, n = a.params, o = a.activeIndex, l = a.realIndex, d = a.snapIndex, p = e; if (void 0 === p) { for (var c = 0; c < s.length; c += 1)void 0 !== s[c + 1] ? i >= s[c] && i < s[c + 1] - (s[c + 1] - s[c]) / 2 ? p = c : i >= s[c] && i < s[c + 1] && (p = c + 1) : i >= s[c] && (p = c); n.normalizeSlideIndex && (p < 0 || void 0 === p) && (p = 0) } if ((t = 0 <= r.indexOf(i) ? r.indexOf(i) : Math.floor(p / n.slidesPerGroup)) >= r.length && (t = r.length - 1), p !== o) { var u = parseInt(a.slides.eq(p).attr("data-swiper-slide-index") || p, 10); ee.extend(a, { snapIndex: t, realIndex: u, previousIndex: o, activeIndex: p }), a.emit("activeIndexChange"), a.emit("snapIndexChange"), l !== u && a.emit("realIndexChange"), a.emit("slideChange") } else t !== d && (a.snapIndex = t, a.emit("snapIndexChange")) }, updateClickedSlide: function (e) { var t = this, a = t.params, i = L(e.target).closest("." + a.slideClass)[0], s = !1; if (i) for (var r = 0; r < t.slides.length; r += 1)t.slides[r] === i && (s = !0); if (!i || !s) return t.clickedSlide = void 0, void (t.clickedIndex = void 0); t.clickedSlide = i, t.virtual && t.params.virtual.enabled ? t.clickedIndex = parseInt(L(i).attr("data-swiper-slide-index"), 10) : t.clickedIndex = L(i).index(), a.slideToClickedSlide && void 0 !== t.clickedIndex && t.clickedIndex !== t.activeIndex && t.slideToClickedSlide() } }; var p = { getTranslate: function (e) { void 0 === e && (e = this.isHorizontal() ? "x" : "y"); var t = this.params, a = this.rtlTranslate, i = this.translate, s = this.$wrapperEl; if (t.virtualTranslate) return a ? -i : i; var r = ee.getTranslate(s[0], e); return a && (r = -r), r || 0 }, setTranslate: function (e, t) { var a = this, i = a.rtlTranslate, s = a.params, r = a.$wrapperEl, n = a.progress, o = 0, l = 0; a.isHorizontal() ? o = i ? -e : e : l = e, s.roundLengths && (o = Math.floor(o), l = Math.floor(l)), s.virtualTranslate || (te.transforms3d ? r.transform("translate3d(" + o + "px, " + l + "px, 0px)") : r.transform("translate(" + o + "px, " + l + "px)")), a.previousTranslate = a.translate, a.translate = a.isHorizontal() ? o : l; var d = a.maxTranslate() - a.minTranslate(); (0 === d ? 0 : (e - a.minTranslate()) / d) !== n && a.updateProgress(e), a.emit("setTranslate", a.translate, t) }, minTranslate: function () { return -this.snapGrid[0] }, maxTranslate: function () { return -this.snapGrid[this.snapGrid.length - 1] } }; var c = { setTransition: function (e, t) { this.$wrapperEl.transition(e), this.emit("setTransition", e, t) }, transitionStart: function (e, t) { void 0 === e && (e = !0); var a = this, i = a.activeIndex, s = a.params, r = a.previousIndex; s.autoHeight && a.updateAutoHeight(); var n = t; if (n || (n = r < i ? "next" : i < r ? "prev" : "reset"), a.emit("transitionStart"), e && i !== r) { if ("reset" === n) return void a.emit("slideResetTransitionStart"); a.emit("slideChangeTransitionStart"), "next" === n ? a.emit("slideNextTransitionStart") : a.emit("slidePrevTransitionStart") } }, transitionEnd: function (e, t) { void 0 === e && (e = !0); var a = this, i = a.activeIndex, s = a.previousIndex; a.animating = !1, a.setTransition(0); var r = t; if (r || (r = s < i ? "next" : i < s ? "prev" : "reset"), a.emit("transitionEnd"), e && i !== s) { if ("reset" === r) return void a.emit("slideResetTransitionEnd"); a.emit("slideChangeTransitionEnd"), "next" === r ? a.emit("slideNextTransitionEnd") : a.emit("slidePrevTransitionEnd") } } }; var u = { slideTo: function (e, t, a, i) { void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === a && (a = !0); var s = this, r = e; r < 0 && (r = 0); var n = s.params, o = s.snapGrid, l = s.slidesGrid, d = s.previousIndex, p = s.activeIndex, c = s.rtlTranslate; if (s.animating && n.preventInteractionOnTransition) return !1; var u = Math.floor(r / n.slidesPerGroup); u >= o.length && (u = o.length - 1), (p || n.initialSlide || 0) === (d || 0) && a && s.emit("beforeSlideChangeStart"); var h, v = -o[u]; if (s.updateProgress(v), n.normalizeSlideIndex) for (var f = 0; f < l.length; f += 1)-Math.floor(100 * v) >= Math.floor(100 * l[f]) && (r = f); if (s.initialized && r !== p) { if (!s.allowSlideNext && v < s.translate && v < s.minTranslate()) return !1; if (!s.allowSlidePrev && v > s.translate && v > s.maxTranslate() && (p || 0) !== r) return !1 } return h = p < r ? "next" : r < p ? "prev" : "reset", c && -v === s.translate || !c && v === s.translate ? (s.updateActiveIndex(r), n.autoHeight && s.updateAutoHeight(), s.updateSlidesClasses(), "slide" !== n.effect && s.setTranslate(v), "reset" !== h && (s.transitionStart(a, h), s.transitionEnd(a, h)), !1) : (0 !== t && te.transition ? (s.setTransition(t), s.setTranslate(v), s.updateActiveIndex(r), s.updateSlidesClasses(), s.emit("beforeTransitionStart", t, i), s.transitionStart(a, h), s.animating || (s.animating = !0, s.onSlideToWrapperTransitionEnd || (s.onSlideToWrapperTransitionEnd = function (e) { s && !s.destroyed && e.target === this && (s.$wrapperEl[0].removeEventListener("transitionend", s.onSlideToWrapperTransitionEnd), s.$wrapperEl[0].removeEventListener("webkitTransitionEnd", s.onSlideToWrapperTransitionEnd), s.onSlideToWrapperTransitionEnd = null, delete s.onSlideToWrapperTransitionEnd, s.transitionEnd(a, h)) }), s.$wrapperEl[0].addEventListener("transitionend", s.onSlideToWrapperTransitionEnd), s.$wrapperEl[0].addEventListener("webkitTransitionEnd", s.onSlideToWrapperTransitionEnd))) : (s.setTransition(0), s.setTranslate(v), s.updateActiveIndex(r), s.updateSlidesClasses(), s.emit("beforeTransitionStart", t, i), s.transitionStart(a, h), s.transitionEnd(a, h)), !0) }, slideToLoop: function (e, t, a, i) { void 0 === e && (e = 0), void 0 === t && (t = this.params.speed), void 0 === a && (a = !0); var s = e; return this.params.loop && (s += this.loopedSlides), this.slideTo(s, t, a, i) }, slideNext: function (e, t, a) { void 0 === e && (e = this.params.speed), void 0 === t && (t = !0); var i = this, s = i.params, r = i.animating; return s.loop ? !r && (i.loopFix(), i._clientLeft = i.$wrapperEl[0].clientLeft, i.slideTo(i.activeIndex + s.slidesPerGroup, e, t, a)) : i.slideTo(i.activeIndex + s.slidesPerGroup, e, t, a) }, slidePrev: function (e, t, a) { void 0 === e && (e = this.params.speed), void 0 === t && (t = !0); var i = this, s = i.params, r = i.animating, n = i.snapGrid, o = i.slidesGrid, l = i.rtlTranslate; if (s.loop) { if (r) return !1; i.loopFix(), i._clientLeft = i.$wrapperEl[0].clientLeft } function d(e) { return e < 0 ? -Math.floor(Math.abs(e)) : Math.floor(e) } var p, c = d(l ? i.translate : -i.translate), u = n.map(function (e) { return d(e) }), h = (o.map(function (e) { return d(e) }), n[u.indexOf(c)], n[u.indexOf(c) - 1]); return void 0 !== h && (p = o.indexOf(h)) < 0 && (p = i.activeIndex - 1), i.slideTo(p, e, t, a) }, slideReset: function (e, t, a) { return void 0 === e && (e = this.params.speed), void 0 === t && (t = !0), this.slideTo(this.activeIndex, e, t, a) }, slideToClosest: function (e, t, a) { void 0 === e && (e = this.params.speed), void 0 === t && (t = !0); var i = this, s = i.activeIndex, r = Math.floor(s / i.params.slidesPerGroup); if (r < i.snapGrid.length - 1) { var n = i.rtlTranslate ? i.translate : -i.translate, o = i.snapGrid[r]; (i.snapGrid[r + 1] - o) / 2 < n - o && (s = i.params.slidesPerGroup) } return i.slideTo(s, e, t, a) }, slideToClickedSlide: function () { var e, t = this, a = t.params, i = t.$wrapperEl, s = "auto" === a.slidesPerView ? t.slidesPerViewDynamic() : a.slidesPerView, r = t.clickedIndex; if (a.loop) { if (t.animating) return; e = parseInt(L(t.clickedSlide).attr("data-swiper-slide-index"), 10), a.centeredSlides ? r < t.loopedSlides - s / 2 || r > t.slides.length - t.loopedSlides + s / 2 ? (t.loopFix(), r = i.children("." + a.slideClass + '[data-swiper-slide-index="' + e + '"]:not(.' + a.slideDuplicateClass + ")").eq(0).index(), ee.nextTick(function () { t.slideTo(r) })) : t.slideTo(r) : r > t.slides.length - s ? (t.loopFix(), r = i.children("." + a.slideClass + '[data-swiper-slide-index="' + e + '"]:not(.' + a.slideDuplicateClass + ")").eq(0).index(), ee.nextTick(function () { t.slideTo(r) })) : t.slideTo(r) } else t.slideTo(r) } }; var h = { loopCreate: function () { var i = this, e = i.params, t = i.$wrapperEl; t.children("." + e.slideClass + "." + e.slideDuplicateClass).remove(); var s = t.children("." + e.slideClass); if (e.loopFillGroupWithBlank) { var a = e.slidesPerGroup - s.length % e.slidesPerGroup; if (a !== e.slidesPerGroup) { for (var r = 0; r < a; r += 1) { var n = L(f.createElement("div")).addClass(e.slideClass + " " + e.slideBlankClass); t.append(n) } s = t.children("." + e.slideClass) } } "auto" !== e.slidesPerView || e.loopedSlides || (e.loopedSlides = s.length), i.loopedSlides = parseInt(e.loopedSlides || e.slidesPerView, 10), i.loopedSlides += e.loopAdditionalSlides, i.loopedSlides > s.length && (i.loopedSlides = s.length); var o = [], l = []; s.each(function (e, t) { var a = L(t); e < i.loopedSlides && l.push(t), e < s.length && e >= s.length - i.loopedSlides && o.push(t), a.attr("data-swiper-slide-index", e) }); for (var d = 0; d < l.length; d += 1)t.append(L(l[d].cloneNode(!0)).addClass(e.slideDuplicateClass)); for (var p = o.length - 1; 0 <= p; p -= 1)t.prepend(L(o[p].cloneNode(!0)).addClass(e.slideDuplicateClass)) }, loopFix: function () { var e, t = this, a = t.params, i = t.activeIndex, s = t.slides, r = t.loopedSlides, n = t.allowSlidePrev, o = t.allowSlideNext, l = t.snapGrid, d = t.rtlTranslate; t.allowSlidePrev = !0, t.allowSlideNext = !0; var p = -l[i] - t.getTranslate(); i < r ? (e = s.length - 3 * r + i, e += r, t.slideTo(e, 0, !1, !0) && 0 !== p && t.setTranslate((d ? -t.translate : t.translate) - p)) : ("auto" === a.slidesPerView && 2 * r <= i || i >= s.length - r) && (e = -s.length + i + r, e += r, t.slideTo(e, 0, !1, !0) && 0 !== p && t.setTranslate((d ? -t.translate : t.translate) - p)); t.allowSlidePrev = n, t.allowSlideNext = o }, loopDestroy: function () { var e = this.$wrapperEl, t = this.params, a = this.slides; e.children("." + t.slideClass + "." + t.slideDuplicateClass + ",." + t.slideClass + "." + t.slideBlankClass).remove(), a.removeAttr("data-swiper-slide-index") } }; var v = { setGrabCursor: function (e) { if (!(te.touch || !this.params.simulateTouch || this.params.watchOverflow && this.isLocked)) { var t = this.el; t.style.cursor = "move", t.style.cursor = e ? "-webkit-grabbing" : "-webkit-grab", t.style.cursor = e ? "-moz-grabbin" : "-moz-grab", t.style.cursor = e ? "grabbing" : "grab" } }, unsetGrabCursor: function () { te.touch || this.params.watchOverflow && this.isLocked || (this.el.style.cursor = "") } }; var m = { appendSlide: function (e) { var t = this, a = t.$wrapperEl, i = t.params; if (i.loop && t.loopDestroy(), "object" == typeof e && "length" in e) for (var s = 0; s < e.length; s += 1)e[s] && a.append(e[s]); else a.append(e); i.loop && t.loopCreate(), i.observer && te.observer || t.update() }, prependSlide: function (e) { var t = this, a = t.params, i = t.$wrapperEl, s = t.activeIndex; a.loop && t.loopDestroy(); var r = s + 1; if ("object" == typeof e && "length" in e) { for (var n = 0; n < e.length; n += 1)e[n] && i.prepend(e[n]); r = s + e.length } else i.prepend(e); a.loop && t.loopCreate(), a.observer && te.observer || t.update(), t.slideTo(r, 0, !1) }, addSlide: function (e, t) { var a = this, i = a.$wrapperEl, s = a.params, r = a.activeIndex; s.loop && (r -= a.loopedSlides, a.loopDestroy(), a.slides = i.children("." + s.slideClass)); var n = a.slides.length; if (e <= 0) a.prependSlide(t); else if (n <= e) a.appendSlide(t); else { for (var o = e < r ? r + 1 : r, l = [], d = n - 1; e <= d; d -= 1) { var p = a.slides.eq(d); p.remove(), l.unshift(p) } if ("object" == typeof t && "length" in t) { for (var c = 0; c < t.length; c += 1)t[c] && i.append(t[c]); o = e < r ? r + t.length : r } else i.append(t); for (var u = 0; u < l.length; u += 1)i.append(l[u]); s.loop && a.loopCreate(), s.observer && te.observer || a.update(), s.loop ? a.slideTo(o + a.loopedSlides, 0, !1) : a.slideTo(o, 0, !1) } }, removeSlide: function (e) { var t = this, a = t.params, i = t.$wrapperEl, s = t.activeIndex; a.loop && (s -= t.loopedSlides, t.loopDestroy(), t.slides = i.children("." + a.slideClass)); var r, n = s; if ("object" == typeof e && "length" in e) { for (var o = 0; o < e.length; o += 1)r = e[o], t.slides[r] && t.slides.eq(r).remove(), r < n && (n -= 1); n = Math.max(n, 0) } else r = e, t.slides[r] && t.slides.eq(r).remove(), r < n && (n -= 1), n = Math.max(n, 0); a.loop && t.loopCreate(), a.observer && te.observer || t.update(), a.loop ? t.slideTo(n + t.loopedSlides, 0, !1) : t.slideTo(n, 0, !1) }, removeAllSlides: function () { for (var e = [], t = 0; t < this.slides.length; t += 1)e.push(t); this.removeSlide(e) } }, g = function () { var e = J.navigator.userAgent, t = { ios: !1, android: !1, androidChrome: !1, desktop: !1, windows: !1, iphone: !1, ipod: !1, ipad: !1, cordova: J.cordova || J.phonegap, phonegap: J.cordova || J.phonegap }, a = e.match(/(Windows Phone);?[\s\/]+([\d.]+)?/), i = e.match(/(Android);?[\s\/]+([\d.]+)?/), s = e.match(/(iPad).*OS\s([\d_]+)/), r = e.match(/(iPod)(.*OS\s([\d_]+))?/), n = !s && e.match(/(iPhone\sOS|iOS)\s([\d_]+)/); if (a && (t.os = "windows", t.osVersion = a[2], t.windows = !0), i && !a && (t.os = "android", t.osVersion = i[2], t.android = !0, t.androidChrome = 0 <= e.toLowerCase().indexOf("chrome")), (s || n || r) && (t.os = "ios", t.ios = !0), n && !r && (t.osVersion = n[2].replace(/_/g, "."), t.iphone = !0), s && (t.osVersion = s[2].replace(/_/g, "."), t.ipad = !0), r && (t.osVersion = r[3] ? r[3].replace(/_/g, ".") : null, t.iphone = !0), t.ios && t.osVersion && 0 <= e.indexOf("Version/") && "10" === t.osVersion.split(".")[0] && (t.osVersion = e.toLowerCase().split("version/")[1].split(" ")[0]), t.desktop = !(t.os || t.android || t.webView), t.webView = (n || s || r) && e.match(/.*AppleWebKit(?!.*Safari)/i), t.os && "ios" === t.os) { var o = t.osVersion.split("."), l = f.querySelector('meta[name="viewport"]'); t.minimalUi = !t.webView && (r || n) && (1 * o[0] == 7 ? 1 <= 1 * o[1] : 7 < 1 * o[0]) && l && 0 <= l.getAttribute("content").indexOf("minimal-ui") } return t.pixelRatio = J.devicePixelRatio || 1, t }(); function b() { var e = this, t = e.params, a = e.el; if (!a || 0 !== a.offsetWidth) { t.breakpoints && e.setBreakpoint(); var i = e.allowSlideNext, s = e.allowSlidePrev, r = e.snapGrid; if (e.allowSlideNext = !0, e.allowSlidePrev = !0, e.updateSize(), e.updateSlides(), t.freeMode) { var n = Math.min(Math.max(e.translate, e.maxTranslate()), e.minTranslate()); e.setTranslate(n), e.updateActiveIndex(), e.updateSlidesClasses(), t.autoHeight && e.updateAutoHeight() } else e.updateSlidesClasses(), ("auto" === t.slidesPerView || 1 < t.slidesPerView) && e.isEnd && !e.params.centeredSlides ? e.slideTo(e.slides.length - 1, 0, !1, !0) : e.slideTo(e.activeIndex, 0, !1, !0); e.allowSlidePrev = s, e.allowSlideNext = i, e.params.watchOverflow && r !== e.snapGrid && e.checkOverflow() } } var w = { init: !0, direction: "horizontal", touchEventsTarget: "container", initialSlide: 0, speed: 300, preventInteractionOnTransition: !1, edgeSwipeDetection: !1, edgeSwipeThreshold: 20, freeMode: !1, freeModeMomentum: !0, freeModeMomentumRatio: 1, freeModeMomentumBounce: !0, freeModeMomentumBounceRatio: 1, freeModeMomentumVelocityRatio: 1, freeModeSticky: !1, freeModeMinimumVelocity: .02, autoHeight: !1, setWrapperSize: !1, virtualTranslate: !1, effect: "slide", breakpoints: void 0, breakpointsInverse: !1, spaceBetween: 0, slidesPerView: 1, slidesPerColumn: 1, slidesPerColumnFill: "column", slidesPerGroup: 1, centeredSlides: !1, slidesOffsetBefore: 0, slidesOffsetAfter: 0, normalizeSlideIndex: !0, centerInsufficientSlides: !1, watchOverflow: !1, roundLengths: !1, touchRatio: 1, touchAngle: 45, simulateTouch: !0, shortSwipes: !0, longSwipes: !0, longSwipesRatio: .5, longSwipesMs: 300, followFinger: !0, allowTouchMove: !0, threshold: 0, touchMoveStopPropagation: !0, touchStartPreventDefault: !0, touchStartForcePreventDefault: !1, touchReleaseOnEdges: !1, uniqueNavElements: !0, resistance: !0, resistanceRatio: .85, watchSlidesProgress: !1, watchSlidesVisibility: !1, grabCursor: !1, preventClicks: !0, preventClicksPropagation: !0, slideToClickedSlide: !1, preloadImages: !0, updateOnImagesReady: !0, loop: !1, loopAdditionalSlides: 0, loopedSlides: null, loopFillGroupWithBlank: !1, allowSlidePrev: !0, allowSlideNext: !0, swipeHandler: null, noSwiping: !0, noSwipingClass: "swiper-no-swiping", noSwipingSelector: null, passiveListeners: !0, containerModifierClass: "swiper-container-", slideClass: "swiper-slide", slideBlankClass: "swiper-slide-invisible-blank", slideActiveClass: "swiper-slide-active", slideDuplicateActiveClass: "swiper-slide-duplicate-active", slideVisibleClass: "swiper-slide-visible", slideDuplicateClass: "swiper-slide-duplicate", slideNextClass: "swiper-slide-next", slideDuplicateNextClass: "swiper-slide-duplicate-next", slidePrevClass: "swiper-slide-prev", slideDuplicatePrevClass: "swiper-slide-duplicate-prev", wrapperClass: "swiper-wrapper", runCallbacksOnInit: !0 }, y = { update: d, translate: p, transition: c, slide: u, loop: h, grabCursor: v, manipulation: m, events: { attachEvents: function () { var e = this, t = e.params, a = e.touchEvents, i = e.el, s = e.wrapperEl; e.onTouchStart = function (e) { var t = this, a = t.touchEventsData, i = t.params, s = t.touches; if (!t.animating || !i.preventInteractionOnTransition) { var r = e; if (r.originalEvent && (r = r.originalEvent), a.isTouchEvent = "touchstart" === r.type, (a.isTouchEvent || !("which" in r) || 3 !== r.which) && !(!a.isTouchEvent && "button" in r && 0 < r.button || a.isTouched && a.isMoved)) if (i.noSwiping && L(r.target).closest(i.noSwipingSelector ? i.noSwipingSelector : "." + i.noSwipingClass)[0]) t.allowClick = !0; else if (!i.swipeHandler || L(r).closest(i.swipeHandler)[0]) { s.currentX = "touchstart" === r.type ? r.targetTouches[0].pageX : r.pageX, s.currentY = "touchstart" === r.type ? r.targetTouches[0].pageY : r.pageY; var n = s.currentX, o = s.currentY, l = i.edgeSwipeDetection || i.iOSEdgeSwipeDetection, d = i.edgeSwipeThreshold || i.iOSEdgeSwipeThreshold; if (!l || !(n <= d || n >= J.screen.width - d)) { if (ee.extend(a, { isTouched: !0, isMoved: !1, allowTouchCallbacks: !0, isScrolling: void 0, startMoving: void 0 }), s.startX = n, s.startY = o, a.touchStartTime = ee.now(), t.allowClick = !0, t.updateSize(), t.swipeDirection = void 0, 0 < i.threshold && (a.allowThresholdMove = !1), "touchstart" !== r.type) { var p = !0; L(r.target).is(a.formElements) && (p = !1), f.activeElement && L(f.activeElement).is(a.formElements) && f.activeElement !== r.target && f.activeElement.blur(); var c = p && t.allowTouchMove && i.touchStartPreventDefault; (i.touchStartForcePreventDefault || c) && r.preventDefault() } t.emit("touchStart", r) } } } }.bind(e), e.onTouchMove = function (e) { var t = this, a = t.touchEventsData, i = t.params, s = t.touches, r = t.rtlTranslate, n = e; if (n.originalEvent && (n = n.originalEvent), a.isTouched) { if (!a.isTouchEvent || "mousemove" !== n.type) { var o = "touchmove" === n.type ? n.targetTouches[0].pageX : n.pageX, l = "touchmove" === n.type ? n.targetTouches[0].pageY : n.pageY; if (n.preventedByNestedSwiper) return s.startX = o, void (s.startY = l); if (!t.allowTouchMove) return t.allowClick = !1, void (a.isTouched && (ee.extend(s, { startX: o, startY: l, currentX: o, currentY: l }), a.touchStartTime = ee.now())); if (a.isTouchEvent && i.touchReleaseOnEdges && !i.loop) if (t.isVertical()) { if (l < s.startY && t.translate <= t.maxTranslate() || l > s.startY && t.translate >= t.minTranslate()) return a.isTouched = !1, void (a.isMoved = !1) } else if (o < s.startX && t.translate <= t.maxTranslate() || o > s.startX && t.translate >= t.minTranslate()) return; if (a.isTouchEvent && f.activeElement && n.target === f.activeElement && L(n.target).is(a.formElements)) return a.isMoved = !0, void (t.allowClick = !1); if (a.allowTouchCallbacks && t.emit("touchMove", n), !(n.targetTouches && 1 < n.targetTouches.length)) { s.currentX = o, s.currentY = l; var d, p = s.currentX - s.startX, c = s.currentY - s.startY; if (!(t.params.threshold && Math.sqrt(Math.pow(p, 2) + Math.pow(c, 2)) < t.params.threshold)) if (void 0 === a.isScrolling && (t.isHorizontal() && s.currentY === s.startY || t.isVertical() && s.currentX === s.startX ? a.isScrolling = !1 : 25 <= p * p + c * c && (d = 180 * Math.atan2(Math.abs(c), Math.abs(p)) / Math.PI, a.isScrolling = t.isHorizontal() ? d > i.touchAngle : 90 - d > i.touchAngle)), a.isScrolling && t.emit("touchMoveOpposite", n), void 0 === a.startMoving && (s.currentX === s.startX && s.currentY === s.startY || (a.startMoving = !0)), a.isScrolling) a.isTouched = !1; else if (a.startMoving) { t.allowClick = !1, n.preventDefault(), i.touchMoveStopPropagation && !i.nested && n.stopPropagation(), a.isMoved || (i.loop && t.loopFix(), a.startTranslate = t.getTranslate(), t.setTransition(0), t.animating && t.$wrapperEl.trigger("webkitTransitionEnd transitionend"), a.allowMomentumBounce = !1, !i.grabCursor || !0 !== t.allowSlideNext && !0 !== t.allowSlidePrev || t.setGrabCursor(!0), t.emit("sliderFirstMove", n)), t.emit("sliderMove", n), a.isMoved = !0; var u = t.isHorizontal() ? p : c; s.diff = u, u *= i.touchRatio, r && (u = -u), t.swipeDirection = 0 < u ? "prev" : "next", a.currentTranslate = u + a.startTranslate; var h = !0, v = i.resistanceRatio; if (i.touchReleaseOnEdges && (v = 0), 0 < u && a.currentTranslate > t.minTranslate() ? (h = !1, i.resistance && (a.currentTranslate = t.minTranslate() - 1 + Math.pow(-t.minTranslate() + a.startTranslate + u, v))) : u < 0 && a.currentTranslate < t.maxTranslate() && (h = !1, i.resistance && (a.currentTranslate = t.maxTranslate() + 1 - Math.pow(t.maxTranslate() - a.startTranslate - u, v))), h && (n.preventedByNestedSwiper = !0), !t.allowSlideNext && "next" === t.swipeDirection && a.currentTranslate < a.startTranslate && (a.currentTranslate = a.startTranslate), !t.allowSlidePrev && "prev" === t.swipeDirection && a.currentTranslate > a.startTranslate && (a.currentTranslate = a.startTranslate), 0 < i.threshold) { if (!(Math.abs(u) > i.threshold || a.allowThresholdMove)) return void (a.currentTranslate = a.startTranslate); if (!a.allowThresholdMove) return a.allowThresholdMove = !0, s.startX = s.currentX, s.startY = s.currentY, a.currentTranslate = a.startTranslate, void (s.diff = t.isHorizontal() ? s.currentX - s.startX : s.currentY - s.startY) } i.followFinger && ((i.freeMode || i.watchSlidesProgress || i.watchSlidesVisibility) && (t.updateActiveIndex(), t.updateSlidesClasses()), i.freeMode && (0 === a.velocities.length && a.velocities.push({ position: s[t.isHorizontal() ? "startX" : "startY"], time: a.touchStartTime }), a.velocities.push({ position: s[t.isHorizontal() ? "currentX" : "currentY"], time: ee.now() })), t.updateProgress(a.currentTranslate), t.setTranslate(a.currentTranslate)) } } } } else a.startMoving && a.isScrolling && t.emit("touchMoveOpposite", n) }.bind(e), e.onTouchEnd = function (e) { var t = this, a = t.touchEventsData, i = t.params, s = t.touches, r = t.rtlTranslate, n = t.$wrapperEl, o = t.slidesGrid, l = t.snapGrid, d = e; if (d.originalEvent && (d = d.originalEvent), a.allowTouchCallbacks && t.emit("touchEnd", d), a.allowTouchCallbacks = !1, !a.isTouched) return a.isMoved && i.grabCursor && t.setGrabCursor(!1), a.isMoved = !1, void (a.startMoving = !1); i.grabCursor && a.isMoved && a.isTouched && (!0 === t.allowSlideNext || !0 === t.allowSlidePrev) && t.setGrabCursor(!1); var p, c = ee.now(), u = c - a.touchStartTime; if (t.allowClick && (t.updateClickedSlide(d), t.emit("tap", d), u < 300 && 300 < c - a.lastClickTime && (a.clickTimeout && clearTimeout(a.clickTimeout), a.clickTimeout = ee.nextTick(function () { t && !t.destroyed && t.emit("click", d) }, 300)), u < 300 && c - a.lastClickTime < 300 && (a.clickTimeout && clearTimeout(a.clickTimeout), t.emit("doubleTap", d))), a.lastClickTime = ee.now(), ee.nextTick(function () { t.destroyed || (t.allowClick = !0) }), !a.isTouched || !a.isMoved || !t.swipeDirection || 0 === s.diff || a.currentTranslate === a.startTranslate) return a.isTouched = !1, a.isMoved = !1, void (a.startMoving = !1); if (a.isTouched = !1, a.isMoved = !1, a.startMoving = !1, p = i.followFinger ? r ? t.translate : -t.translate : -a.currentTranslate, i.freeMode) { if (p < -t.minTranslate()) return void t.slideTo(t.activeIndex); if (p > -t.maxTranslate()) return void (t.slides.length < l.length ? t.slideTo(l.length - 1) : t.slideTo(t.slides.length - 1)); if (i.freeModeMomentum) { if (1 < a.velocities.length) { var h = a.velocities.pop(), v = a.velocities.pop(), f = h.position - v.position, m = h.time - v.time; t.velocity = f / m, t.velocity /= 2, Math.abs(t.velocity) < i.freeModeMinimumVelocity && (t.velocity = 0), (150 < m || 300 < ee.now() - h.time) && (t.velocity = 0) } else t.velocity = 0; t.velocity *= i.freeModeMomentumVelocityRatio, a.velocities.length = 0; var g = 1e3 * i.freeModeMomentumRatio, b = t.velocity * g, w = t.translate + b; r && (w = -w); var y, x, T = !1, E = 20 * Math.abs(t.velocity) * i.freeModeMomentumBounceRatio; if (w < t.maxTranslate()) i.freeModeMomentumBounce ? (w + t.maxTranslate() < -E && (w = t.maxTranslate() - E), y = t.maxTranslate(), T = !0, a.allowMomentumBounce = !0) : w = t.maxTranslate(), i.loop && i.centeredSlides && (x = !0); else if (w > t.minTranslate()) i.freeModeMomentumBounce ? (w - t.minTranslate() > E && (w = t.minTranslate() + E), y = t.minTranslate(), T = !0, a.allowMomentumBounce = !0) : w = t.minTranslate(), i.loop && i.centeredSlides && (x = !0); else if (i.freeModeSticky) { for (var S, C = 0; C < l.length; C += 1)if (l[C] > -w) { S = C; break } w = -(w = Math.abs(l[S] - w) < Math.abs(l[S - 1] - w) || "next" === t.swipeDirection ? l[S] : l[S - 1]) } if (x && t.once("transitionEnd", function () { t.loopFix() }), 0 !== t.velocity) g = r ? Math.abs((-w - t.translate) / t.velocity) : Math.abs((w - t.translate) / t.velocity); else if (i.freeModeSticky) return void t.slideToClosest(); i.freeModeMomentumBounce && T ? (t.updateProgress(y), t.setTransition(g), t.setTranslate(w), t.transitionStart(!0, t.swipeDirection), t.animating = !0, n.transitionEnd(function () { t && !t.destroyed && a.allowMomentumBounce && (t.emit("momentumBounce"), t.setTransition(i.speed), t.setTranslate(y), n.transitionEnd(function () { t && !t.destroyed && t.transitionEnd() })) })) : t.velocity ? (t.updateProgress(w), t.setTransition(g), t.setTranslate(w), t.transitionStart(!0, t.swipeDirection), t.animating || (t.animating = !0, n.transitionEnd(function () { t && !t.destroyed && t.transitionEnd() }))) : t.updateProgress(w), t.updateActiveIndex(), t.updateSlidesClasses() } else if (i.freeModeSticky) return void t.slideToClosest(); (!i.freeModeMomentum || u >= i.longSwipesMs) && (t.updateProgress(), t.updateActiveIndex(), t.updateSlidesClasses()) } else { for (var M = 0, z = t.slidesSizesGrid[0], P = 0; P < o.length; P += i.slidesPerGroup)void 0 !== o[P + i.slidesPerGroup] ? p >= o[P] && p < o[P + i.slidesPerGroup] && (z = o[(M = P) + i.slidesPerGroup] - o[P]) : p >= o[P] && (M = P, z = o[o.length - 1] - o[o.length - 2]); var k = (p - o[M]) / z; if (u > i.longSwipesMs) { if (!i.longSwipes) return void t.slideTo(t.activeIndex); "next" === t.swipeDirection && (k >= i.longSwipesRatio ? t.slideTo(M + i.slidesPerGroup) : t.slideTo(M)), "prev" === t.swipeDirection && (k > 1 - i.longSwipesRatio ? t.slideTo(M + i.slidesPerGroup) : t.slideTo(M)) } else { if (!i.shortSwipes) return void t.slideTo(t.activeIndex); "next" === t.swipeDirection && t.slideTo(M + i.slidesPerGroup), "prev" === t.swipeDirection && t.slideTo(M) } } }.bind(e), e.onClick = function (e) { this.allowClick || (this.params.preventClicks && e.preventDefault(), this.params.preventClicksPropagation && this.animating && (e.stopPropagation(), e.stopImmediatePropagation())) }.bind(e); var r = "container" === t.touchEventsTarget ? i : s, n = !!t.nested; if (te.touch || !te.pointerEvents && !te.prefixedPointerEvents) { if (te.touch) { var o = !("touchstart" !== a.start || !te.passiveListener || !t.passiveListeners) && { passive: !0, capture: !1 }; r.addEventListener(a.start, e.onTouchStart, o), r.addEventListener(a.move, e.onTouchMove, te.passiveListener ? { passive: !1, capture: n } : n), r.addEventListener(a.end, e.onTouchEnd, o) } (t.simulateTouch && !g.ios && !g.android || t.simulateTouch && !te.touch && g.ios) && (r.addEventListener("mousedown", e.onTouchStart, !1), f.addEventListener("mousemove", e.onTouchMove, n), f.addEventListener("mouseup", e.onTouchEnd, !1)) } else r.addEventListener(a.start, e.onTouchStart, !1), f.addEventListener(a.move, e.onTouchMove, n), f.addEventListener(a.end, e.onTouchEnd, !1); (t.preventClicks || t.preventClicksPropagation) && r.addEventListener("click", e.onClick, !0), e.on(g.ios || g.android ? "resize orientationchange observerUpdate" : "resize observerUpdate", b, !0) }, detachEvents: function () { var e = this, t = e.params, a = e.touchEvents, i = e.el, s = e.wrapperEl, r = "container" === t.touchEventsTarget ? i : s, n = !!t.nested; if (te.touch || !te.pointerEvents && !te.prefixedPointerEvents) { if (te.touch) { var o = !("onTouchStart" !== a.start || !te.passiveListener || !t.passiveListeners) && { passive: !0, capture: !1 }; r.removeEventListener(a.start, e.onTouchStart, o), r.removeEventListener(a.move, e.onTouchMove, n), r.removeEventListener(a.end, e.onTouchEnd, o) } (t.simulateTouch && !g.ios && !g.android || t.simulateTouch && !te.touch && g.ios) && (r.removeEventListener("mousedown", e.onTouchStart, !1), f.removeEventListener("mousemove", e.onTouchMove, n), f.removeEventListener("mouseup", e.onTouchEnd, !1)) } else r.removeEventListener(a.start, e.onTouchStart, !1), f.removeEventListener(a.move, e.onTouchMove, n), f.removeEventListener(a.end, e.onTouchEnd, !1); (t.preventClicks || t.preventClicksPropagation) && r.removeEventListener("click", e.onClick, !0), e.off(g.ios || g.android ? "resize orientationchange observerUpdate" : "resize observerUpdate", b) } }, breakpoints: { setBreakpoint: function () { var e = this, t = e.activeIndex, a = e.initialized, i = e.loopedSlides; void 0 === i && (i = 0); var s = e.params, r = s.breakpoints; if (r && (!r || 0 !== Object.keys(r).length)) { var n = e.getBreakpoint(r); if (n && e.currentBreakpoint !== n) { var o = n in r ? r[n] : void 0; o && ["slidesPerView", "spaceBetween", "slidesPerGroup"].forEach(function (e) { var t = o[e]; void 0 !== t && (o[e] = "slidesPerView" !== e || "AUTO" !== t && "auto" !== t ? "slidesPerView" === e ? parseFloat(t) : parseInt(t, 10) : "auto") }); var l = o || e.originalParams, d = l.direction && l.direction !== s.direction, p = s.loop && (l.slidesPerView !== s.slidesPerView || d); d && a && e.changeDirection(), ee.extend(e.params, l), ee.extend(e, { allowTouchMove: e.params.allowTouchMove, allowSlideNext: e.params.allowSlideNext, allowSlidePrev: e.params.allowSlidePrev }), e.currentBreakpoint = n, p && a && (e.loopDestroy(), e.loopCreate(), e.updateSlides(), e.slideTo(t - i + e.loopedSlides, 0, !1)), e.emit("breakpoint", l) } } }, getBreakpoint: function (e) { if (e) { var t = !1, a = []; Object.keys(e).forEach(function (e) { a.push(e) }), a.sort(function (e, t) { return parseInt(e, 10) - parseInt(t, 10) }); for (var i = 0; i < a.length; i += 1) { var s = a[i]; this.params.breakpointsInverse ? s <= J.innerWidth && (t = s) : s >= J.innerWidth && !t && (t = s) } return t || "max" } } }, checkOverflow: { checkOverflow: function () { var e = this, t = e.isLocked; e.isLocked = 1 === e.snapGrid.length, e.allowSlideNext = !e.isLocked, e.allowSlidePrev = !e.isLocked, t !== e.isLocked && e.emit(e.isLocked ? "lock" : "unlock"), t && t !== e.isLocked && (e.isEnd = !1, e.navigation.update()) } }, classes: { addClasses: function () { var t = this.classNames, a = this.params, e = this.rtl, i = this.$el, s = []; s.push("initialized"), s.push(a.direction), a.freeMode && s.push("free-mode"), te.flexbox || s.push("no-flexbox"), a.autoHeight && s.push("autoheight"), e && s.push("rtl"), 1 < a.slidesPerColumn && s.push("multirow"), g.android && s.push("android"), g.ios && s.push("ios"), (I.isIE || I.isEdge) && (te.pointerEvents || te.prefixedPointerEvents) && s.push("wp8-" + a.direction), s.forEach(function (e) { t.push(a.containerModifierClass + e) }), i.addClass(t.join(" ")) }, removeClasses: function () { var e = this.$el, t = this.classNames; e.removeClass(t.join(" ")) } }, images: { loadImage: function (e, t, a, i, s, r) { var n; function o() { r && r() } e.complete && s ? o() : t ? ((n = new J.Image).onload = o, n.onerror = o, i && (n.sizes = i), a && (n.srcset = a), t && (n.src = t)) : o() }, preloadImages: function () { var e = this; function t() { null != e && e && !e.destroyed && (void 0 !== e.imagesLoaded && (e.imagesLoaded += 1), e.imagesLoaded === e.imagesToLoad.length && (e.params.updateOnImagesReady && e.update(), e.emit("imagesReady"))) } e.imagesToLoad = e.$el.find("img"); for (var a = 0; a < e.imagesToLoad.length; a += 1) { var i = e.imagesToLoad[a]; e.loadImage(i, i.currentSrc || i.getAttribute("src"), i.srcset || i.getAttribute("srcset"), i.sizes || i.getAttribute("sizes"), !0, t) } } } }, x = {}, T = function (u) { function h() { for (var e, t, s, a = [], i = arguments.length; i--;)a[i] = arguments[i]; 1 === a.length && a[0].constructor && a[0].constructor === Object ? s = a[0] : (t = (e = a)[0], s = e[1]), s || (s = {}), s = ee.extend({}, s), t && !s.el && (s.el = t), u.call(this, s), Object.keys(y).forEach(function (t) { Object.keys(y[t]).forEach(function (e) { h.prototype[e] || (h.prototype[e] = y[t][e]) }) }); var r = this; void 0 === r.modules && (r.modules = {}), Object.keys(r.modules).forEach(function (e) { var t = r.modules[e]; if (t.params) { var a = Object.keys(t.params)[0], i = t.params[a]; if ("object" != typeof i || null === i) return; if (!(a in s && "enabled" in i)) return; !0 === s[a] && (s[a] = { enabled: !0 }), "object" != typeof s[a] || "enabled" in s[a] || (s[a].enabled = !0), s[a] || (s[a] = { enabled: !1 }) } }); var n = ee.extend({}, w); r.useModulesParams(n), r.params = ee.extend({}, n, x, s), r.originalParams = ee.extend({}, r.params), r.passedParams = ee.extend({}, s); var o = (r.$ = L)(r.params.el); if (t = o[0]) { if (1 < o.length) { var l = []; return o.each(function (e, t) { var a = ee.extend({}, s, { el: t }); l.push(new h(a)) }), l } t.swiper = r, o.data("swiper", r); var d, p, c = o.children("." + r.params.wrapperClass); return ee.extend(r, { $el: o, el: t, $wrapperEl: c, wrapperEl: c[0], classNames: [], slides: L(), slidesGrid: [], snapGrid: [], slidesSizesGrid: [], isHorizontal: function () { return "horizontal" === r.params.direction }, isVertical: function () { return "vertical" === r.params.direction }, rtl: "rtl" === t.dir.toLowerCase() || "rtl" === o.css("direction"), rtlTranslate: "horizontal" === r.params.direction && ("rtl" === t.dir.toLowerCase() || "rtl" === o.css("direction")), wrongRTL: "-webkit-box" === c.css("display"), activeIndex: 0, realIndex: 0, isBeginning: !0, isEnd: !1, translate: 0, previousTranslate: 0, progress: 0, velocity: 0, animating: !1, allowSlideNext: r.params.allowSlideNext, allowSlidePrev: r.params.allowSlidePrev, touchEvents: (d = ["touchstart", "touchmove", "touchend"], p = ["mousedown", "mousemove", "mouseup"], te.pointerEvents ? p = ["pointerdown", "pointermove", "pointerup"] : te.prefixedPointerEvents && (p = ["MSPointerDown", "MSPointerMove", "MSPointerUp"]), r.touchEventsTouch = { start: d[0], move: d[1], end: d[2] }, r.touchEventsDesktop = { start: p[0], move: p[1], end: p[2] }, te.touch || !r.params.simulateTouch ? r.touchEventsTouch : r.touchEventsDesktop), touchEventsData: { isTouched: void 0, isMoved: void 0, allowTouchCallbacks: void 0, touchStartTime: void 0, isScrolling: void 0, currentTranslate: void 0, startTranslate: void 0, allowThresholdMove: void 0, formElements: "input, select, option, textarea, button, video", lastClickTime: ee.now(), clickTimeout: void 0, velocities: [], allowMomentumBounce: void 0, isTouchEvent: void 0, startMoving: void 0 }, allowClick: !0, allowTouchMove: r.params.allowTouchMove, touches: { startX: 0, startY: 0, currentX: 0, currentY: 0, diff: 0 }, imagesToLoad: [], imagesLoaded: 0 }), r.useModules(), r.params.init && r.init(), r } } u && (h.__proto__ = u); var e = { extendedDefaults: { configurable: !0 }, defaults: { configurable: !0 }, Class: { configurable: !0 }, $: { configurable: !0 } }; return ((h.prototype = Object.create(u && u.prototype)).constructor = h).prototype.slidesPerViewDynamic = function () { var e = this, t = e.params, a = e.slides, i = e.slidesGrid, s = e.size, r = e.activeIndex, n = 1; if (t.centeredSlides) { for (var o, l = a[r].swiperSlideSize, d = r + 1; d < a.length; d += 1)a[d] && !o && (n += 1, s < (l += a[d].swiperSlideSize) && (o = !0)); for (var p = r - 1; 0 <= p; p -= 1)a[p] && !o && (n += 1, s < (l += a[p].swiperSlideSize) && (o = !0)) } else for (var c = r + 1; c < a.length; c += 1)i[c] - i[r] < s && (n += 1); return n }, h.prototype.update = function () { var a = this; if (a && !a.destroyed) { var e = a.snapGrid, t = a.params; t.breakpoints && a.setBreakpoint(), a.updateSize(), a.updateSlides(), a.updateProgress(), a.updateSlidesClasses(), a.params.freeMode ? (i(), a.params.autoHeight && a.updateAutoHeight()) : (("auto" === a.params.slidesPerView || 1 < a.params.slidesPerView) && a.isEnd && !a.params.centeredSlides ? a.slideTo(a.slides.length - 1, 0, !1, !0) : a.slideTo(a.activeIndex, 0, !1, !0)) || i(), t.watchOverflow && e !== a.snapGrid && a.checkOverflow(), a.emit("update") } function i() { var e = a.rtlTranslate ? -1 * a.translate : a.translate, t = Math.min(Math.max(e, a.maxTranslate()), a.minTranslate()); a.setTranslate(t), a.updateActiveIndex(), a.updateSlidesClasses() } }, h.prototype.changeDirection = function (a, e) { void 0 === e && (e = !0); var t = this, i = t.params.direction; return a || (a = "horizontal" === i ? "vertical" : "horizontal"), a === i || "horizontal" !== a && "vertical" !== a || ("vertical" === i && (t.$el.removeClass(t.params.containerModifierClass + "vertical wp8-vertical").addClass("" + t.params.containerModifierClass + a), (I.isIE || I.isEdge) && (te.pointerEvents || te.prefixedPointerEvents) && t.$el.addClass(t.params.containerModifierClass + "wp8-" + a)), "horizontal" === i && (t.$el.removeClass(t.params.containerModifierClass + "horizontal wp8-horizontal").addClass("" + t.params.containerModifierClass + a), (I.isIE || I.isEdge) && (te.pointerEvents || te.prefixedPointerEvents) && t.$el.addClass(t.params.containerModifierClass + "wp8-" + a)), t.params.direction = a, t.slides.each(function (e, t) { "vertical" === a ? t.style.width = "" : t.style.height = "" }), t.emit("changeDirection"), e && t.update()), t }, h.prototype.init = function () { var e = this; e.initialized || (e.emit("beforeInit"), e.params.breakpoints && e.setBreakpoint(), e.addClasses(), e.params.loop && e.loopCreate(), e.updateSize(), e.updateSlides(), e.params.watchOverflow && e.checkOverflow(), e.params.grabCursor && e.setGrabCursor(), e.params.preloadImages && e.preloadImages(), e.params.loop ? e.slideTo(e.params.initialSlide + e.loopedSlides, 0, e.params.runCallbacksOnInit) : e.slideTo(e.params.initialSlide, 0, e.params.runCallbacksOnInit), e.attachEvents(), e.initialized = !0, e.emit("init")) }, h.prototype.destroy = function (e, t) { void 0 === e && (e = !0), void 0 === t && (t = !0); var a = this, i = a.params, s = a.$el, r = a.$wrapperEl, n = a.slides; return void 0 === a.params || a.destroyed || (a.emit("beforeDestroy"), a.initialized = !1, a.detachEvents(), i.loop && a.loopDestroy(), t && (a.removeClasses(), s.removeAttr("style"), r.removeAttr("style"), n && n.length && n.removeClass([i.slideVisibleClass, i.slideActiveClass, i.slideNextClass, i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index").removeAttr("data-swiper-column").removeAttr("data-swiper-row")), a.emit("destroy"), Object.keys(a.eventsListeners).forEach(function (e) { a.off(e) }), !1 !== e && (a.$el[0].swiper = null, a.$el.data("swiper", null), ee.deleteProps(a)), a.destroyed = !0), null }, h.extendDefaults = function (e) { ee.extend(x, e) }, e.extendedDefaults.get = function () { return x }, e.defaults.get = function () { return w }, e.Class.get = function () { return u }, e.$.get = function () { return L }, Object.defineProperties(h, e), h }(n), E = { name: "device", proto: { device: g }, static: { device: g } }, S = { name: "support", proto: { support: te }, static: { support: te } }, C = { name: "browser", proto: { browser: I }, static: { browser: I } }, M = { name: "resize", create: function () { var e = this; ee.extend(e, { resize: { resizeHandler: function () { e && !e.destroyed && e.initialized && (e.emit("beforeResize"), e.emit("resize")) }, orientationChangeHandler: function () { e && !e.destroyed && e.initialized && e.emit("orientationchange") } } }) }, on: { init: function () { J.addEventListener("resize", this.resize.resizeHandler), J.addEventListener("orientationchange", this.resize.orientationChangeHandler) }, destroy: function () { J.removeEventListener("resize", this.resize.resizeHandler), J.removeEventListener("orientationchange", this.resize.orientationChangeHandler) } } }, z = { func: J.MutationObserver || J.WebkitMutationObserver, attach: function (e, t) { void 0 === t && (t = {}); var a = this, i = new z.func(function (e) { if (1 !== e.length) { var t = function () { a.emit("observerUpdate", e[0]) }; J.requestAnimationFrame ? J.requestAnimationFrame(t) : J.setTimeout(t, 0) } else a.emit("observerUpdate", e[0]) }); i.observe(e, { attributes: void 0 === t.attributes || t.attributes, childList: void 0 === t.childList || t.childList, characterData: void 0 === t.characterData || t.characterData }), a.observer.observers.push(i) }, init: function () { var e = this; if (te.observer && e.params.observer) { if (e.params.observeParents) for (var t = e.$el.parents(), a = 0; a < t.length; a += 1)e.observer.attach(t[a]); e.observer.attach(e.$el[0], { childList: e.params.observeSlideChildren }), e.observer.attach(e.$wrapperEl[0], { attributes: !1 }) } }, destroy: function () { this.observer.observers.forEach(function (e) { e.disconnect() }), this.observer.observers = [] } }, P = { name: "observer", params: { observer: !1, observeParents: !1, observeSlideChildren: !1 }, create: function () { ee.extend(this, { observer: { init: z.init.bind(this), attach: z.attach.bind(this), destroy: z.destroy.bind(this), observers: [] } }) }, on: { init: function () { this.observer.init() }, destroy: function () { this.observer.destroy() } } }, k = { update: function (e) { var t = this, a = t.params, i = a.slidesPerView, s = a.slidesPerGroup, r = a.centeredSlides, n = t.params.virtual, o = n.addSlidesBefore, l = n.addSlidesAfter, d = t.virtual, p = d.from, c = d.to, u = d.slides, h = d.slidesGrid, v = d.renderSlide, f = d.offset; t.updateActiveIndex(); var m, g, b, w = t.activeIndex || 0; m = t.rtlTranslate ? "right" : t.isHorizontal() ? "left" : "top", r ? (g = Math.floor(i / 2) + s + o, b = Math.floor(i / 2) + s + l) : (g = i + (s - 1) + o, b = s + l); var y = Math.max((w || 0) - b, 0), x = Math.min((w || 0) + g, u.length - 1), T = (t.slidesGrid[y] || 0) - (t.slidesGrid[0] || 0); function E() { t.updateSlides(), t.updateProgress(), t.updateSlidesClasses(), t.lazy && t.params.lazy.enabled && t.lazy.load() } if (ee.extend(t.virtual, { from: y, to: x, offset: T, slidesGrid: t.slidesGrid }), p === y && c === x && !e) return t.slidesGrid !== h && T !== f && t.slides.css(m, T + "px"), void t.updateProgress(); if (t.params.virtual.renderExternal) return t.params.virtual.renderExternal.call(t, { offset: T, from: y, to: x, slides: function () { for (var e = [], t = y; t <= x; t += 1)e.push(u[t]); return e }() }), void E(); var S = [], C = []; if (e) t.$wrapperEl.find("." + t.params.slideClass).remove(); else for (var M = p; M <= c; M += 1)(M < y || x < M) && t.$wrapperEl.find("." + t.params.slideClass + '[data-swiper-slide-index="' + M + '"]').remove(); for (var z = 0; z < u.length; z += 1)y <= z && z <= x && (void 0 === c || e ? C.push(z) : (c < z && C.push(z), z < p && S.push(z))); C.forEach(function (e) { t.$wrapperEl.append(v(u[e], e)) }), S.sort(function (e, t) { return t - e }).forEach(function (e) { t.$wrapperEl.prepend(v(u[e], e)) }), t.$wrapperEl.children(".swiper-slide").css(m, T + "px"), E() }, renderSlide: function (e, t) { var a = this, i = a.params.virtual; if (i.cache && a.virtual.cache[t]) return a.virtual.cache[t]; var s = i.renderSlide ? L(i.renderSlide.call(a, e, t)) : L('<div class="' + a.params.slideClass + '" data-swiper-slide-index="' + t + '">' + e + "</div>"); return s.attr("data-swiper-slide-index") || s.attr("data-swiper-slide-index", t), i.cache && (a.virtual.cache[t] = s), s }, appendSlide: function (e) { if ("object" == typeof e && "length" in e) for (var t = 0; t < e.length; t += 1)e[t] && this.virtual.slides.push(e[t]); else this.virtual.slides.push(e); this.virtual.update(!0) }, prependSlide: function (e) { var t = this, a = t.activeIndex, i = a + 1, s = 1; if (Array.isArray(e)) { for (var r = 0; r < e.length; r += 1)e[r] && t.virtual.slides.unshift(e[r]); i = a + e.length, s = e.length } else t.virtual.slides.unshift(e); if (t.params.virtual.cache) { var n = t.virtual.cache, o = {}; Object.keys(n).forEach(function (e) { o[parseInt(e, 10) + s] = n[e] }), t.virtual.cache = o } t.virtual.update(!0), t.slideTo(i, 0) }, removeSlide: function (e) { var t = this; if (null != e) { var a = t.activeIndex; if (Array.isArray(e)) for (var i = e.length - 1; 0 <= i; i -= 1)t.virtual.slides.splice(e[i], 1), t.params.virtual.cache && delete t.virtual.cache[e[i]], e[i] < a && (a -= 1), a = Math.max(a, 0); else t.virtual.slides.splice(e, 1), t.params.virtual.cache && delete t.virtual.cache[e], e < a && (a -= 1), a = Math.max(a, 0); t.virtual.update(!0), t.slideTo(a, 0) } }, removeAllSlides: function () { var e = this; e.virtual.slides = [], e.params.virtual.cache && (e.virtual.cache = {}), e.virtual.update(!0), e.slideTo(0, 0) } }, $ = { name: "virtual", params: { virtual: { enabled: !1, slides: [], cache: !0, renderSlide: null, renderExternal: null, addSlidesBefore: 0, addSlidesAfter: 0 } }, create: function () { var e = this; ee.extend(e, { virtual: { update: k.update.bind(e), appendSlide: k.appendSlide.bind(e), prependSlide: k.prependSlide.bind(e), removeSlide: k.removeSlide.bind(e), removeAllSlides: k.removeAllSlides.bind(e), renderSlide: k.renderSlide.bind(e), slides: e.params.virtual.slides, cache: {} } }) }, on: { beforeInit: function () { var e = this; if (e.params.virtual.enabled) { e.classNames.push(e.params.containerModifierClass + "virtual"); var t = { watchSlidesProgress: !0 }; ee.extend(e.params, t), ee.extend(e.originalParams, t), e.params.initialSlide || e.virtual.update() } }, setTranslate: function () { this.params.virtual.enabled && this.virtual.update() } } }, D = { handle: function (e) { var t = this, a = t.rtlTranslate, i = e; i.originalEvent && (i = i.originalEvent); var s = i.keyCode || i.charCode; if (!t.allowSlideNext && (t.isHorizontal() && 39 === s || t.isVertical() && 40 === s)) return !1; if (!t.allowSlidePrev && (t.isHorizontal() && 37 === s || t.isVertical() && 38 === s)) return !1; if (!(i.shiftKey || i.altKey || i.ctrlKey || i.metaKey || f.activeElement && f.activeElement.nodeName && ("input" === f.activeElement.nodeName.toLowerCase() || "textarea" === f.activeElement.nodeName.toLowerCase()))) { if (t.params.keyboard.onlyInViewport && (37 === s || 39 === s || 38 === s || 40 === s)) { var r = !1; if (0 < t.$el.parents("." + t.params.slideClass).length && 0 === t.$el.parents("." + t.params.slideActiveClass).length) return; var n = J.innerWidth, o = J.innerHeight, l = t.$el.offset(); a && (l.left -= t.$el[0].scrollLeft); for (var d = [[l.left, l.top], [l.left + t.width, l.top], [l.left, l.top + t.height], [l.left + t.width, l.top + t.height]], p = 0; p < d.length; p += 1) { var c = d[p]; 0 <= c[0] && c[0] <= n && 0 <= c[1] && c[1] <= o && (r = !0) } if (!r) return } t.isHorizontal() ? (37 !== s && 39 !== s || (i.preventDefault ? i.preventDefault() : i.returnValue = !1), (39 === s && !a || 37 === s && a) && t.slideNext(), (37 === s && !a || 39 === s && a) && t.slidePrev()) : (38 !== s && 40 !== s || (i.preventDefault ? i.preventDefault() : i.returnValue = !1), 40 === s && t.slideNext(), 38 === s && t.slidePrev()), t.emit("keyPress", s) } }, enable: function () { this.keyboard.enabled || (L(f).on("keydown", this.keyboard.handle), this.keyboard.enabled = !0) }, disable: function () { this.keyboard.enabled && (L(f).off("keydown", this.keyboard.handle), this.keyboard.enabled = !1) } }, O = { name: "keyboard", params: { keyboard: { enabled: !1, onlyInViewport: !0 } }, create: function () { ee.extend(this, { keyboard: { enabled: !1, enable: D.enable.bind(this), disable: D.disable.bind(this), handle: D.handle.bind(this) } }) }, on: { init: function () { this.params.keyboard.enabled && this.keyboard.enable() }, destroy: function () { this.keyboard.enabled && this.keyboard.disable() } } }; var A = { lastScrollTime: ee.now(), event: -1 < J.navigator.userAgent.indexOf("firefox") ? "DOMMouseScroll" : function () { var e = "onwheel", t = e in f; if (!t) { var a = f.createElement("div"); a.setAttribute(e, "return;"), t = "function" == typeof a[e] } return !t && f.implementation && f.implementation.hasFeature && !0 !== f.implementation.hasFeature("", "") && (t = f.implementation.hasFeature("Events.wheel", "3.0")), t }() ? "wheel" : "mousewheel", normalize: function (e) { var t = 0, a = 0, i = 0, s = 0; return "detail" in e && (a = e.detail), "wheelDelta" in e && (a = -e.wheelDelta / 120), "wheelDeltaY" in e && (a = -e.wheelDeltaY / 120), "wheelDeltaX" in e && (t = -e.wheelDeltaX / 120), "axis" in e && e.axis === e.HORIZONTAL_AXIS && (t = a, a = 0), i = 10 * t, s = 10 * a, "deltaY" in e && (s = e.deltaY), "deltaX" in e && (i = e.deltaX), (i || s) && e.deltaMode && (1 === e.deltaMode ? (i *= 40, s *= 40) : (i *= 800, s *= 800)), i && !t && (t = i < 1 ? -1 : 1), s && !a && (a = s < 1 ? -1 : 1), { spinX: t, spinY: a, pixelX: i, pixelY: s } }, handleMouseEnter: function () { this.mouseEntered = !0 }, handleMouseLeave: function () { this.mouseEntered = !1 }, handle: function (e) { var t = e, a = this, i = a.params.mousewheel; if (!a.mouseEntered && !i.releaseOnEdges) return !0; t.originalEvent && (t = t.originalEvent); var s = 0, r = a.rtlTranslate ? -1 : 1, n = A.normalize(t); if (i.forceToAxis) if (a.isHorizontal()) { if (!(Math.abs(n.pixelX) > Math.abs(n.pixelY))) return !0; s = n.pixelX * r } else { if (!(Math.abs(n.pixelY) > Math.abs(n.pixelX))) return !0; s = n.pixelY } else s = Math.abs(n.pixelX) > Math.abs(n.pixelY) ? -n.pixelX * r : -n.pixelY; if (0 === s) return !0; if (i.invert && (s = -s), a.params.freeMode) { a.params.loop && a.loopFix(); var o = a.getTranslate() + s * i.sensitivity, l = a.isBeginning, d = a.isEnd; if (o >= a.minTranslate() && (o = a.minTranslate()), o <= a.maxTranslate() && (o = a.maxTranslate()), a.setTransition(0), a.setTranslate(o), a.updateProgress(), a.updateActiveIndex(), a.updateSlidesClasses(), (!l && a.isBeginning || !d && a.isEnd) && a.updateSlidesClasses(), a.params.freeModeSticky && (clearTimeout(a.mousewheel.timeout), a.mousewheel.timeout = ee.nextTick(function () { a.slideToClosest() }, 300)), a.emit("scroll", t), a.params.autoplay && a.params.autoplayDisableOnInteraction && a.autoplay.stop(), o === a.minTranslate() || o === a.maxTranslate()) return !0 } else { if (60 < ee.now() - a.mousewheel.lastScrollTime) if (s < 0) if (a.isEnd && !a.params.loop || a.animating) { if (i.releaseOnEdges) return !0 } else a.slideNext(), a.emit("scroll", t); else if (a.isBeginning && !a.params.loop || a.animating) { if (i.releaseOnEdges) return !0 } else a.slidePrev(), a.emit("scroll", t); a.mousewheel.lastScrollTime = (new J.Date).getTime() } return t.preventDefault ? t.preventDefault() : t.returnValue = !1, !1 }, enable: function () { var e = this; if (!A.event) return !1; if (e.mousewheel.enabled) return !1; var t = e.$el; return "container" !== e.params.mousewheel.eventsTarged && (t = L(e.params.mousewheel.eventsTarged)), t.on("mouseenter", e.mousewheel.handleMouseEnter), t.on("mouseleave", e.mousewheel.handleMouseLeave), t.on(A.event, e.mousewheel.handle), e.mousewheel.enabled = !0 }, disable: function () { var e = this; if (!A.event) return !1; if (!e.mousewheel.enabled) return !1; var t = e.$el; return "container" !== e.params.mousewheel.eventsTarged && (t = L(e.params.mousewheel.eventsTarged)), t.off(A.event, e.mousewheel.handle), !(e.mousewheel.enabled = !1) } }, H = { update: function () { var e = this, t = e.params.navigation; if (!e.params.loop) { var a = e.navigation, i = a.$nextEl, s = a.$prevEl; s && 0 < s.length && (e.isBeginning ? s.addClass(t.disabledClass) : s.removeClass(t.disabledClass), s[e.params.watchOverflow && e.isLocked ? "addClass" : "removeClass"](t.lockClass)), i && 0 < i.length && (e.isEnd ? i.addClass(t.disabledClass) : i.removeClass(t.disabledClass), i[e.params.watchOverflow && e.isLocked ? "addClass" : "removeClass"](t.lockClass)) } }, onPrevClick: function (e) { e.preventDefault(), this.isBeginning && !this.params.loop || this.slidePrev() }, onNextClick: function (e) { e.preventDefault(), this.isEnd && !this.params.loop || this.slideNext() }, init: function () { var e, t, a = this, i = a.params.navigation; (i.nextEl || i.prevEl) && (i.nextEl && (e = L(i.nextEl), a.params.uniqueNavElements && "string" == typeof i.nextEl && 1 < e.length && 1 === a.$el.find(i.nextEl).length && (e = a.$el.find(i.nextEl))), i.prevEl && (t = L(i.prevEl), a.params.uniqueNavElements && "string" == typeof i.prevEl && 1 < t.length && 1 === a.$el.find(i.prevEl).length && (t = a.$el.find(i.prevEl))), e && 0 < e.length && e.on("click", a.navigation.onNextClick), t && 0 < t.length && t.on("click", a.navigation.onPrevClick), ee.extend(a.navigation, { $nextEl: e, nextEl: e && e[0], $prevEl: t, prevEl: t && t[0] })) }, destroy: function () { var e = this, t = e.navigation, a = t.$nextEl, i = t.$prevEl; a && a.length && (a.off("click", e.navigation.onNextClick), a.removeClass(e.params.navigation.disabledClass)), i && i.length && (i.off("click", e.navigation.onPrevClick), i.removeClass(e.params.navigation.disabledClass)) } }, N = { update: function () { var e = this, t = e.rtl, s = e.params.pagination; if (s.el && e.pagination.el && e.pagination.$el && 0 !== e.pagination.$el.length) { var r, a = e.virtual && e.params.virtual.enabled ? e.virtual.slides.length : e.slides.length, i = e.pagination.$el, n = e.params.loop ? Math.ceil((a - 2 * e.loopedSlides) / e.params.slidesPerGroup) : e.snapGrid.length; if (e.params.loop ? ((r = Math.ceil((e.activeIndex - e.loopedSlides) / e.params.slidesPerGroup)) > a - 1 - 2 * e.loopedSlides && (r -= a - 2 * e.loopedSlides), n - 1 < r && (r -= n), r < 0 && "bullets" !== e.params.paginationType && (r = n + r)) : r = void 0 !== e.snapIndex ? e.snapIndex : e.activeIndex || 0, "bullets" === s.type && e.pagination.bullets && 0 < e.pagination.bullets.length) { var o, l, d, p = e.pagination.bullets; if (s.dynamicBullets && (e.pagination.bulletSize = p.eq(0)[e.isHorizontal() ? "outerWidth" : "outerHeight"](!0), i.css(e.isHorizontal() ? "width" : "height", e.pagination.bulletSize * (s.dynamicMainBullets + 4) + "px"), 1 < s.dynamicMainBullets && void 0 !== e.previousIndex && (e.pagination.dynamicBulletIndex += r - e.previousIndex, e.pagination.dynamicBulletIndex > s.dynamicMainBullets - 1 ? e.pagination.dynamicBulletIndex = s.dynamicMainBullets - 1 : e.pagination.dynamicBulletIndex < 0 && (e.pagination.dynamicBulletIndex = 0)), o = r - e.pagination.dynamicBulletIndex, d = ((l = o + (Math.min(p.length, s.dynamicMainBullets) - 1)) + o) / 2), p.removeClass(s.bulletActiveClass + " " + s.bulletActiveClass + "-next " + s.bulletActiveClass + "-next-next " + s.bulletActiveClass + "-prev " + s.bulletActiveClass + "-prev-prev " + s.bulletActiveClass + "-main"), 1 < i.length) p.each(function (e, t) { var a = L(t), i = a.index(); i === r && a.addClass(s.bulletActiveClass), s.dynamicBullets && (o <= i && i <= l && a.addClass(s.bulletActiveClass + "-main"), i === o && a.prev().addClass(s.bulletActiveClass + "-prev").prev().addClass(s.bulletActiveClass + "-prev-prev"), i === l && a.next().addClass(s.bulletActiveClass + "-next").next().addClass(s.bulletActiveClass + "-next-next")) }); else if (p.eq(r).addClass(s.bulletActiveClass), s.dynamicBullets) { for (var c = p.eq(o), u = p.eq(l), h = o; h <= l; h += 1)p.eq(h).addClass(s.bulletActiveClass + "-main"); c.prev().addClass(s.bulletActiveClass + "-prev").prev().addClass(s.bulletActiveClass + "-prev-prev"), u.next().addClass(s.bulletActiveClass + "-next").next().addClass(s.bulletActiveClass + "-next-next") } if (s.dynamicBullets) { var v = Math.min(p.length, s.dynamicMainBullets + 4), f = (e.pagination.bulletSize * v - e.pagination.bulletSize) / 2 - d * e.pagination.bulletSize, m = t ? "right" : "left"; p.css(e.isHorizontal() ? m : "top", f + "px") } } if ("fraction" === s.type && (i.find("." + s.currentClass).text(s.formatFractionCurrent(r + 1)), i.find("." + s.totalClass).text(s.formatFractionTotal(n))), "progressbar" === s.type) { var g; g = s.progressbarOpposite ? e.isHorizontal() ? "vertical" : "horizontal" : e.isHorizontal() ? "horizontal" : "vertical"; var b = (r + 1) / n, w = 1, y = 1; "horizontal" === g ? w = b : y = b, i.find("." + s.progressbarFillClass).transform("translate3d(0,0,0) scaleX(" + w + ") scaleY(" + y + ")").transition(e.params.speed) } "custom" === s.type && s.renderCustom ? (i.html(s.renderCustom(e, r + 1, n)), e.emit("paginationRender", e, i[0])) : e.emit("paginationUpdate", e, i[0]), i[e.params.watchOverflow && e.isLocked ? "addClass" : "removeClass"](s.lockClass) } }, render: function () { var e = this, t = e.params.pagination; if (t.el && e.pagination.el && e.pagination.$el && 0 !== e.pagination.$el.length) { var a = e.virtual && e.params.virtual.enabled ? e.virtual.slides.length : e.slides.length, i = e.pagination.$el, s = ""; if ("bullets" === t.type) { for (var r = e.params.loop ? Math.ceil((a - 2 * e.loopedSlides) / e.params.slidesPerGroup) : e.snapGrid.length, n = 0; n < r; n += 1)t.renderBullet ? s += t.renderBullet.call(e, n, t.bulletClass) : s += "<" + t.bulletElement + ' class="' + t.bulletClass + '"></' + t.bulletElement + ">"; i.html(s), e.pagination.bullets = i.find("." + t.bulletClass) } "fraction" === t.type && (s = t.renderFraction ? t.renderFraction.call(e, t.currentClass, t.totalClass) : '<span class="' + t.currentClass + '"></span> / <span class="' + t.totalClass + '"></span>', i.html(s)), "progressbar" === t.type && (s = t.renderProgressbar ? t.renderProgressbar.call(e, t.progressbarFillClass) : '<span class="' + t.progressbarFillClass + '"></span>', i.html(s)), "custom" !== t.type && e.emit("paginationRender", e.pagination.$el[0]) } }, init: function () { var a = this, e = a.params.pagination; if (e.el) { var t = L(e.el); 0 !== t.length && (a.params.uniqueNavElements && "string" == typeof e.el && 1 < t.length && 1 === a.$el.find(e.el).length && (t = a.$el.find(e.el)), "bullets" === e.type && e.clickable && t.addClass(e.clickableClass), t.addClass(e.modifierClass + e.type), "bullets" === e.type && e.dynamicBullets && (t.addClass("" + e.modifierClass + e.type + "-dynamic"), a.pagination.dynamicBulletIndex = 0, e.dynamicMainBullets < 1 && (e.dynamicMainBullets = 1)), "progressbar" === e.type && e.progressbarOpposite && t.addClass(e.progressbarOppositeClass), e.clickable && t.on("click", "." + e.bulletClass, function (e) { e.preventDefault(); var t = L(this).index() * a.params.slidesPerGroup; a.params.loop && (t += a.loopedSlides), a.slideTo(t) }), ee.extend(a.pagination, { $el: t, el: t[0] })) } }, destroy: function () { var e = this, t = e.params.pagination; if (t.el && e.pagination.el && e.pagination.$el && 0 !== e.pagination.$el.length) { var a = e.pagination.$el; a.removeClass(t.hiddenClass), a.removeClass(t.modifierClass + t.type), e.pagination.bullets && e.pagination.bullets.removeClass(t.bulletActiveClass), t.clickable && a.off("click", "." + t.bulletClass) } } }, G = { setTranslate: function () { var e = this; if (e.params.scrollbar.el && e.scrollbar.el) { var t = e.scrollbar, a = e.rtlTranslate, i = e.progress, s = t.dragSize, r = t.trackSize, n = t.$dragEl, o = t.$el, l = e.params.scrollbar, d = s, p = (r - s) * i; a ? 0 < (p = -p) ? (d = s - p, p = 0) : r < -p + s && (d = r + p) : p < 0 ? (d = s + p, p = 0) : r < p + s && (d = r - p), e.isHorizontal() ? (te.transforms3d ? n.transform("translate3d(" + p + "px, 0, 0)") : n.transform("translateX(" + p + "px)"), n[0].style.width = d + "px") : (te.transforms3d ? n.transform("translate3d(0px, " + p + "px, 0)") : n.transform("translateY(" + p + "px)"), n[0].style.height = d + "px"), l.hide && (clearTimeout(e.scrollbar.timeout), o[0].style.opacity = 1, e.scrollbar.timeout = setTimeout(function () { o[0].style.opacity = 0, o.transition(400) }, 1e3)) } }, setTransition: function (e) { this.params.scrollbar.el && this.scrollbar.el && this.scrollbar.$dragEl.transition(e) }, updateSize: function () { var e = this; if (e.params.scrollbar.el && e.scrollbar.el) { var t = e.scrollbar, a = t.$dragEl, i = t.$el; a[0].style.width = "", a[0].style.height = ""; var s, r = e.isHorizontal() ? i[0].offsetWidth : i[0].offsetHeight, n = e.size / e.virtualSize, o = n * (r / e.size); s = "auto" === e.params.scrollbar.dragSize ? r * n : parseInt(e.params.scrollbar.dragSize, 10), e.isHorizontal() ? a[0].style.width = s + "px" : a[0].style.height = s + "px", i[0].style.display = 1 <= n ? "none" : "", e.params.scrollbar.hide && (i[0].style.opacity = 0), ee.extend(t, { trackSize: r, divider: n, moveDivider: o, dragSize: s }), t.$el[e.params.watchOverflow && e.isLocked ? "addClass" : "removeClass"](e.params.scrollbar.lockClass) } }, setDragPosition: function (e) { var t, a = this, i = a.scrollbar, s = a.rtlTranslate, r = i.$el, n = i.dragSize, o = i.trackSize; t = ((a.isHorizontal() ? "touchstart" === e.type || "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX || e.clientX : "touchstart" === e.type || "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY || e.clientY) - r.offset()[a.isHorizontal() ? "left" : "top"] - n / 2) / (o - n), t = Math.max(Math.min(t, 1), 0), s && (t = 1 - t); var l = a.minTranslate() + (a.maxTranslate() - a.minTranslate()) * t; a.updateProgress(l), a.setTranslate(l), a.updateActiveIndex(), a.updateSlidesClasses() }, onDragStart: function (e) { var t = this, a = t.params.scrollbar, i = t.scrollbar, s = t.$wrapperEl, r = i.$el, n = i.$dragEl; t.scrollbar.isTouched = !0, e.preventDefault(), e.stopPropagation(), s.transition(100), n.transition(100), i.setDragPosition(e), clearTimeout(t.scrollbar.dragTimeout), r.transition(0), a.hide && r.css("opacity", 1), t.emit("scrollbarDragStart", e) }, onDragMove: function (e) { var t = this.scrollbar, a = this.$wrapperEl, i = t.$el, s = t.$dragEl; this.scrollbar.isTouched && (e.preventDefault ? e.preventDefault() : e.returnValue = !1, t.setDragPosition(e), a.transition(0), i.transition(0), s.transition(0), this.emit("scrollbarDragMove", e)) }, onDragEnd: function (e) { var t = this, a = t.params.scrollbar, i = t.scrollbar.$el; t.scrollbar.isTouched && (t.scrollbar.isTouched = !1, a.hide && (clearTimeout(t.scrollbar.dragTimeout), t.scrollbar.dragTimeout = ee.nextTick(function () { i.css("opacity", 0), i.transition(400) }, 1e3)), t.emit("scrollbarDragEnd", e), a.snapOnRelease && t.slideToClosest()) }, enableDraggable: function () { var e = this; if (e.params.scrollbar.el) { var t = e.scrollbar, a = e.touchEventsTouch, i = e.touchEventsDesktop, s = e.params, r = t.$el[0], n = !(!te.passiveListener || !s.passiveListeners) && { passive: !1, capture: !1 }, o = !(!te.passiveListener || !s.passiveListeners) && { passive: !0, capture: !1 }; te.touch ? (r.addEventListener(a.start, e.scrollbar.onDragStart, n), r.addEventListener(a.move, e.scrollbar.onDragMove, n), r.addEventListener(a.end, e.scrollbar.onDragEnd, o)) : (r.addEventListener(i.start, e.scrollbar.onDragStart, n), f.addEventListener(i.move, e.scrollbar.onDragMove, n), f.addEventListener(i.end, e.scrollbar.onDragEnd, o)) } }, disableDraggable: function () { var e = this; if (e.params.scrollbar.el) { var t = e.scrollbar, a = e.touchEventsTouch, i = e.touchEventsDesktop, s = e.params, r = t.$el[0], n = !(!te.passiveListener || !s.passiveListeners) && { passive: !1, capture: !1 }, o = !(!te.passiveListener || !s.passiveListeners) && { passive: !0, capture: !1 }; te.touch ? (r.removeEventListener(a.start, e.scrollbar.onDragStart, n), r.removeEventListener(a.move, e.scrollbar.onDragMove, n), r.removeEventListener(a.end, e.scrollbar.onDragEnd, o)) : (r.removeEventListener(i.start, e.scrollbar.onDragStart, n), f.removeEventListener(i.move, e.scrollbar.onDragMove, n), f.removeEventListener(i.end, e.scrollbar.onDragEnd, o)) } }, init: function () { var e = this; if (e.params.scrollbar.el) { var t = e.scrollbar, a = e.$el, i = e.params.scrollbar, s = L(i.el); e.params.uniqueNavElements && "string" == typeof i.el && 1 < s.length && 1 === a.find(i.el).length && (s = a.find(i.el)); var r = s.find("." + e.params.scrollbar.dragClass); 0 === r.length && (r = L('<div class="' + e.params.scrollbar.dragClass + '"></div>'), s.append(r)), ee.extend(t, { $el: s, el: s[0], $dragEl: r, dragEl: r[0] }), i.draggable && t.enableDraggable() } }, destroy: function () { this.scrollbar.disableDraggable() } }, B = { setTransform: function (e, t) { var a = this.rtl, i = L(e), s = a ? -1 : 1, r = i.attr("data-swiper-parallax") || "0", n = i.attr("data-swiper-parallax-x"), o = i.attr("data-swiper-parallax-y"), l = i.attr("data-swiper-parallax-scale"), d = i.attr("data-swiper-parallax-opacity"); if (n || o ? (n = n || "0", o = o || "0") : this.isHorizontal() ? (n = r, o = "0") : (o = r, n = "0"), n = 0 <= n.indexOf("%") ? parseInt(n, 10) * t * s + "%" : n * t * s + "px", o = 0 <= o.indexOf("%") ? parseInt(o, 10) * t + "%" : o * t + "px", null != d) { var p = d - (d - 1) * (1 - Math.abs(t)); i[0].style.opacity = p } if (null == l) i.transform("translate3d(" + n + ", " + o + ", 0px)"); else { var c = l - (l - 1) * (1 - Math.abs(t)); i.transform("translate3d(" + n + ", " + o + ", 0px) scale(" + c + ")") } }, setTranslate: function () { var i = this, e = i.$el, t = i.slides, s = i.progress, r = i.snapGrid; e.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function (e, t) { i.parallax.setTransform(t, s) }), t.each(function (e, t) { var a = t.progress; 1 < i.params.slidesPerGroup && "auto" !== i.params.slidesPerView && (a += Math.ceil(e / 2) - s * (r.length - 1)), a = Math.min(Math.max(a, -1), 1), L(t).find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function (e, t) { i.parallax.setTransform(t, a) }) }) }, setTransition: function (s) { void 0 === s && (s = this.params.speed); this.$el.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function (e, t) { var a = L(t), i = parseInt(a.attr("data-swiper-parallax-duration"), 10) || s; 0 === s && (i = 0), a.transition(i) }) } }, X = { getDistanceBetweenTouches: function (e) { if (e.targetTouches.length < 2) return 1; var t = e.targetTouches[0].pageX, a = e.targetTouches[0].pageY, i = e.targetTouches[1].pageX, s = e.targetTouches[1].pageY; return Math.sqrt(Math.pow(i - t, 2) + Math.pow(s - a, 2)) }, onGestureStart: function (e) { var t = this, a = t.params.zoom, i = t.zoom, s = i.gesture; if (i.fakeGestureTouched = !1, i.fakeGestureMoved = !1, !te.gestures) { if ("touchstart" !== e.type || "touchstart" === e.type && e.targetTouches.length < 2) return; i.fakeGestureTouched = !0, s.scaleStart = X.getDistanceBetweenTouches(e) } s.$slideEl && s.$slideEl.length || (s.$slideEl = L(e.target).closest(".swiper-slide"), 0 === s.$slideEl.length && (s.$slideEl = t.slides.eq(t.activeIndex)), s.$imageEl = s.$slideEl.find("img, svg, canvas"), s.$imageWrapEl = s.$imageEl.parent("." + a.containerClass), s.maxRatio = s.$imageWrapEl.attr("data-swiper-zoom") || a.maxRatio, 0 !== s.$imageWrapEl.length) ? (s.$imageEl.transition(0), t.zoom.isScaling = !0) : s.$imageEl = void 0 }, onGestureChange: function (e) { var t = this.params.zoom, a = this.zoom, i = a.gesture; if (!te.gestures) { if ("touchmove" !== e.type || "touchmove" === e.type && e.targetTouches.length < 2) return; a.fakeGestureMoved = !0, i.scaleMove = X.getDistanceBetweenTouches(e) } i.$imageEl && 0 !== i.$imageEl.length && (a.scale = te.gestures ? e.scale * a.currentScale : i.scaleMove / i.scaleStart * a.currentScale, a.scale > i.maxRatio && (a.scale = i.maxRatio - 1 + Math.pow(a.scale - i.maxRatio + 1, .5)), a.scale < t.minRatio && (a.scale = t.minRatio + 1 - Math.pow(t.minRatio - a.scale + 1, .5)), i.$imageEl.transform("translate3d(0,0,0) scale(" + a.scale + ")")) }, onGestureEnd: function (e) { var t = this.params.zoom, a = this.zoom, i = a.gesture; if (!te.gestures) { if (!a.fakeGestureTouched || !a.fakeGestureMoved) return; if ("touchend" !== e.type || "touchend" === e.type && e.changedTouches.length < 2 && !g.android) return; a.fakeGestureTouched = !1, a.fakeGestureMoved = !1 } i.$imageEl && 0 !== i.$imageEl.length && (a.scale = Math.max(Math.min(a.scale, i.maxRatio), t.minRatio), i.$imageEl.transition(this.params.speed).transform("translate3d(0,0,0) scale(" + a.scale + ")"), a.currentScale = a.scale, a.isScaling = !1, 1 === a.scale && (i.$slideEl = void 0)) }, onTouchStart: function (e) { var t = this.zoom, a = t.gesture, i = t.image; a.$imageEl && 0 !== a.$imageEl.length && (i.isTouched || (g.android && e.preventDefault(), i.isTouched = !0, i.touchesStart.x = "touchstart" === e.type ? e.targetTouches[0].pageX : e.pageX, i.touchesStart.y = "touchstart" === e.type ? e.targetTouches[0].pageY : e.pageY)) }, onTouchMove: function (e) { var t = this, a = t.zoom, i = a.gesture, s = a.image, r = a.velocity; if (i.$imageEl && 0 !== i.$imageEl.length && (t.allowClick = !1, s.isTouched && i.$slideEl)) { s.isMoved || (s.width = i.$imageEl[0].offsetWidth, s.height = i.$imageEl[0].offsetHeight, s.startX = ee.getTranslate(i.$imageWrapEl[0], "x") || 0, s.startY = ee.getTranslate(i.$imageWrapEl[0], "y") || 0, i.slideWidth = i.$slideEl[0].offsetWidth, i.slideHeight = i.$slideEl[0].offsetHeight, i.$imageWrapEl.transition(0), t.rtl && (s.startX = -s.startX, s.startY = -s.startY)); var n = s.width * a.scale, o = s.height * a.scale; if (!(n < i.slideWidth && o < i.slideHeight)) { if (s.minX = Math.min(i.slideWidth / 2 - n / 2, 0), s.maxX = -s.minX, s.minY = Math.min(i.slideHeight / 2 - o / 2, 0), s.maxY = -s.minY, s.touchesCurrent.x = "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX, s.touchesCurrent.y = "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY, !s.isMoved && !a.isScaling) { if (t.isHorizontal() && (Math.floor(s.minX) === Math.floor(s.startX) && s.touchesCurrent.x < s.touchesStart.x || Math.floor(s.maxX) === Math.floor(s.startX) && s.touchesCurrent.x > s.touchesStart.x)) return void (s.isTouched = !1); if (!t.isHorizontal() && (Math.floor(s.minY) === Math.floor(s.startY) && s.touchesCurrent.y < s.touchesStart.y || Math.floor(s.maxY) === Math.floor(s.startY) && s.touchesCurrent.y > s.touchesStart.y)) return void (s.isTouched = !1) } e.preventDefault(), e.stopPropagation(), s.isMoved = !0, s.currentX = s.touchesCurrent.x - s.touchesStart.x + s.startX, s.currentY = s.touchesCurrent.y - s.touchesStart.y + s.startY, s.currentX < s.minX && (s.currentX = s.minX + 1 - Math.pow(s.minX - s.currentX + 1, .8)), s.currentX > s.maxX && (s.currentX = s.maxX - 1 + Math.pow(s.currentX - s.maxX + 1, .8)), s.currentY < s.minY && (s.currentY = s.minY + 1 - Math.pow(s.minY - s.currentY + 1, .8)), s.currentY > s.maxY && (s.currentY = s.maxY - 1 + Math.pow(s.currentY - s.maxY + 1, .8)), r.prevPositionX || (r.prevPositionX = s.touchesCurrent.x), r.prevPositionY || (r.prevPositionY = s.touchesCurrent.y), r.prevTime || (r.prevTime = Date.now()), r.x = (s.touchesCurrent.x - r.prevPositionX) / (Date.now() - r.prevTime) / 2, r.y = (s.touchesCurrent.y - r.prevPositionY) / (Date.now() - r.prevTime) / 2, Math.abs(s.touchesCurrent.x - r.prevPositionX) < 2 && (r.x = 0), Math.abs(s.touchesCurrent.y - r.prevPositionY) < 2 && (r.y = 0), r.prevPositionX = s.touchesCurrent.x, r.prevPositionY = s.touchesCurrent.y, r.prevTime = Date.now(), i.$imageWrapEl.transform("translate3d(" + s.currentX + "px, " + s.currentY + "px,0)") } } }, onTouchEnd: function () { var e = this.zoom, t = e.gesture, a = e.image, i = e.velocity; if (t.$imageEl && 0 !== t.$imageEl.length) { if (!a.isTouched || !a.isMoved) return a.isTouched = !1, void (a.isMoved = !1); a.isTouched = !1, a.isMoved = !1; var s = 300, r = 300, n = i.x * s, o = a.currentX + n, l = i.y * r, d = a.currentY + l; 0 !== i.x && (s = Math.abs((o - a.currentX) / i.x)), 0 !== i.y && (r = Math.abs((d - a.currentY) / i.y)); var p = Math.max(s, r); a.currentX = o, a.currentY = d; var c = a.width * e.scale, u = a.height * e.scale; a.minX = Math.min(t.slideWidth / 2 - c / 2, 0), a.maxX = -a.minX, a.minY = Math.min(t.slideHeight / 2 - u / 2, 0), a.maxY = -a.minY, a.currentX = Math.max(Math.min(a.currentX, a.maxX), a.minX), a.currentY = Math.max(Math.min(a.currentY, a.maxY), a.minY), t.$imageWrapEl.transition(p).transform("translate3d(" + a.currentX + "px, " + a.currentY + "px,0)") } }, onTransitionEnd: function () { var e = this.zoom, t = e.gesture; t.$slideEl && this.previousIndex !== this.activeIndex && (t.$imageEl.transform("translate3d(0,0,0) scale(1)"), t.$imageWrapEl.transform("translate3d(0,0,0)"), e.scale = 1, e.currentScale = 1, t.$slideEl = void 0, t.$imageEl = void 0, t.$imageWrapEl = void 0) }, toggle: function (e) { var t = this.zoom; t.scale && 1 !== t.scale ? t.out() : t.in(e) }, in: function (e) { var t, a, i, s, r, n, o, l, d, p, c, u, h, v, f, m, g = this, b = g.zoom, w = g.params.zoom, y = b.gesture, x = b.image; (y.$slideEl || (y.$slideEl = g.clickedSlide ? L(g.clickedSlide) : g.slides.eq(g.activeIndex), y.$imageEl = y.$slideEl.find("img, svg, canvas"), y.$imageWrapEl = y.$imageEl.parent("." + w.containerClass)), y.$imageEl && 0 !== y.$imageEl.length) && (y.$slideEl.addClass("" + w.zoomedSlideClass), void 0 === x.touchesStart.x && e ? (t = "touchend" === e.type ? e.changedTouches[0].pageX : e.pageX, a = "touchend" === e.type ? e.changedTouches[0].pageY : e.pageY) : (t = x.touchesStart.x, a = x.touchesStart.y), b.scale = y.$imageWrapEl.attr("data-swiper-zoom") || w.maxRatio, b.currentScale = y.$imageWrapEl.attr("data-swiper-zoom") || w.maxRatio, e ? (f = y.$slideEl[0].offsetWidth, m = y.$slideEl[0].offsetHeight, i = y.$slideEl.offset().left + f / 2 - t, s = y.$slideEl.offset().top + m / 2 - a, o = y.$imageEl[0].offsetWidth, l = y.$imageEl[0].offsetHeight, d = o * b.scale, p = l * b.scale, h = -(c = Math.min(f / 2 - d / 2, 0)), v = -(u = Math.min(m / 2 - p / 2, 0)), (r = i * b.scale) < c && (r = c), h < r && (r = h), (n = s * b.scale) < u && (n = u), v < n && (n = v)) : n = r = 0, y.$imageWrapEl.transition(300).transform("translate3d(" + r + "px, " + n + "px,0)"), y.$imageEl.transition(300).transform("translate3d(0,0,0) scale(" + b.scale + ")")) }, out: function () { var e = this, t = e.zoom, a = e.params.zoom, i = t.gesture; i.$slideEl || (i.$slideEl = e.clickedSlide ? L(e.clickedSlide) : e.slides.eq(e.activeIndex), i.$imageEl = i.$slideEl.find("img, svg, canvas"), i.$imageWrapEl = i.$imageEl.parent("." + a.containerClass)), i.$imageEl && 0 !== i.$imageEl.length && (t.scale = 1, t.currentScale = 1, i.$imageWrapEl.transition(300).transform("translate3d(0,0,0)"), i.$imageEl.transition(300).transform("translate3d(0,0,0) scale(1)"), i.$slideEl.removeClass("" + a.zoomedSlideClass), i.$slideEl = void 0) }, enable: function () { var e = this, t = e.zoom; if (!t.enabled) { t.enabled = !0; var a = !("touchstart" !== e.touchEvents.start || !te.passiveListener || !e.params.passiveListeners) && { passive: !0, capture: !1 }; te.gestures ? (e.$wrapperEl.on("gesturestart", ".swiper-slide", t.onGestureStart, a), e.$wrapperEl.on("gesturechange", ".swiper-slide", t.onGestureChange, a), e.$wrapperEl.on("gestureend", ".swiper-slide", t.onGestureEnd, a)) : "touchstart" === e.touchEvents.start && (e.$wrapperEl.on(e.touchEvents.start, ".swiper-slide", t.onGestureStart, a), e.$wrapperEl.on(e.touchEvents.move, ".swiper-slide", t.onGestureChange, a), e.$wrapperEl.on(e.touchEvents.end, ".swiper-slide", t.onGestureEnd, a)), e.$wrapperEl.on(e.touchEvents.move, "." + e.params.zoom.containerClass, t.onTouchMove) } }, disable: function () { var e = this, t = e.zoom; if (t.enabled) { e.zoom.enabled = !1; var a = !("touchstart" !== e.touchEvents.start || !te.passiveListener || !e.params.passiveListeners) && { passive: !0, capture: !1 }; te.gestures ? (e.$wrapperEl.off("gesturestart", ".swiper-slide", t.onGestureStart, a), e.$wrapperEl.off("gesturechange", ".swiper-slide", t.onGestureChange, a), e.$wrapperEl.off("gestureend", ".swiper-slide", t.onGestureEnd, a)) : "touchstart" === e.touchEvents.start && (e.$wrapperEl.off(e.touchEvents.start, ".swiper-slide", t.onGestureStart, a), e.$wrapperEl.off(e.touchEvents.move, ".swiper-slide", t.onGestureChange, a), e.$wrapperEl.off(e.touchEvents.end, ".swiper-slide", t.onGestureEnd, a)), e.$wrapperEl.off(e.touchEvents.move, "." + e.params.zoom.containerClass, t.onTouchMove) } } }, Y = { loadInSlide: function (e, l) { void 0 === l && (l = !0); var d = this, p = d.params.lazy; if (void 0 !== e && 0 !== d.slides.length) { var c = d.virtual && d.params.virtual.enabled ? d.$wrapperEl.children("." + d.params.slideClass + '[data-swiper-slide-index="' + e + '"]') : d.slides.eq(e), t = c.find("." + p.elementClass + ":not(." + p.loadedClass + "):not(." + p.loadingClass + ")"); !c.hasClass(p.elementClass) || c.hasClass(p.loadedClass) || c.hasClass(p.loadingClass) || (t = t.add(c[0])), 0 !== t.length && t.each(function (e, t) { var i = L(t); i.addClass(p.loadingClass); var s = i.attr("data-background"), r = i.attr("data-src"), n = i.attr("data-srcset"), o = i.attr("data-sizes"); d.loadImage(i[0], r || s, n, o, !1, function () { if (null != d && d && (!d || d.params) && !d.destroyed) { if (s ? (i.css("background-image", 'url("' + s + '")'), i.removeAttr("data-background")) : (n && (i.attr("srcset", n), i.removeAttr("data-srcset")), o && (i.attr("sizes", o), i.removeAttr("data-sizes")), r && (i.attr("src", r), i.removeAttr("data-src"))), i.addClass(p.loadedClass).removeClass(p.loadingClass), c.find("." + p.preloaderClass).remove(), d.params.loop && l) { var e = c.attr("data-swiper-slide-index"); if (c.hasClass(d.params.slideDuplicateClass)) { var t = d.$wrapperEl.children('[data-swiper-slide-index="' + e + '"]:not(.' + d.params.slideDuplicateClass + ")"); d.lazy.loadInSlide(t.index(), !1) } else { var a = d.$wrapperEl.children("." + d.params.slideDuplicateClass + '[data-swiper-slide-index="' + e + '"]'); d.lazy.loadInSlide(a.index(), !1) } } d.emit("lazyImageReady", c[0], i[0]) } }), d.emit("lazyImageLoad", c[0], i[0]) }) } }, load: function () { var i = this, t = i.$wrapperEl, a = i.params, s = i.slides, e = i.activeIndex, r = i.virtual && a.virtual.enabled, n = a.lazy, o = a.slidesPerView; function l(e) { if (r) { if (t.children("." + a.slideClass + '[data-swiper-slide-index="' + e + '"]').length) return !0 } else if (s[e]) return !0; return !1 } function d(e) { return r ? L(e).attr("data-swiper-slide-index") : L(e).index() } if ("auto" === o && (o = 0), i.lazy.initialImageLoaded || (i.lazy.initialImageLoaded = !0), i.params.watchSlidesVisibility) t.children("." + a.slideVisibleClass).each(function (e, t) { var a = r ? L(t).attr("data-swiper-slide-index") : L(t).index(); i.lazy.loadInSlide(a) }); else if (1 < o) for (var p = e; p < e + o; p += 1)l(p) && i.lazy.loadInSlide(p); else i.lazy.loadInSlide(e); if (n.loadPrevNext) if (1 < o || n.loadPrevNextAmount && 1 < n.loadPrevNextAmount) { for (var c = n.loadPrevNextAmount, u = o, h = Math.min(e + u + Math.max(c, u), s.length), v = Math.max(e - Math.max(u, c), 0), f = e + o; f < h; f += 1)l(f) && i.lazy.loadInSlide(f); for (var m = v; m < e; m += 1)l(m) && i.lazy.loadInSlide(m) } else { var g = t.children("." + a.slideNextClass); 0 < g.length && i.lazy.loadInSlide(d(g)); var b = t.children("." + a.slidePrevClass); 0 < b.length && i.lazy.loadInSlide(d(b)) } } }, V = { LinearSpline: function (e, t) { var a, i, s, r, n, o = function (e, t) { for (i = -1, a = e.length; 1 < a - i;)e[s = a + i >> 1] <= t ? i = s : a = s; return a }; return this.x = e, this.y = t, this.lastIndex = e.length - 1, this.interpolate = function (e) { return e ? (n = o(this.x, e), r = n - 1, (e - this.x[r]) * (this.y[n] - this.y[r]) / (this.x[n] - this.x[r]) + this.y[r]) : 0 }, this }, getInterpolateFunction: function (e) { var t = this; t.controller.spline || (t.controller.spline = t.params.loop ? new V.LinearSpline(t.slidesGrid, e.slidesGrid) : new V.LinearSpline(t.snapGrid, e.snapGrid)) }, setTranslate: function (e, t) { var a, i, s = this, r = s.controller.control; function n(e) { var t = s.rtlTranslate ? -s.translate : s.translate; "slide" === s.params.controller.by && (s.controller.getInterpolateFunction(e), i = -s.controller.spline.interpolate(-t)), i && "container" !== s.params.controller.by || (a = (e.maxTranslate() - e.minTranslate()) / (s.maxTranslate() - s.minTranslate()), i = (t - s.minTranslate()) * a + e.minTranslate()), s.params.controller.inverse && (i = e.maxTranslate() - i), e.updateProgress(i), e.setTranslate(i, s), e.updateActiveIndex(), e.updateSlidesClasses() } if (Array.isArray(r)) for (var o = 0; o < r.length; o += 1)r[o] !== t && r[o] instanceof T && n(r[o]); else r instanceof T && t !== r && n(r) }, setTransition: function (t, e) { var a, i = this, s = i.controller.control; function r(e) { e.setTransition(t, i), 0 !== t && (e.transitionStart(), e.params.autoHeight && ee.nextTick(function () { e.updateAutoHeight() }), e.$wrapperEl.transitionEnd(function () { s && (e.params.loop && "slide" === i.params.controller.by && e.loopFix(), e.transitionEnd()) })) } if (Array.isArray(s)) for (a = 0; a < s.length; a += 1)s[a] !== e && s[a] instanceof T && r(s[a]); else s instanceof T && e !== s && r(s) } }, F = { makeElFocusable: function (e) { return e.attr("tabIndex", "0"), e }, addElRole: function (e, t) { return e.attr("role", t), e }, addElLabel: function (e, t) { return e.attr("aria-label", t), e }, disableEl: function (e) { return e.attr("aria-disabled", !0), e }, enableEl: function (e) { return e.attr("aria-disabled", !1), e }, onEnterKey: function (e) { var t = this, a = t.params.a11y; if (13 === e.keyCode) { var i = L(e.target); t.navigation && t.navigation.$nextEl && i.is(t.navigation.$nextEl) && (t.isEnd && !t.params.loop || t.slideNext(), t.isEnd ? t.a11y.notify(a.lastSlideMessage) : t.a11y.notify(a.nextSlideMessage)), t.navigation && t.navigation.$prevEl && i.is(t.navigation.$prevEl) && (t.isBeginning && !t.params.loop || t.slidePrev(), t.isBeginning ? t.a11y.notify(a.firstSlideMessage) : t.a11y.notify(a.prevSlideMessage)), t.pagination && i.is("." + t.params.pagination.bulletClass) && i[0].click() } }, notify: function (e) { var t = this.a11y.liveRegion; 0 !== t.length && (t.html(""), t.html(e)) }, updateNavigation: function () { var e = this; if (!e.params.loop) { var t = e.navigation, a = t.$nextEl, i = t.$prevEl; i && 0 < i.length && (e.isBeginning ? e.a11y.disableEl(i) : e.a11y.enableEl(i)), a && 0 < a.length && (e.isEnd ? e.a11y.disableEl(a) : e.a11y.enableEl(a)) } }, updatePagination: function () { var i = this, s = i.params.a11y; i.pagination && i.params.pagination.clickable && i.pagination.bullets && i.pagination.bullets.length && i.pagination.bullets.each(function (e, t) { var a = L(t); i.a11y.makeElFocusable(a), i.a11y.addElRole(a, "button"), i.a11y.addElLabel(a, s.paginationBulletMessage.replace(/{{index}}/, a.index() + 1)) }) }, init: function () { var e = this; e.$el.append(e.a11y.liveRegion); var t, a, i = e.params.a11y; e.navigation && e.navigation.$nextEl && (t = e.navigation.$nextEl), e.navigation && e.navigation.$prevEl && (a = e.navigation.$prevEl), t && (e.a11y.makeElFocusable(t), e.a11y.addElRole(t, "button"), e.a11y.addElLabel(t, i.nextSlideMessage), t.on("keydown", e.a11y.onEnterKey)), a && (e.a11y.makeElFocusable(a), e.a11y.addElRole(a, "button"), e.a11y.addElLabel(a, i.prevSlideMessage), a.on("keydown", e.a11y.onEnterKey)), e.pagination && e.params.pagination.clickable && e.pagination.bullets && e.pagination.bullets.length && e.pagination.$el.on("keydown", "." + e.params.pagination.bulletClass, e.a11y.onEnterKey) }, destroy: function () { var e, t, a = this; a.a11y.liveRegion && 0 < a.a11y.liveRegion.length && a.a11y.liveRegion.remove(), a.navigation && a.navigation.$nextEl && (e = a.navigation.$nextEl), a.navigation && a.navigation.$prevEl && (t = a.navigation.$prevEl), e && e.off("keydown", a.a11y.onEnterKey), t && t.off("keydown", a.a11y.onEnterKey), a.pagination && a.params.pagination.clickable && a.pagination.bullets && a.pagination.bullets.length && a.pagination.$el.off("keydown", "." + a.params.pagination.bulletClass, a.a11y.onEnterKey) } }, R = { init: function () { var e = this; if (e.params.history) { if (!J.history || !J.history.pushState) return e.params.history.enabled = !1, void (e.params.hashNavigation.enabled = !0); var t = e.history; t.initialized = !0, t.paths = R.getPathValues(), (t.paths.key || t.paths.value) && (t.scrollToSlide(0, t.paths.value, e.params.runCallbacksOnInit), e.params.history.replaceState || J.addEventListener("popstate", e.history.setHistoryPopState)) } }, destroy: function () { this.params.history.replaceState || J.removeEventListener("popstate", this.history.setHistoryPopState) }, setHistoryPopState: function () { this.history.paths = R.getPathValues(), this.history.scrollToSlide(this.params.speed, this.history.paths.value, !1) }, getPathValues: function () { var e = J.location.pathname.slice(1).split("/").filter(function (e) { return "" !== e }), t = e.length; return { key: e[t - 2], value: e[t - 1] } }, setHistory: function (e, t) { if (this.history.initialized && this.params.history.enabled) { var a = this.slides.eq(t), i = R.slugify(a.attr("data-history")); J.location.pathname.includes(e) || (i = e + "/" + i); var s = J.history.state; s && s.value === i || (this.params.history.replaceState ? J.history.replaceState({ value: i }, null, i) : J.history.pushState({ value: i }, null, i)) } }, slugify: function (e) { return e.toString().replace(/\s+/g, "-").replace(/[^\w-]+/g, "").replace(/--+/g, "-").replace(/^-+/, "").replace(/-+$/, "") }, scrollToSlide: function (e, t, a) { var i = this; if (t) for (var s = 0, r = i.slides.length; s < r; s += 1) { var n = i.slides.eq(s); if (R.slugify(n.attr("data-history")) === t && !n.hasClass(i.params.slideDuplicateClass)) { var o = n.index(); i.slideTo(o, e, a) } } else i.slideTo(0, e, a) } }, q = { onHashCange: function () { var e = this, t = f.location.hash.replace("#", ""); if (t !== e.slides.eq(e.activeIndex).attr("data-hash")) { var a = e.$wrapperEl.children("." + e.params.slideClass + '[data-hash="' + t + '"]').index(); if (void 0 === a) return; e.slideTo(a) } }, setHash: function () { var e = this; if (e.hashNavigation.initialized && e.params.hashNavigation.enabled) if (e.params.hashNavigation.replaceState && J.history && J.history.replaceState) J.history.replaceState(null, null, "#" + e.slides.eq(e.activeIndex).attr("data-hash") || ""); else { var t = e.slides.eq(e.activeIndex), a = t.attr("data-hash") || t.attr("data-history"); f.location.hash = a || "" } }, init: function () { var e = this; if (!(!e.params.hashNavigation.enabled || e.params.history && e.params.history.enabled)) { e.hashNavigation.initialized = !0; var t = f.location.hash.replace("#", ""); if (t) for (var a = 0, i = e.slides.length; a < i; a += 1) { var s = e.slides.eq(a); if ((s.attr("data-hash") || s.attr("data-history")) === t && !s.hasClass(e.params.slideDuplicateClass)) { var r = s.index(); e.slideTo(r, 0, e.params.runCallbacksOnInit, !0) } } e.params.hashNavigation.watchState && L(J).on("hashchange", e.hashNavigation.onHashCange) } }, destroy: function () { this.params.hashNavigation.watchState && L(J).off("hashchange", this.hashNavigation.onHashCange) } }, W = { run: function () { var e = this, t = e.slides.eq(e.activeIndex), a = e.params.autoplay.delay; t.attr("data-swiper-autoplay") && (a = t.attr("data-swiper-autoplay") || e.params.autoplay.delay), e.autoplay.timeout = ee.nextTick(function () { e.params.autoplay.reverseDirection ? e.params.loop ? (e.loopFix(), e.slidePrev(e.params.speed, !0, !0), e.emit("autoplay")) : e.isBeginning ? e.params.autoplay.stopOnLastSlide ? e.autoplay.stop() : (e.slideTo(e.slides.length - 1, e.params.speed, !0, !0), e.emit("autoplay")) : (e.slidePrev(e.params.speed, !0, !0), e.emit("autoplay")) : e.params.loop ? (e.loopFix(), e.slideNext(e.params.speed, !0, !0), e.emit("autoplay")) : e.isEnd ? e.params.autoplay.stopOnLastSlide ? e.autoplay.stop() : (e.slideTo(0, e.params.speed, !0, !0), e.emit("autoplay")) : (e.slideNext(e.params.speed, !0, !0), e.emit("autoplay")) }, a) }, start: function () { var e = this; return void 0 === e.autoplay.timeout && (!e.autoplay.running && (e.autoplay.running = !0, e.emit("autoplayStart"), e.autoplay.run(), !0)) }, stop: function () { var e = this; return !!e.autoplay.running && (void 0 !== e.autoplay.timeout && (e.autoplay.timeout && (clearTimeout(e.autoplay.timeout), e.autoplay.timeout = void 0), e.autoplay.running = !1, e.emit("autoplayStop"), !0)) }, pause: function (e) { var t = this; t.autoplay.running && (t.autoplay.paused || (t.autoplay.timeout && clearTimeout(t.autoplay.timeout), t.autoplay.paused = !0, 0 !== e && t.params.autoplay.waitForTransition ? (t.$wrapperEl[0].addEventListener("transitionend", t.autoplay.onTransitionEnd), t.$wrapperEl[0].addEventListener("webkitTransitionEnd", t.autoplay.onTransitionEnd)) : (t.autoplay.paused = !1, t.autoplay.run()))) } }, j = { setTranslate: function () { for (var e = this, t = e.slides, a = 0; a < t.length; a += 1) { var i = e.slides.eq(a), s = -i[0].swiperSlideOffset; e.params.virtualTranslate || (s -= e.translate); var r = 0; e.isHorizontal() || (r = s, s = 0); var n = e.params.fadeEffect.crossFade ? Math.max(1 - Math.abs(i[0].progress), 0) : 1 + Math.min(Math.max(i[0].progress, -1), 0); i.css({ opacity: n }).transform("translate3d(" + s + "px, " + r + "px, 0px)") } }, setTransition: function (e) { var a = this, t = a.slides, i = a.$wrapperEl; if (t.transition(e), a.params.virtualTranslate && 0 !== e) { var s = !1; t.transitionEnd(function () { if (!s && a && !a.destroyed) { s = !0, a.animating = !1; for (var e = ["webkitTransitionEnd", "transitionend"], t = 0; t < e.length; t += 1)i.trigger(e[t]) } }) } } }, U = { setTranslate: function () { var e, t = this, a = t.$el, i = t.$wrapperEl, s = t.slides, r = t.width, n = t.height, o = t.rtlTranslate, l = t.size, d = t.params.cubeEffect, p = t.isHorizontal(), c = t.virtual && t.params.virtual.enabled, u = 0; d.shadow && (p ? (0 === (e = i.find(".swiper-cube-shadow")).length && (e = L('<div class="swiper-cube-shadow"></div>'), i.append(e)), e.css({ height: r + "px" })) : 0 === (e = a.find(".swiper-cube-shadow")).length && (e = L('<div class="swiper-cube-shadow"></div>'), a.append(e))); for (var h = 0; h < s.length; h += 1) { var v = s.eq(h), f = h; c && (f = parseInt(v.attr("data-swiper-slide-index"), 10)); var m = 90 * f, g = Math.floor(m / 360); o && (m = -m, g = Math.floor(-m / 360)); var b = Math.max(Math.min(v[0].progress, 1), -1), w = 0, y = 0, x = 0; f % 4 == 0 ? (w = 4 * -g * l, x = 0) : (f - 1) % 4 == 0 ? (w = 0, x = 4 * -g * l) : (f - 2) % 4 == 0 ? (w = l + 4 * g * l, x = l) : (f - 3) % 4 == 0 && (w = -l, x = 3 * l + 4 * l * g), o && (w = -w), p || (y = w, w = 0); var T = "rotateX(" + (p ? 0 : -m) + "deg) rotateY(" + (p ? m : 0) + "deg) translate3d(" + w + "px, " + y + "px, " + x + "px)"; if (b <= 1 && -1 < b && (u = 90 * f + 90 * b, o && (u = 90 * -f - 90 * b)), v.transform(T), d.slideShadows) { var E = p ? v.find(".swiper-slide-shadow-left") : v.find(".swiper-slide-shadow-top"), S = p ? v.find(".swiper-slide-shadow-right") : v.find(".swiper-slide-shadow-bottom"); 0 === E.length && (E = L('<div class="swiper-slide-shadow-' + (p ? "left" : "top") + '"></div>'), v.append(E)), 0 === S.length && (S = L('<div class="swiper-slide-shadow-' + (p ? "right" : "bottom") + '"></div>'), v.append(S)), E.length && (E[0].style.opacity = Math.max(-b, 0)), S.length && (S[0].style.opacity = Math.max(b, 0)) } } if (i.css({ "-webkit-transform-origin": "50% 50% -" + l / 2 + "px", "-moz-transform-origin": "50% 50% -" + l / 2 + "px", "-ms-transform-origin": "50% 50% -" + l / 2 + "px", "transform-origin": "50% 50% -" + l / 2 + "px" }), d.shadow) if (p) e.transform("translate3d(0px, " + (r / 2 + d.shadowOffset) + "px, " + -r / 2 + "px) rotateX(90deg) rotateZ(0deg) scale(" + d.shadowScale + ")"); else { var C = Math.abs(u) - 90 * Math.floor(Math.abs(u) / 90), M = 1.5 - (Math.sin(2 * C * Math.PI / 360) / 2 + Math.cos(2 * C * Math.PI / 360) / 2), z = d.shadowScale, P = d.shadowScale / M, k = d.shadowOffset; e.transform("scale3d(" + z + ", 1, " + P + ") translate3d(0px, " + (n / 2 + k) + "px, " + -n / 2 / P + "px) rotateX(-90deg)") } var $ = I.isSafari || I.isUiWebView ? -l / 2 : 0; i.transform("translate3d(0px,0," + $ + "px) rotateX(" + (t.isHorizontal() ? 0 : u) + "deg) rotateY(" + (t.isHorizontal() ? -u : 0) + "deg)") }, setTransition: function (e) { var t = this.$el; this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e), this.params.cubeEffect.shadow && !this.isHorizontal() && t.find(".swiper-cube-shadow").transition(e) } }, K = { setTranslate: function () { for (var e = this, t = e.slides, a = e.rtlTranslate, i = 0; i < t.length; i += 1) { var s = t.eq(i), r = s[0].progress; e.params.flipEffect.limitRotation && (r = Math.max(Math.min(s[0].progress, 1), -1)); var n = -180 * r, o = 0, l = -s[0].swiperSlideOffset, d = 0; if (e.isHorizontal() ? a && (n = -n) : (d = l, o = -n, n = l = 0), s[0].style.zIndex = -Math.abs(Math.round(r)) + t.length, e.params.flipEffect.slideShadows) { var p = e.isHorizontal() ? s.find(".swiper-slide-shadow-left") : s.find(".swiper-slide-shadow-top"), c = e.isHorizontal() ? s.find(".swiper-slide-shadow-right") : s.find(".swiper-slide-shadow-bottom"); 0 === p.length && (p = L('<div class="swiper-slide-shadow-' + (e.isHorizontal() ? "left" : "top") + '"></div>'), s.append(p)), 0 === c.length && (c = L('<div class="swiper-slide-shadow-' + (e.isHorizontal() ? "right" : "bottom") + '"></div>'), s.append(c)), p.length && (p[0].style.opacity = Math.max(-r, 0)), c.length && (c[0].style.opacity = Math.max(r, 0)) } s.transform("translate3d(" + l + "px, " + d + "px, 0px) rotateX(" + o + "deg) rotateY(" + n + "deg)") } }, setTransition: function (e) { var a = this, t = a.slides, i = a.activeIndex, s = a.$wrapperEl; if (t.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e), a.params.virtualTranslate && 0 !== e) { var r = !1; t.eq(i).transitionEnd(function () { if (!r && a && !a.destroyed) { r = !0, a.animating = !1; for (var e = ["webkitTransitionEnd", "transitionend"], t = 0; t < e.length; t += 1)s.trigger(e[t]) } }) } } }, _ = { setTranslate: function () { for (var e = this, t = e.width, a = e.height, i = e.slides, s = e.$wrapperEl, r = e.slidesSizesGrid, n = e.params.coverflowEffect, o = e.isHorizontal(), l = e.translate, d = o ? t / 2 - l : a / 2 - l, p = o ? n.rotate : -n.rotate, c = n.depth, u = 0, h = i.length; u < h; u += 1) { var v = i.eq(u), f = r[u], m = (d - v[0].swiperSlideOffset - f / 2) / f * n.modifier, g = o ? p * m : 0, b = o ? 0 : p * m, w = -c * Math.abs(m), y = o ? 0 : n.stretch * m, x = o ? n.stretch * m : 0; Math.abs(x) < .001 && (x = 0), Math.abs(y) < .001 && (y = 0), Math.abs(w) < .001 && (w = 0), Math.abs(g) < .001 && (g = 0), Math.abs(b) < .001 && (b = 0); var T = "translate3d(" + x + "px," + y + "px," + w + "px)  rotateX(" + b + "deg) rotateY(" + g + "deg)"; if (v.transform(T), v[0].style.zIndex = 1 - Math.abs(Math.round(m)), n.slideShadows) { var E = o ? v.find(".swiper-slide-shadow-left") : v.find(".swiper-slide-shadow-top"), S = o ? v.find(".swiper-slide-shadow-right") : v.find(".swiper-slide-shadow-bottom"); 0 === E.length && (E = L('<div class="swiper-slide-shadow-' + (o ? "left" : "top") + '"></div>'), v.append(E)), 0 === S.length && (S = L('<div class="swiper-slide-shadow-' + (o ? "right" : "bottom") + '"></div>'), v.append(S)), E.length && (E[0].style.opacity = 0 < m ? m : 0), S.length && (S[0].style.opacity = 0 < -m ? -m : 0) } } (te.pointerEvents || te.prefixedPointerEvents) && (s[0].style.perspectiveOrigin = d + "px 50%") }, setTransition: function (e) { this.slides.transition(e).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(e) } }, Z = { init: function () { var e = this, t = e.params.thumbs, a = e.constructor; t.swiper instanceof a ? (e.thumbs.swiper = t.swiper, ee.extend(e.thumbs.swiper.originalParams, { watchSlidesProgress: !0, slideToClickedSlide: !1 }), ee.extend(e.thumbs.swiper.params, { watchSlidesProgress: !0, slideToClickedSlide: !1 })) : ee.isObject(t.swiper) && (e.thumbs.swiper = new a(ee.extend({}, t.swiper, { watchSlidesVisibility: !0, watchSlidesProgress: !0, slideToClickedSlide: !1 })), e.thumbs.swiperCreated = !0), e.thumbs.swiper.$el.addClass(e.params.thumbs.thumbsContainerClass), e.thumbs.swiper.on("tap", e.thumbs.onThumbClick) }, onThumbClick: function () { var e = this, t = e.thumbs.swiper; if (t) { var a = t.clickedIndex, i = t.clickedSlide; if (!(i && L(i).hasClass(e.params.thumbs.slideThumbActiveClass) || null == a)) { var s; if (s = t.params.loop ? parseInt(L(t.clickedSlide).attr("data-swiper-slide-index"), 10) : a, e.params.loop) { var r = e.activeIndex; e.slides.eq(r).hasClass(e.params.slideDuplicateClass) && (e.loopFix(), e._clientLeft = e.$wrapperEl[0].clientLeft, r = e.activeIndex); var n = e.slides.eq(r).prevAll('[data-swiper-slide-index="' + s + '"]').eq(0).index(), o = e.slides.eq(r).nextAll('[data-swiper-slide-index="' + s + '"]').eq(0).index(); s = void 0 === n ? o : void 0 === o ? n : o - r < r - n ? o : n } e.slideTo(s) } } }, update: function (e) { var t = this, a = t.thumbs.swiper; if (a) { var i = "auto" === a.params.slidesPerView ? a.slidesPerViewDynamic() : a.params.slidesPerView; if (t.realIndex !== a.realIndex) { var s, r = a.activeIndex; if (a.params.loop) { a.slides.eq(r).hasClass(a.params.slideDuplicateClass) && (a.loopFix(), a._clientLeft = a.$wrapperEl[0].clientLeft, r = a.activeIndex); var n = a.slides.eq(r).prevAll('[data-swiper-slide-index="' + t.realIndex + '"]').eq(0).index(), o = a.slides.eq(r).nextAll('[data-swiper-slide-index="' + t.realIndex + '"]').eq(0).index(); s = void 0 === n ? o : void 0 === o ? n : o - r == r - n ? r : o - r < r - n ? o : n } else s = t.realIndex; a.visibleSlidesIndexes.indexOf(s) < 0 && (a.params.centeredSlides ? s = r < s ? s - Math.floor(i / 2) + 1 : s + Math.floor(i / 2) - 1 : r < s && (s = s - i + 1), a.slideTo(s, e ? 0 : void 0)) } var l = 1, d = t.params.thumbs.slideThumbActiveClass; if (1 < t.params.slidesPerView && !t.params.centeredSlides && (l = t.params.slidesPerView), a.slides.removeClass(d), a.params.loop) for (var p = 0; p < l; p += 1)a.$wrapperEl.children('[data-swiper-slide-index="' + (t.realIndex + p) + '"]').addClass(d); else for (var c = 0; c < l; c += 1)a.slides.eq(t.realIndex + c).addClass(d) } } }, Q = [E, S, C, M, P, $, O, { name: "mousewheel", params: { mousewheel: { enabled: !1, releaseOnEdges: !1, invert: !1, forceToAxis: !1, sensitivity: 1, eventsTarged: "container" } }, create: function () { var e = this; ee.extend(e, { mousewheel: { enabled: !1, enable: A.enable.bind(e), disable: A.disable.bind(e), handle: A.handle.bind(e), handleMouseEnter: A.handleMouseEnter.bind(e), handleMouseLeave: A.handleMouseLeave.bind(e), lastScrollTime: ee.now() } }) }, on: { init: function () { this.params.mousewheel.enabled && this.mousewheel.enable() }, destroy: function () { this.mousewheel.enabled && this.mousewheel.disable() } } }, { name: "navigation", params: { navigation: { nextEl: null, prevEl: null, hideOnClick: !1, disabledClass: "swiper-button-disabled", hiddenClass: "swiper-button-hidden", lockClass: "swiper-button-lock" } }, create: function () { var e = this; ee.extend(e, { navigation: { init: H.init.bind(e), update: H.update.bind(e), destroy: H.destroy.bind(e), onNextClick: H.onNextClick.bind(e), onPrevClick: H.onPrevClick.bind(e) } }) }, on: { init: function () { this.navigation.init(), this.navigation.update() }, toEdge: function () { this.navigation.update() }, fromEdge: function () { this.navigation.update() }, destroy: function () { this.navigation.destroy() }, click: function (e) { var t, a = this, i = a.navigation, s = i.$nextEl, r = i.$prevEl; !a.params.navigation.hideOnClick || L(e.target).is(r) || L(e.target).is(s) || (s ? t = s.hasClass(a.params.navigation.hiddenClass) : r && (t = r.hasClass(a.params.navigation.hiddenClass)), !0 === t ? a.emit("navigationShow", a) : a.emit("navigationHide", a), s && s.toggleClass(a.params.navigation.hiddenClass), r && r.toggleClass(a.params.navigation.hiddenClass)) } } }, { name: "pagination", params: { pagination: { el: null, bulletElement: "span", clickable: !1, hideOnClick: !1, renderBullet: null, renderProgressbar: null, renderFraction: null, renderCustom: null, progressbarOpposite: !1, type: "bullets", dynamicBullets: !1, dynamicMainBullets: 1, formatFractionCurrent: function (e) { return e }, formatFractionTotal: function (e) { return e }, bulletClass: "swiper-pagination-bullet", bulletActiveClass: "swiper-pagination-bullet-active", modifierClass: "swiper-pagination-", currentClass: "swiper-pagination-current", totalClass: "swiper-pagination-total", hiddenClass: "swiper-pagination-hidden", progressbarFillClass: "swiper-pagination-progressbar-fill", progressbarOppositeClass: "swiper-pagination-progressbar-opposite", clickableClass: "swiper-pagination-clickable", lockClass: "swiper-pagination-lock" } }, create: function () { var e = this; ee.extend(e, { pagination: { init: N.init.bind(e), render: N.render.bind(e), update: N.update.bind(e), destroy: N.destroy.bind(e), dynamicBulletIndex: 0 } }) }, on: { init: function () { this.pagination.init(), this.pagination.render(), this.pagination.update() }, activeIndexChange: function () { this.params.loop ? this.pagination.update() : void 0 === this.snapIndex && this.pagination.update() }, snapIndexChange: function () { this.params.loop || this.pagination.update() }, slidesLengthChange: function () { this.params.loop && (this.pagination.render(), this.pagination.update()) }, snapGridLengthChange: function () { this.params.loop || (this.pagination.render(), this.pagination.update()) }, destroy: function () { this.pagination.destroy() }, click: function (e) { var t = this; t.params.pagination.el && t.params.pagination.hideOnClick && 0 < t.pagination.$el.length && !L(e.target).hasClass(t.params.pagination.bulletClass) && (!0 === t.pagination.$el.hasClass(t.params.pagination.hiddenClass) ? t.emit("paginationShow", t) : t.emit("paginationHide", t), t.pagination.$el.toggleClass(t.params.pagination.hiddenClass)) } } }, { name: "scrollbar", params: { scrollbar: { el: null, dragSize: "auto", hide: !1, draggable: !1, snapOnRelease: !0, lockClass: "swiper-scrollbar-lock", dragClass: "swiper-scrollbar-drag" } }, create: function () { var e = this; ee.extend(e, { scrollbar: { init: G.init.bind(e), destroy: G.destroy.bind(e), updateSize: G.updateSize.bind(e), setTranslate: G.setTranslate.bind(e), setTransition: G.setTransition.bind(e), enableDraggable: G.enableDraggable.bind(e), disableDraggable: G.disableDraggable.bind(e), setDragPosition: G.setDragPosition.bind(e), onDragStart: G.onDragStart.bind(e), onDragMove: G.onDragMove.bind(e), onDragEnd: G.onDragEnd.bind(e), isTouched: !1, timeout: null, dragTimeout: null } }) }, on: { init: function () { this.scrollbar.init(), this.scrollbar.updateSize(), this.scrollbar.setTranslate() }, update: function () { this.scrollbar.updateSize() }, resize: function () { this.scrollbar.updateSize() }, observerUpdate: function () { this.scrollbar.updateSize() }, setTranslate: function () { this.scrollbar.setTranslate() }, setTransition: function (e) { this.scrollbar.setTransition(e) }, destroy: function () { this.scrollbar.destroy() } } }, { name: "parallax", params: { parallax: { enabled: !1 } }, create: function () { ee.extend(this, { parallax: { setTransform: B.setTransform.bind(this), setTranslate: B.setTranslate.bind(this), setTransition: B.setTransition.bind(this) } }) }, on: { beforeInit: function () { this.params.parallax.enabled && (this.params.watchSlidesProgress = !0, this.originalParams.watchSlidesProgress = !0) }, init: function () { this.params.parallax.enabled && this.parallax.setTranslate() }, setTranslate: function () { this.params.parallax.enabled && this.parallax.setTranslate() }, setTransition: function (e) { this.params.parallax.enabled && this.parallax.setTransition(e) } } }, { name: "zoom", params: { zoom: { enabled: !1, maxRatio: 3, minRatio: 1, toggle: !0, containerClass: "swiper-zoom-container", zoomedSlideClass: "swiper-slide-zoomed" } }, create: function () { var i = this, t = { enabled: !1, scale: 1, currentScale: 1, isScaling: !1, gesture: { $slideEl: void 0, slideWidth: void 0, slideHeight: void 0, $imageEl: void 0, $imageWrapEl: void 0, maxRatio: 3 }, image: { isTouched: void 0, isMoved: void 0, currentX: void 0, currentY: void 0, minX: void 0, minY: void 0, maxX: void 0, maxY: void 0, width: void 0, height: void 0, startX: void 0, startY: void 0, touchesStart: {}, touchesCurrent: {} }, velocity: { x: void 0, y: void 0, prevPositionX: void 0, prevPositionY: void 0, prevTime: void 0 } }; "onGestureStart onGestureChange onGestureEnd onTouchStart onTouchMove onTouchEnd onTransitionEnd toggle enable disable in out".split(" ").forEach(function (e) { t[e] = X[e].bind(i) }), ee.extend(i, { zoom: t }); var s = 1; Object.defineProperty(i.zoom, "scale", { get: function () { return s }, set: function (e) { if (s !== e) { var t = i.zoom.gesture.$imageEl ? i.zoom.gesture.$imageEl[0] : void 0, a = i.zoom.gesture.$slideEl ? i.zoom.gesture.$slideEl[0] : void 0; i.emit("zoomChange", e, t, a) } s = e } }) }, on: { init: function () { this.params.zoom.enabled && this.zoom.enable() }, destroy: function () { this.zoom.disable() }, touchStart: function (e) { this.zoom.enabled && this.zoom.onTouchStart(e) }, touchEnd: function (e) { this.zoom.enabled && this.zoom.onTouchEnd(e) }, doubleTap: function (e) { this.params.zoom.enabled && this.zoom.enabled && this.params.zoom.toggle && this.zoom.toggle(e) }, transitionEnd: function () { this.zoom.enabled && this.params.zoom.enabled && this.zoom.onTransitionEnd() } } }, { name: "lazy", params: { lazy: { enabled: !1, loadPrevNext: !1, loadPrevNextAmount: 1, loadOnTransitionStart: !1, elementClass: "swiper-lazy", loadingClass: "swiper-lazy-loading", loadedClass: "swiper-lazy-loaded", preloaderClass: "swiper-lazy-preloader" } }, create: function () { ee.extend(this, { lazy: { initialImageLoaded: !1, load: Y.load.bind(this), loadInSlide: Y.loadInSlide.bind(this) } }) }, on: { beforeInit: function () { this.params.lazy.enabled && this.params.preloadImages && (this.params.preloadImages = !1) }, init: function () { this.params.lazy.enabled && !this.params.loop && 0 === this.params.initialSlide && this.lazy.load() }, scroll: function () { this.params.freeMode && !this.params.freeModeSticky && this.lazy.load() }, resize: function () { this.params.lazy.enabled && this.lazy.load() }, scrollbarDragMove: function () { this.params.lazy.enabled && this.lazy.load() }, transitionStart: function () { var e = this; e.params.lazy.enabled && (e.params.lazy.loadOnTransitionStart || !e.params.lazy.loadOnTransitionStart && !e.lazy.initialImageLoaded) && e.lazy.load() }, transitionEnd: function () { this.params.lazy.enabled && !this.params.lazy.loadOnTransitionStart && this.lazy.load() } } }, { name: "controller", params: { controller: { control: void 0, inverse: !1, by: "slide" } }, create: function () { var e = this; ee.extend(e, { controller: { control: e.params.controller.control, getInterpolateFunction: V.getInterpolateFunction.bind(e), setTranslate: V.setTranslate.bind(e), setTransition: V.setTransition.bind(e) } }) }, on: { update: function () { this.controller.control && this.controller.spline && (this.controller.spline = void 0, delete this.controller.spline) }, resize: function () { this.controller.control && this.controller.spline && (this.controller.spline = void 0, delete this.controller.spline) }, observerUpdate: function () { this.controller.control && this.controller.spline && (this.controller.spline = void 0, delete this.controller.spline) }, setTranslate: function (e, t) { this.controller.control && this.controller.setTranslate(e, t) }, setTransition: function (e, t) { this.controller.control && this.controller.setTransition(e, t) } } }, { name: "a11y", params: { a11y: { enabled: !0, notificationClass: "swiper-notification", prevSlideMessage: "Previous slide", nextSlideMessage: "Next slide", firstSlideMessage: "This is the first slide", lastSlideMessage: "This is the last slide", paginationBulletMessage: "Go to slide {{index}}" } }, create: function () { var t = this; ee.extend(t, { a11y: { liveRegion: L('<span class="' + t.params.a11y.notificationClass + '" aria-live="assertive" aria-atomic="true"></span>') } }), Object.keys(F).forEach(function (e) { t.a11y[e] = F[e].bind(t) }) }, on: { init: function () { this.params.a11y.enabled && (this.a11y.init(), this.a11y.updateNavigation()) }, toEdge: function () { this.params.a11y.enabled && this.a11y.updateNavigation() }, fromEdge: function () { this.params.a11y.enabled && this.a11y.updateNavigation() }, paginationUpdate: function () { this.params.a11y.enabled && this.a11y.updatePagination() }, destroy: function () { this.params.a11y.enabled && this.a11y.destroy() } } }, { name: "history", params: { history: { enabled: !1, replaceState: !1, key: "slides" } }, create: function () { var e = this; ee.extend(e, { history: { init: R.init.bind(e), setHistory: R.setHistory.bind(e), setHistoryPopState: R.setHistoryPopState.bind(e), scrollToSlide: R.scrollToSlide.bind(e), destroy: R.destroy.bind(e) } }) }, on: { init: function () { this.params.history.enabled && this.history.init() }, destroy: function () { this.params.history.enabled && this.history.destroy() }, transitionEnd: function () { this.history.initialized && this.history.setHistory(this.params.history.key, this.activeIndex) } } }, { name: "hash-navigation", params: { hashNavigation: { enabled: !1, replaceState: !1, watchState: !1 } }, create: function () { var e = this; ee.extend(e, { hashNavigation: { initialized: !1, init: q.init.bind(e), destroy: q.destroy.bind(e), setHash: q.setHash.bind(e), onHashCange: q.onHashCange.bind(e) } }) }, on: { init: function () { this.params.hashNavigation.enabled && this.hashNavigation.init() }, destroy: function () { this.params.hashNavigation.enabled && this.hashNavigation.destroy() }, transitionEnd: function () { this.hashNavigation.initialized && this.hashNavigation.setHash() } } }, { name: "autoplay", params: { autoplay: { enabled: !1, delay: 3e3, waitForTransition: !0, disableOnInteraction: !0, stopOnLastSlide: !1, reverseDirection: !1 } }, create: function () { var t = this; ee.extend(t, { autoplay: { running: !1, paused: !1, run: W.run.bind(t), start: W.start.bind(t), stop: W.stop.bind(t), pause: W.pause.bind(t), onTransitionEnd: function (e) { t && !t.destroyed && t.$wrapperEl && e.target === this && (t.$wrapperEl[0].removeEventListener("transitionend", t.autoplay.onTransitionEnd), t.$wrapperEl[0].removeEventListener("webkitTransitionEnd", t.autoplay.onTransitionEnd), t.autoplay.paused = !1, t.autoplay.running ? t.autoplay.run() : t.autoplay.stop()) } } }) }, on: { init: function () { this.params.autoplay.enabled && this.autoplay.start() }, beforeTransitionStart: function (e, t) { this.autoplay.running && (t || !this.params.autoplay.disableOnInteraction ? this.autoplay.pause(e) : this.autoplay.stop()) }, sliderFirstMove: function () { this.autoplay.running && (this.params.autoplay.disableOnInteraction ? this.autoplay.stop() : this.autoplay.pause()) }, destroy: function () { this.autoplay.running && this.autoplay.stop() } } }, { name: "effect-fade", params: { fadeEffect: { crossFade: !1 } }, create: function () { ee.extend(this, { fadeEffect: { setTranslate: j.setTranslate.bind(this), setTransition: j.setTransition.bind(this) } }) }, on: { beforeInit: function () { var e = this; if ("fade" === e.params.effect) { e.classNames.push(e.params.containerModifierClass + "fade"); var t = { slidesPerView: 1, slidesPerColumn: 1, slidesPerGroup: 1, watchSlidesProgress: !0, spaceBetween: 0, virtualTranslate: !0 }; ee.extend(e.params, t), ee.extend(e.originalParams, t) } }, setTranslate: function () { "fade" === this.params.effect && this.fadeEffect.setTranslate() }, setTransition: function (e) { "fade" === this.params.effect && this.fadeEffect.setTransition(e) } } }, { name: "effect-cube", params: { cubeEffect: { slideShadows: !0, shadow: !0, shadowOffset: 20, shadowScale: .94 } }, create: function () { ee.extend(this, { cubeEffect: { setTranslate: U.setTranslate.bind(this), setTransition: U.setTransition.bind(this) } }) }, on: { beforeInit: function () { var e = this; if ("cube" === e.params.effect) { e.classNames.push(e.params.containerModifierClass + "cube"), e.classNames.push(e.params.containerModifierClass + "3d"); var t = { slidesPerView: 1, slidesPerColumn: 1, slidesPerGroup: 1, watchSlidesProgress: !0, resistanceRatio: 0, spaceBetween: 0, centeredSlides: !1, virtualTranslate: !0 }; ee.extend(e.params, t), ee.extend(e.originalParams, t) } }, setTranslate: function () { "cube" === this.params.effect && this.cubeEffect.setTranslate() }, setTransition: function (e) { "cube" === this.params.effect && this.cubeEffect.setTransition(e) } } }, { name: "effect-flip", params: { flipEffect: { slideShadows: !0, limitRotation: !0 } }, create: function () { ee.extend(this, { flipEffect: { setTranslate: K.setTranslate.bind(this), setTransition: K.setTransition.bind(this) } }) }, on: { beforeInit: function () { var e = this; if ("flip" === e.params.effect) { e.classNames.push(e.params.containerModifierClass + "flip"), e.classNames.push(e.params.containerModifierClass + "3d"); var t = { slidesPerView: 1, slidesPerColumn: 1, slidesPerGroup: 1, watchSlidesProgress: !0, spaceBetween: 0, virtualTranslate: !0 }; ee.extend(e.params, t), ee.extend(e.originalParams, t) } }, setTranslate: function () { "flip" === this.params.effect && this.flipEffect.setTranslate() }, setTransition: function (e) { "flip" === this.params.effect && this.flipEffect.setTransition(e) } } }, { name: "effect-coverflow", params: { coverflowEffect: { rotate: 50, stretch: 0, depth: 100, modifier: 1, slideShadows: !0 } }, create: function () { ee.extend(this, { coverflowEffect: { setTranslate: _.setTranslate.bind(this), setTransition: _.setTransition.bind(this) } }) }, on: { beforeInit: function () { var e = this; "coverflow" === e.params.effect && (e.classNames.push(e.params.containerModifierClass + "coverflow"), e.classNames.push(e.params.containerModifierClass + "3d"), e.params.watchSlidesProgress = !0, e.originalParams.watchSlidesProgress = !0) }, setTranslate: function () { "coverflow" === this.params.effect && this.coverflowEffect.setTranslate() }, setTransition: function (e) { "coverflow" === this.params.effect && this.coverflowEffect.setTransition(e) } } }, { name: "thumbs", params: { thumbs: { swiper: null, slideThumbActiveClass: "swiper-slide-thumb-active", thumbsContainerClass: "swiper-container-thumbs" } }, create: function () { ee.extend(this, { thumbs: { swiper: null, init: Z.init.bind(this), update: Z.update.bind(this), onThumbClick: Z.onThumbClick.bind(this) } }) }, on: { beforeInit: function () { var e = this.params.thumbs; e && e.swiper && (this.thumbs.init(), this.thumbs.update(!0)) }, slideChange: function () { this.thumbs.swiper && this.thumbs.update() }, update: function () { this.thumbs.swiper && this.thumbs.update() }, resize: function () { this.thumbs.swiper && this.thumbs.update() }, observerUpdate: function () { this.thumbs.swiper && this.thumbs.update() }, setTransition: function (e) { var t = this.thumbs.swiper; t && t.setTransition(e) }, beforeDestroy: function () { var e = this.thumbs.swiper; e && this.thumbs.swiperCreated && e && e.destroy() } } }]; return void 0 === T.use && (T.use = T.Class.use, T.installModule = T.Class.installModule), T.use(Q), T });

"use strict";

// Object.defineProperty(exports, "__esModule", {
//   value: true
// });
// exports.default = void 0;

function _classCallCheck(instance, Constructor) { if (!_instanceof(instance, Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _instanceof(left, right) { if (right != null && typeof Symbol !== "undefined" && right[Symbol.hasInstance]) { return !!right[Symbol.hasInstance](left); } else { return left instanceof right; } }

/**
 * The general flow is:
 *
 * 1. Save element DOM state in beforeUpdate()
 * 2. Get element DOM state in updated()
 * 3. Animate the diff in doSmoothReflow()
 * 4. Listen for transitionend event in endListener().
 * 5. If the event matches the user's event filters, Go back to #1
 */
var mixin = {
  methods: {
    $smoothReflow: function $smoothReflow(options) {
      var _registerElement = registerElement.bind(this);

      if (Array.isArray(options)) options.forEach(_registerElement);else _registerElement(options);
    },
    $unsmoothReflow: function $unsmoothReflow(options) {
      var _unregisterElement = unregisterElement.bind(this);

      if (Array.isArray(options)) options.forEach(_unregisterElement);else _unregisterElement(options);
    }
  },
  beforeMount: function beforeMount() {
    var _this = this;

    this._smoothElements = [];

    this._endListener = function (event) {
      var _iteratorNormalCompletion = true;
      var _didIteratorError = false;
      var _iteratorError = undefined;

      try {
        for (var _iterator = _this._smoothElements[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
          var smoothEl = _step.value;
          smoothEl.endListener(event);
        }
      } catch (err) {
        _didIteratorError = true;
        _iteratorError = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion && _iterator.return != null) {
            _iterator.return();
          }
        } finally {
          if (_didIteratorError) {
            throw _iteratorError;
          }
        }
      }
    };
  },
  mounted: function mounted() {
    this.$el.addEventListener('transitionend', this._endListener, {
      passive: true
    });
  },
  destroyed: function destroyed() {
    this.$el.removeEventListener('transitionend', this._endListener, {
      passive: true
    });
  },
  beforeUpdate: function beforeUpdate() {
    // The component $el can be null during mounted, if it's hidden by a falsy v-if
    // Duplicate event listeners are ignored, so it's safe to add this listener multiple times.
    this.$el.addEventListener('transitionend', this._endListener, {
      passive: true
    });
    flushRemoved(this); // Retrieve component element on demand
    // It could have been hidden by v-if/v-show

    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
      for (var _iterator2 = this._smoothElements[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
        var smoothEl = _step2.value;
        var $smoothEl = findRegisteredEl(this.$el, smoothEl.options.el);
        smoothEl.setSmoothElement($smoothEl);
        smoothEl.setBeforeValues();
      }
    } catch (err) {
      _didIteratorError2 = true;
      _iteratorError2 = err;
    } finally {
      try {
        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {
          _iterator2.return();
        }
      } finally {
        if (_didIteratorError2) {
          throw _iteratorError2;
        }
      }
    }
  },
  updated: function updated() {
    var _this2 = this;

    this.$nextTick(function () {
      // Retrieve component element on demand
      // It could have been hidden by v-if/v-show
      var _iteratorNormalCompletion3 = true;
      var _didIteratorError3 = false;
      var _iteratorError3 = undefined;

      try {
        for (var _iterator3 = _this2._smoothElements[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
          var smoothEl = _step3.value;
          var $smoothEl = findRegisteredEl(_this2.$el, smoothEl.options.el);
          smoothEl.setSmoothElement($smoothEl);
          smoothEl.doSmoothReflow();
        }
      } catch (err) {
        _didIteratorError3 = true;
        _iteratorError3 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {
            _iterator3.return();
          }
        } finally {
          if (_didIteratorError3) {
            throw _iteratorError3;
          }
        }
      }

      flushRemoved(_this2);
    });
  }
};

function flushRemoved(vm) {
  var i = vm._smoothElements.length;

  while (i--) {
    var smoothEl = vm._smoothElements[i];

    if (smoothEl.isRemoved) {
      smoothEl.stopTransition();

      vm._smoothElements.splice(i, 1);
    }
  }
} // 'this' is vue component


function registerElement() {
  var option = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

  this._smoothElements.push(new SmoothElement(option));
} // 'this' is vue component
// If no 'el' was pass during registration, then we register the root element.


function unregisterElement() {
  var option = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultOptions();
  var root = this.$el;

  var index = this._smoothElements.findIndex(function (smoothEl) {
    return findRegisteredEl(root, smoothEl.options.el) === findRegisteredEl(root, option.el);
  });

  if (index === -1) {
    console.error("VSR_ERROR: $unsmoothReflow failed due to invalid el option");
    return;
  } // Don't remove right away, as it might be in the middle of
  // a doSmoothReflow, and leave the element in a broken state.


  this._smoothElements[index].scheduleRemoval();
}

function findRegisteredEl($root, registeredEl) {
  // Is an element hidden by v-if
  if (!$root || _instanceof($root, Node) && $root.nodeType === Node.COMMENT_NODE) {
    return null;
  } // Fallback to component root el.


  if (registeredEl === null) {
    return $root;
  }

  return select($root, registeredEl);
}

function select($root, el) {
  if (typeof el === 'string') return $root.matches(el) ? $root : $root.querySelector(el);else return el;
}

var STATES = {
  INACTIVE: 'INACTIVE',
  ACTIVE: 'ACTIVE'
};

var defaultOptions = function defaultOptions() {
  return {
    // Element or selector string.
    // If null, VSR will use the component's root el.
    el: null,
    // Valid values: height, width, transform
    property: 'height',
    // Selector string that will emit a transitionend event.
    // Note that you can specify multiple transitionend
    // event emitters through the use of commas.
    transitionEvent: null,
    // Hide scrollbar during transition. This should be on 99% of the time.
    hideOverflow: true,
    debug: false
  };
};

var SmoothElement =
/*#__PURE__*/
function () {
  function SmoothElement(userOptions) {
    _classCallCheck(this, SmoothElement);

    var options = defaultOptions();
    Object.assign(options, userOptions);
    var properties = this.parsePropertyOption(options.property);

    if (!options.transition) {
      options.transition = properties.map(function (p) {
        return "".concat(p, " .5s");
      }).join(',');
    }

    var internal = {
      // Resolved Element from el
      $smoothEl: null,
      // Resolved properties from property
      properties: properties,
      beforeRect: {},
      state: STATES.INACTIVE,
      isRemoved: false
    };
    Object.assign(this, {
      options: options
    }, internal);
    this.endListener = this.endListener.bind(this);
    this.debug = this.debug.bind(this);
  }

  _createClass(SmoothElement, [{
    key: "setSmoothElement",
    value: function setSmoothElement($smoothEl) {
      this.$smoothEl = $smoothEl;
    }
  }, {
    key: "transitionTo",
    value: function transitionTo(to) {
      this.state = to;
    }
  }, {
    key: "parsePropertyOption",
    value: function parsePropertyOption(property) {
      if (typeof property === 'string') {
        return [property];
      } else if (Array.isArray(property)) {
        return property;
      }

      return [];
    } // Save the DOM properties of the $smoothEl before the data update

  }, {
    key: "setBeforeValues",
    value: function setBeforeValues() {
      var $smoothEl = this.$smoothEl;
      this.beforeRect = {};

      if (!$smoothEl) {
        return;
      }

      var computedStyle = window.getComputedStyle($smoothEl); // getComputedStyle() can return null in iframe

      var _ref = computedStyle || {},
          transition = _ref.transition,
          overflowX = _ref.overflowX,
          overflowY = _ref.overflowY;

      this.computedTransition = transition; // Save overflow values now

      this.overflowX = overflowX;
      this.overflowY = overflowY;
      this.beforeRect = getBoundingClientRect($smoothEl); // Important to stopTransition after we've saved this.beforeRect

      if (this.state === STATES.ACTIVE) {
        this.stopTransition();
        this.debug('Transition was interrupted.');
      }
    }
  }, {
    key: "didValuesChange",
    value: function didValuesChange(beforeRect, afterRect) {
      var b = beforeRect;
      var a = afterRect; // There's nothing to transition from.

      if (Object.keys(beforeRect).length === 0) {
        return false;
      }

      var _iteratorNormalCompletion4 = true;
      var _didIteratorError4 = false;
      var _iteratorError4 = undefined;

      try {
        for (var _iterator4 = this.properties[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
          var prop = _step4.value;

          if (prop === 'transform' && (b['top'] !== a['top'] || b['left'] !== a['left'])) {
            return true;
          } else if (b[prop] !== a[prop]) {
            return true;
          }
        }
      } catch (err) {
        _didIteratorError4 = true;
        _iteratorError4 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {
            _iterator4.return();
          }
        } finally {
          if (_didIteratorError4) {
            throw _iteratorError4;
          }
        }
      }

      return false;
    }
  }, {
    key: "doSmoothReflow",
    value: function doSmoothReflow() {
      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'data update';
      var $smoothEl = this.$smoothEl;

      if (!$smoothEl) {
        this.debug("Could not find registered el to perform doSmoothReflow.");
        this.transitionTo(STATES.INACTIVE);
        return;
      } // A transition is already occurring, don't interrupt it.


      if (this.state === STATES.ACTIVE) {
        return;
      } // TODO: This listener might be necessary if the smoothEl is not rendered inside the component
      // for example if smoothEl is inside a <template></template>
      // https://github.com/guanzo/vue-smooth-reflow/issues/1
      //$smoothEl.addEventListener('transitionend', this.endListener, { passive: true })


      var beforeRect = this.beforeRect,
          properties = this.properties,
          options = this.options,
          overflowX = this.overflowX,
          overflowY = this.overflowY,
          debug = this.debug;
      this.transitionTo(STATES.ACTIVE);
      var triggeredBy = typeof event === 'string' ? event : event.target;
      debug("doSmoothReflow triggered by:", triggeredBy);
      var afterRect = getBoundingClientRect($smoothEl);

      if (!this.didValuesChange(beforeRect, afterRect)) {
        debug("Property values did not change.");
        this.transitionTo(STATES.INACTIVE);
        return;
      }

      debug('beforeRect', beforeRect);
      debug('afterRect', afterRect);
      this.saveOverflowValues($smoothEl, overflowX, overflowY);
      var _iteratorNormalCompletion5 = true;
      var _didIteratorError5 = false;
      var _iteratorError5 = undefined;

      try {
        for (var _iterator5 = properties[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
          var prop = _step5.value;

          if (prop === 'transform') {
            var invertLeft = beforeRect['left'] - afterRect['left'];
            var invertTop = beforeRect['top'] - afterRect['top'];
            $smoothEl.style.transform = "translate(".concat(invertLeft, "px, ").concat(invertTop, "px)");
          } else {
            $smoothEl.style[prop] = beforeRect[prop] + 'px';
          }
        }
      } catch (err) {
        _didIteratorError5 = true;
        _iteratorError5 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion5 && _iterator5.return != null) {
            _iterator5.return();
          }
        } finally {
          if (_didIteratorError5) {
            throw _iteratorError5;
          }
        }
      }

      $smoothEl.offsetHeight; // Force reflow

      $smoothEl.style.transition = [this.computedTransition, options.transition].filter(function (d) {
        return d;
      }).join(',');
      var _iteratorNormalCompletion6 = true;
      var _didIteratorError6 = false;
      var _iteratorError6 = undefined;

      try {
        for (var _iterator6 = properties[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
          var _prop = _step6.value;

          if (_prop === 'transform') {
            $smoothEl.style.transform = '';
          } else {
            $smoothEl.style[_prop] = afterRect[_prop] + 'px';
          }
        } // Transition is now started.

      } catch (err) {
        _didIteratorError6 = true;
        _iteratorError6 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion6 && _iterator6.return != null) {
            _iterator6.return();
          }
        } finally {
          if (_didIteratorError6) {
            throw _iteratorError6;
          }
        }
      }
    }
  }, {
    key: "endListener",
    value: function endListener(event) {
      var $smoothEl = this.$smoothEl,
          properties = this.properties;
      var $targetEl = event.target; // Transition on smooth element finished

      if ($smoothEl === $targetEl) {
        // The transition property is one that was registered
        if (properties.includes(event.propertyName)) {
          this.stopTransition(); // Record the beforeValues AFTER the data change, but potentially
          // BEFORE any transitionend events.

          if (this.hasRegisteredEventEmitter()) {
            this.setBeforeValues();
          }
        }
      } else if (this.isRegisteredEventEmitter($smoothEl, event)) {
        this.doSmoothReflow(event);
      }
    }
  }, {
    key: "hasRegisteredEventEmitter",
    value: function hasRegisteredEventEmitter() {
      var transitionEvent = this.options.transitionEvent;
      return transitionEvent !== null && Object.keys(transitionEvent).length > 0;
    } // Check if we should perform doSmoothReflow() after a transitionend event.

  }, {
    key: "isRegisteredEventEmitter",
    value: function isRegisteredEventEmitter($smoothEl, event) {
      if (!this.hasRegisteredEventEmitter()) {
        return false;
      }

      var $targetEl = event.target;
      var _this$options$transit = this.options.transitionEvent,
          selector = _this$options$transit.selector,
          propertyName = _this$options$transit.propertyName;

      if (propertyName != null && propertyName !== event.propertyName) {
        return false;
      } // '!= null' coerces the type to also check for undefined.


      if (selector != null && !$targetEl.matches(selector)) {
        return false;
      } // If 'transform' isn't a registered property,
      // then we don't need to act on any transitionend
      // events that occur outside the $smoothEl


      if (this.properties.indexOf('transform') === -1) {
        // Checks if $targetEl IS or WAS a descendent of $smoothEl.
        var smoothElContainsTarget = false; // composedPath is missing in ie/edge of course.

        var path = event.composedPath ? event.composedPath() : [];
        var _iteratorNormalCompletion7 = true;
        var _didIteratorError7 = false;
        var _iteratorError7 = undefined;

        try {
          for (var _iterator7 = path[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {
            var el = _step7.value;

            if ($smoothEl === el) {
              smoothElContainsTarget = true;
              break;
            }
          }
        } catch (err) {
          _didIteratorError7 = true;
          _iteratorError7 = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion7 && _iterator7.return != null) {
              _iterator7.return();
            }
          } finally {
            if (_didIteratorError7) {
              throw _iteratorError7;
            }
          }
        }

        if (!smoothElContainsTarget) {
          return false;
        }
      }

      return true;
    }
  }, {
    key: "saveOverflowValues",
    value: function saveOverflowValues($smoothEl, overflowX, overflowY) {
      if (this.options.hideOverflow) {
        //save overflow properties before overwriting
        this.overflowX = overflowX;
        this.overflowY = overflowY;
        $smoothEl.style.overflowX = 'hidden';
        $smoothEl.style.overflowY = 'hidden';
      }
    }
  }, {
    key: "restoreOverflowValues",
    value: function restoreOverflowValues($smoothEl) {
      var options = this.options,
          overflowX = this.overflowX,
          overflowY = this.overflowY;

      if (options.hideOverflow) {
        // Restore original overflow properties
        $smoothEl.style.overflowX = overflowX;
        $smoothEl.style.overflowY = overflowY;
      }
    }
  }, {
    key: "stopTransition",
    value: function stopTransition() {
      var $smoothEl = this.$smoothEl,
          properties = this.properties; // Change prop back to auto

      var _iteratorNormalCompletion8 = true;
      var _didIteratorError8 = false;
      var _iteratorError8 = undefined;

      try {
        for (var _iterator8 = properties[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {
          var prop = _step8.value;
          $smoothEl.style[prop] = null;
        }
      } catch (err) {
        _didIteratorError8 = true;
        _iteratorError8 = err;
      } finally {
        try {
          if (!_iteratorNormalCompletion8 && _iterator8.return != null) {
            _iterator8.return();
          }
        } finally {
          if (_didIteratorError8) {
            throw _iteratorError8;
          }
        }
      }

      this.restoreOverflowValues($smoothEl); // Clean up inline transition

      $smoothEl.style.transition = null;
      this.transitionTo(STATES.INACTIVE);
    }
  }, {
    key: "scheduleRemoval",
    value: function scheduleRemoval() {
      this.isRemoved = true;
    }
  }, {
    key: "debug",
    value: function debug() {
      if (!this.options.debug) {
        return;
      }

      var args = ["VSR_DEBUG:"].concat(Array.from(arguments));
      console.log.apply(null, args);
    }
  }]);

  return SmoothElement;
}(); // Converts DOMRect into plain object.
// Overflow is temporarily forced to 'hidden' to prevent margin collapse,
// and receive an accurate height/width value.


var getBoundingClientRect = function getBoundingClientRect($el) {
  $el.style.overflow = 'hidden';

  var _$el$getBoundingClien = $el.getBoundingClientRect(),
      top = _$el$getBoundingClien.top,
      right = _$el$getBoundingClien.right,
      bottom = _$el$getBoundingClien.bottom,
      left = _$el$getBoundingClien.left,
      width = _$el$getBoundingClien.width,
      height = _$el$getBoundingClien.height,
      x = _$el$getBoundingClien.x,
      y = _$el$getBoundingClien.y;

  // bug fix in IE11, cannot set to null. Need empty string instead.
  // $el.style.overflow = null;
  $el.style.overflow = '';
  
  return {
    top: top,
    right: right,
    bottom: bottom,
    left: left,
    width: width,
    height: height,
    x: x,
    y: y
  };
}; // Remember: this code shouldn't run during SSR.


// Element.matches polyfill: https://developer.mozilla.org/en-US/docs/Web/API/Element/matches#Polyfill
// if (typeof Element !== 'undefined' && Element.prototype && !Element.prototype.matches) {
//   Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function (s) {
//     var matches = (this.document || this.ownerDocument).querySelectorAll(s),
//         i = matches.length;

//     while (--i >= 0 && matches.item(i) !== this) {}

//     return i > -1;
//   };
// }

// var _default = mixin;
// exports.default = _default;
window.SmoothReflow = mixin;

/*!
 * vue2-transitions v0.3.0
 * (c) 2019-present cristij <joracristi@gmail.com>
 * Released under the MIT License.
 */
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.vue2Transitions = {})));
}(this, (function (exports) { 'use strict';

var baseTransition = {
  inheritAttrs: false,
  props: {
    /**
     * Transition duration. Number for specifying the same duration for enter/leave transitions
     * Object style {enter: 300, leave: 300} for specifying explicit durations for enter/leave
     */
    duration: {
      type: [Number, Object],
      default: 300
    },
    /**
     * Transition delay. Number for specifying the same delay for enter/leave transitions
     * Object style {enter: 300, leave: 300} for specifying explicit durations for enter/leave
     */
    delay: {
      type: [Number, Object],
      default: 0
    },
    /**
     * Whether the component should be a `transition-group` component.
     */
    group: Boolean,
    /**
     * Transition tag, in case the component is a `transition-group`
     */
    tag: {
      type: String,
      default: 'span'
    },
    /**
     *  Transform origin property https://tympanus.net/codrops/css_reference/transform-origin/.
     *  Can be specified with styles as well but it's shorter with this prop
     */
    origin: {
      type: String,
      default: ''
    },
    /**
     * Element styles that are applied during transition. These styles are applied on @beforeEnter and @beforeLeave hooks
     */
    styles: {
      type: Object,
      default: function () {
        return {
          animationFillMode: 'both',
          animationTimingFunction: 'ease-out'
        };
      }
    }
  },
  computed: {
    componentType: function componentType() {
      return this.group ? 'transition-group' : 'transition';
    },
    hooks: function hooks() {
      return Object.assign({
        beforeEnter: this.beforeEnter,
        afterEnter: this.cleanUpStyles,
        beforeLeave: this.beforeLeave,
        leave: this.leave,
        afterLeave: this.cleanUpStyles
      }, this.$listeners);
    }
  },
  methods: {
    beforeEnter: function beforeEnter(el) {
      var enterDuration = this.duration.enter ? this.duration.enter : this.duration;
      el.style.animationDuration = enterDuration + "ms";

      var enterDelay = this.delay.enter ? this.delay.enter : this.delay;
      el.style.animationDelay = enterDelay + "ms";

      this.setStyles(el);
    },
    cleanUpStyles: function cleanUpStyles(el) {
      var this$1 = this;

      Object.keys(this.styles).forEach(function (key) {
        var styleValue = this$1.styles[key];
        if (styleValue) {
          el.style[key] = '';
        }
      });
      el.style.animationDuration = '';
      el.style.animationDelay = '';
    },
    beforeLeave: function beforeLeave(el) {
      var leaveDuration = this.duration.leave ? this.duration.leave : this.duration;
      el.style.animationDuration = leaveDuration + "ms";

      var leaveDelay = this.delay.leave ? this.delay.leave : this.delay;
      el.style.animationDelay = leaveDelay + "ms";

      this.setStyles(el);
    },
    leave: function leave(el) {
      this.setAbsolutePosition(el);
    },
    setStyles: function setStyles(el) {
      var this$1 = this;

      this.setTransformOrigin(el);
      Object.keys(this.styles).forEach(function (key) {
        var styleValue = this$1.styles[key];
        if (styleValue) {
          el.style[key] = styleValue;
        }
      });
    },
    setAbsolutePosition: function setAbsolutePosition(el) {
      if (this.group) {
        el.style.position = 'absolute';
      }
      return this;
    },
    setTransformOrigin: function setTransformOrigin(el) {
      if (this.origin) {
        el.style.transformOrigin = this.origin;
      }
      return this;
    }
  }
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = " @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } } .fadeIn { animation-name: fadeIn; } @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } } .fadeOut { animation-name: fadeOut; } .fade-move { transition: transform .3s ease-out; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var FadeTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "enter-active-class": "fadeIn", "move-class": "fade-move", "leave-active-class": "fadeOut" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'fade-transition',
  mixins: [baseTransition]
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = ".zoom-move { transition: transform .3s ease-out; } @keyframes zoomIn { from { opacity: 0; transform: scale3d(0.3, 0.3, 0.3); } 50% { opacity: 1; } } .zoomIn { animation-name: zoomIn; } @keyframes zoomOut { from { opacity: 1; } 50% { opacity: 0; transform: scale3d(0.3, 0.3, 0.3); } to { opacity: 0; } } .zoomOut { animation-name: zoomOut; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var ZoomCenterTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "enter-active-class": "zoomIn", "move-class": "zoom-move", "leave-active-class": "zoomOut" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'zoom-center-transition',
  mixins: [baseTransition]
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = ".zoom-move { transition: transform .3s ease-out; } @keyframes zoomInX { from { opacity: 0; transform: scaleX(0); } 50% { opacity: 1; } } .zoomInX { animation-name: zoomInX; } @keyframes zoomOutX { from { opacity: 1; } 50% { opacity: 0; transform: scaleX(0); } to { opacity: 0; } } .zoomOutX { animation-name: zoomOutX; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var ZoomXTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "enter-active-class": "zoomInX", "move-class": "zoom-move", "leave-active-class": "zoomOutX" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'zoom-x-transition',
  props: {
    styles: {
      type: Object,
      default: function () {
        return {
          animationFillMode: 'both',
          animationTimingFunction: 'cubic-bezier(.55,0,.1,1)'
        };
      }
    }
  },
  mixins: [baseTransition]
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = ".zoom-move { transition: transform .3s ease-out; } @keyframes zoomInY { from { opacity: 0; transform: scaleY(0); } 50% { opacity: 1; tranform: scaleY(1); } } .zoomInY { animation-name: zoomInY; } @keyframes zoomOutY { from { opacity: 1; } 50% { opacity: 0; transform: scaleY(0); } to { opacity: 0; } } .zoomOutY { animation-name: zoomOutY; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var ZoomYTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "enter-active-class": "zoomInY", "move-class": "zoom-move", "leave-active-class": "zoomOutY" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'zoom-y-transition',
  mixins: [baseTransition],
  props: {
    styles: {
      type: Object,
      default: function () {
        return {
          animationFillMode: 'both',
          animationTimingFunction: 'cubic-bezier(.55,0,.1,1)'
        };
      }
    }
  }
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = " .collapse-move { transition: transform .3s ease-in-out; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var CollapseTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "move-class": "collapse-move" }, on: { "before-enter": _vm.beforeEnter, "after-enter": _vm.afterEnter, "enter": _vm.enter, "before-leave": _vm.beforeLeave, "leave": _vm.leave, "after-leave": _vm.afterLeave } }, 'component', _vm.$attrs, false), _vm.$listeners), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'collapse-transition',
  mixins: [baseTransition],
  methods: {
    transitionStyle: function transitionStyle(duration) {
      if ( duration === void 0 ) duration = 300;

      var durationInSeconds = duration / 1000;
      var style = durationInSeconds + "s height ease-in-out, " + durationInSeconds + "s padding-top ease-in-out, " + durationInSeconds + "s padding-bottom ease-in-out";
      return style;
    },
    beforeEnter: function beforeEnter(el) {
      var enterDuration = this.duration.enter ? this.duration.enter : this.duration;
      el.style.transition = this.transitionStyle(enterDuration);
      if (!el.dataset) { el.dataset = {}; }

      el.dataset.oldPaddingTop = el.style.paddingTop;
      el.dataset.oldPaddingBottom = el.style.paddingBottom;

      el.style.height = '0';
      el.style.paddingTop = 0;
      el.style.paddingBottom = 0;
      this.setStyles(el);
    },

    enter: function enter(el) {
      el.dataset.oldOverflow = el.style.overflow;
      if (el.scrollHeight !== 0) {
        el.style.height = el.scrollHeight + 'px';
        el.style.paddingTop = el.dataset.oldPaddingTop;
        el.style.paddingBottom = el.dataset.oldPaddingBottom;
      } else {
        el.style.height = '';
        el.style.paddingTop = el.dataset.oldPaddingTop;
        el.style.paddingBottom = el.dataset.oldPaddingBottom;
      }

      el.style.overflow = 'hidden';
    },

    afterEnter: function afterEnter(el) {
      // for safari: remove class then reset height is necessary
      el.style.transition = '';
      el.style.height = '';
      el.style.overflow = el.dataset.oldOverflow;
    },

    beforeLeave: function beforeLeave(el) {
      if (!el.dataset) { el.dataset = {}; }
      el.dataset.oldPaddingTop = el.style.paddingTop;
      el.dataset.oldPaddingBottom = el.style.paddingBottom;
      el.dataset.oldOverflow = el.style.overflow;

      el.style.height = el.scrollHeight + 'px';
      el.style.overflow = 'hidden';
      this.setStyles(el);
    },

    leave: function leave(el) {
      var leaveDuration = this.duration.leave ? this.duration.leave : this.duration;
      if (el.scrollHeight !== 0) {
        // for safari: add class after set height, or it will jump to zero height suddenly, weired
        el.style.transition = this.transitionStyle(leaveDuration);
        el.style.height = 0;
        el.style.paddingTop = 0;
        el.style.paddingBottom = 0;
      }
      // necessary for transition-group
      this.setAbsolutePosition(el);
    },

    afterLeave: function afterLeave(el) {
      el.style.transition = '';
      el.style.height = '';
      el.style.overflow = el.dataset.oldOverflow;
      el.style.paddingTop = el.dataset.oldPaddingTop;
      el.style.paddingBottom = el.dataset.oldPaddingBottom;
    }
  }
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = " @keyframes scaleIn { from { opacity: 0; transform: scale(0) } to { opacity: 1; } } .scaleIn { animation-name: scaleIn; } @keyframes scaleOut { from { opacity: 1; } to { opacity: 0; transform: scale(0); } } .scaleOut { animation-name: scaleOut; } .scale-move { transition: transform .3s cubic-bezier(.25, .8, .50, 1); } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var ScaleTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "enter-active-class": "scaleIn", "move-class": "scale-move", "leave-active-class": "scaleOut" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'scale-transition',
  mixins: [baseTransition],
  props: {
    origin: {
      type: String,
      default: 'top left'
    },
    styles: {
      type: Object,
      default: function () {
        return {
          animationFillMode: 'both',
          animationTimingFunction: 'cubic-bezier(.25,.8,.50,1)'
        };
      }
    }
  }
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = ".slide-move { transition: transform .3s; } @keyframes slideYIn { from { opacity: 0; transform: translateY(-15px); } to { opacity: 1; } } .slideYIn { animation-name: slideYIn; } @keyframes slideYOut { from { opacity: 1; } to { opacity: 0; transform: translateY(-15px); } } .slideYOut { animation-name: slideYOut; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var SlideYUpTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "type": "animation", "enter-active-class": "slideYIn", "move-class": "slide-move", "leave-active-class": "slideYOut" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'slide-y-up-transition',
  mixins: [baseTransition],
  props: {
    styles: {
      type: Object,
      default: function () {
        return {
          animationFillMode: 'both',
          animationTimingFunction: 'cubic-bezier(.25,.8,.50,1)'
        };
      }
    }
  }
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = ".slide-move { transition: transform .3s; } @keyframes slideYDownIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; } } .slideYDownIn { animation-name: slideYDownIn; } @keyframes slideYDownOut { from { opacity: 1; } to { opacity: 0; transform: translateY(15px); } } .slideYDownOut { animation-name: slideYDownOut; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var SlideYDownTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "enter-active-class": "slideYDownIn", "leave-active-class": "slideYDownOut" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'slide-y-down-transition',
  mixins: [baseTransition],
  props: {
    styles: {
      type: Object,
      default: function () {
        return {
          animationFillMode: 'both',
          animationTimingFunction: 'cubic-bezier(.25,.8,.50,1)'
        };
      }
    }
  }
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = ".slide-move { transition: transform .3s; } @keyframes slideXLeftIn { from { opacity: 0; transform: translateX(-15px); } to { opacity: 1; } } .slideXLeftIn { animation-name: slideXLeftIn; } @keyframes slideXLeftOut { from { opacity: 1; } to { opacity: 0; transform: translateX(-15px); } } .slideXLeftOut { animation-name: slideXLeftOut; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var SlideXLeftTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "enter-active-class": "slideXLeftIn", "move-class": "slide-move", "leave-active-class": "slideXLeftOut" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'slide-x-left-transition',
  mixins: [baseTransition],
  props: {
    styles: {
      type: Object,
      default: function () {
        return {
          animationFillMode: 'both',
          animationTimingFunction: 'cubic-bezier(.25,.8,.50,1)'
        };
      }
    }
  }
};

(function () {
  if (typeof document !== 'undefined') {
    var head = document.head || document.getElementsByTagName('head')[0],
        style = document.createElement('style'),
        css = ".slide-move { transition: transform .3s; } @keyframes slideXRightIn { from { opacity: 0; transform: translateX(15px); } to { opacity: 1; } } .slideXRightIn { animation-name: slideXRightIn; } @keyframes slideXRightOut { from { opacity: 1; } to { opacity: 0; transform: translateX(15px); } } .slideXRightOut { animation-name: slideXRightOut; } ";style.type = 'text/css';if (style.styleSheet) {
      style.styleSheet.cssText = css;
    } else {
      style.appendChild(document.createTextNode(css));
    }head.appendChild(style);
  }
})();

var SlideXRightTransition = { render: function () {
    var _vm = this;var _h = _vm.$createElement;var _c = _vm._self._c || _h;return _c(_vm.componentType, _vm._g(_vm._b({ tag: "component", attrs: { "tag": _vm.tag, "enter-active-class": "slideXRightIn", "move-class": "slide-move", "leave-active-class": "slideXRightOut" } }, 'component', _vm.$attrs, false), _vm.hooks), [_vm._t("default")], 2);
  }, staticRenderFns: [],
  name: 'slide-x-right-transition',
  mixins: [baseTransition],
  props: {
    styles: {
      type: Object,
      default: function () {
        return {
          animationFillMode: 'both',
          animationTimingFunction: 'cubic-bezier(.25,.8,.50,1)'
        };
      }
    }
  }
};

var components = {};
components[FadeTransition.name] = FadeTransition;
components[ZoomCenterTransition.name] = ZoomCenterTransition;
components[ZoomXTransition.name] = ZoomXTransition;
components[ZoomYTransition.name] = ZoomYTransition;
components[CollapseTransition.name] = CollapseTransition;
components[ScaleTransition.name] = ScaleTransition;
components[SlideYUpTransition.name] = SlideYUpTransition;
components[SlideYDownTransition.name] = SlideYDownTransition;
components[SlideXLeftTransition.name] = SlideXLeftTransition;
components[SlideXRightTransition.name] = SlideXRightTransition;

function install(Vue, options) {
  if (options && options.components) {
    options.components.forEach(function (c) { return Vue.component(c.name, components[c.name]); });
  } else {
    Object.keys(components).forEach(function (key) {
      Vue.component(key, components[key]);
    });
  }
}

// Automatic installation if Vue has been added to the global scope.
if (typeof window !== 'undefined' && window.Vue) {
  window.Vue.use({ install: install });
}

var index = {
  install: install
};

exports['default'] = index;
exports.FadeTransition = FadeTransition;
exports.ZoomCenterTransition = ZoomCenterTransition;
exports.ZoomXTransition = ZoomXTransition;
exports.ZoomYTransition = ZoomYTransition;
exports.CollapseTransition = CollapseTransition;
exports.ScaleTransition = ScaleTransition;
exports.SlideYUpTransition = SlideYUpTransition;
exports.SlideYDownTransition = SlideYDownTransition;
exports.SlideXLeftTransition = SlideXLeftTransition;
exports.SlideXRightTransition = SlideXRightTransition;

Object.defineProperty(exports, '__esModule', { value: true });

})));
!function(u,D){"object"==typeof exports&&"undefined"!=typeof module?module.exports=D():"function"==typeof define&&define.amd?define(D):u.JSON5=D()}(this,function(){"use strict";function u(u,D){return u(D={exports:{}},D.exports),D.exports}var D=u(function(u){var D=u.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=D)}),e=u(function(u){var D=u.exports={version:"2.5.7"};"number"==typeof __e&&(__e=D)}),t=(e.version,function(u){return"object"==typeof u?null!==u:"function"==typeof u}),r=function(u){if(!t(u))throw TypeError(u+" is not an object!");return u},F=function(u){try{return!!u()}catch(u){return!0}},n=!F(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),C=D.document,A=t(C)&&t(C.createElement),E=!n&&!F(function(){return 7!=Object.defineProperty((u="div",A?C.createElement(u):{}),"a",{get:function(){return 7}}).a;var u}),i=Object.defineProperty,o={f:n?Object.defineProperty:function(u,D,e){if(r(u),D=function(u,D){if(!t(u))return u;var e,r;if(D&&"function"==typeof(e=u.toString)&&!t(r=e.call(u)))return r;if("function"==typeof(e=u.valueOf)&&!t(r=e.call(u)))return r;if(!D&&"function"==typeof(e=u.toString)&&!t(r=e.call(u)))return r;throw TypeError("Can't convert object to primitive value")}(D,!0),r(e),E)try{return i(u,D,e)}catch(u){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(u[D]=e.value),u}},a=n?function(u,D,e){return o.f(u,D,function(u,D){return{enumerable:!(1&u),configurable:!(2&u),writable:!(4&u),value:D}}(1,e))}:function(u,D,e){return u[D]=e,u},c={}.hasOwnProperty,B=function(u,D){return c.call(u,D)},s=0,f=Math.random(),l=u(function(u){var t,r="Symbol(".concat(void 0===(t="src")?"":t,")_",(++s+f).toString(36)),F=Function.toString,n=(""+F).split("toString");e.inspectSource=function(u){return F.call(u)},(u.exports=function(u,e,t,F){var C="function"==typeof t;C&&(B(t,"name")||a(t,"name",e)),u[e]!==t&&(C&&(B(t,r)||a(t,r,u[e]?""+u[e]:n.join(String(e)))),u===D?u[e]=t:F?u[e]?u[e]=t:a(u,e,t):(delete u[e],a(u,e,t)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[r]||F.call(this)})}),d=function(u,D,e){if(function(u){if("function"!=typeof u)throw TypeError(u+" is not a function!")}(u),void 0===D)return u;switch(e){case 1:return function(e){return u.call(D,e)};case 2:return function(e,t){return u.call(D,e,t)};case 3:return function(e,t,r){return u.call(D,e,t,r)}}return function(){return u.apply(D,arguments)}},v=function(u,t,r){var F,n,C,A,E=u&v.F,i=u&v.G,o=u&v.S,c=u&v.P,B=u&v.B,s=i?D:o?D[t]||(D[t]={}):(D[t]||{}).prototype,f=i?e:e[t]||(e[t]={}),p=f.prototype||(f.prototype={});for(F in i&&(r=t),r)C=((n=!E&&s&&void 0!==s[F])?s:r)[F],A=B&&n?d(C,D):c&&"function"==typeof C?d(Function.call,C):C,s&&l(s,F,C,u&v.U),f[F]!=C&&a(f,F,A),c&&p[F]!=C&&(p[F]=C)};D.core=e,v.F=1,v.G=2,v.S=4,v.P=8,v.B=16,v.W=32,v.U=64,v.R=128;var p,h=v,m=Math.ceil,g=Math.floor,y=function(u){return isNaN(u=+u)?0:(u>0?g:m)(u)},w=(p=!1,function(u,D){var e,t,r=String(function(u){if(null==u)throw TypeError("Can't call method on  "+u);return u}(u)),F=y(D),n=r.length;return F<0||F>=n?p?"":void 0:(e=r.charCodeAt(F))<55296||e>56319||F+1===n||(t=r.charCodeAt(F+1))<56320||t>57343?p?r.charAt(F):e:p?r.slice(F,F+2):t-56320+(e-55296<<10)+65536});h(h.P,"String",{codePointAt:function(u){return w(this,u)}});e.String.codePointAt;var S=Math.max,b=Math.min,x=String.fromCharCode,N=String.fromCodePoint;h(h.S+h.F*(!!N&&1!=N.length),"String",{fromCodePoint:function(u){for(var D,e,t,r=arguments,F=[],n=arguments.length,C=0;n>C;){if(D=+r[C++],t=1114111,((e=y(e=D))<0?S(e+t,0):b(e,t))!==D)throw RangeError(D+" is not a valid code point");F.push(D<65536?x(D):x(55296+((D-=65536)>>10),D%1024+56320))}return F.join("")}});e.String.fromCodePoint;var P,I,O,_,j,V,J,M,L,k,T,H,$,z,R={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},G={isSpaceSeparator:function(u){return R.Space_Separator.test(u)},isIdStartChar:function(u){return u>="a"&&u<="z"||u>="A"&&u<="Z"||"$"===u||"_"===u||R.ID_Start.test(u)},isIdContinueChar:function(u){return u>="a"&&u<="z"||u>="A"&&u<="Z"||u>="0"&&u<="9"||"$"===u||"_"===u||"‌"===u||"‍"===u||R.ID_Continue.test(u)},isDigit:function(u){return/[0-9]/.test(u)},isHexDigit:function(u){return/[0-9A-Fa-f]/.test(u)}};function U(){for(k="default",T="",H=!1,$=1;;){z=Z();var u=W[k]();if(u)return u}}function Z(){if(P[_])return String.fromCodePoint(P.codePointAt(_))}function q(){var u=Z();return"\n"===u?(j++,V=0):u?V+=u.length:V++,u&&(_+=u.length),u}var W={default:function(){switch(z){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void q();case"/":return q(),void(k="comment");case void 0:return q(),X("eof")}if(!G.isSpaceSeparator(z))return W[I]();q()},comment:function(){switch(z){case"*":return q(),void(k="multiLineComment");case"/":return q(),void(k="singleLineComment")}throw eu(q())},multiLineComment:function(){switch(z){case"*":return q(),void(k="multiLineCommentAsterisk");case void 0:throw eu(q())}q()},multiLineCommentAsterisk:function(){switch(z){case"*":return void q();case"/":return q(),void(k="default");case void 0:throw eu(q())}q(),k="multiLineComment"},singleLineComment:function(){switch(z){case"\n":case"\r":case"\u2028":case"\u2029":return q(),void(k="default");case void 0:return q(),X("eof")}q()},value:function(){switch(z){case"{":case"[":return X("punctuator",q());case"n":return q(),K("ull"),X("null",null);case"t":return q(),K("rue"),X("boolean",!0);case"f":return q(),K("alse"),X("boolean",!1);case"-":case"+":return"-"===q()&&($=-1),void(k="sign");case".":return T=q(),void(k="decimalPointLeading");case"0":return T=q(),void(k="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return T=q(),void(k="decimalInteger");case"I":return q(),K("nfinity"),X("numeric",1/0);case"N":return q(),K("aN"),X("numeric",NaN);case'"':case"'":return H='"'===q(),T="",void(k="string")}throw eu(q())},identifierNameStartEscape:function(){if("u"!==z)throw eu(q());q();var u=Q();switch(u){case"$":case"_":break;default:if(!G.isIdStartChar(u))throw ru()}T+=u,k="identifierName"},identifierName:function(){switch(z){case"$":case"_":case"‌":case"‍":return void(T+=q());case"\\":return q(),void(k="identifierNameEscape")}if(!G.isIdContinueChar(z))return X("identifier",T);T+=q()},identifierNameEscape:function(){if("u"!==z)throw eu(q());q();var u=Q();switch(u){case"$":case"_":case"‌":case"‍":break;default:if(!G.isIdContinueChar(u))throw ru()}T+=u,k="identifierName"},sign:function(){switch(z){case".":return T=q(),void(k="decimalPointLeading");case"0":return T=q(),void(k="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return T=q(),void(k="decimalInteger");case"I":return q(),K("nfinity"),X("numeric",$*(1/0));case"N":return q(),K("aN"),X("numeric",NaN)}throw eu(q())},zero:function(){switch(z){case".":return T+=q(),void(k="decimalPoint");case"e":case"E":return T+=q(),void(k="decimalExponent");case"x":case"X":return T+=q(),void(k="hexadecimal")}return X("numeric",0*$)},decimalInteger:function(){switch(z){case".":return T+=q(),void(k="decimalPoint");case"e":case"E":return T+=q(),void(k="decimalExponent")}if(!G.isDigit(z))return X("numeric",$*Number(T));T+=q()},decimalPointLeading:function(){if(G.isDigit(z))return T+=q(),void(k="decimalFraction");throw eu(q())},decimalPoint:function(){switch(z){case"e":case"E":return T+=q(),void(k="decimalExponent")}return G.isDigit(z)?(T+=q(),void(k="decimalFraction")):X("numeric",$*Number(T))},decimalFraction:function(){switch(z){case"e":case"E":return T+=q(),void(k="decimalExponent")}if(!G.isDigit(z))return X("numeric",$*Number(T));T+=q()},decimalExponent:function(){switch(z){case"+":case"-":return T+=q(),void(k="decimalExponentSign")}if(G.isDigit(z))return T+=q(),void(k="decimalExponentInteger");throw eu(q())},decimalExponentSign:function(){if(G.isDigit(z))return T+=q(),void(k="decimalExponentInteger");throw eu(q())},decimalExponentInteger:function(){if(!G.isDigit(z))return X("numeric",$*Number(T));T+=q()},hexadecimal:function(){if(G.isHexDigit(z))return T+=q(),void(k="hexadecimalInteger");throw eu(q())},hexadecimalInteger:function(){if(!G.isHexDigit(z))return X("numeric",$*Number(T));T+=q()},string:function(){switch(z){case"\\":return q(),void(T+=function(){switch(Z()){case"b":return q(),"\b";case"f":return q(),"\f";case"n":return q(),"\n";case"r":return q(),"\r";case"t":return q(),"\t";case"v":return q(),"\v";case"0":if(q(),G.isDigit(Z()))throw eu(q());return"\0";case"x":return q(),function(){var u="",D=Z();if(!G.isHexDigit(D))throw eu(q());if(u+=q(),D=Z(),!G.isHexDigit(D))throw eu(q());return u+=q(),String.fromCodePoint(parseInt(u,16))}();case"u":return q(),Q();case"\n":case"\u2028":case"\u2029":return q(),"";case"\r":return q(),"\n"===Z()&&q(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw eu(q())}return q()}());case'"':return H?(q(),X("string",T)):void(T+=q());case"'":return H?void(T+=q()):(q(),X("string",T));case"\n":case"\r":throw eu(q());case"\u2028":case"\u2029":!function(u){console.warn("JSON5: '"+Fu(u)+"' in strings is not valid ECMAScript; consider escaping")}(z);break;case void 0:throw eu(q())}T+=q()},start:function(){switch(z){case"{":case"[":return X("punctuator",q())}k="value"},beforePropertyName:function(){switch(z){case"$":case"_":return T=q(),void(k="identifierName");case"\\":return q(),void(k="identifierNameStartEscape");case"}":return X("punctuator",q());case'"':case"'":return H='"'===q(),void(k="string")}if(G.isIdStartChar(z))return T+=q(),void(k="identifierName");throw eu(q())},afterPropertyName:function(){if(":"===z)return X("punctuator",q());throw eu(q())},beforePropertyValue:function(){k="value"},afterPropertyValue:function(){switch(z){case",":case"}":return X("punctuator",q())}throw eu(q())},beforeArrayValue:function(){if("]"===z)return X("punctuator",q());k="value"},afterArrayValue:function(){switch(z){case",":case"]":return X("punctuator",q())}throw eu(q())},end:function(){throw eu(q())}};function X(u,D){return{type:u,value:D,line:j,column:V}}function K(u){for(var D=0,e=u;D<e.length;D+=1){var t=e[D];if(Z()!==t)throw eu(q());q()}}function Q(){for(var u="",D=4;D-- >0;){var e=Z();if(!G.isHexDigit(e))throw eu(q());u+=q()}return String.fromCodePoint(parseInt(u,16))}var Y={start:function(){if("eof"===J.type)throw tu();uu()},beforePropertyName:function(){switch(J.type){case"identifier":case"string":return M=J.value,void(I="afterPropertyName");case"punctuator":return void Du();case"eof":throw tu()}},afterPropertyName:function(){if("eof"===J.type)throw tu();I="beforePropertyValue"},beforePropertyValue:function(){if("eof"===J.type)throw tu();uu()},beforeArrayValue:function(){if("eof"===J.type)throw tu();"punctuator"!==J.type||"]"!==J.value?uu():Du()},afterPropertyValue:function(){if("eof"===J.type)throw tu();switch(J.value){case",":return void(I="beforePropertyName");case"}":Du()}},afterArrayValue:function(){if("eof"===J.type)throw tu();switch(J.value){case",":return void(I="beforeArrayValue");case"]":Du()}},end:function(){}};function uu(){var u;switch(J.type){case"punctuator":switch(J.value){case"{":u={};break;case"[":u=[]}break;case"null":case"boolean":case"numeric":case"string":u=J.value}if(void 0===L)L=u;else{var D=O[O.length-1];Array.isArray(D)?D.push(u):D[M]=u}if(null!==u&&"object"==typeof u)O.push(u),I=Array.isArray(u)?"beforeArrayValue":"beforePropertyName";else{var e=O[O.length-1];I=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}}function Du(){O.pop();var u=O[O.length-1];I=null==u?"end":Array.isArray(u)?"afterArrayValue":"afterPropertyValue"}function eu(u){return nu(void 0===u?"JSON5: invalid end of input at "+j+":"+V:"JSON5: invalid character '"+Fu(u)+"' at "+j+":"+V)}function tu(){return nu("JSON5: invalid end of input at "+j+":"+V)}function ru(){return nu("JSON5: invalid identifier character at "+j+":"+(V-=5))}function Fu(u){var D={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(D[u])return D[u];if(u<" "){var e=u.charCodeAt(0).toString(16);return"\\x"+("00"+e).substring(e.length)}return u}function nu(u){var D=new SyntaxError(u);return D.lineNumber=j,D.columnNumber=V,D}return{parse:function(u,D){P=String(u),I="start",O=[],_=0,j=1,V=0,J=void 0,M=void 0,L=void 0;do{J=U(),Y[I]()}while("eof"!==J.type);return"function"==typeof D?function u(D,e,t){var r=D[e];if(null!=r&&"object"==typeof r)for(var F in r){var n=u(r,F,t);void 0===n?delete r[F]:r[F]=n}return t.call(D,e,r)}({"":L},"",D):L},stringify:function(u,D,e){var t,r,F,n=[],C="",A="";if(null==D||"object"!=typeof D||Array.isArray(D)||(e=D.space,F=D.quote,D=D.replacer),"function"==typeof D)r=D;else if(Array.isArray(D)){t=[];for(var E=0,i=D;E<i.length;E+=1){var o=i[E],a=void 0;"string"==typeof o?a=o:("number"==typeof o||o instanceof String||o instanceof Number)&&(a=String(o)),void 0!==a&&t.indexOf(a)<0&&t.push(a)}}return e instanceof Number?e=Number(e):e instanceof String&&(e=String(e)),"number"==typeof e?e>0&&(e=Math.min(10,Math.floor(e)),A="          ".substr(0,e)):"string"==typeof e&&(A=e.substr(0,10)),c("",{"":u});function c(u,D){var e=D[u];switch(null!=e&&("function"==typeof e.toJSON5?e=e.toJSON5(u):"function"==typeof e.toJSON&&(e=e.toJSON(u))),r&&(e=r.call(D,u,e)),e instanceof Number?e=Number(e):e instanceof String?e=String(e):e instanceof Boolean&&(e=e.valueOf()),e){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof e?B(e):"number"==typeof e?String(e):"object"==typeof e?Array.isArray(e)?function(u){if(n.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");n.push(u);var D=C;C+=A;for(var e,t=[],r=0;r<u.length;r++){var F=c(String(r),u);t.push(void 0!==F?F:"null")}if(0===t.length)e="[]";else if(""===A){var E=t.join(",");e="["+E+"]"}else{var i=",\n"+C,o=t.join(i);e="[\n"+C+o+",\n"+D+"]"}return n.pop(),C=D,e}(e):function(u){if(n.indexOf(u)>=0)throw TypeError("Converting circular structure to JSON5");n.push(u);var D=C;C+=A;for(var e,r,F=t||Object.keys(u),E=[],i=0,o=F;i<o.length;i+=1){var a=o[i],B=c(a,u);if(void 0!==B){var f=s(a)+":";""!==A&&(f+=" "),f+=B,E.push(f)}}if(0===E.length)e="{}";else if(""===A)r=E.join(","),e="{"+r+"}";else{var l=",\n"+C;r=E.join(l),e="{\n"+C+r+",\n"+D+"}"}return n.pop(),C=D,e}(e):void 0}function B(u){for(var D={"'":.1,'"':.2},e={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},t="",r=0,n=u;r<n.length;r+=1){var C=n[r];switch(C){case"'":case'"':D[C]++,t+=C;continue}if(e[C])t+=e[C];else if(C<" "){var A=C.charCodeAt(0).toString(16);t+="\\x"+("00"+A).substring(A.length)}else t+=C}var E=F||Object.keys(D).reduce(function(u,e){return D[u]<D[e]?u:e});return E+(t=t.replace(new RegExp(E,"g"),e[E]))+E}function s(u){if(0===u.length)return B(u);var D=String.fromCodePoint(u.codePointAt(0));if(!G.isIdStartChar(D))return B(u);for(var e=D.length;e<u.length;e++)if(!G.isIdContinueChar(String.fromCodePoint(u.codePointAt(e))))return B(u);return u}}}});
;
var imageRendition = (function($, w) {

    // Enable strict mode
    "use strict";

    w.showRendition = function(context) {
        var undefined;
        if (context === undefined) {
            context = $("body");
        }

        $("data-picture-rendition", context).each(function() {
            var currentPicture = this;
            var matches = [];
            $("div[data-media]", currentPicture).each(function() {
                var media = $(this).attr("data-media");
                if (!media || (w.matchMedia && w.matchMedia(media).matches)) {
                    matches.push(this);
                }
            });

            var $picImg = $("img", currentPicture).first();

            if (matches.length) {
                var match = matches.pop();
                if ($picImg.size() === 0) {
                    var $currentPicture = $(currentPicture);
                    if (match.hasAttribute("data-alt")) {
                        $picImg = $("<img />").attr("alt", match.getAttribute("data-alt")).appendTo($currentPicture);
                    } else {
                        $picImg = $("<img />").attr("alt","").appendTo($currentPicture);
                    }
                    if (match.hasAttribute("data-title")) {
                        $picImg.attr('title',match.getAttribute("data-title"));
                    }
                }
                $picImg.attr("src", match.getAttribute("data-src"));
            } else {
                $picImg.remove();
            }
        });

        $("div[data-picture-rendition]", context).each(function() {
            var currentPicture = this;
            var matches = [];
            $("div[data-media]", currentPicture).each(function() {
                var media = $(this).attr("data-media");
                if (!media || (w.matchMedia && w.matchMedia(media).matches)) {
                    matches.push(this);
                }
            });

            var $picImg = $("img", currentPicture).first();

            if (matches.length) {
                var parentElement = $(currentPicture).parent();
                if (parentElement.hasClass("data-picture-rendition")) {
                    var match = matches.pop();
                    parentElement.css('background-image', 'url("' + match.getAttribute("data-src") + '")');
                    if (match.hasAttribute("data-alt")) {
                        parentElement.attr('alt',match.getAttribute("data-alt"));
                    }
                    if (match.hasAttribute("data-title")) {
                        parentElement.attr('title',match.getAttribute("data-title"));
                    }
                } else if (!parentElement.hasClass("data-picture-without-background")) {
                    var match = matches.pop();
                    if ($picImg.size() === 0) {
                        var $currentPicture = $(currentPicture);
                        if (match.hasAttribute("data-alt")) {
                            $picImg = $("<img />").attr("alt", match.getAttribute("data-alt")).appendTo($currentPicture);
                        } else {
                            $picImg = $("<img />").attr("alt", "").appendTo($currentPicture);
                        }
                        if (match.hasAttribute("data-title")) {
                            $picImg.attr('title',match.getAttribute("data-title"));
                        }
                    }
                    $picImg.attr("src", match.getAttribute("data-src"));
                }
            } else {
                $picImg.remove();
            }
        });
    };

    // Run on debounced resize and domready
    $(function() {
        w.showRendition();
    });

    $(w).on("debouncedresize", function() {
        w.showRendition();
    });

    return { showRendition : w.showRendition };

}($CQ, this));
/**
 * @license
 * Lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */
;(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&false!==t(n[r],r,n););return n}function e(n,t){for(var r=null==n?0:n.length;r--&&false!==t(n[r],r,n););return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return false;
return true}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!(null==n||!n.length)&&-1<v(n,t,0)}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return true;return false}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);
return r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return true;return false}function p(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,false}),e}function _(n,t,r,e){var u=n.length;for(r+=e?1:-1;e?r--:++r<u;)if(t(n[r],r,n))return r;return-1}function v(n,t,r){if(t===t)n:{--r;for(var e=n.length;++r<e;)if(n[r]===t){n=r;break n}n=-1}else n=_(n,d,r);return n}function g(n,t,r,e){
--r;for(var u=n.length;++r<u;)if(e(n[r],t))return r;return-1}function d(n){return n!==n}function y(n,t){var r=null==n?0:n.length;return r?m(n,t)/r:F}function b(n){return function(t){return null==t?T:t[n]}}function x(n){return function(t){return null==n?T:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=false,n):t(r,n,u,i)}),r}function w(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function m(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==T&&(r=r===T?i:r+i)}return r;
}function A(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function E(n,t){return c(t,function(t){return[t,n[t]]})}function k(n){return function(t){return n(t)}}function S(n,t){return c(t,function(t){return n[t]})}function O(n,t){return n.has(t)}function I(n,t){for(var r=-1,e=n.length;++r<e&&-1<v(t,n[r],0););return r}function R(n,t){for(var r=n.length;r--&&-1<v(t,n[r],0););return r}function z(n){return"\\"+Un[n]}function W(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n];
}),r}function B(n,t){return function(r){return n(t(r))}}function L(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&"__lodash_placeholder__"!==o||(n[r]="__lodash_placeholder__",i[u++]=r)}return i}function U(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function C(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function D(n){if(Rn.test(n)){for(var t=On.lastIndex=0;On.test(n);)++t;n=t}else n=Qn(n);return n}function M(n){return Rn.test(n)?n.match(On)||[]:n.split("");
}var T,$=1/0,F=NaN,N=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],P=/\b__p\+='';/g,Z=/\b(__p\+=)''\+/g,q=/(__e\(.*?\)|\b__t\))\+'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,G=RegExp(V.source),H=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/,tn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rn=/[\\^$.*+?()[\]{}|]/g,en=RegExp(rn.source),un=/^\s+|\s+$/g,on=/^\s+/,fn=/\s+$/,cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,an=/\{\n\/\* \[wrapped with (.+)\] \*/,ln=/,? & /,sn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hn=/\\(\\)?/g,pn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_n=/\w*$/,vn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,dn=/^\[object .+?Constructor\]$/,yn=/^0o[0-7]+$/i,bn=/^(?:0|[1-9]\d*)$/,xn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jn=/($^)/,wn=/['\n\r\u2028\u2029\\]/g,mn="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",An="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+mn,En="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",kn=RegExp("['\u2019]","g"),Sn=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),On=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+En+mn,"g"),In=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",An].join("|"),"g"),Rn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),zn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wn="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Bn={};
Bn["[object Float32Array]"]=Bn["[object Float64Array]"]=Bn["[object Int8Array]"]=Bn["[object Int16Array]"]=Bn["[object Int32Array]"]=Bn["[object Uint8Array]"]=Bn["[object Uint8ClampedArray]"]=Bn["[object Uint16Array]"]=Bn["[object Uint32Array]"]=true,Bn["[object Arguments]"]=Bn["[object Array]"]=Bn["[object ArrayBuffer]"]=Bn["[object Boolean]"]=Bn["[object DataView]"]=Bn["[object Date]"]=Bn["[object Error]"]=Bn["[object Function]"]=Bn["[object Map]"]=Bn["[object Number]"]=Bn["[object Object]"]=Bn["[object RegExp]"]=Bn["[object Set]"]=Bn["[object String]"]=Bn["[object WeakMap]"]=false;
var Ln={};Ln["[object Arguments]"]=Ln["[object Array]"]=Ln["[object ArrayBuffer]"]=Ln["[object DataView]"]=Ln["[object Boolean]"]=Ln["[object Date]"]=Ln["[object Float32Array]"]=Ln["[object Float64Array]"]=Ln["[object Int8Array]"]=Ln["[object Int16Array]"]=Ln["[object Int32Array]"]=Ln["[object Map]"]=Ln["[object Number]"]=Ln["[object Object]"]=Ln["[object RegExp]"]=Ln["[object Set]"]=Ln["[object String]"]=Ln["[object Symbol]"]=Ln["[object Uint8Array]"]=Ln["[object Uint8ClampedArray]"]=Ln["[object Uint16Array]"]=Ln["[object Uint32Array]"]=true,
Ln["[object Error]"]=Ln["[object Function]"]=Ln["[object WeakMap]"]=false;var Un={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cn=parseFloat,Dn=parseInt,Mn=typeof global=="object"&&global&&global.Object===Object&&global,Tn=typeof self=="object"&&self&&self.Object===Object&&self,$n=Mn||Tn||Function("return this")(),Fn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Nn=Fn&&typeof module=="object"&&module&&!module.nodeType&&module,Pn=Nn&&Nn.exports===Fn,Zn=Pn&&Mn.process,qn=function(){
try{var n=Nn&&Nn.f&&Nn.f("util").types;return n?n:Zn&&Zn.binding&&Zn.binding("util")}catch(n){}}(),Vn=qn&&qn.isArrayBuffer,Kn=qn&&qn.isDate,Gn=qn&&qn.isMap,Hn=qn&&qn.isRegExp,Jn=qn&&qn.isSet,Yn=qn&&qn.isTypedArray,Qn=b("length"),Xn=x({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I",
"\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C",
"\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i",
"\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r",
"\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij",
"\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),nt=x({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),tt=x({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),rt=function x(mn){function An(n){if(yu(n)&&!ff(n)&&!(n instanceof Un)){if(n instanceof On)return n;if(oi.call(n,"__wrapped__"))return Fe(n)}return new On(n)}function En(){}function On(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=T}function Un(n){this.__wrapped__=n,
this.__actions__=[],this.__dir__=1,this.__filtered__=false,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Tn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Fn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Nn(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new Fn;++t<r;)this.add(n[t]);
}function Zn(n){this.size=(this.__data__=new Tn(n)).size}function qn(n,t){var r,e=ff(n),u=!e&&of(n),i=!e&&!u&&af(n),o=!e&&!u&&!i&&_f(n),u=(e=e||u||i||o)?A(n.length,ni):[],f=u.length;for(r in n)!t&&!oi.call(n,r)||e&&("length"==r||i&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||Se(r,f))||u.push(r);return u}function Qn(n){var t=n.length;return t?n[ir(0,t-1)]:T}function et(n,t){return De(Ur(n),pt(t,0,n.length))}function ut(n){return De(Ur(n))}function it(n,t,r){(r===T||lu(n[t],r))&&(r!==T||t in n)||st(n,t,r);
}function ot(n,t,r){var e=n[t];oi.call(n,t)&&lu(e,r)&&(r!==T||t in n)||st(n,t,r)}function ft(n,t){for(var r=n.length;r--;)if(lu(n[r][0],t))return r;return-1}function ct(n,t,r,e){return uo(n,function(n,u,i){t(e,n,r(n),i)}),e}function at(n,t){return n&&Cr(t,Wu(t),n)}function lt(n,t){return n&&Cr(t,Bu(t),n)}function st(n,t,r){"__proto__"==t&&Ai?Ai(n,t,{configurable:true,enumerable:true,value:r,writable:true}):n[t]=r}function ht(n,t){for(var r=-1,e=t.length,u=Ku(e),i=null==n;++r<e;)u[r]=i?T:Ru(n,t[r]);return u;
}function pt(n,t,r){return n===n&&(r!==T&&(n=n<=r?n:r),t!==T&&(n=n>=t?n:t)),n}function _t(n,t,e,u,i,o){var f,c=1&t,a=2&t,l=4&t;if(e&&(f=i?e(n,u,i,o):e(n)),f!==T)return f;if(!du(n))return n;if(u=ff(n)){if(f=me(n),!c)return Ur(n,f)}else{var s=vo(n),h="[object Function]"==s||"[object GeneratorFunction]"==s;if(af(n))return Ir(n,c);if("[object Object]"==s||"[object Arguments]"==s||h&&!i){if(f=a||h?{}:Ae(n),!c)return a?Mr(n,lt(f,n)):Dr(n,at(f,n))}else{if(!Ln[s])return i?n:{};f=Ee(n,s,c)}}if(o||(o=new Zn),
i=o.get(n))return i;o.set(n,f),pf(n)?n.forEach(function(r){f.add(_t(r,t,e,r,n,o))}):sf(n)&&n.forEach(function(r,u){f.set(u,_t(r,t,e,u,n,o))});var a=l?a?ve:_e:a?Bu:Wu,p=u?T:a(n);return r(p||n,function(r,u){p&&(u=r,r=n[u]),ot(f,u,_t(r,t,e,u,n,o))}),f}function vt(n){var t=Wu(n);return function(r){return gt(r,n,t)}}function gt(n,t,r){var e=r.length;if(null==n)return!e;for(n=Qu(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===T&&!(u in n)||!i(o))return false}return true}function dt(n,t,r){if(typeof n!="function")throw new ti("Expected a function");
return bo(function(){n.apply(T,r)},t)}function yt(n,t,r,e){var u=-1,i=o,a=true,l=n.length,s=[],h=t.length;if(!l)return s;r&&(t=c(t,k(r))),e?(i=f,a=false):200<=t.length&&(i=O,a=false,t=new Nn(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p),p=e||0!==p?p:0;if(a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function bt(n,t){var r=true;return uo(n,function(n,e,u){return r=!!t(n,e,u)}),r}function xt(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===T?o===o&&!wu(o):r(o,f)))var f=o,c=i;
}return c}function jt(n,t){var r=[];return uo(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function wt(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=ke),u||(u=[]);++i<o;){var f=n[i];0<t&&r(f)?1<t?wt(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function mt(n,t){return n&&oo(n,t,Wu)}function At(n,t){return n&&fo(n,t,Wu)}function Et(n,t){return i(t,function(t){return _u(n[t])})}function kt(n,t){t=Sr(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[Me(t[r++])];return r&&r==e?n:T}function St(n,t,r){return t=t(n),
ff(n)?t:a(t,r(n))}function Ot(n){if(null==n)n=n===T?"[object Undefined]":"[object Null]";else if(mi&&mi in Qu(n)){var t=oi.call(n,mi),r=n[mi];try{n[mi]=T;var e=true}catch(n){}var u=ai.call(n);e&&(t?n[mi]=r:delete n[mi]),n=u}else n=ai.call(n);return n}function It(n,t){return n>t}function Rt(n,t){return null!=n&&oi.call(n,t)}function zt(n,t){return null!=n&&t in Qu(n)}function Wt(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=Ku(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,k(t))),s=Ci(p.length,s),
l[a]=!r&&(t||120<=u&&120<=p.length)?new Nn(a&&p):T}var p=n[0],_=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],d=t?t(g):g,g=r||0!==g?g:0;if(v?!O(v,d):!e(h,d,r)){for(a=i;--a;){var y=l[a];if(y?!O(y,d):!e(n[a],d,r))continue n}v&&v.push(d),h.push(g)}}return h}function Bt(n,t,r){var e={};return mt(n,function(n,u,i){t(e,r(n),u,i)}),e}function Lt(t,r,e){return r=Sr(r,t),t=2>r.length?t:kt(t,hr(r,0,-1)),r=null==t?t:t[Me(Ve(r))],null==r?T:n(r,t,e)}function Ut(n){return yu(n)&&"[object Arguments]"==Ot(n)}function Ct(n){
return yu(n)&&"[object ArrayBuffer]"==Ot(n)}function Dt(n){return yu(n)&&"[object Date]"==Ot(n)}function Mt(n,t,r,e,u){if(n===t)t=true;else if(null==n||null==t||!yu(n)&&!yu(t))t=n!==n&&t!==t;else n:{var i=ff(n),o=ff(t),f=i?"[object Array]":vo(n),c=o?"[object Array]":vo(t),f="[object Arguments]"==f?"[object Object]":f,c="[object Arguments]"==c?"[object Object]":c,a="[object Object]"==f,o="[object Object]"==c;if((c=f==c)&&af(n)){if(!af(t)){t=false;break n}i=true,a=false}if(c&&!a)u||(u=new Zn),t=i||_f(n)?se(n,t,r,e,Mt,u):he(n,t,f,r,e,Mt,u);else{
if(!(1&r)&&(i=a&&oi.call(n,"__wrapped__"),f=o&&oi.call(t,"__wrapped__"),i||f)){n=i?n.value():n,t=f?t.value():t,u||(u=new Zn),t=Mt(n,t,r,e,u);break n}if(c)t:if(u||(u=new Zn),i=1&r,f=_e(n),o=f.length,c=_e(t).length,o==c||i){for(a=o;a--;){var l=f[a];if(!(i?l in t:oi.call(t,l))){t=false;break t}}if((c=u.get(n))&&u.get(t))t=c==t;else{c=true,u.set(n,t),u.set(t,n);for(var s=i;++a<o;){var l=f[a],h=n[l],p=t[l];if(e)var _=i?e(p,h,l,t,n,u):e(h,p,l,n,t,u);if(_===T?h!==p&&!Mt(h,p,r,e,u):!_){c=false;break}s||(s="constructor"==l);
}c&&!s&&(r=n.constructor,e=t.constructor,r!=e&&"constructor"in n&&"constructor"in t&&!(typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)&&(c=false)),u.delete(n),u.delete(t),t=c}}else t=false;else t=false}}return t}function Tt(n){return yu(n)&&"[object Map]"==vo(n)}function $t(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=Qu(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return false}for(;++u<i;){var f=r[u],c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===T&&!(c in n))return false;
}else{if(f=new Zn,e)var s=e(a,l,c,n,t,f);if(s===T?!Mt(l,a,3,e,f):!s)return false}}return true}function Ft(n){return!(!du(n)||ci&&ci in n)&&(_u(n)?hi:dn).test(Te(n))}function Nt(n){return yu(n)&&"[object RegExp]"==Ot(n)}function Pt(n){return yu(n)&&"[object Set]"==vo(n)}function Zt(n){return yu(n)&&gu(n.length)&&!!Bn[Ot(n)]}function qt(n){return typeof n=="function"?n:null==n?$u:typeof n=="object"?ff(n)?Jt(n[0],n[1]):Ht(n):Zu(n)}function Vt(n){if(!ze(n))return Li(n);var t,r=[];for(t in Qu(n))oi.call(n,t)&&"constructor"!=t&&r.push(t);
return r}function Kt(n,t){return n<t}function Gt(n,t){var r=-1,e=su(n)?Ku(n.length):[];return uo(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function Ht(n){var t=xe(n);return 1==t.length&&t[0][2]?We(t[0][0],t[0][1]):function(r){return r===n||$t(r,n,t)}}function Jt(n,t){return Ie(n)&&t===t&&!du(t)?We(Me(n),t):function(r){var e=Ru(r,n);return e===T&&e===t?zu(r,n):Mt(t,e,3)}}function Yt(n,t,r,e,u){n!==t&&oo(t,function(i,o){if(u||(u=new Zn),du(i)){var f=u,c=Le(n,o),a=Le(t,o),l=f.get(a);if(l)it(n,o,l);else{
var l=e?e(c,a,o+"",n,t,f):T,s=l===T;if(s){var h=ff(a),p=!h&&af(a),_=!h&&!p&&_f(a),l=a;h||p||_?ff(c)?l=c:hu(c)?l=Ur(c):p?(s=false,l=Ir(a,true)):_?(s=false,l=zr(a,true)):l=[]:xu(a)||of(a)?(l=c,of(c)?l=Ou(c):du(c)&&!_u(c)||(l=Ae(a))):s=false}s&&(f.set(a,l),Yt(l,a,r,e,f),f.delete(a)),it(n,o,l)}}else f=e?e(Le(n,o),i,o+"",n,t,u):T,f===T&&(f=i),it(n,o,f)},Bu)}function Qt(n,t){var r=n.length;if(r)return t+=0>t?r:0,Se(t,r)?n[t]:T}function Xt(n,t,r){var e=-1;return t=c(t.length?t:[$u],k(ye())),n=Gt(n,function(n){return{
a:c(t,function(t){return t(n)}),b:++e,c:n}}),w(n,function(n,t){var e;n:{e=-1;for(var u=n.a,i=t.a,o=u.length,f=r.length;++e<o;){var c=Wr(u[e],i[e]);if(c){e=e>=f?c:c*("desc"==r[e]?-1:1);break n}}e=n.b-t.b}return e})}function nr(n,t){return tr(n,t,function(t,r){return zu(n,r)})}function tr(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=kt(n,o);r(f,o)&&lr(i,Sr(o,n),f)}return i}function rr(n){return function(t){return kt(t,n)}}function er(n,t,r,e){var u=e?g:v,i=-1,o=t.length,f=n;for(n===t&&(t=Ur(t)),
r&&(f=c(n,k(r)));++i<o;)for(var a=0,l=t[i],l=r?r(l):l;-1<(a=u(f,l,a,e));)f!==n&&xi.call(f,a,1),xi.call(n,a,1);return n}function ur(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;Se(u)?xi.call(n,u,1):xr(n,u)}}}function ir(n,t){return n+Ii(Ti()*(t-n+1))}function or(n,t){var r="";if(!n||1>t||9007199254740991<t)return r;do t%2&&(r+=n),(t=Ii(t/2))&&(n+=n);while(t);return r}function fr(n,t){return xo(Be(n,t,$u),n+"")}function cr(n){return Qn(Uu(n))}function ar(n,t){var r=Uu(n);
return De(r,pt(t,0,r.length))}function lr(n,t,r,e){if(!du(n))return n;t=Sr(t,n);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=Me(t[u]),a=r;if(u!=o){var l=f[c],a=e?e(l,c,f):T;a===T&&(a=du(l)?l:Se(t[u+1])?[]:{})}ot(f,c,a),f=f[c]}return n}function sr(n){return De(Uu(n))}function hr(n,t,r){var e=-1,u=n.length;for(0>t&&(t=-t>u?0:u+t),r=r>u?u:r,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Ku(u);++e<u;)r[e]=n[e+t];return r}function pr(n,t){var r;return uo(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}
function _r(n,t,r){var e=0,u=null==n?e:n.length;if(typeof t=="number"&&t===t&&2147483647>=u){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!wu(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return vr(n,t,$u,r)}function vr(n,t,r,e){t=r(t);for(var u=0,i=null==n?0:n.length,o=t!==t,f=null===t,c=wu(t),a=t===T;u<i;){var l=Ii((u+i)/2),s=r(n[l]),h=s!==T,p=null===s,_=s===s,v=wu(s);(o?e||_:a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):p||v?0:e?s<=t:s<t)?u=l+1:i=l}return Ci(i,4294967294)}function gr(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){
var o=n[r],f=t?t(o):o;if(!r||!lu(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function dr(n){return typeof n=="number"?n:wu(n)?F:+n}function yr(n){if(typeof n=="string")return n;if(ff(n))return c(n,yr)+"";if(wu(n))return ro?ro.call(n):"";var t=n+"";return"0"==t&&1/n==-$?"-0":t}function br(n,t,r){var e=-1,u=o,i=n.length,c=true,a=[],l=a;if(r)c=false,u=f;else if(200<=i){if(u=t?null:so(n))return U(u);c=false,u=O,l=new Nn}else l=t?[]:a;n:for(;++e<i;){var s=n[e],h=t?t(s):s,s=r||0!==s?s:0;if(c&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue n;
t&&l.push(h),a.push(s)}else u(l,h,r)||(l!==a&&l.push(h),a.push(s))}return a}function xr(n,t){return t=Sr(t,n),n=2>t.length?n:kt(n,hr(t,0,-1)),null==n||delete n[Me(Ve(t))]}function jr(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?hr(n,e?0:i,e?i+1:u):hr(n,e?i+1:0,e?u:i)}function wr(n,t){var r=n;return r instanceof Un&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function mr(n,t,r){var e=n.length;if(2>e)return e?br(n[0]):[];for(var u=-1,i=Ku(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=yt(i[u]||o,n[f],t,r));
return br(wt(i,1),t,r)}function Ar(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;)r(o,n[e],e<i?t[e]:T);return o}function Er(n){return hu(n)?n:[]}function kr(n){return typeof n=="function"?n:$u}function Sr(n,t){return ff(n)?n:Ie(n,t)?[n]:jo(Iu(n))}function Or(n,t,r){var e=n.length;return r=r===T?e:r,!t&&r>=e?n:hr(n,t,r)}function Ir(n,t){if(t)return n.slice();var r=n.length,r=gi?gi(r):new n.constructor(r);return n.copy(r),r}function Rr(n){var t=new n.constructor(n.byteLength);return new vi(t).set(new vi(n)),
t}function zr(n,t){return new n.constructor(t?Rr(n.buffer):n.buffer,n.byteOffset,n.length)}function Wr(n,t){if(n!==t){var r=n!==T,e=null===n,u=n===n,i=wu(n),o=t!==T,f=null===t,c=t===t,a=wu(t);if(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Br(n,t,r,e){var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Ui(i-o,0),l=Ku(c+a);for(e=!e;++f<c;)l[f]=t[f];for(;++u<o;)(e||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];
return l}function Lr(n,t,r,e){var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Ui(i-f,0),s=Ku(l+a);for(e=!e;++u<l;)s[u]=n[u];for(l=u;++c<a;)s[l+c]=t[c];for(;++o<f;)(e||u<i)&&(s[l+r[o]]=n[u++]);return s}function Ur(n,t){var r=-1,e=n.length;for(t||(t=Ku(e));++r<e;)t[r]=n[r];return t}function Cr(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):T;c===T&&(c=n[f]),u?st(r,f,c):ot(r,f,c)}return r}function Dr(n,t){return Cr(n,po(n),t)}function Mr(n,t){return Cr(n,_o(n),t);
}function Tr(n,r){return function(e,u){var i=ff(e)?t:ct,o=r?r():{};return i(e,n,ye(u,2),o)}}function $r(n){return fr(function(t,r){var e=-1,u=r.length,i=1<u?r[u-1]:T,o=2<u?r[2]:T,i=3<n.length&&typeof i=="function"?(u--,i):T;for(o&&Oe(r[0],r[1],o)&&(i=3>u?T:i,u=1),t=Qu(t);++e<u;)(o=r[e])&&n(t,o,e,i);return t})}function Fr(n,t){return function(r,e){if(null==r)return r;if(!su(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=Qu(r);(t?i--:++i<u)&&false!==e(o[i],i,o););return r}}function Nr(n){return function(t,r,e){
var u=-1,i=Qu(t);e=e(t);for(var o=e.length;o--;){var f=e[n?o:++u];if(false===r(i[f],f,i))break}return t}}function Pr(n,t,r){function e(){return(this&&this!==$n&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=1&t,i=Vr(n);return e}function Zr(n){return function(t){t=Iu(t);var r=Rn.test(t)?M(t):T,e=r?r[0]:t.charAt(0);return t=r?Or(r,1).join(""):t.slice(1),e[n]()+t}}function qr(n){return function(t){return l(Mu(Du(t).replace(kn,"")),n,"")}}function Vr(n){return function(){var t=arguments;switch(t.length){
case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=eo(n.prototype),t=n.apply(r,t);return du(t)?t:r}}function Kr(t,r,e){function u(){for(var o=arguments.length,f=Ku(o),c=o,a=de(u);c--;)f[c]=arguments[c];return c=3>o&&f[0]!==a&&f[o-1]!==a?[]:L(f,a),
o-=c.length,o<e?ue(t,r,Jr,u.placeholder,T,f,c,T,T,e-o):n(this&&this!==$n&&this instanceof u?i:t,this,f)}var i=Vr(t);return u}function Gr(n){return function(t,r,e){var u=Qu(t);if(!su(t)){var i=ye(r,3);t=Wu(t),r=function(n){return i(u[n],n,u)}}return r=n(t,r,e),-1<r?u[i?t[r]:r]:T}}function Hr(n){return pe(function(t){var r=t.length,e=r,u=On.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if(typeof i!="function")throw new ti("Expected a function");if(u&&!o&&"wrapper"==ge(i))var o=new On([],true)}for(e=o?e:r;++e<r;)var i=t[e],u=ge(i),f="wrapper"==u?ho(i):T,o=f&&Re(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?o[ge(f[0])].apply(o,f[3]):1==i.length&&Re(i)?o[u]():o.thru(i);
return function(){var n=arguments,e=n[0];if(o&&1==n.length&&ff(e))return o.plant(e).value();for(var u=0,n=r?t[u].apply(this,n):e;++u<r;)n=t[u].call(this,n);return n}})}function Jr(n,t,r,e,u,i,o,f,c,a){function l(){for(var d=arguments.length,y=Ku(d),b=d;b--;)y[b]=arguments[b];if(_){var x,j=de(l),b=y.length;for(x=0;b--;)y[b]===j&&++x}if(e&&(y=Br(y,e,u,_)),i&&(y=Lr(y,i,o,_)),d-=x,_&&d<a)return j=L(y,j),ue(n,t,Jr,l.placeholder,r,y,j,f,c,a-d);if(j=h?r:this,b=p?j[n]:n,d=y.length,f){x=y.length;for(var w=Ci(f.length,x),m=Ur(y);w--;){
var A=f[w];y[w]=Se(A,x)?m[A]:T}}else v&&1<d&&y.reverse();return s&&c<d&&(y.length=c),this&&this!==$n&&this instanceof l&&(b=g||Vr(b)),b.apply(j,y)}var s=128&t,h=1&t,p=2&t,_=24&t,v=512&t,g=p?T:Vr(n);return l}function Yr(n,t){return function(r,e){return Bt(r,n,t(e))}}function Qr(n,t){return function(r,e){var u;if(r===T&&e===T)return t;if(r!==T&&(u=r),e!==T){if(u===T)return e;typeof r=="string"||typeof e=="string"?(r=yr(r),e=yr(e)):(r=dr(r),e=dr(e)),u=n(r,e)}return u}}function Xr(t){return pe(function(r){
return r=c(r,k(ye())),fr(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ne(n,t){t=t===T?" ":yr(t);var r=t.length;return 2>r?r?or(t,n):t:(r=or(t,Oi(n/D(t))),Rn.test(t)?Or(M(r),0,n).join(""):r.slice(0,n))}function te(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=Ku(l+c),h=this&&this!==$n&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];return n(h,o?e:this,s)}var o=1&r,f=Vr(t);return i}function re(n){return function(t,r,e){
e&&typeof e!="number"&&Oe(t,r,e)&&(r=e=T),t=Au(t),r===T?(r=t,t=0):r=Au(r),e=e===T?t<r?1:-1:Au(e);var u=-1;r=Ui(Oi((r-t)/(e||1)),0);for(var i=Ku(r);r--;)i[n?r:++u]=t,t+=e;return i}}function ee(n){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=Su(t),r=Su(r)),n(t,r)}}function ue(n,t,r,e,u,i,o,f,c,a){var l=8&t,s=l?o:T;o=l?T:o;var h=l?i:T;return i=l?T:i,t=(t|(l?32:64))&~(l?64:32),4&t||(t&=-4),u=[n,t,u,h,s,i,o,f,c,a],r=r.apply(T,u),Re(n)&&yo(r,u),r.placeholder=e,Ue(r,n,t)}function ie(n){
var t=Yu[n];return function(n,r){if(n=Su(n),(r=null==r?0:Ci(Eu(r),292))&&Wi(n)){var e=(Iu(n)+"e").split("e"),e=t(e[0]+"e"+(+e[1]+r)),e=(Iu(e)+"e").split("e");return+(e[0]+"e"+(+e[1]-r))}return t(n)}}function oe(n){return function(t){var r=vo(t);return"[object Map]"==r?W(t):"[object Set]"==r?C(t):E(t,n(t))}}function fe(n,t,r,e,u,i,o,f){var c=2&t;if(!c&&typeof n!="function")throw new ti("Expected a function");var a=e?e.length:0;if(a||(t&=-97,e=u=T),o=o===T?o:Ui(Eu(o),0),f=f===T?f:Eu(f),a-=u?u.length:0,
64&t){var l=e,s=u;e=u=T}var h=c?T:ho(n);return i=[n,t,r,e,u,l,s,i,o,f],h&&(r=i[1],n=h[1],t=r|n,e=128==n&&8==r||128==n&&256==r&&i[7].length<=h[8]||384==n&&h[7].length<=h[8]&&8==r,131>t||e)&&(1&n&&(i[2]=h[2],t|=1&r?0:4),(r=h[3])&&(e=i[3],i[3]=e?Br(e,r,h[4]):r,i[4]=e?L(i[3],"__lodash_placeholder__"):h[4]),(r=h[5])&&(e=i[5],i[5]=e?Lr(e,r,h[6]):r,i[6]=e?L(i[5],"__lodash_placeholder__"):h[6]),(r=h[7])&&(i[7]=r),128&n&&(i[8]=null==i[8]?h[8]:Ci(i[8],h[8])),null==i[9]&&(i[9]=h[9]),i[0]=h[0],i[1]=t),n=i[0],
t=i[1],r=i[2],e=i[3],u=i[4],f=i[9]=i[9]===T?c?0:n.length:Ui(i[9]-a,0),!f&&24&t&&(t&=-25),Ue((h?co:yo)(t&&1!=t?8==t||16==t?Kr(n,t,f):32!=t&&33!=t||u.length?Jr.apply(T,i):te(n,t,r,e):Pr(n,t,r),i),n,t)}function ce(n,t,r,e){return n===T||lu(n,ei[r])&&!oi.call(e,r)?t:n}function ae(n,t,r,e,u,i){return du(n)&&du(t)&&(i.set(t,n),Yt(n,t,T,ae,i),i.delete(t)),n}function le(n){return xu(n)?T:n}function se(n,t,r,e,u,i){var o=1&r,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return false;if((c=i.get(n))&&i.get(t))return c==t;
var c=-1,a=true,l=2&r?new Nn:T;for(i.set(n,t),i.set(t,n);++c<f;){var s=n[c],p=t[c];if(e)var _=o?e(p,s,c,t,n,i):e(s,p,c,n,t,i);if(_!==T){if(_)continue;a=false;break}if(l){if(!h(t,function(n,t){if(!O(l,t)&&(s===n||u(s,n,r,e,i)))return l.push(t)})){a=false;break}}else if(s!==p&&!u(s,p,r,e,i)){a=false;break}}return i.delete(n),i.delete(t),a}function he(n,t,r,e,u,i,o){switch(r){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)break;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":
if(n.byteLength!=t.byteLength||!i(new vi(n),new vi(t)))break;return true;case"[object Boolean]":case"[object Date]":case"[object Number]":return lu(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var f=W;case"[object Set]":if(f||(f=U),n.size!=t.size&&!(1&e))break;return(r=o.get(n))?r==t:(e|=2,o.set(n,t),t=se(f(n),f(t),e,u,i,o),o.delete(n),t);case"[object Symbol]":if(to)return to.call(n)==to.call(t)}
return false}function pe(n){return xo(Be(n,T,Ze),n+"")}function _e(n){return St(n,Wu,po)}function ve(n){return St(n,Bu,_o)}function ge(n){for(var t=n.name+"",r=Gi[t],e=oi.call(Gi,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function de(n){return(oi.call(An,"placeholder")?An:n).placeholder}function ye(){var n=An.iteratee||Fu,n=n===Fu?qt:n;return arguments.length?n(arguments[0],arguments[1]):n}function be(n,t){var r=n.__data__,e=typeof t;return("string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t)?r[typeof t=="string"?"string":"hash"]:r.map;
}function xe(n){for(var t=Wu(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,u===u&&!du(u)]}return t}function je(n,t){var r=null==n?T:n[t];return Ft(r)?r:T}function we(n,t,r){t=Sr(t,n);for(var e=-1,u=t.length,i=false;++e<u;){var o=Me(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&gu(u)&&Se(o,u)&&(ff(n)||of(n)))}function me(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&oi.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ae(n){
return typeof n.constructor!="function"||ze(n)?{}:eo(di(n))}function Ee(n,t,r){var e=n.constructor;switch(t){case"[object ArrayBuffer]":return Rr(n);case"[object Boolean]":case"[object Date]":return new e(+n);case"[object DataView]":return t=r?Rr(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":
case"[object Uint16Array]":case"[object Uint32Array]":return zr(n,r);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(n);case"[object RegExp]":return t=new n.constructor(n.source,_n.exec(n)),t.lastIndex=n.lastIndex,t;case"[object Set]":return new e;case"[object Symbol]":return to?Qu(to.call(n)):{}}}function ke(n){return ff(n)||of(n)||!!(ji&&n&&n[ji])}function Se(n,t){var r=typeof n;return t=null==t?9007199254740991:t,!!t&&("number"==r||"symbol"!=r&&bn.test(n))&&-1<n&&0==n%1&&n<t;
}function Oe(n,t,r){if(!du(r))return false;var e=typeof t;return!!("number"==e?su(r)&&Se(t,r.length):"string"==e&&t in r)&&lu(r[t],n)}function Ie(n,t){if(ff(n))return false;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!wu(n))||(nn.test(n)||!X.test(n)||null!=t&&n in Qu(t))}function Re(n){var t=ge(n),r=An[t];return typeof r=="function"&&t in Un.prototype&&(n===r||(t=ho(r),!!t&&n===t[0]))}function ze(n){var t=n&&n.constructor;return n===(typeof t=="function"&&t.prototype||ei)}function We(n,t){
return function(r){return null!=r&&(r[n]===t&&(t!==T||n in Qu(r)))}}function Be(t,r,e){return r=Ui(r===T?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Ui(u.length-r,0),f=Ku(o);++i<o;)f[i]=u[r+i];for(i=-1,o=Ku(r+1);++i<r;)o[i]=u[i];return o[r]=e(f),n(t,this,o)}}function Le(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}function Ue(n,t,r){var e=t+"";t=xo;var u,i=$e;return u=(u=e.match(an))?u[1].split(ln):[],r=i(u,r),(i=r.length)&&(u=i-1,r[u]=(1<i?"& ":"")+r[u],
r=r.join(2<i?", ":" "),e=e.replace(cn,"{\n/* [wrapped with "+r+"] */\n")),t(n,e)}function Ce(n){var t=0,r=0;return function(){var e=Di(),u=16-(e-r);if(r=e,0<u){if(800<=++t)return arguments[0]}else t=0;return n.apply(T,arguments)}}function De(n,t){var r=-1,e=n.length,u=e-1;for(t=t===T?e:t;++r<t;){var e=ir(r,u),i=n[e];n[e]=n[r],n[r]=i}return n.length=t,n}function Me(n){if(typeof n=="string"||wu(n))return n;var t=n+"";return"0"==t&&1/n==-$?"-0":t}function Te(n){if(null!=n){try{return ii.call(n)}catch(n){}
return n+""}return""}function $e(n,t){return r(N,function(r){var e="_."+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function Fe(n){if(n instanceof Un)return n.clone();var t=new On(n.__wrapped__,n.__chain__);return t.__actions__=Ur(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Ne(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Eu(r),0>r&&(r=Ui(e+r,0)),_(n,ye(t,3),r)):-1}function Pe(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==T&&(u=Eu(r),u=0>r?Ui(e+u,0):Ci(u,e-1)),
_(n,ye(t,3),u,true)}function Ze(n){return(null==n?0:n.length)?wt(n,1):[]}function qe(n){return n&&n.length?n[0]:T}function Ve(n){var t=null==n?0:n.length;return t?n[t-1]:T}function Ke(n,t){return n&&n.length&&t&&t.length?er(n,t):n}function Ge(n){return null==n?n:$i.call(n)}function He(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){if(hu(n))return t=Ui(n.length,t),true}),A(t,function(t){return c(n,b(t))})}function Je(t,r){if(!t||!t.length)return[];var e=He(t);return null==r?e:c(e,function(t){
return n(r,T,t)})}function Ye(n){return n=An(n),n.__chain__=true,n}function Qe(n,t){return t(n)}function Xe(){return this}function nu(n,t){return(ff(n)?r:uo)(n,ye(t,3))}function tu(n,t){return(ff(n)?e:io)(n,ye(t,3))}function ru(n,t){return(ff(n)?c:Gt)(n,ye(t,3))}function eu(n,t,r){return t=r?T:t,t=n&&null==t?n.length:t,fe(n,128,T,T,T,T,t)}function uu(n,t){var r;if(typeof t!="function")throw new ti("Expected a function");return n=Eu(n),function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=T),
r}}function iu(n,t,r){return t=r?T:t,n=fe(n,8,T,T,T,T,T,t),n.placeholder=iu.placeholder,n}function ou(n,t,r){return t=r?T:t,n=fe(n,16,T,T,T,T,T,t),n.placeholder=ou.placeholder,n}function fu(n,t,r){function e(t){var r=c,e=a;return c=a=T,_=t,s=n.apply(e,r)}function u(n){var r=n-p;return n-=_,p===T||r>=t||0>r||g&&n>=l}function i(){var n=Go();if(u(n))return o(n);var r,e=bo;r=n-_,n=t-(n-p),r=g?Ci(n,l-r):n,h=e(i,r)}function o(n){return h=T,d&&c?e(n):(c=a=T,s)}function f(){var n=Go(),r=u(n);if(c=arguments,
a=this,p=n,r){if(h===T)return _=n=p,h=bo(i,t),v?e(n):s;if(g)return lo(h),h=bo(i,t),e(p)}return h===T&&(h=bo(i,t)),s}var c,a,l,s,h,p,_=0,v=false,g=false,d=true;if(typeof n!="function")throw new ti("Expected a function");return t=Su(t)||0,du(r)&&(v=!!r.leading,l=(g="maxWait"in r)?Ui(Su(r.maxWait)||0,t):l,d="trailing"in r?!!r.trailing:d),f.cancel=function(){h!==T&&lo(h),_=0,c=p=a=h=T},f.flush=function(){return h===T?s:o(Go())},f}function cu(n,t){function r(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;
return i.has(u)?i.get(u):(e=n.apply(this,e),r.cache=i.set(u,e)||i,e)}if(typeof n!="function"||null!=t&&typeof t!="function")throw new ti("Expected a function");return r.cache=new(cu.Cache||Fn),r}function au(n){if(typeof n!="function")throw new ti("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function lu(n,t){return n===t||n!==n&&t!==t;
}function su(n){return null!=n&&gu(n.length)&&!_u(n)}function hu(n){return yu(n)&&su(n)}function pu(n){if(!yu(n))return false;var t=Ot(n);return"[object Error]"==t||"[object DOMException]"==t||typeof n.message=="string"&&typeof n.name=="string"&&!xu(n)}function _u(n){return!!du(n)&&(n=Ot(n),"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function vu(n){return typeof n=="number"&&n==Eu(n)}function gu(n){return typeof n=="number"&&-1<n&&0==n%1&&9007199254740991>=n;
}function du(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function yu(n){return null!=n&&typeof n=="object"}function bu(n){return typeof n=="number"||yu(n)&&"[object Number]"==Ot(n)}function xu(n){return!(!yu(n)||"[object Object]"!=Ot(n))&&(n=di(n),null===n||(n=oi.call(n,"constructor")&&n.constructor,typeof n=="function"&&n instanceof n&&ii.call(n)==li))}function ju(n){return typeof n=="string"||!ff(n)&&yu(n)&&"[object String]"==Ot(n)}function wu(n){return typeof n=="symbol"||yu(n)&&"[object Symbol]"==Ot(n);
}function mu(n){if(!n)return[];if(su(n))return ju(n)?M(n):Ur(n);if(wi&&n[wi]){n=n[wi]();for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}return t=vo(n),("[object Map]"==t?W:"[object Set]"==t?U:Uu)(n)}function Au(n){return n?(n=Su(n),n===$||n===-$?1.7976931348623157e308*(0>n?-1:1):n===n?n:0):0===n?n:0}function Eu(n){n=Au(n);var t=n%1;return n===n?t?n-t:n:0}function ku(n){return n?pt(Eu(n),0,4294967295):0}function Su(n){if(typeof n=="number")return n;if(wu(n))return F;if(du(n)&&(n=typeof n.valueOf=="function"?n.valueOf():n,
n=du(n)?n+"":n),typeof n!="string")return 0===n?n:+n;n=n.replace(un,"");var t=gn.test(n);return t||yn.test(n)?Dn(n.slice(2),t?2:8):vn.test(n)?F:+n}function Ou(n){return Cr(n,Bu(n))}function Iu(n){return null==n?"":yr(n)}function Ru(n,t,r){return n=null==n?T:kt(n,t),n===T?r:n}function zu(n,t){return null!=n&&we(n,t,zt)}function Wu(n){return su(n)?qn(n):Vt(n)}function Bu(n){if(su(n))n=qn(n,true);else if(du(n)){var t,r=ze(n),e=[];for(t in n)("constructor"!=t||!r&&oi.call(n,t))&&e.push(t);n=e}else{if(t=[],
null!=n)for(r in Qu(n))t.push(r);n=t}return n}function Lu(n,t){if(null==n)return{};var r=c(ve(n),function(n){return[n]});return t=ye(t),tr(n,r,function(n,r){return t(n,r[0])})}function Uu(n){return null==n?[]:S(n,Wu(n))}function Cu(n){return $f(Iu(n).toLowerCase())}function Du(n){return(n=Iu(n))&&n.replace(xn,Xn).replace(Sn,"")}function Mu(n,t,r){return n=Iu(n),t=r?T:t,t===T?zn.test(n)?n.match(In)||[]:n.match(sn)||[]:n.match(t)||[]}function Tu(n){return function(){return n}}function $u(n){return n;
}function Fu(n){return qt(typeof n=="function"?n:_t(n,1))}function Nu(n,t,e){var u=Wu(t),i=Et(t,u);null!=e||du(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=Et(t,Wu(t)));var o=!(du(e)&&"chain"in e&&!e.chain),f=_u(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=Ur(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function Pu(){}
function Zu(n){return Ie(n)?b(Me(n)):rr(n)}function qu(){return[]}function Vu(){return false}mn=null==mn?$n:rt.defaults($n.Object(),mn,rt.pick($n,Wn));var Ku=mn.Array,Gu=mn.Date,Hu=mn.Error,Ju=mn.Function,Yu=mn.Math,Qu=mn.Object,Xu=mn.RegExp,ni=mn.String,ti=mn.TypeError,ri=Ku.prototype,ei=Qu.prototype,ui=mn["__core-js_shared__"],ii=Ju.prototype.toString,oi=ei.hasOwnProperty,fi=0,ci=function(){var n=/[^.]+$/.exec(ui&&ui.keys&&ui.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),ai=ei.toString,li=ii.call(Qu),si=$n._,hi=Xu("^"+ii.call(oi).replace(rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pi=Pn?mn.Buffer:T,_i=mn.Symbol,vi=mn.Uint8Array,gi=pi?pi.g:T,di=B(Qu.getPrototypeOf,Qu),yi=Qu.create,bi=ei.propertyIsEnumerable,xi=ri.splice,ji=_i?_i.isConcatSpreadable:T,wi=_i?_i.iterator:T,mi=_i?_i.toStringTag:T,Ai=function(){
try{var n=je(Qu,"defineProperty");return n({},"",{}),n}catch(n){}}(),Ei=mn.clearTimeout!==$n.clearTimeout&&mn.clearTimeout,ki=Gu&&Gu.now!==$n.Date.now&&Gu.now,Si=mn.setTimeout!==$n.setTimeout&&mn.setTimeout,Oi=Yu.ceil,Ii=Yu.floor,Ri=Qu.getOwnPropertySymbols,zi=pi?pi.isBuffer:T,Wi=mn.isFinite,Bi=ri.join,Li=B(Qu.keys,Qu),Ui=Yu.max,Ci=Yu.min,Di=Gu.now,Mi=mn.parseInt,Ti=Yu.random,$i=ri.reverse,Fi=je(mn,"DataView"),Ni=je(mn,"Map"),Pi=je(mn,"Promise"),Zi=je(mn,"Set"),qi=je(mn,"WeakMap"),Vi=je(Qu,"create"),Ki=qi&&new qi,Gi={},Hi=Te(Fi),Ji=Te(Ni),Yi=Te(Pi),Qi=Te(Zi),Xi=Te(qi),no=_i?_i.prototype:T,to=no?no.valueOf:T,ro=no?no.toString:T,eo=function(){
function n(){}return function(t){return du(t)?yi?yi(t):(n.prototype=t,t=new n,n.prototype=T,t):{}}}();An.templateSettings={escape:J,evaluate:Y,interpolate:Q,variable:"",imports:{_:An}},An.prototype=En.prototype,An.prototype.constructor=An,On.prototype=eo(En.prototype),On.prototype.constructor=On,Un.prototype=eo(En.prototype),Un.prototype.constructor=Un,Mn.prototype.clear=function(){this.__data__=Vi?Vi(null):{},this.size=0},Mn.prototype.delete=function(n){return n=this.has(n)&&delete this.__data__[n],
this.size-=n?1:0,n},Mn.prototype.get=function(n){var t=this.__data__;return Vi?(n=t[n],"__lodash_hash_undefined__"===n?T:n):oi.call(t,n)?t[n]:T},Mn.prototype.has=function(n){var t=this.__data__;return Vi?t[n]!==T:oi.call(t,n)},Mn.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=Vi&&t===T?"__lodash_hash_undefined__":t,this},Tn.prototype.clear=function(){this.__data__=[],this.size=0},Tn.prototype.delete=function(n){var t=this.__data__;return n=ft(t,n),!(0>n)&&(n==t.length-1?t.pop():xi.call(t,n,1),
--this.size,true)},Tn.prototype.get=function(n){var t=this.__data__;return n=ft(t,n),0>n?T:t[n][1]},Tn.prototype.has=function(n){return-1<ft(this.__data__,n)},Tn.prototype.set=function(n,t){var r=this.__data__,e=ft(r,n);return 0>e?(++this.size,r.push([n,t])):r[e][1]=t,this},Fn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(Ni||Tn),string:new Mn}},Fn.prototype.delete=function(n){return n=be(this,n).delete(n),this.size-=n?1:0,n},Fn.prototype.get=function(n){return be(this,n).get(n);
},Fn.prototype.has=function(n){return be(this,n).has(n)},Fn.prototype.set=function(n,t){var r=be(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},Nn.prototype.add=Nn.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Nn.prototype.has=function(n){return this.__data__.has(n)},Zn.prototype.clear=function(){this.__data__=new Tn,this.size=0},Zn.prototype.delete=function(n){var t=this.__data__;return n=t.delete(n),this.size=t.size,n},Zn.prototype.get=function(n){
return this.__data__.get(n)},Zn.prototype.has=function(n){return this.__data__.has(n)},Zn.prototype.set=function(n,t){var r=this.__data__;if(r instanceof Tn){var e=r.__data__;if(!Ni||199>e.length)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new Fn(e)}return r.set(n,t),this.size=r.size,this};var uo=Fr(mt),io=Fr(At,true),oo=Nr(),fo=Nr(true),co=Ki?function(n,t){return Ki.set(n,t),n}:$u,ao=Ai?function(n,t){return Ai(n,"toString",{configurable:true,enumerable:false,value:Tu(t),writable:true})}:$u,lo=Ei||function(n){
return $n.clearTimeout(n)},so=Zi&&1/U(new Zi([,-0]))[1]==$?function(n){return new Zi(n)}:Pu,ho=Ki?function(n){return Ki.get(n)}:Pu,po=Ri?function(n){return null==n?[]:(n=Qu(n),i(Ri(n),function(t){return bi.call(n,t)}))}:qu,_o=Ri?function(n){for(var t=[];n;)a(t,po(n)),n=di(n);return t}:qu,vo=Ot;(Fi&&"[object DataView]"!=vo(new Fi(new ArrayBuffer(1)))||Ni&&"[object Map]"!=vo(new Ni)||Pi&&"[object Promise]"!=vo(Pi.resolve())||Zi&&"[object Set]"!=vo(new Zi)||qi&&"[object WeakMap]"!=vo(new qi))&&(vo=function(n){
var t=Ot(n);if(n=(n="[object Object]"==t?n.constructor:T)?Te(n):"")switch(n){case Hi:return"[object DataView]";case Ji:return"[object Map]";case Yi:return"[object Promise]";case Qi:return"[object Set]";case Xi:return"[object WeakMap]"}return t});var go=ui?_u:Vu,yo=Ce(co),bo=Si||function(n,t){return $n.setTimeout(n,t)},xo=Ce(ao),jo=function(n){n=cu(n,function(n){return 500===t.size&&t.clear(),n});var t=n.cache;return n}(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(tn,function(n,r,e,u){
t.push(e?u.replace(hn,"$1"):r||n)}),t}),wo=fr(function(n,t){return hu(n)?yt(n,wt(t,1,hu,true)):[]}),mo=fr(function(n,t){var r=Ve(t);return hu(r)&&(r=T),hu(n)?yt(n,wt(t,1,hu,true),ye(r,2)):[]}),Ao=fr(function(n,t){var r=Ve(t);return hu(r)&&(r=T),hu(n)?yt(n,wt(t,1,hu,true),T,r):[]}),Eo=fr(function(n){var t=c(n,Er);return t.length&&t[0]===n[0]?Wt(t):[]}),ko=fr(function(n){var t=Ve(n),r=c(n,Er);return t===Ve(r)?t=T:r.pop(),r.length&&r[0]===n[0]?Wt(r,ye(t,2)):[]}),So=fr(function(n){var t=Ve(n),r=c(n,Er);return(t=typeof t=="function"?t:T)&&r.pop(),
r.length&&r[0]===n[0]?Wt(r,T,t):[]}),Oo=fr(Ke),Io=pe(function(n,t){var r=null==n?0:n.length,e=ht(n,t);return ur(n,c(t,function(n){return Se(n,r)?+n:n}).sort(Wr)),e}),Ro=fr(function(n){return br(wt(n,1,hu,true))}),zo=fr(function(n){var t=Ve(n);return hu(t)&&(t=T),br(wt(n,1,hu,true),ye(t,2))}),Wo=fr(function(n){var t=Ve(n),t=typeof t=="function"?t:T;return br(wt(n,1,hu,true),T,t)}),Bo=fr(function(n,t){return hu(n)?yt(n,t):[]}),Lo=fr(function(n){return mr(i(n,hu))}),Uo=fr(function(n){var t=Ve(n);return hu(t)&&(t=T),
mr(i(n,hu),ye(t,2))}),Co=fr(function(n){var t=Ve(n),t=typeof t=="function"?t:T;return mr(i(n,hu),T,t)}),Do=fr(He),Mo=fr(function(n){var t=n.length,t=1<t?n[t-1]:T,t=typeof t=="function"?(n.pop(),t):T;return Je(n,t)}),To=pe(function(n){function t(t){return ht(t,n)}var r=n.length,e=r?n[0]:0,u=this.__wrapped__;return!(1<r||this.__actions__.length)&&u instanceof Un&&Se(e)?(u=u.slice(e,+e+(r?1:0)),u.__actions__.push({func:Qe,args:[t],thisArg:T}),new On(u,this.__chain__).thru(function(n){return r&&!n.length&&n.push(T),
n})):this.thru(t)}),$o=Tr(function(n,t,r){oi.call(n,r)?++n[r]:st(n,r,1)}),Fo=Gr(Ne),No=Gr(Pe),Po=Tr(function(n,t,r){oi.call(n,r)?n[r].push(t):st(n,r,[t])}),Zo=fr(function(t,r,e){var u=-1,i=typeof r=="function",o=su(t)?Ku(t.length):[];return uo(t,function(t){o[++u]=i?n(r,t,e):Lt(t,r,e)}),o}),qo=Tr(function(n,t,r){st(n,r,t)}),Vo=Tr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Ko=fr(function(n,t){if(null==n)return[];var r=t.length;return 1<r&&Oe(n,t[0],t[1])?t=[]:2<r&&Oe(t[0],t[1],t[2])&&(t=[t[0]]),
Xt(n,wt(t,1),[])}),Go=ki||function(){return $n.Date.now()},Ho=fr(function(n,t,r){var e=1;if(r.length)var u=L(r,de(Ho)),e=32|e;return fe(n,e,t,r,u)}),Jo=fr(function(n,t,r){var e=3;if(r.length)var u=L(r,de(Jo)),e=32|e;return fe(t,e,n,r,u)}),Yo=fr(function(n,t){return dt(n,1,t)}),Qo=fr(function(n,t,r){return dt(n,Su(t)||0,r)});cu.Cache=Fn;var Xo=fr(function(t,r){r=1==r.length&&ff(r[0])?c(r[0],k(ye())):c(wt(r,1),k(ye()));var e=r.length;return fr(function(u){for(var i=-1,o=Ci(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);
return n(t,this,u)})}),nf=fr(function(n,t){return fe(n,32,T,t,L(t,de(nf)))}),tf=fr(function(n,t){return fe(n,64,T,t,L(t,de(tf)))}),rf=pe(function(n,t){return fe(n,256,T,T,T,t)}),ef=ee(It),uf=ee(function(n,t){return n>=t}),of=Ut(function(){return arguments}())?Ut:function(n){return yu(n)&&oi.call(n,"callee")&&!bi.call(n,"callee")},ff=Ku.isArray,cf=Vn?k(Vn):Ct,af=zi||Vu,lf=Kn?k(Kn):Dt,sf=Gn?k(Gn):Tt,hf=Hn?k(Hn):Nt,pf=Jn?k(Jn):Pt,_f=Yn?k(Yn):Zt,vf=ee(Kt),gf=ee(function(n,t){return n<=t}),df=$r(function(n,t){
if(ze(t)||su(t))Cr(t,Wu(t),n);else for(var r in t)oi.call(t,r)&&ot(n,r,t[r])}),yf=$r(function(n,t){Cr(t,Bu(t),n)}),bf=$r(function(n,t,r,e){Cr(t,Bu(t),n,e)}),xf=$r(function(n,t,r,e){Cr(t,Wu(t),n,e)}),jf=pe(ht),wf=fr(function(n,t){n=Qu(n);var r=-1,e=t.length,u=2<e?t[2]:T;for(u&&Oe(t[0],t[1],u)&&(e=1);++r<e;)for(var u=t[r],i=Bu(u),o=-1,f=i.length;++o<f;){var c=i[o],a=n[c];(a===T||lu(a,ei[c])&&!oi.call(n,c))&&(n[c]=u[c])}return n}),mf=fr(function(t){return t.push(T,ae),n(Of,T,t)}),Af=Yr(function(n,t,r){
null!=t&&typeof t.toString!="function"&&(t=ai.call(t)),n[t]=r},Tu($u)),Ef=Yr(function(n,t,r){null!=t&&typeof t.toString!="function"&&(t=ai.call(t)),oi.call(n,t)?n[t].push(r):n[t]=[r]},ye),kf=fr(Lt),Sf=$r(function(n,t,r){Yt(n,t,r)}),Of=$r(function(n,t,r,e){Yt(n,t,r,e)}),If=pe(function(n,t){var r={};if(null==n)return r;var e=false;t=c(t,function(t){return t=Sr(t,n),e||(e=1<t.length),t}),Cr(n,ve(n),r),e&&(r=_t(r,7,le));for(var u=t.length;u--;)xr(r,t[u]);return r}),Rf=pe(function(n,t){return null==n?{}:nr(n,t);
}),zf=oe(Wu),Wf=oe(Bu),Bf=qr(function(n,t,r){return t=t.toLowerCase(),n+(r?Cu(t):t)}),Lf=qr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Uf=qr(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),Cf=Zr("toLowerCase"),Df=qr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Mf=qr(function(n,t,r){return n+(r?" ":"")+$f(t)}),Tf=qr(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),$f=Zr("toUpperCase"),Ff=fr(function(t,r){try{return n(t,T,r)}catch(n){return pu(n)?n:new Hu(n)}}),Nf=pe(function(n,t){
return r(t,function(t){t=Me(t),st(n,t,Ho(n[t],n))}),n}),Pf=Hr(),Zf=Hr(true),qf=fr(function(n,t){return function(r){return Lt(r,n,t)}}),Vf=fr(function(n,t){return function(r){return Lt(n,r,t)}}),Kf=Xr(c),Gf=Xr(u),Hf=Xr(h),Jf=re(),Yf=re(true),Qf=Qr(function(n,t){return n+t},0),Xf=ie("ceil"),nc=Qr(function(n,t){return n/t},1),tc=ie("floor"),rc=Qr(function(n,t){return n*t},1),ec=ie("round"),uc=Qr(function(n,t){return n-t},0);return An.after=function(n,t){if(typeof t!="function")throw new ti("Expected a function");
return n=Eu(n),function(){if(1>--n)return t.apply(this,arguments)}},An.ary=eu,An.assign=df,An.assignIn=yf,An.assignInWith=bf,An.assignWith=xf,An.at=jf,An.before=uu,An.bind=Ho,An.bindAll=Nf,An.bindKey=Jo,An.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return ff(n)?n:[n]},An.chain=Ye,An.chunk=function(n,t,r){if(t=(r?Oe(n,t,r):t===T)?1:Ui(Eu(t),0),r=null==n?0:n.length,!r||1>t)return[];for(var e=0,u=0,i=Ku(Oi(r/t));e<r;)i[u++]=hr(n,e,e+=t);return i},An.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){
var i=n[t];i&&(u[e++]=i)}return u},An.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Ku(n-1),r=arguments[0];n--;)t[n-1]=arguments[n];return a(ff(r)?Ur(r):[r],wt(t,1))},An.cond=function(t){var r=null==t?0:t.length,e=ye();return t=r?c(t,function(n){if("function"!=typeof n[1])throw new ti("Expected a function");return[e(n[0]),n[1]]}):[],fr(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e)}})},An.conforms=function(n){return vt(_t(n,1))},An.constant=Tu,
An.countBy=$o,An.create=function(n,t){var r=eo(n);return null==t?r:at(r,t)},An.curry=iu,An.curryRight=ou,An.debounce=fu,An.defaults=wf,An.defaultsDeep=mf,An.defer=Yo,An.delay=Qo,An.difference=wo,An.differenceBy=mo,An.differenceWith=Ao,An.drop=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Eu(t),hr(n,0>t?0:t,e)):[]},An.dropRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Eu(t),t=e-t,hr(n,0,0>t?0:t)):[]},An.dropRightWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),true,true):[];
},An.dropWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),true):[]},An.fill=function(n,t,r,e){var u=null==n?0:n.length;if(!u)return[];for(r&&typeof r!="number"&&Oe(n,t,r)&&(r=0,e=u),u=n.length,r=Eu(r),0>r&&(r=-r>u?0:u+r),e=e===T||e>u?u:Eu(e),0>e&&(e+=u),e=r>e?0:ku(e);r<e;)n[r++]=t;return n},An.filter=function(n,t){return(ff(n)?i:jt)(n,ye(t,3))},An.flatMap=function(n,t){return wt(ru(n,t),1)},An.flatMapDeep=function(n,t){return wt(ru(n,t),$)},An.flatMapDepth=function(n,t,r){return r=r===T?1:Eu(r),
wt(ru(n,t),r)},An.flatten=Ze,An.flattenDeep=function(n){return(null==n?0:n.length)?wt(n,$):[]},An.flattenDepth=function(n,t){return null!=n&&n.length?(t=t===T?1:Eu(t),wt(n,t)):[]},An.flip=function(n){return fe(n,512)},An.flow=Pf,An.flowRight=Zf,An.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},An.functions=function(n){return null==n?[]:Et(n,Wu(n))},An.functionsIn=function(n){return null==n?[]:Et(n,Bu(n))},An.groupBy=Po,An.initial=function(n){
return(null==n?0:n.length)?hr(n,0,-1):[]},An.intersection=Eo,An.intersectionBy=ko,An.intersectionWith=So,An.invert=Af,An.invertBy=Ef,An.invokeMap=Zo,An.iteratee=Fu,An.keyBy=qo,An.keys=Wu,An.keysIn=Bu,An.map=ru,An.mapKeys=function(n,t){var r={};return t=ye(t,3),mt(n,function(n,e,u){st(r,t(n,e,u),n)}),r},An.mapValues=function(n,t){var r={};return t=ye(t,3),mt(n,function(n,e,u){st(r,e,t(n,e,u))}),r},An.matches=function(n){return Ht(_t(n,1))},An.matchesProperty=function(n,t){return Jt(n,_t(t,1))},An.memoize=cu,
An.merge=Sf,An.mergeWith=Of,An.method=qf,An.methodOf=Vf,An.mixin=Nu,An.negate=au,An.nthArg=function(n){return n=Eu(n),fr(function(t){return Qt(t,n)})},An.omit=If,An.omitBy=function(n,t){return Lu(n,au(ye(t)))},An.once=function(n){return uu(2,n)},An.orderBy=function(n,t,r,e){return null==n?[]:(ff(t)||(t=null==t?[]:[t]),r=e?T:r,ff(r)||(r=null==r?[]:[r]),Xt(n,t,r))},An.over=Kf,An.overArgs=Xo,An.overEvery=Gf,An.overSome=Hf,An.partial=nf,An.partialRight=tf,An.partition=Vo,An.pick=Rf,An.pickBy=Lu,An.property=Zu,
An.propertyOf=function(n){return function(t){return null==n?T:kt(n,t)}},An.pull=Oo,An.pullAll=Ke,An.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?er(n,t,ye(r,2)):n},An.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?er(n,t,T,r):n},An.pullAt=Io,An.range=Jf,An.rangeRight=Yf,An.rearg=rf,An.reject=function(n,t){return(ff(n)?i:jt)(n,au(ye(t,3)))},An.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=ye(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),
u.push(e))}return ur(n,u),r},An.rest=function(n,t){if(typeof n!="function")throw new ti("Expected a function");return t=t===T?t:Eu(t),fr(n,t)},An.reverse=Ge,An.sampleSize=function(n,t,r){return t=(r?Oe(n,t,r):t===T)?1:Eu(t),(ff(n)?et:ar)(n,t)},An.set=function(n,t,r){return null==n?n:lr(n,t,r)},An.setWith=function(n,t,r,e){return e=typeof e=="function"?e:T,null==n?n:lr(n,t,r,e)},An.shuffle=function(n){return(ff(n)?ut:sr)(n)},An.slice=function(n,t,r){var e=null==n?0:n.length;return e?(r&&typeof r!="number"&&Oe(n,t,r)?(t=0,
r=e):(t=null==t?0:Eu(t),r=r===T?e:Eu(r)),hr(n,t,r)):[]},An.sortBy=Ko,An.sortedUniq=function(n){return n&&n.length?gr(n):[]},An.sortedUniqBy=function(n,t){return n&&n.length?gr(n,ye(t,2)):[]},An.split=function(n,t,r){return r&&typeof r!="number"&&Oe(n,t,r)&&(t=r=T),r=r===T?4294967295:r>>>0,r?(n=Iu(n))&&(typeof t=="string"||null!=t&&!hf(t))&&(t=yr(t),!t&&Rn.test(n))?Or(M(n),0,r):n.split(t,r):[]},An.spread=function(t,r){if(typeof t!="function")throw new ti("Expected a function");return r=null==r?0:Ui(Eu(r),0),
fr(function(e){var u=e[r];return e=Or(e,0,r),u&&a(e,u),n(t,this,e)})},An.tail=function(n){var t=null==n?0:n.length;return t?hr(n,1,t):[]},An.take=function(n,t,r){return n&&n.length?(t=r||t===T?1:Eu(t),hr(n,0,0>t?0:t)):[]},An.takeRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Eu(t),t=e-t,hr(n,0>t?0:t,e)):[]},An.takeRightWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),false,true):[]},An.takeWhile=function(n,t){return n&&n.length?jr(n,ye(t,3)):[]},An.tap=function(n,t){return t(n),
n},An.throttle=function(n,t,r){var e=true,u=true;if(typeof n!="function")throw new ti("Expected a function");return du(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),fu(n,t,{leading:e,maxWait:t,trailing:u})},An.thru=Qe,An.toArray=mu,An.toPairs=zf,An.toPairsIn=Wf,An.toPath=function(n){return ff(n)?c(n,Me):wu(n)?[n]:Ur(jo(Iu(n)))},An.toPlainObject=Ou,An.transform=function(n,t,e){var u=ff(n),i=u||af(n)||_f(n);if(t=ye(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:du(n)&&_u(o)?eo(di(n)):{};
}return(i?r:mt)(n,function(n,r,u){return t(e,n,r,u)}),e},An.unary=function(n){return eu(n,1)},An.union=Ro,An.unionBy=zo,An.unionWith=Wo,An.uniq=function(n){return n&&n.length?br(n):[]},An.uniqBy=function(n,t){return n&&n.length?br(n,ye(t,2)):[]},An.uniqWith=function(n,t){return t=typeof t=="function"?t:T,n&&n.length?br(n,T,t):[]},An.unset=function(n,t){return null==n||xr(n,t)},An.unzip=He,An.unzipWith=Je,An.update=function(n,t,r){return null==n?n:lr(n,t,kr(r)(kt(n,t)),void 0)},An.updateWith=function(n,t,r,e){
return e=typeof e=="function"?e:T,null!=n&&(n=lr(n,t,kr(r)(kt(n,t)),e)),n},An.values=Uu,An.valuesIn=function(n){return null==n?[]:S(n,Bu(n))},An.without=Bo,An.words=Mu,An.wrap=function(n,t){return nf(kr(t),n)},An.xor=Lo,An.xorBy=Uo,An.xorWith=Co,An.zip=Do,An.zipObject=function(n,t){return Ar(n||[],t||[],ot)},An.zipObjectDeep=function(n,t){return Ar(n||[],t||[],lr)},An.zipWith=Mo,An.entries=zf,An.entriesIn=Wf,An.extend=yf,An.extendWith=bf,Nu(An,An),An.add=Qf,An.attempt=Ff,An.camelCase=Bf,An.capitalize=Cu,
An.ceil=Xf,An.clamp=function(n,t,r){return r===T&&(r=t,t=T),r!==T&&(r=Su(r),r=r===r?r:0),t!==T&&(t=Su(t),t=t===t?t:0),pt(Su(n),t,r)},An.clone=function(n){return _t(n,4)},An.cloneDeep=function(n){return _t(n,5)},An.cloneDeepWith=function(n,t){return t=typeof t=="function"?t:T,_t(n,5,t)},An.cloneWith=function(n,t){return t=typeof t=="function"?t:T,_t(n,4,t)},An.conformsTo=function(n,t){return null==t||gt(n,t,Wu(t))},An.deburr=Du,An.defaultTo=function(n,t){return null==n||n!==n?t:n},An.divide=nc,An.endsWith=function(n,t,r){
n=Iu(n),t=yr(t);var e=n.length,e=r=r===T?e:pt(Eu(r),0,e);return r-=t.length,0<=r&&n.slice(r,e)==t},An.eq=lu,An.escape=function(n){return(n=Iu(n))&&H.test(n)?n.replace(K,nt):n},An.escapeRegExp=function(n){return(n=Iu(n))&&en.test(n)?n.replace(rn,"\\$&"):n},An.every=function(n,t,r){var e=ff(n)?u:bt;return r&&Oe(n,t,r)&&(t=T),e(n,ye(t,3))},An.find=Fo,An.findIndex=Ne,An.findKey=function(n,t){return p(n,ye(t,3),mt)},An.findLast=No,An.findLastIndex=Pe,An.findLastKey=function(n,t){return p(n,ye(t,3),At);
},An.floor=tc,An.forEach=nu,An.forEachRight=tu,An.forIn=function(n,t){return null==n?n:oo(n,ye(t,3),Bu)},An.forInRight=function(n,t){return null==n?n:fo(n,ye(t,3),Bu)},An.forOwn=function(n,t){return n&&mt(n,ye(t,3))},An.forOwnRight=function(n,t){return n&&At(n,ye(t,3))},An.get=Ru,An.gt=ef,An.gte=uf,An.has=function(n,t){return null!=n&&we(n,t,Rt)},An.hasIn=zu,An.head=qe,An.identity=$u,An.includes=function(n,t,r,e){return n=su(n)?n:Uu(n),r=r&&!e?Eu(r):0,e=n.length,0>r&&(r=Ui(e+r,0)),ju(n)?r<=e&&-1<n.indexOf(t,r):!!e&&-1<v(n,t,r);
},An.indexOf=function(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Eu(r),0>r&&(r=Ui(e+r,0)),v(n,t,r)):-1},An.inRange=function(n,t,r){return t=Au(t),r===T?(r=t,t=0):r=Au(r),n=Su(n),n>=Ci(t,r)&&n<Ui(t,r)},An.invoke=kf,An.isArguments=of,An.isArray=ff,An.isArrayBuffer=cf,An.isArrayLike=su,An.isArrayLikeObject=hu,An.isBoolean=function(n){return true===n||false===n||yu(n)&&"[object Boolean]"==Ot(n)},An.isBuffer=af,An.isDate=lf,An.isElement=function(n){return yu(n)&&1===n.nodeType&&!xu(n)},An.isEmpty=function(n){
if(null==n)return true;if(su(n)&&(ff(n)||typeof n=="string"||typeof n.splice=="function"||af(n)||_f(n)||of(n)))return!n.length;var t=vo(n);if("[object Map]"==t||"[object Set]"==t)return!n.size;if(ze(n))return!Vt(n).length;for(var r in n)if(oi.call(n,r))return false;return true},An.isEqual=function(n,t){return Mt(n,t)},An.isEqualWith=function(n,t,r){var e=(r=typeof r=="function"?r:T)?r(n,t):T;return e===T?Mt(n,t,T,r):!!e},An.isError=pu,An.isFinite=function(n){return typeof n=="number"&&Wi(n)},An.isFunction=_u,
An.isInteger=vu,An.isLength=gu,An.isMap=sf,An.isMatch=function(n,t){return n===t||$t(n,t,xe(t))},An.isMatchWith=function(n,t,r){return r=typeof r=="function"?r:T,$t(n,t,xe(t),r)},An.isNaN=function(n){return bu(n)&&n!=+n},An.isNative=function(n){if(go(n))throw new Hu("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ft(n)},An.isNil=function(n){return null==n},An.isNull=function(n){return null===n},An.isNumber=bu,An.isObject=du,An.isObjectLike=yu,An.isPlainObject=xu,An.isRegExp=hf,
An.isSafeInteger=function(n){return vu(n)&&-9007199254740991<=n&&9007199254740991>=n},An.isSet=pf,An.isString=ju,An.isSymbol=wu,An.isTypedArray=_f,An.isUndefined=function(n){return n===T},An.isWeakMap=function(n){return yu(n)&&"[object WeakMap]"==vo(n)},An.isWeakSet=function(n){return yu(n)&&"[object WeakSet]"==Ot(n)},An.join=function(n,t){return null==n?"":Bi.call(n,t)},An.kebabCase=Lf,An.last=Ve,An.lastIndexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;if(r!==T&&(u=Eu(r),u=0>u?Ui(e+u,0):Ci(u,e-1)),
t===t){for(r=u+1;r--&&n[r]!==t;);n=r}else n=_(n,d,u,true);return n},An.lowerCase=Uf,An.lowerFirst=Cf,An.lt=vf,An.lte=gf,An.max=function(n){return n&&n.length?xt(n,$u,It):T},An.maxBy=function(n,t){return n&&n.length?xt(n,ye(t,2),It):T},An.mean=function(n){return y(n,$u)},An.meanBy=function(n,t){return y(n,ye(t,2))},An.min=function(n){return n&&n.length?xt(n,$u,Kt):T},An.minBy=function(n,t){return n&&n.length?xt(n,ye(t,2),Kt):T},An.stubArray=qu,An.stubFalse=Vu,An.stubObject=function(){return{}},An.stubString=function(){
return""},An.stubTrue=function(){return true},An.multiply=rc,An.nth=function(n,t){return n&&n.length?Qt(n,Eu(t)):T},An.noConflict=function(){return $n._===this&&($n._=si),this},An.noop=Pu,An.now=Go,An.pad=function(n,t,r){n=Iu(n);var e=(t=Eu(t))?D(n):0;return!t||e>=t?n:(t=(t-e)/2,ne(Ii(t),r)+n+ne(Oi(t),r))},An.padEnd=function(n,t,r){n=Iu(n);var e=(t=Eu(t))?D(n):0;return t&&e<t?n+ne(t-e,r):n},An.padStart=function(n,t,r){n=Iu(n);var e=(t=Eu(t))?D(n):0;return t&&e<t?ne(t-e,r)+n:n},An.parseInt=function(n,t,r){
return r||null==t?t=0:t&&(t=+t),Mi(Iu(n).replace(on,""),t||0)},An.random=function(n,t,r){if(r&&typeof r!="boolean"&&Oe(n,t,r)&&(t=r=T),r===T&&(typeof t=="boolean"?(r=t,t=T):typeof n=="boolean"&&(r=n,n=T)),n===T&&t===T?(n=0,t=1):(n=Au(n),t===T?(t=n,n=0):t=Au(t)),n>t){var e=n;n=t,t=e}return r||n%1||t%1?(r=Ti(),Ci(n+r*(t-n+Cn("1e-"+((r+"").length-1))),t)):ir(n,t)},An.reduce=function(n,t,r){var e=ff(n)?l:j,u=3>arguments.length;return e(n,ye(t,4),r,u,uo)},An.reduceRight=function(n,t,r){var e=ff(n)?s:j,u=3>arguments.length;
return e(n,ye(t,4),r,u,io)},An.repeat=function(n,t,r){return t=(r?Oe(n,t,r):t===T)?1:Eu(t),or(Iu(n),t)},An.replace=function(){var n=arguments,t=Iu(n[0]);return 3>n.length?t:t.replace(n[1],n[2])},An.result=function(n,t,r){t=Sr(t,n);var e=-1,u=t.length;for(u||(u=1,n=T);++e<u;){var i=null==n?T:n[Me(t[e])];i===T&&(e=u,i=r),n=_u(i)?i.call(n):i}return n},An.round=ec,An.runInContext=x,An.sample=function(n){return(ff(n)?Qn:cr)(n)},An.size=function(n){if(null==n)return 0;if(su(n))return ju(n)?D(n):n.length;
var t=vo(n);return"[object Map]"==t||"[object Set]"==t?n.size:Vt(n).length},An.snakeCase=Df,An.some=function(n,t,r){var e=ff(n)?h:pr;return r&&Oe(n,t,r)&&(t=T),e(n,ye(t,3))},An.sortedIndex=function(n,t){return _r(n,t)},An.sortedIndexBy=function(n,t,r){return vr(n,t,ye(r,2))},An.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=_r(n,t);if(e<r&&lu(n[e],t))return e}return-1},An.sortedLastIndex=function(n,t){return _r(n,t,true)},An.sortedLastIndexBy=function(n,t,r){return vr(n,t,ye(r,2),true);
},An.sortedLastIndexOf=function(n,t){if(null==n?0:n.length){var r=_r(n,t,true)-1;if(lu(n[r],t))return r}return-1},An.startCase=Mf,An.startsWith=function(n,t,r){return n=Iu(n),r=null==r?0:pt(Eu(r),0,n.length),t=yr(t),n.slice(r,r+t.length)==t},An.subtract=uc,An.sum=function(n){return n&&n.length?m(n,$u):0},An.sumBy=function(n,t){return n&&n.length?m(n,ye(t,2)):0},An.template=function(n,t,r){var e=An.templateSettings;r&&Oe(n,t,r)&&(t=T),n=Iu(n),t=bf({},t,e,ce),r=bf({},t.imports,e.imports,ce);var u,i,o=Wu(r),f=S(r,o),c=0;
r=t.interpolate||jn;var a="__p+='";r=Xu((t.escape||jn).source+"|"+r.source+"|"+(r===Q?pn:jn).source+"|"+(t.evaluate||jn).source+"|$","g");var l=oi.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";if(n.replace(r,function(t,r,e,o,f,l){return e||(e=o),a+=n.slice(c,l).replace(wn,z),r&&(u=true,a+="'+__e("+r+")+'"),f&&(i=true,a+="';"+f+";\n__p+='"),e&&(a+="'+((__t=("+e+"))==null?'':__t)+'"),c=l+t.length,t}),a+="';",(t=oi.call(t,"variable")&&t.variable)||(a="with(obj){"+a+"}"),
a=(i?a.replace(P,""):a).replace(Z,"$1").replace(q,"$1;"),a="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(u?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+a+"return __p}",t=Ff(function(){return Ju(o,l+"return "+a).apply(T,f)}),t.source=a,pu(t))throw t;return t},An.times=function(n,t){if(n=Eu(n),1>n||9007199254740991<n)return[];var r=4294967295,e=Ci(n,4294967295);for(t=ye(t),n-=4294967295,e=A(e,t);++r<n;)t(r);return e},An.toFinite=Au,
An.toInteger=Eu,An.toLength=ku,An.toLower=function(n){return Iu(n).toLowerCase()},An.toNumber=Su,An.toSafeInteger=function(n){return n?pt(Eu(n),-9007199254740991,9007199254740991):0===n?n:0},An.toString=Iu,An.toUpper=function(n){return Iu(n).toUpperCase()},An.trim=function(n,t,r){return(n=Iu(n))&&(r||t===T)?n.replace(un,""):n&&(t=yr(t))?(n=M(n),r=M(t),t=I(n,r),r=R(n,r)+1,Or(n,t,r).join("")):n},An.trimEnd=function(n,t,r){return(n=Iu(n))&&(r||t===T)?n.replace(fn,""):n&&(t=yr(t))?(n=M(n),t=R(n,M(t))+1,
Or(n,0,t).join("")):n},An.trimStart=function(n,t,r){return(n=Iu(n))&&(r||t===T)?n.replace(on,""):n&&(t=yr(t))?(n=M(n),t=I(n,M(t)),Or(n,t).join("")):n},An.truncate=function(n,t){var r=30,e="...";if(du(t))var u="separator"in t?t.separator:u,r="length"in t?Eu(t.length):r,e="omission"in t?yr(t.omission):e;n=Iu(n);var i=n.length;if(Rn.test(n))var o=M(n),i=o.length;if(r>=i)return n;if(i=r-D(e),1>i)return e;if(r=o?Or(o,0,i).join(""):n.slice(0,i),u===T)return r+e;if(o&&(i+=r.length-i),hf(u)){if(n.slice(i).search(u)){
var f=r;for(u.global||(u=Xu(u.source,Iu(_n.exec(u))+"g")),u.lastIndex=0;o=u.exec(f);)var c=o.index;r=r.slice(0,c===T?i:c)}}else n.indexOf(yr(u),i)!=i&&(u=r.lastIndexOf(u),-1<u&&(r=r.slice(0,u)));return r+e},An.unescape=function(n){return(n=Iu(n))&&G.test(n)?n.replace(V,tt):n},An.uniqueId=function(n){var t=++fi;return Iu(n)+t},An.upperCase=Tf,An.upperFirst=$f,An.each=nu,An.eachRight=tu,An.first=qe,Nu(An,function(){var n={};return mt(An,function(t,r){oi.call(An.prototype,r)||(n[r]=t)}),n}(),{chain:false
}),An.VERSION="4.17.15",r("bind bindKey curry curryRight partial partialRight".split(" "),function(n){An[n].placeholder=An}),r(["drop","take"],function(n,t){Un.prototype[n]=function(r){r=r===T?1:Ui(Eu(r),0);var e=this.__filtered__&&!t?new Un(this):this.clone();return e.__filtered__?e.__takeCount__=Ci(r,e.__takeCount__):e.__views__.push({size:Ci(r,4294967295),type:n+(0>e.__dir__?"Right":"")}),e},Un.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),r(["filter","map","takeWhile"],function(n,t){
var r=t+1,e=1==r||3==r;Un.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:ye(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r(["head","last"],function(n,t){var r="take"+(t?"Right":"");Un.prototype[n]=function(){return this[r](1).value()[0]}}),r(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");Un.prototype[n]=function(){return this.__filtered__?new Un(this):this[r](1)}}),Un.prototype.compact=function(){return this.filter($u)},Un.prototype.find=function(n){
return this.filter(n).head()},Un.prototype.findLast=function(n){return this.reverse().find(n)},Un.prototype.invokeMap=fr(function(n,t){return typeof n=="function"?new Un(this):this.map(function(r){return Lt(r,n,t)})}),Un.prototype.reject=function(n){return this.filter(au(ye(n)))},Un.prototype.slice=function(n,t){n=Eu(n);var r=this;return r.__filtered__&&(0<n||0>t)?new Un(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==T&&(t=Eu(t),r=0>t?r.dropRight(-t):r.take(t-n)),r)},Un.prototype.takeRightWhile=function(n){
return this.reverse().takeWhile(n).reverse()},Un.prototype.toArray=function(){return this.take(4294967295)},mt(Un.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=An[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);u&&(An.prototype[t]=function(){function t(n){return n=u.apply(An,a([n],f)),e&&h?n[0]:n}var o=this.__wrapped__,f=e?[1]:arguments,c=o instanceof Un,l=f[0],s=c||ff(o);s&&r&&typeof l=="function"&&1!=l.length&&(c=s=false);var h=this.__chain__,p=!!this.__actions__.length,l=i&&!h,c=c&&!p;
return!i&&s?(o=c?o:new Un(this),o=n.apply(o,f),o.__actions__.push({func:Qe,args:[t],thisArg:T}),new On(o,h)):l&&c?n.apply(this,f):(o=this.thru(t),l?e?o.value()[0]:o.value():o)})}),r("pop push shift sort splice unshift".split(" "),function(n){var t=ri[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);An.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(ff(u)?u:[],n)}return this[r](function(r){return t.apply(ff(r)?r:[],n)});
}}),mt(Un.prototype,function(n,t){var r=An[t];if(r){var e=r.name+"";oi.call(Gi,e)||(Gi[e]=[]),Gi[e].push({name:t,func:r})}}),Gi[Jr(T,2).name]=[{name:"wrapper",func:T}],Un.prototype.clone=function(){var n=new Un(this.__wrapped__);return n.__actions__=Ur(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Ur(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Ur(this.__views__),n},Un.prototype.reverse=function(){if(this.__filtered__){var n=new Un(this);
n.__dir__=-1,n.__filtered__=true}else n=this.clone(),n.__dir__*=-1;return n},Un.prototype.value=function(){var n,t=this.__wrapped__.value(),r=this.__dir__,e=ff(t),u=0>r,i=e?t.length:0;n=i;for(var o=this.__views__,f=0,c=-1,a=o.length;++c<a;){var l=o[c],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":n-=s;break;case"take":n=Ci(n,f+s);break;case"takeRight":f=Ui(f,n-s)}}if(n={start:f,end:n},o=n.start,f=n.end,n=f-o,o=u?f:o-1,f=this.__iteratees__,c=f.length,a=0,l=Ci(n,this.__takeCount__),!e||!u&&i==n&&l==n)return wr(t,this.__actions__);
e=[];n:for(;n--&&a<l;){for(o+=r,u=-1,i=t[o];++u<c;){var h=f[u],s=h.type,h=(0,h.iteratee)(i);if(2==s)i=h;else if(!h){if(1==s)continue n;break n}}e[a++]=i}return e},An.prototype.at=To,An.prototype.chain=function(){return Ye(this)},An.prototype.commit=function(){return new On(this.value(),this.__chain__)},An.prototype.next=function(){this.__values__===T&&(this.__values__=mu(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?T:this.__values__[this.__index__++]}},An.prototype.plant=function(n){
for(var t,r=this;r instanceof En;){var e=Fe(r);e.__index__=0,e.__values__=T,t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},An.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Un?(this.__actions__.length&&(n=new Un(this)),n=n.reverse(),n.__actions__.push({func:Qe,args:[Ge],thisArg:T}),new On(n,this.__chain__)):this.thru(Ge)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return wr(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,
wi&&(An.prototype[wi]=Xe),An}();typeof define=="function"&&typeof define.amd=="object"&&define.amd?($n._=rt, define(function(){return rt})):Nn?((Nn.exports=rt)._=rt,Fn._=rt):$n._=rt}).call(this);
/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof module&&module.exports?module.exports=b():a.numeral=b()}(this,function(){function a(a,b){this._input=a,this._value=b}var b,c,d="2.0.6",e={},f={},g={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},h={currentLocale:g.currentLocale,zeroFormat:g.zeroFormat,nullFormat:g.nullFormat,defaultFormat:g.defaultFormat,scalePercentBy100:g.scalePercentBy100};return b=function(d){var f,g,i,j;if(b.isNumeral(d))f=d.value();else if(0===d||"undefined"==typeof d)f=0;else if(null===d||c.isNaN(d))f=null;else if("string"==typeof d)if(h.zeroFormat&&d===h.zeroFormat)f=0;else if(h.nullFormat&&d===h.nullFormat||!d.replace(/[^0-9]+/g,"").length)f=null;else{for(g in e)if(j="function"==typeof e[g].regexps.unformat?e[g].regexps.unformat():e[g].regexps.unformat,j&&d.match(j)){i=e[g].unformat;break}i=i||b._.stringToNumber,f=i(d)}else f=Number(d)||null;return new a(d,f)},b.version=d,b.isNumeral=function(b){return b instanceof a},b._=c={numberToFormat:function(a,c,d){var e,g,h,i,j,k,l,m=f[b.options.currentLocale],n=!1,o=!1,p=0,q="",r=1e12,s=1e9,t=1e6,u=1e3,v="",w=!1;if(a=a||0,g=Math.abs(a),b._.includes(c,"(")?(n=!0,c=c.replace(/[\(|\)]/g,"")):(b._.includes(c,"+")||b._.includes(c,"-"))&&(j=b._.includes(c,"+")?c.indexOf("+"):0>a?c.indexOf("-"):-1,c=c.replace(/[\+|\-]/g,"")),b._.includes(c,"a")&&(e=c.match(/a(k|m|b|t)?/),e=e?e[1]:!1,b._.includes(c," a")&&(q=" "),c=c.replace(new RegExp(q+"a[kmbt]?"),""),g>=r&&!e||"t"===e?(q+=m.abbreviations.trillion,a/=r):r>g&&g>=s&&!e||"b"===e?(q+=m.abbreviations.billion,a/=s):s>g&&g>=t&&!e||"m"===e?(q+=m.abbreviations.million,a/=t):(t>g&&g>=u&&!e||"k"===e)&&(q+=m.abbreviations.thousand,a/=u)),b._.includes(c,"[.]")&&(o=!0,c=c.replace("[.]",".")),h=a.toString().split(".")[0],i=c.split(".")[1],k=c.indexOf(","),p=(c.split(".")[0].split(",")[0].match(/0/g)||[]).length,i?(b._.includes(i,"[")?(i=i.replace("]",""),i=i.split("["),v=b._.toFixed(a,i[0].length+i[1].length,d,i[1].length)):v=b._.toFixed(a,i.length,d),h=v.split(".")[0],v=b._.includes(v,".")?m.delimiters.decimal+v.split(".")[1]:"",o&&0===Number(v.slice(1))&&(v="")):h=b._.toFixed(a,0,d),q&&!e&&Number(h)>=1e3&&q!==m.abbreviations.trillion)switch(h=String(Number(h)/1e3),q){case m.abbreviations.thousand:q=m.abbreviations.million;break;case m.abbreviations.million:q=m.abbreviations.billion;break;case m.abbreviations.billion:q=m.abbreviations.trillion}if(b._.includes(h,"-")&&(h=h.slice(1),w=!0),h.length<p)for(var x=p-h.length;x>0;x--)h="0"+h;return k>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m.delimiters.thousands)),0===c.indexOf(".")&&(h=""),l=h+v+(q?q:""),n?l=(n&&w?"(":"")+l+(n&&w?")":""):j>=0?l=0===j?(w?"-":"+")+l:l+(w?"-":"+"):w&&(l="-"+l),l},stringToNumber:function(a){var b,c,d,e=f[h.currentLocale],g=a,i={thousand:3,million:6,billion:9,trillion:12};if(h.zeroFormat&&a===h.zeroFormat)c=0;else if(h.nullFormat&&a===h.nullFormat||!a.replace(/[^0-9]+/g,"").length)c=null;else{c=1,"."!==e.delimiters.decimal&&(a=a.replace(/\./g,"").replace(e.delimiters.decimal,"."));for(b in i)if(d=new RegExp("[^a-zA-Z]"+e.abbreviations[b]+"(?:\\)|(\\"+e.currency.symbol+")?(?:\\))?)?$"),g.match(d)){c*=Math.pow(10,i[b]);break}c*=(a.split("-").length+Math.min(a.split("(").length-1,a.split(")").length-1))%2?1:-1,a=a.replace(/[^0-9\.]+/g,""),c*=Number(a)}return c},isNaN:function(a){return"number"==typeof a&&isNaN(a)},includes:function(a,b){return-1!==a.indexOf(b)},insert:function(a,b,c){return a.slice(0,c)+b+a.slice(c)},reduce:function(a,b){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof b)throw new TypeError(b+" is not a function");var c,d=Object(a),e=d.length>>>0,f=0;if(3===arguments.length)c=arguments[2];else{for(;e>f&&!(f in d);)f++;if(f>=e)throw new TypeError("Reduce of empty array with no initial value");c=d[f++]}for(;e>f;f++)f in d&&(c=b(c,d[f],f,d));return c},multiplier:function(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)},correctionFactor:function(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var d=c.multiplier(b);return a>d?a:d},1)},toFixed:function(a,b,c,d){var e,f,g,h,i=a.toString().split("."),j=b-(d||0);return e=2===i.length?Math.min(Math.max(i[1].length,j),b):j,g=Math.pow(10,e),h=(c(a+"e+"+e)/g).toFixed(e),d>b-e&&(f=new RegExp("\\.?0{1,"+(d-(b-e))+"}$"),h=h.replace(f,"")),h}},b.options=h,b.formats=e,b.locales=f,b.locale=function(a){return a&&(h.currentLocale=a.toLowerCase()),h.currentLocale},b.localeData=function(a){if(!a)return f[h.currentLocale];if(a=a.toLowerCase(),!f[a])throw new Error("Unknown locale : "+a);return f[a]},b.reset=function(){for(var a in g)h[a]=g[a]},b.zeroFormat=function(a){h.zeroFormat="string"==typeof a?a:null},b.nullFormat=function(a){h.nullFormat="string"==typeof a?a:null},b.defaultFormat=function(a){h.defaultFormat="string"==typeof a?a:"0.0"},b.register=function(a,b,c){if(b=b.toLowerCase(),this[a+"s"][b])throw new TypeError(b+" "+a+" already registered.");return this[a+"s"][b]=c,c},b.validate=function(a,c){var d,e,f,g,h,i,j,k;if("string"!=typeof a&&(a+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",a)),a=a.trim(),a.match(/^\d+$/))return!0;if(""===a)return!1;try{j=b.localeData(c)}catch(l){j=b.localeData(b.locale())}return f=j.currency.symbol,h=j.abbreviations,d=j.delimiters.decimal,e="."===j.delimiters.thousands?"\\.":j.delimiters.thousands,k=a.match(/^[^\d]+/),null!==k&&(a=a.substr(1),k[0]!==f)?!1:(k=a.match(/[^\d]+$/),null!==k&&(a=a.slice(0,-1),k[0]!==h.thousand&&k[0]!==h.million&&k[0]!==h.billion&&k[0]!==h.trillion)?!1:(i=new RegExp(e+"{2}"),a.match(/[^\d.,]/g)?!1:(g=a.split(d),g.length>2?!1:g.length<2?!!g[0].match(/^\d+.*\d$/)&&!g[0].match(i):1===g[0].length?!!g[0].match(/^\d+$/)&&!g[0].match(i)&&!!g[1].match(/^\d+$/):!!g[0].match(/^\d+.*\d$/)&&!g[0].match(i)&&!!g[1].match(/^\d+$/))))},b.fn=a.prototype={clone:function(){return b(this)},format:function(a,c){var d,f,g,i=this._value,j=a||h.defaultFormat;if(c=c||Math.round,0===i&&null!==h.zeroFormat)f=h.zeroFormat;else if(null===i&&null!==h.nullFormat)f=h.nullFormat;else{for(d in e)if(j.match(e[d].regexps.format)){g=e[d].format;break}g=g||b._.numberToFormat,f=g(i,j,c)}return f},value:function(){return this._value},input:function(){return this._input},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b,c,e){return a+Math.round(d*b)}var d=c.correctionFactor.call(null,this._value,a);return this._value=c.reduce([this._value,a],b,0)/d,this},subtract:function(a){function b(a,b,c,e){return a-Math.round(d*b)}var d=c.correctionFactor.call(null,this._value,a);return this._value=c.reduce([a],b,Math.round(this._value*d))/d,this},multiply:function(a){function b(a,b,d,e){var f=c.correctionFactor(a,b);return Math.round(a*f)*Math.round(b*f)/Math.round(f*f)}return this._value=c.reduce([this._value,a],b,1),this},divide:function(a){function b(a,b,d,e){var f=c.correctionFactor(a,b);return Math.round(a*f)/Math.round(b*f)}return this._value=c.reduce([this._value,a],b),this},difference:function(a){return Math.abs(b(this._value).subtract(a).value())}},b.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),function(){b.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(a,c,d){var e,f=b._.includes(c," BPS")?" ":"";return a=1e4*a,c=c.replace(/\s?BPS/,""),e=b._.numberToFormat(a,c,d),b._.includes(e,")")?(e=e.split(""),e.splice(-1,0,f+"BPS"),e=e.join("")):e=e+f+"BPS",e},unformat:function(a){return+(1e-4*b._.stringToNumber(a)).toFixed(15)}})}(),function(){var a={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]},c={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},d=a.suffixes.concat(c.suffixes.filter(function(b){return a.suffixes.indexOf(b)<0})),e=d.join("|");e="("+e.replace("B","B(?!PS)")+")",b.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(e)},format:function(d,e,f){var g,h,i,j,k=b._.includes(e,"ib")?c:a,l=b._.includes(e," b")||b._.includes(e," ib")?" ":"";for(e=e.replace(/\s?i?b/,""),h=0;h<=k.suffixes.length;h++)if(i=Math.pow(k.base,h),j=Math.pow(k.base,h+1),null===d||0===d||d>=i&&j>d){l+=k.suffixes[h],i>0&&(d/=i);break}return g=b._.numberToFormat(d,e,f),g+l},unformat:function(d){var e,f,g=b._.stringToNumber(d);if(g){for(e=a.suffixes.length-1;e>=0;e--){if(b._.includes(d,a.suffixes[e])){f=Math.pow(a.base,e);break}if(b._.includes(d,c.suffixes[e])){f=Math.pow(c.base,e);break}}g*=f||1}return g}})}(),function(){b.register("format","currency",{regexps:{format:/(\$)/},format:function(a,c,d){var e,f,g,h=b.locales[b.options.currentLocale],i={before:c.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:c.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(c=c.replace(/\s?\$\s?/,""),e=b._.numberToFormat(a,c,d),a>=0?(i.before=i.before.replace(/[\-\(]/,""),i.after=i.after.replace(/[\-\)]/,"")):0>a&&!b._.includes(i.before,"-")&&!b._.includes(i.before,"(")&&(i.before="-"+i.before),g=0;g<i.before.length;g++)switch(f=i.before[g]){case"$":e=b._.insert(e,h.currency.symbol,g);break;case" ":e=b._.insert(e," ",g+h.currency.symbol.length-1)}for(g=i.after.length-1;g>=0;g--)switch(f=i.after[g]){case"$":e=g===i.after.length-1?e+h.currency.symbol:b._.insert(e,h.currency.symbol,-(i.after.length-(1+g)));break;case" ":e=g===i.after.length-1?e+" ":b._.insert(e," ",-(i.after.length-(1+g)+h.currency.symbol.length-1))}return e}})}(),function(){b.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(a,c,d){var e,f="number"!=typeof a||b._.isNaN(a)?"0e+0":a.toExponential(),g=f.split("e");return c=c.replace(/e[\+|\-]{1}0/,""),e=b._.numberToFormat(Number(g[0]),c,d),e+"e"+g[1]},unformat:function(a){function c(a,c,d,e){var f=b._.correctionFactor(a,c),g=a*f*(c*f)/(f*f);return g}var d=b._.includes(a,"e+")?a.split("e+"):a.split("e-"),e=Number(d[0]),f=Number(d[1]);return f=b._.includes(a,"e-")?f*=-1:f,b._.reduce([e,Math.pow(10,f)],c,1)}})}(),function(){b.register("format","ordinal",{regexps:{format:/(o)/},format:function(a,c,d){var e,f=b.locales[b.options.currentLocale],g=b._.includes(c," o")?" ":"";return c=c.replace(/\s?o/,""),g+=f.ordinal(a),e=b._.numberToFormat(a,c,d),e+g}})}(),function(){b.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(a,c,d){var e,f=b._.includes(c," %")?" ":"";return b.options.scalePercentBy100&&(a=100*a),c=c.replace(/\s?\%/,""),e=b._.numberToFormat(a,c,d),b._.includes(e,")")?(e=e.split(""),e.splice(-1,0,f+"%"),e=e.join("")):e=e+f+"%",e},unformat:function(a){var c=b._.stringToNumber(a);return b.options.scalePercentBy100?.01*c:c}})}(),function(){b.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(a,b,c){var d=Math.floor(a/60/60),e=Math.floor((a-60*d*60)/60),f=Math.round(a-60*d*60-60*e);return d+":"+(10>e?"0"+e:e)+":"+(10>f?"0"+f:f)},unformat:function(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}})}(),b});
/*! npm.im/object-fit-images 3.2.4 */
var objectFitImages = (function () {
    'use strict';

    var OFI = 'fregante:object-fit-images';
    var propRegex = /(object-fit|object-position)\s*:\s*([-.\w\s%]+)/g;
    var testImg = typeof Image === 'undefined' ? { style: { 'object-position': 1 } } : new Image();
    var supportsObjectFit = 'object-fit' in testImg.style;
    var supportsObjectPosition = 'object-position' in testImg.style;
    var supportsOFI = 'background-size' in testImg.style;
    var supportsCurrentSrc = typeof testImg.currentSrc === 'string';
    var nativeGetAttribute = testImg.getAttribute;
    var nativeSetAttribute = testImg.setAttribute;
    var autoModeEnabled = false;

    function createPlaceholder(w, h) {
        return ("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='" + w + "' height='" + h + "'%3E%3C/svg%3E");
    }

    function polyfillCurrentSrc(el) {
        if (el.srcset && !supportsCurrentSrc && window.picturefill) {
            var pf = window.picturefill._;
            // parse srcset with picturefill where currentSrc isn't available
            if (!el[pf.ns] || !el[pf.ns].evaled) {
                // force synchronous srcset parsing
                pf.fillImg(el, { reselect: true });
            }

            if (!el[pf.ns].curSrc) {
                // force picturefill to parse srcset
                el[pf.ns].supported = false;
                pf.fillImg(el, { reselect: true });
            }

            // retrieve parsed currentSrc, if any
            el.currentSrc = el[pf.ns].curSrc || el.src;
        }
    }

    function getStyle(el) {
        var style = getComputedStyle(el).fontFamily;
        var parsed;
        var props = {};
        while ((parsed = propRegex.exec(style)) !== null) {
            props[parsed[1]] = parsed[2];
        }
        return props;
    }

    function setPlaceholder(img, width, height) {
        // Default: fill width, no height
        var placeholder = createPlaceholder(width || 1, height || 0);

        // Only set placeholder if it's different
        if (nativeGetAttribute.call(img, 'src') !== placeholder) {
            nativeSetAttribute.call(img, 'src', placeholder);
        }
    }

    function onImageReady(img, callback) {
        // naturalWidth is only available when the image headers are loaded,
        // this loop will poll it every 100ms.
        if (img.naturalWidth) {
            callback(img);
        } else {
            setTimeout(onImageReady, 100, img, callback);
        }
    }

    function fixOne(el) {
        var style = getStyle(el);
        var ofi = el[OFI];
        style['object-fit'] = style['object-fit'] || 'fill'; // default value

        // Avoid running where unnecessary, unless OFI had already done its deed
        if (!ofi.img) {
            // fill is the default behavior so no action is necessary
            if (style['object-fit'] === 'fill') {
                return;
            }

            // Where object-fit is supported and object-position isn't (Safari < 10)
            if (
                !ofi.skipTest && // unless user wants to apply regardless of browser support
                supportsObjectFit && // if browser already supports object-fit
                !style['object-position'] // unless object-position is used
            ) {
                return;
            }
        }

        // keep a clone in memory while resetting the original to a blank
        if (!ofi.img) {
            ofi.img = new Image(el.width, el.height);
            ofi.img.srcset = nativeGetAttribute.call(el, "data-ofi-srcset") || el.srcset;
            ofi.img.src = nativeGetAttribute.call(el, "data-ofi-src") || el.src;

            // preserve for any future cloneNode calls
            // https://github.com/fregante/object-fit-images/issues/53
            nativeSetAttribute.call(el, "data-ofi-src", el.src);
            if (el.srcset) {
                nativeSetAttribute.call(el, "data-ofi-srcset", el.srcset);
            }

            setPlaceholder(el, el.naturalWidth || el.width, el.naturalHeight || el.height);

            // remove srcset because it overrides src
            if (el.srcset) {
                el.srcset = '';
            }
            try {
                keepSrcUsable(el);
            } catch (err) {
                if (window.console) {
                    console.warn('https://bit.ly/ofi-old-browser');
                }
            }
        }

        polyfillCurrentSrc(ofi.img);

        el.style.backgroundImage = "url(\"" + ((ofi.img.currentSrc || ofi.img.src).replace(/"/g, '\\"')) + "\")";
        el.style.backgroundPosition = style['object-position'] || 'center';
        el.style.backgroundRepeat = 'no-repeat';
        el.style.backgroundOrigin = 'content-box';

        if (/scale-down/.test(style['object-fit'])) {
            onImageReady(ofi.img, function () {
                if (ofi.img.naturalWidth > el.width || ofi.img.naturalHeight > el.height) {
                    el.style.backgroundSize = 'contain';
                } else {
                    el.style.backgroundSize = 'auto';
                }
            });
        } else {
            el.style.backgroundSize = style['object-fit'].replace('none', 'auto').replace('fill', '100% 100%');
        }

        onImageReady(ofi.img, function (img) {
            setPlaceholder(el, img.naturalWidth, img.naturalHeight);
        });
    }

    function keepSrcUsable(el) {
        var descriptors = {
            get: function get(prop) {
                return el[OFI].img[prop ? prop : 'src'];
            },
            set: function set(value, prop) {
                el[OFI].img[prop ? prop : 'src'] = value;
                nativeSetAttribute.call(el, ("data-ofi-" + prop), value); // preserve for any future cloneNode
                fixOne(el);
                return value;
            }
        };
        Object.defineProperty(el, 'src', descriptors);
        Object.defineProperty(el, 'currentSrc', {
            get: function () { return descriptors.get('currentSrc'); }
        });
        Object.defineProperty(el, 'srcset', {
            get: function () { return descriptors.get('srcset'); },
            set: function (ss) { return descriptors.set(ss, 'srcset'); }
        });
    }

    function hijackAttributes() {
        function getOfiImageMaybe(el, name) {
            return el[OFI] && el[OFI].img && (name === 'src' || name === 'srcset') ? el[OFI].img : el;
        }
        if (!supportsObjectPosition) {
            HTMLImageElement.prototype.getAttribute = function (name) {
                return nativeGetAttribute.call(getOfiImageMaybe(this, name), name);
            };

            HTMLImageElement.prototype.setAttribute = function (name, value) {
                return nativeSetAttribute.call(getOfiImageMaybe(this, name), name, String(value));
            };
        }
    }

    function fix(imgs, opts) {
        var startAutoMode = !autoModeEnabled && !imgs;
        opts = opts || {};
        imgs = imgs || 'img';

        if ((supportsObjectPosition && !opts.skipTest) || !supportsOFI) {
            return false;
        }

        // use imgs as a selector or just select all images
        if (imgs === 'img') {
            imgs = document.getElementsByTagName('img');
        } else if (typeof imgs === 'string') {
            imgs = document.querySelectorAll(imgs);
        } else if (!('length' in imgs)) {
            imgs = [imgs];
        }

        // apply fix to all
        for (var i = 0; i < imgs.length; i++) {
            imgs[i][OFI] = imgs[i][OFI] || {
                skipTest: opts.skipTest
            };
            fixOne(imgs[i]);
        }

        if (startAutoMode) {
            document.body.addEventListener('load', function (e) {
                if (e.target.tagName === 'IMG') {
                    fix(e.target, {
                        skipTest: opts.skipTest
                    });
                }
            }, true);
            autoModeEnabled = true;
            imgs = 'img'; // reset to a generic selector for watchMQ
        }

        // if requested, watch media queries for object-fit change
        if (opts.watchMQ) {
            window.addEventListener('resize', fix.bind(null, imgs, {
                skipTest: opts.skipTest
            }));
        }
    }

    fix.supportsObjectFit = supportsObjectFit;
    fix.supportsObjectPosition = supportsObjectPosition;

    hijackAttributes();

    return fix;

}());
/*! (C) Andrea Giammarchi - Mit Style License */
var URLSearchParams=URLSearchParams||function(){"use strict";function URLSearchParams(query){var index,key,value,pairs,i,length,dict=Object.create(null);this[secret]=dict;if(!query)return;if(typeof query==="string"){if(query.charAt(0)==="?"){query=query.slice(1)}for(pairs=query.split("&"),i=0,length=pairs.length;i<length;i++){value=pairs[i];index=value.indexOf("=");if(-1<index){appendTo(dict,decode(value.slice(0,index)),decode(value.slice(index+1)))}else if(value.length){appendTo(dict,decode(value),"")}}}else{if(isArray(query)){for(i=0,length=query.length;i<length;i++){value=query[i];appendTo(dict,value[0],value[1])}}else if(query.forEach){query.forEach(addEach,dict)}else{for(key in query){appendTo(dict,key,query[key])}}}}var isArray=Array.isArray,URLSearchParamsProto=URLSearchParams.prototype,find=/[!'\(\)~]|%20|%00/g,plus=/\+/g,replace={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},replacer=function(match){return replace[match]},secret="__URLSearchParams__:"+Math.random();function addEach(value,key){appendTo(this,key,value)}function appendTo(dict,name,value){var res=isArray(value)?value.join(","):value;if(name in dict)dict[name].push(res);else dict[name]=[res]}function decode(str){return decodeURIComponent(str.replace(plus," "))}function encode(str){return encodeURIComponent(str).replace(find,replacer)}URLSearchParamsProto.append=function append(name,value){appendTo(this[secret],name,value)};URLSearchParamsProto["delete"]=function del(name){delete this[secret][name]};URLSearchParamsProto.get=function get(name){var dict=this[secret];return name in dict?dict[name][0]:null};URLSearchParamsProto.getAll=function getAll(name){var dict=this[secret];return name in dict?dict[name].slice(0):[]};URLSearchParamsProto.has=function has(name){return name in this[secret]};URLSearchParamsProto.set=function set(name,value){this[secret][name]=[""+value]};URLSearchParamsProto.forEach=function forEach(callback,thisArg){var dict=this[secret];Object.getOwnPropertyNames(dict).forEach(function(name){dict[name].forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)};URLSearchParamsProto.toJSON=function toJSON(){return{}};URLSearchParamsProto.toString=function toString(){var dict=this[secret],query=[],i,key,name,value;for(key in dict){name=encode(key);for(i=0,value=dict[key];i<value.length;i++){query.push(name+"="+encode(value[i]))}}return query.join("&")};var dP=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,createSearchParamsPollute=function(search){function append(name,value){URLSearchParamsProto.append.call(this,name,value);name=this.toString();search.set.call(this._usp,name?"?"+name:"")}function del(name){URLSearchParamsProto["delete"].call(this,name);name=this.toString();search.set.call(this._usp,name?"?"+name:"")}function set(name,value){URLSearchParamsProto.set.call(this,name,value);name=this.toString();search.set.call(this._usp,name?"?"+name:"")}return function(sp,value){sp.append=append;sp["delete"]=del;sp.set=set;return dP(sp,"_usp",{configurable:true,writable:true,value:value})}},createSearchParamsCreate=function(polluteSearchParams){return function(obj,sp){dP(obj,"_searchParams",{configurable:true,writable:true,value:polluteSearchParams(sp,obj)});return sp}},updateSearchParams=function(sp){var append=sp.append;sp.append=URLSearchParamsProto.append;URLSearchParams.call(sp,sp._usp.search.slice(1));sp.append=append},verifySearchParams=function(obj,Class){if(!(obj instanceof Class))throw new TypeError("'searchParams' accessed on an object that "+"does not implement interface "+Class.name)},upgradeClass=function(Class){var ClassProto=Class.prototype,searchParams=gOPD(ClassProto,"searchParams"),href=gOPD(ClassProto,"href"),search=gOPD(ClassProto,"search"),createSearchParams;if(!searchParams&&search&&search.set){createSearchParams=createSearchParamsCreate(createSearchParamsPollute(search));Object.defineProperties(ClassProto,{href:{get:function(){return href.get.call(this)},set:function(value){var sp=this._searchParams;href.set.call(this,value);if(sp)updateSearchParams(sp)}},search:{get:function(){return search.get.call(this)},set:function(value){var sp=this._searchParams;search.set.call(this,value);if(sp)updateSearchParams(sp)}},searchParams:{get:function(){verifySearchParams(this,Class);return this._searchParams||createSearchParams(this,new URLSearchParams(this.search.slice(1)))},set:function(sp){verifySearchParams(this,Class);createSearchParams(this,sp)}}})}};upgradeClass(HTMLAnchorElement);if(/^function|object$/.test(typeof URL)&&URL.prototype)upgradeClass(URL);return URLSearchParams}();(function(URLSearchParamsProto){var iterable=function(){try{return!!Symbol.iterator}catch(error){return false}}();if(!("forEach"in URLSearchParamsProto)){URLSearchParamsProto.forEach=function forEach(callback,thisArg){var names=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(name){if(!name.length||name in names)return;(names[name]=this.getAll(name)).forEach(function(value){callback.call(thisArg,value,name,this)},this)},this)}}if(!("keys"in URLSearchParamsProto)){URLSearchParamsProto.keys=function keys(){var items=[];this.forEach(function(value,name){items.push(name)});var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}}if(!("values"in URLSearchParamsProto)){URLSearchParamsProto.values=function values(){var items=[];this.forEach(function(value){items.push(value)});var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}}if(!("entries"in URLSearchParamsProto)){URLSearchParamsProto.entries=function entries(){var items=[];this.forEach(function(value,name){items.push([name,value])});var iterator={next:function(){var value=items.shift();return{done:value===undefined,value:value}}};if(iterable){iterator[Symbol.iterator]=function(){return iterator}}return iterator}}if(iterable&&!(Symbol.iterator in URLSearchParamsProto)){URLSearchParamsProto[Symbol.iterator]=URLSearchParamsProto.entries}if(!("sort"in URLSearchParamsProto)){URLSearchParamsProto.sort=function sort(){var entries=this.entries(),entry=entries.next(),done=entry.done,keys=[],values=Object.create(null),i,key,value;while(!done){value=entry.value;key=value[0];keys.push(key);if(!(key in values)){values[key]=[]}values[key].push(value[1]);entry=entries.next();done=entry.done}keys.sort();for(i=0;i<keys.length;i++){this["delete"](keys[i])}for(i=0;i<keys.length;i++){key=keys[i];this.append(key,values[key].shift())}}}})(URLSearchParams.prototype);
/**
  * vee-validate v3.1.1
  * (c) 2019 Abdelrahman Awad
  * @license MIT
  */
 (function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vue')) :
    typeof define === 'function' && define.amd ? define(['exports', 'vue'], factory) :
    (global = global || self, factory(global.VeeValidate = {}, global.Vue));
}(this, (function (exports, Vue) { 'use strict';

    Vue = Vue && Vue.hasOwnProperty('default') ? Vue['default'] : Vue;

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */

    var __assign = function() {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    function __awaiter(thisArg, _arguments, P, generator) {
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
            function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }

    function __generator(thisArg, body) {
        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
        return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
        function verb(n) { return function (v) { return step([n, v]); }; }
        function step(op) {
            if (f) throw new TypeError("Generator is already executing.");
            while (_) try {
                if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
                if (y = 0, t) op = [op[0] & 2, t.value];
                switch (op[0]) {
                    case 0: case 1: t = op; break;
                    case 4: _.label++; return { value: op[1], done: false };
                    case 5: _.label++; y = op[1]; op = [0]; continue;
                    case 7: op = _.ops.pop(); _.trys.pop(); continue;
                    default:
                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                        if (t[2]) _.ops.pop();
                        _.trys.pop(); continue;
                }
                op = body.call(thisArg, _);
            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
        }
    }

    function __spreadArrays() {
        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
        for (var r = Array(s), k = 0, i = 0; i < il; i++)
            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
                r[k] = a[j];
        return r;
    }

    function isNaN(value) {
        // NaN is the one value that does not equal itself.
        // eslint-disable-next-line
        return value !== value;
    }
    function isNullOrUndefined(value) {
        return value === null || value === undefined;
    }
    function isEmptyArray(arr) {
        return Array.isArray(arr) && arr.length === 0;
    }
    var isObject = function (obj) {
        return obj !== null && obj && typeof obj === 'object' && !Array.isArray(obj);
    };
    /**
     * Shallow object comparison.
     */
    function isEqual(lhs, rhs) {
        if (lhs instanceof RegExp && rhs instanceof RegExp) {
            return isEqual(lhs.source, rhs.source) && isEqual(lhs.flags, rhs.flags);
        }
        if (Array.isArray(lhs) && Array.isArray(rhs)) {
            if (lhs.length !== rhs.length)
                return false;
            for (var i = 0; i < lhs.length; i++) {
                if (!isEqual(lhs[i], rhs[i])) {
                    return false;
                }
            }
            return true;
        }
        // if both are objects, compare each key recursively.
        if (isObject(lhs) && isObject(rhs)) {
            return (Object.keys(lhs).every(function (key) {
                return isEqual(lhs[key], rhs[key]);
            }) &&
                Object.keys(rhs).every(function (key) {
                    return isEqual(lhs[key], rhs[key]);
                }));
        }
        if (isNaN(lhs) && isNaN(rhs)) {
            return true;
        }
        return lhs === rhs;
    }
    // Checks if a given value is not an empty string or null or undefined.
    function isSpecified(val) {
        if (val === '') {
            return false;
        }
        return !isNullOrUndefined(val);
    }
    function isCallable(fn) {
        return typeof fn === 'function';
    }
    function isLocator(value) {
        return isCallable(value) && !!value.__locatorRef;
    }

    function findIndex(arrayLike, predicate) {
        var array = Array.isArray(arrayLike) ? arrayLike : toArray(arrayLike);
        if (isCallable(array.findIndex)) {
            return array.findIndex(predicate);
        }
        /* istanbul ignore next */
        for (var i = 0; i < array.length; i++) {
            if (predicate(array[i], i)) {
                return i;
            }
        }
        /* istanbul ignore next */
        return -1;
    }
    /**
     * finds the first element that satisfies the predicate callback, polyfills array.find
     */
    function find(arrayLike, predicate) {
        var array = Array.isArray(arrayLike) ? arrayLike : toArray(arrayLike);
        var idx = findIndex(array, predicate);
        return idx === -1 ? undefined : array[idx];
    }
    function includes(collection, item) {
        return collection.indexOf(item) !== -1;
    }
    /**
     * Converts an array-like object to array, provides a simple polyfill for Array.from
     */
    function toArray(arrayLike) {
        if (isCallable(Array.from)) {
            return Array.from(arrayLike);
        }
        /* istanbul ignore next */
        return _copyArray(arrayLike);
    }
    /* istanbul ignore next */
    function _copyArray(arrayLike) {
        var array = [];
        var length = arrayLike.length;
        for (var i = 0; i < length; i++) {
            array.push(arrayLike[i]);
        }
        return array;
    }
    function values(obj) {
        if (isCallable(Object.values)) {
            return Object.values(obj);
        }
        // fallback to keys()
        /* istanbul ignore next */
        return Object.keys(obj).map(function (k) { return obj[k]; });
    }
    function merge(target, source) {
        Object.keys(source).forEach(function (key) {
            if (isObject(source[key])) {
                if (!target[key]) {
                    target[key] = {};
                }
                merge(target[key], source[key]);
                return;
            }
            target[key] = source[key];
        });
        return target;
    }

    function createFlags() {
        return {
            untouched: true,
            touched: false,
            dirty: false,
            pristine: true,
            valid: false,
            invalid: false,
            validated: false,
            pending: false,
            required: false,
            changed: false,
            passed: false,
            failed: false
        };
    }

    function identity(x) {
        return x;
    }
    function debounce(fn, wait, token) {
        if (wait === void 0) { wait = 0; }
        if (token === void 0) { token = { cancelled: false }; }
        if (wait === 0) {
            return fn;
        }
        var timeout;
        return function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var later = function () {
                timeout = undefined;
                // check if the fn call was cancelled.
                if (!token.cancelled)
                    fn.apply(void 0, args);
            };
            // because we might want to use Node.js setTimout for SSR.
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
        };
    }

    /**
     * Emits a warning to the console
     */
    function warn(message) {
        console.warn("[vee-validate] " + message);
    }
    /**
     * Replaces placeholder values in a string with their actual values
     */
    function interpolate(template, values) {
        return template.replace(/{([^}]+)}/g, function (_, p) {
            return p in values ? values[p] : "{" + p + "}";
        });
    }

    var RULES = {};
    function normalizeSchema(schema) {
        var _a;
        if ((_a = schema.params) === null || _a === void 0 ? void 0 : _a.length) {
            schema.params = schema.params.map(function (param) {
                if (typeof param === 'string') {
                    return { name: param };
                }
                return param;
            });
        }
        return schema;
    }
    var RuleContainer = /** @class */ (function () {
        function RuleContainer() {
        }
        RuleContainer.extend = function (name, schema) {
            // if rule already exists, overwrite it.
            var rule = normalizeSchema(schema);
            if (RULES[name]) {
                RULES[name] = merge(RULES[name], schema);
                return;
            }
            RULES[name] = __assign({ lazy: false, computesRequired: false }, rule);
        };
        RuleContainer.iterate = function (fn) {
            var keys = Object.keys(RULES);
            var length = keys.length;
            for (var i = 0; i < length; i++) {
                fn(keys[i], RULES[keys[i]]);
            }
        };
        RuleContainer.isLazy = function (name) {
            var _a;
            return !!((_a = RULES[name]) === null || _a === void 0 ? void 0 : _a.lazy);
        };
        RuleContainer.isRequireRule = function (name) {
            var _a;
            return !!((_a = RULES[name]) === null || _a === void 0 ? void 0 : _a.computesRequired);
        };
        RuleContainer.isTargetRule = function (name) {
            var _a;
            var definition = RuleContainer.getRuleDefinition(name);
            if (!((_a = definition) === null || _a === void 0 ? void 0 : _a.params)) {
                return false;
            }
            return definition.params.some(function (param) { return !!param.isTarget; });
        };
        RuleContainer.getRuleDefinition = function (ruleName) {
            return RULES[ruleName];
        };
        return RuleContainer;
    }());
    /**
     * Adds a custom validator to the list of validation rules.
     */
    function extend(name, schema) {
        // makes sure new rules are properly formatted.
        guardExtend(name, schema);
        // Full schema object.
        if (typeof schema === 'object') {
            RuleContainer.extend(name, schema);
            return;
        }
        RuleContainer.extend(name, {
            validate: schema
        });
    }
    /**
     * Guards from extension violations.
     */
    function guardExtend(name, validator) {
        if (isCallable(validator)) {
            return;
        }
        if (isCallable(validator.validate)) {
            return;
        }
        if (RuleContainer.getRuleDefinition(name)) {
            return;
        }
        throw new Error("Extension Error: The validator '" + name + "' must be a function or have a 'validate' method.");
    }

    var DEFAULT_CONFIG = {
        defaultMessage: "{_field_} is not valid.",
        skipOptional: true,
        classes: {
            touched: 'touched',
            untouched: 'untouched',
            valid: 'valid',
            invalid: 'invalid',
            pristine: 'pristine',
            dirty: 'dirty' // control has been interacted with
        },
        bails: true,
        mode: 'aggressive',
        useConstraintAttrs: true
    };
    var currentConfig = __assign({}, DEFAULT_CONFIG);
    var getConfig = function () { return currentConfig; };
    var setConfig = function (newConf) {
        currentConfig = __assign(__assign({}, currentConfig), newConf);
    };
    var configure = function (cfg) {
        setConfig(cfg);
    };

    /**
     * Normalizes the given rules expression.
     */
    function normalizeRules(rules) {
        // if falsy value return an empty object.
        var acc = {};
        Object.defineProperty(acc, '_$$isNormalized', {
            value: true,
            writable: false,
            enumerable: false,
            configurable: false
        });
        if (!rules) {
            return acc;
        }
        // Object is already normalized, skip.
        if (isObject(rules) && rules._$$isNormalized) {
            return rules;
        }
        if (isObject(rules)) {
            return Object.keys(rules).reduce(function (prev, curr) {
                var params = [];
                if (rules[curr] === true) {
                    params = [];
                }
                else if (Array.isArray(rules[curr])) {
                    params = rules[curr];
                }
                else if (isObject(rules[curr])) {
                    params = rules[curr];
                }
                else {
                    params = [rules[curr]];
                }
                if (rules[curr] !== false) {
                    prev[curr] = buildParams(curr, params);
                }
                return prev;
            }, acc);
        }
        /* istanbul ignore if */
        if (typeof rules !== 'string') {
            warn('rules must be either a string or an object.');
            return acc;
        }
        return rules.split('|').reduce(function (prev, rule) {
            var parsedRule = parseRule(rule);
            if (!parsedRule.name) {
                return prev;
            }
            prev[parsedRule.name] = buildParams(parsedRule.name, parsedRule.params);
            return prev;
        }, acc);
    }
    function buildParams(ruleName, provided) {
        var ruleSchema = RuleContainer.getRuleDefinition(ruleName);
        if (!ruleSchema) {
            return provided;
        }
        var params = {};
        if (!ruleSchema.params && !Array.isArray(provided)) {
            throw new Error('You provided an object params to a rule that has no defined schema.');
        }
        // Rule probably uses an array for their args, keep it as is.
        if (Array.isArray(provided) && !ruleSchema.params) {
            return provided;
        }
        var definedParams;
        // collect the params schema.
        if (!ruleSchema.params || (ruleSchema.params.length < provided.length && Array.isArray(provided))) {
            var lastDefinedParam_1;
            // collect any additional parameters in the last item.
            definedParams = provided.map(function (_, idx) {
                var _a;
                var param = (_a = ruleSchema.params) === null || _a === void 0 ? void 0 : _a[idx];
                lastDefinedParam_1 = param || lastDefinedParam_1;
                if (!param) {
                    param = lastDefinedParam_1;
                }
                return param;
            });
        }
        else {
            definedParams = ruleSchema.params;
        }
        // Match the provided array length with a temporary schema.
        for (var i = 0; i < definedParams.length; i++) {
            var options = definedParams[i];
            var value = options.default;
            // if the provided is an array, map element value.
            if (Array.isArray(provided)) {
                if (i in provided) {
                    value = provided[i];
                }
            }
            else {
                // If the param exists in the provided object.
                if (options.name in provided) {
                    value = provided[options.name];
                    // if the provided is the first param value.
                }
                else if (definedParams.length === 1) {
                    value = provided;
                }
            }
            // if the param is a target, resolve the target value.
            if (options.isTarget) {
                value = createLocator(value);
            }
            // A target param using interpolation
            if (typeof value === 'string' && value[0] === '@') {
                value = createLocator(value.slice(1));
            }
            // If there is a transformer defined.
            if (options.cast) {
                value = options.cast(value);
            }
            // already been set, probably multiple values.
            if (params[options.name]) {
                params[options.name] = Array.isArray(params[options.name]) ? params[options.name] : [params[options.name]];
                params[options.name].push(value);
            }
            else {
                // set the value.
                params[options.name] = value;
            }
        }
        return params;
    }
    /**
     * Parses a rule string expression.
     */
    var parseRule = function (rule) {
        var params = [];
        var name = rule.split(':')[0];
        if (includes(rule, ':')) {
            params = rule
                .split(':')
                .slice(1)
                .join(':')
                .split(',');
        }
        return { name: name, params: params };
    };
    function createLocator(value) {
        var locator = function (crossTable) {
            return crossTable[value];
        };
        locator.__locatorRef = value;
        return locator;
    }
    function extractLocators(params) {
        if (Array.isArray(params)) {
            return params.filter(isLocator);
        }
        return Object.keys(params)
            .filter(function (key) { return isLocator(params[key]); })
            .map(function (key) { return params[key]; });
    }

    /**
     * Validates a value against the rules.
     */
    function validate(value, rules, options) {
        if (options === void 0) { options = {}; }
        var _a, _b, _c, _d, _e, _f;
        return __awaiter(this, void 0, void 0, function () {
            var shouldBail, skipIfEmpty, field, result, errors, failedRules, regenerateMap;
            return __generator(this, function (_g) {
                switch (_g.label) {
                    case 0:
                        shouldBail = (_a = options) === null || _a === void 0 ? void 0 : _a.bails;
                        skipIfEmpty = (_b = options) === null || _b === void 0 ? void 0 : _b.skipIfEmpty;
                        field = {
                            name: ((_c = options) === null || _c === void 0 ? void 0 : _c.name) || '{field}',
                            rules: normalizeRules(rules),
                            bails: (shouldBail !== null && shouldBail !== void 0 ? shouldBail : true),
                            skipIfEmpty: (skipIfEmpty !== null && skipIfEmpty !== void 0 ? skipIfEmpty : true),
                            forceRequired: false,
                            crossTable: ((_d = options) === null || _d === void 0 ? void 0 : _d.values) || {},
                            names: ((_e = options) === null || _e === void 0 ? void 0 : _e.names) || {},
                            customMessages: ((_f = options) === null || _f === void 0 ? void 0 : _f.customMessages) || {}
                        };
                        return [4 /*yield*/, _validate(field, value, options)];
                    case 1:
                        result = _g.sent();
                        errors = [];
                        failedRules = {};
                        regenerateMap = {};
                        result.errors.forEach(function (e) {
                            var msg = e.msg();
                            errors.push(msg);
                            failedRules[e.rule] = msg;
                            regenerateMap[e.rule] = e.msg;
                        });
                        return [2 /*return*/, {
                                valid: result.valid,
                                errors: errors,
                                failedRules: failedRules,
                                regenerateMap: regenerateMap
                            }];
                }
            });
        });
    }
    /**
     * Starts the validation process.
     */
    function _validate(field, value, _a) {
        var _b = (_a === void 0 ? {} : _a).isInitial, isInitial = _b === void 0 ? false : _b;
        return __awaiter(this, void 0, void 0, function () {
            var _c, shouldSkip, errors, rules, length, i, rule, result;
            return __generator(this, function (_d) {
                switch (_d.label) {
                    case 0: return [4 /*yield*/, _shouldSkip(field, value)];
                    case 1:
                        _c = _d.sent(), shouldSkip = _c.shouldSkip, errors = _c.errors;
                        if (shouldSkip) {
                            return [2 /*return*/, {
                                    valid: !errors.length,
                                    errors: errors
                                }];
                        }
                        rules = Object.keys(field.rules).filter(function (rule) { return !RuleContainer.isRequireRule(rule); });
                        length = rules.length;
                        i = 0;
                        _d.label = 2;
                    case 2:
                        if (!(i < length)) return [3 /*break*/, 5];
                        if (isInitial && RuleContainer.isLazy(rules[i])) {
                            return [3 /*break*/, 4];
                        }
                        rule = rules[i];
                        return [4 /*yield*/, _test(field, value, {
                                name: rule,
                                params: field.rules[rule]
                            })];
                    case 3:
                        result = _d.sent();
                        if (!result.valid && result.error) {
                            errors.push(result.error);
                            if (field.bails) {
                                return [2 /*return*/, {
                                        valid: false,
                                        errors: errors
                                    }];
                            }
                        }
                        _d.label = 4;
                    case 4:
                        i++;
                        return [3 /*break*/, 2];
                    case 5: return [2 /*return*/, {
                            valid: !errors.length,
                            errors: errors
                        }];
                }
            });
        });
    }
    function _shouldSkip(field, value) {
        return __awaiter(this, void 0, void 0, function () {
            var requireRules, length, errors, isEmpty, isEmptyAndOptional, isRequired, i, rule, result;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        requireRules = Object.keys(field.rules).filter(RuleContainer.isRequireRule);
                        length = requireRules.length;
                        errors = [];
                        isEmpty = isNullOrUndefined(value) || value === '' || isEmptyArray(value);
                        isEmptyAndOptional = isEmpty && field.skipIfEmpty;
                        isRequired = false;
                        i = 0;
                        _a.label = 1;
                    case 1:
                        if (!(i < length)) return [3 /*break*/, 4];
                        rule = requireRules[i];
                        return [4 /*yield*/, _test(field, value, {
                                name: rule,
                                params: field.rules[rule]
                            })];
                    case 2:
                        result = _a.sent();
                        if (!isObject(result)) {
                            throw new Error('Require rules has to return an object (see docs)');
                        }
                        if (result.required) {
                            isRequired = true;
                        }
                        if (!result.valid && result.error) {
                            errors.push(result.error);
                            // Exit early as the field is required and failed validation.
                            if (field.bails) {
                                return [2 /*return*/, {
                                        shouldSkip: true,
                                        errors: errors
                                    }];
                            }
                        }
                        _a.label = 3;
                    case 3:
                        i++;
                        return [3 /*break*/, 1];
                    case 4:
                        if (isEmpty && !isRequired && !field.skipIfEmpty) {
                            return [2 /*return*/, {
                                    shouldSkip: false,
                                    errors: errors
                                }];
                        }
                        // field is configured to run through the pipeline regardless
                        if (!field.bails && !isEmptyAndOptional) {
                            return [2 /*return*/, {
                                    shouldSkip: false,
                                    errors: errors
                                }];
                        }
                        // skip if the field is not required and has an empty value.
                        return [2 /*return*/, {
                                shouldSkip: !isRequired && isEmpty,
                                errors: errors
                            }];
                }
            });
        });
    }
    /**
     * Tests a single input value against a rule.
     */
    function _test(field, value, rule) {
        return __awaiter(this, void 0, void 0, function () {
            var ruleSchema, normalizedValue, params, result, values_1;
            return __generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        ruleSchema = RuleContainer.getRuleDefinition(rule.name);
                        if (!ruleSchema || !ruleSchema.validate) {
                            throw new Error("No such validator '" + rule.name + "' exists.");
                        }
                        normalizedValue = ruleSchema.castValue ? ruleSchema.castValue(value) : value;
                        params = fillTargetValues(rule.params, field.crossTable);
                        return [4 /*yield*/, ruleSchema.validate(normalizedValue, params)];
                    case 1:
                        result = _a.sent();
                        if (typeof result === 'string') {
                            values_1 = __assign(__assign({}, (params || {})), { _field_: field.name, _value_: value, _rule_: rule.name });
                            return [2 /*return*/, {
                                    valid: false,
                                    error: { rule: rule.name, msg: function () { return interpolate(result, values_1); } }
                                }];
                        }
                        if (!isObject(result)) {
                            result = { valid: result, data: {} };
                        }
                        return [2 /*return*/, {
                                valid: result.valid,
                                required: result.required,
                                data: result.data || {},
                                error: result.valid ? undefined : _generateFieldError(field, value, ruleSchema, rule.name, params, result.data)
                            }];
                }
            });
        });
    }
    /**
     * Generates error messages.
     */
    function _generateFieldError(field, value, ruleSchema, ruleName, params, data) {
        var message = field.customMessages[ruleName] || ruleSchema.message;
        var ruleTargets = _getRuleTargets(field, ruleSchema, ruleName);
        var _a = _getUserTargets(field, ruleSchema, ruleName, message), userTargets = _a.userTargets, userMessage = _a.userMessage;
        var values = __assign(__assign(__assign(__assign(__assign({}, (params || {})), (data || {})), { _field_: field.name, _value_: value, _rule_: ruleName }), ruleTargets), userTargets);
        return {
            msg: function () { return _normalizeMessage(userMessage || getConfig().defaultMessage, field.name, values); },
            rule: ruleName
        };
    }
    function _getRuleTargets(field, ruleSchema, ruleName) {
        var params = ruleSchema.params;
        if (!params) {
            return {};
        }
        var numTargets = params.filter(function (param) { return param.isTarget; }).length;
        if (numTargets <= 0) {
            return {};
        }
        var names = {};
        var ruleConfig = field.rules[ruleName];
        if (!Array.isArray(ruleConfig) && isObject(ruleConfig)) {
            ruleConfig = params.map(function (param) {
                return ruleConfig[param.name];
            });
        }
        for (var index = 0; index < params.length; index++) {
            var param = params[index];
            if (!param.isTarget) {
                continue;
            }
            var key = ruleConfig[index];
            if (isLocator(key)) {
                key = key.__locatorRef;
            }
            var name_1 = field.names[key] || key;
            if (numTargets === 1) {
                names._target_ = name_1;
                break;
            }
            names["_" + param.name + "Target_"] = name_1;
        }
        return names;
    }
    function _getUserTargets(field, ruleSchema, ruleName, userMessage) {
        var userTargets = {};
        var rules = field.rules[ruleName];
        var params = ruleSchema.params || [];
        // early return if no rules
        if (!rules) {
            return {};
        }
        // check all rules to convert targets
        Object.keys(rules).forEach(function (key, index) {
            // get the rule
            var rule = rules[key];
            if (!isLocator(rule)) {
                return {};
            }
            // get associated parameter
            var param = params[index];
            if (!param) {
                return {};
            }
            // grab the name of the target
            var name = rule.__locatorRef;
            var placeholder = "_" + name + "Target_";
            userTargets[placeholder] = field.names[name] || name;
            // update template if it's a string
            if (typeof userMessage === 'string') {
                var rx = new RegExp("{" + param.name + "}", 'g');
                userMessage = userMessage.replace(rx, "{" + placeholder + "}");
            }
        });
        return {
            userTargets: userTargets,
            userMessage: userMessage
        };
    }
    function _normalizeMessage(template, field, values) {
        if (typeof template === 'function') {
            return template(field, values);
        }
        return interpolate(template, __assign(__assign({}, values), { _field_: field }));
    }
    function fillTargetValues(params, crossTable) {
        if (Array.isArray(params)) {
            return params;
        }
        var values = {};
        var normalize = function (value) {
            if (isLocator(value)) {
                return value(crossTable);
            }
            return value;
        };
        Object.keys(params).forEach(function (param) {
            values[param] = normalize(params[param]);
        });
        return values;
    }

    var aggressive = function () { return ({
        on: ['input', 'blur']
    }); };
    var lazy = function () { return ({
        on: ['change']
    }); };
    var eager = function (_a) {
        var errors = _a.errors;
        if (errors.length) {
            return {
                on: ['input', 'change']
            };
        }
        return {
            on: ['change', 'blur']
        };
    };
    var passive = function () { return ({
        on: []
    }); };
    var modes = {
        aggressive: aggressive,
        eager: eager,
        passive: passive,
        lazy: lazy
    };
    var setInteractionMode = function (mode, implementation) {
        setConfig({ mode: mode });
        if (!implementation) {
            return;
        }
        if (!isCallable(implementation)) {
            throw new Error('A mode implementation must be a function');
        }
        modes[mode] = implementation;
    };

    var EVENT_BUS = new Vue();
    function localeChanged() {
        EVENT_BUS.$emit('change:locale');
    }

    var Dictionary = /** @class */ (function () {
        function Dictionary(locale, dictionary) {
            this.container = {};
            this.locale = locale;
            this.merge(dictionary);
        }
        Dictionary.prototype.resolve = function (field, rule, values) {
            return this.format(this.locale, field, rule, values);
        };
        Dictionary.prototype.format = function (locale, field, rule, values) {
            var _a, _b, _c, _d, _e, _f, _g, _h;
            var message;
            // find if specific message for that field was specified.
            message = ((_c = (_b = (_a = this.container[locale]) === null || _a === void 0 ? void 0 : _a.fields) === null || _b === void 0 ? void 0 : _b[field]) === null || _c === void 0 ? void 0 : _c[rule]) || ((_e = (_d = this.container[locale]) === null || _d === void 0 ? void 0 : _d.messages) === null || _e === void 0 ? void 0 : _e[rule]);
            if (!message) {
                message = getConfig().defaultMessage;
            }
            field = (_h = (_g = (_f = this.container[locale]) === null || _f === void 0 ? void 0 : _f.names) === null || _g === void 0 ? void 0 : _g[field], (_h !== null && _h !== void 0 ? _h : field));
            return isCallable(message) ? message(field, values) : interpolate(message, __assign(__assign({}, values), { _field_: field }));
        };
        Dictionary.prototype.merge = function (dictionary) {
            merge(this.container, dictionary);
        };
        Dictionary.prototype.hasRule = function (name) {
            var _a, _b;
            return !!((_b = (_a = this.container[this.locale]) === null || _a === void 0 ? void 0 : _a.messages) === null || _b === void 0 ? void 0 : _b[name]);
        };
        return Dictionary;
    }());
    var DICTIONARY;
    var INSTALLED = false;
    function updateRules() {
        if (INSTALLED) {
            return;
        }
        RuleContainer.iterate(function (name, schema) {
            var _a, _b;
            if (schema.message && !DICTIONARY.hasRule(name)) {
                DICTIONARY.merge((_a = {},
                    _a[DICTIONARY.locale] = {
                        messages: (_b = {},
                            _b[name] = schema.message,
                            _b)
                    },
                    _a));
            }
            extend(name, {
                message: function (field, values) {
                    return DICTIONARY.resolve(field, name, values || {});
                }
            });
        });
        INSTALLED = true;
    }
    function localize(locale, dictionary) {
        var _a;
        if (!DICTIONARY) {
            DICTIONARY = new Dictionary('en', {});
        }
        if (typeof locale === 'string') {
            DICTIONARY.locale = locale;
            if (dictionary) {
                DICTIONARY.merge((_a = {}, _a[locale] = dictionary, _a));
            }
            updateRules();
            localeChanged();
            return;
        }
        DICTIONARY.merge(locale);
        updateRules();
    }

    var isEvent = function (evt) {
        if (!evt) {
            return false;
        }
        if (typeof Event !== 'undefined' && isCallable(Event) && evt instanceof Event) {
            return true;
        }
        // this is for IE
        /* istanbul ignore next */
        if (evt && evt.srcElement) {
            return true;
        }
        return false;
    };
    function normalizeEventValue(value) {
        var _a, _b;
        if (!isEvent(value)) {
            return value;
        }
        var input = value.target;
        if (input.type === 'file' && input.files) {
            return toArray(input.files);
        }
        // If the input has a `v-model.number` modifier applied.
        if ((_a = input._vModifiers) === null || _a === void 0 ? void 0 : _a.number) {
            // as per the spec the v-model.number uses parseFloat
            var valueAsNumber = parseFloat(input.value);
            if (isNaN(valueAsNumber)) {
                return input.value;
            }
            return valueAsNumber;
        }
        if ((_b = input._vModifiers) === null || _b === void 0 ? void 0 : _b.trim) {
            var trimmedValue = typeof input.value === 'string' ? input.value.trim() : input.value;
            return trimmedValue;
        }
        return input.value;
    }

    var isTextInput = function (vnode) {
        var _a, _b;
        var attrs = ((_a = vnode.data) === null || _a === void 0 ? void 0 : _a.attrs) || vnode.elm;
        // it will fallback to being a text input per browsers spec.
        if (vnode.tag === 'input' && (!attrs || !attrs.type)) {
            return true;
        }
        if (vnode.tag === 'textarea') {
            return true;
        }
        return includes(['text', 'password', 'search', 'email', 'tel', 'url', 'number'], (_b = attrs) === null || _b === void 0 ? void 0 : _b.type);
    };
    // export const isCheckboxOrRadioInput = (vnode: VNode): boolean => {
    //   const attrs = (vnode.data && vnode.data.attrs) || vnode.elm;
    //   return includes(['radio', 'checkbox'], attrs && attrs.type);
    // };
    // Gets the model object on the vnode.
    function findModel(vnode) {
        if (!vnode.data) {
            return undefined;
        }
        // Component Model
        // THIS IS NOT TYPED IN OFFICIAL VUE TYPINGS
        // eslint-disable-next-line
        var nonStandardVNodeData = vnode.data;
        if ('model' in nonStandardVNodeData) {
            return nonStandardVNodeData.model;
        }
        if (!vnode.data.directives) {
            return undefined;
        }
        return find(vnode.data.directives, function (d) { return d.name === 'model'; });
    }
    function findValue(vnode) {
        var _a, _b, _c;
        var model = findModel(vnode);
        if (model) {
            return { value: model.value };
        }
        var config = findModelConfig(vnode);
        var prop = ((_a = config) === null || _a === void 0 ? void 0 : _a.prop) || 'value';
        if (((_b = vnode.componentOptions) === null || _b === void 0 ? void 0 : _b.propsData) && prop in vnode.componentOptions.propsData) {
            var propsDataWithValue = vnode.componentOptions.propsData;
            return { value: propsDataWithValue[prop] };
        }
        if (((_c = vnode.data) === null || _c === void 0 ? void 0 : _c.domProps) && 'value' in vnode.data.domProps) {
            return { value: vnode.data.domProps.value };
        }
        return undefined;
    }
    function extractChildren(vnode) {
        if (Array.isArray(vnode)) {
            return vnode;
        }
        if (Array.isArray(vnode.children)) {
            return vnode.children;
        }
        /* istanbul ignore next */
        if (vnode.componentOptions && Array.isArray(vnode.componentOptions.children)) {
            return vnode.componentOptions.children;
        }
        return [];
    }
    function extractVNodes(vnode) {
        if (!Array.isArray(vnode) && findValue(vnode) !== undefined) {
            return [vnode];
        }
        var children = extractChildren(vnode);
        return children.reduce(function (nodes, node) {
            var candidates = extractVNodes(node);
            if (candidates.length) {
                nodes.push.apply(nodes, candidates);
            }
            return nodes;
        }, []);
    }
    // Resolves v-model config if exists.
    function findModelConfig(vnode) {
        /* istanbul ignore next */
        if (!vnode.componentOptions)
            return null;
        // This is also not typed in the standard Vue TS.
        return vnode.componentOptions.Ctor.options.model;
    }
    // Adds a listener to vnode listener object.
    function mergeVNodeListeners(obj, eventName, handler) {
        var _a;
        // no listener at all.
        if (isNullOrUndefined(obj[eventName])) {
            obj[eventName] = [handler];
            return;
        }
        // Is an invoker.
        if (isCallable((_a = obj[eventName]) === null || _a === void 0 ? void 0 : _a.fns)) {
            var invoker = obj[eventName];
            invoker.fns = Array.isArray(invoker.fns) ? invoker.fns : [invoker.fns];
            if (!includes(invoker.fns, handler)) {
                invoker.fns.push(handler);
            }
            return;
        }
        if (isCallable(obj[eventName])) {
            var prev = obj[eventName];
            obj[eventName] = [prev];
        }
        if (Array.isArray(obj[eventName]) && !includes(obj[eventName], handler)) {
            obj[eventName].push(handler);
        }
    }
    // Adds a listener to a native HTML vnode.
    function addNativeNodeListener(node, eventName, handler) {
        /* istanbul ignore next */
        if (!node.data) {
            node.data = {};
        }
        if (isNullOrUndefined(node.data.on)) {
            node.data.on = {};
        }
        mergeVNodeListeners(node.data.on, eventName, handler);
    }
    // Adds a listener to a Vue component vnode.
    function addComponentNodeListener(node, eventName, handler) {
        /* istanbul ignore next */
        if (!node.componentOptions) {
            return;
        }
        /* istanbul ignore next */
        if (!node.componentOptions.listeners) {
            node.componentOptions.listeners = {};
        }
        mergeVNodeListeners(node.componentOptions.listeners, eventName, handler);
    }
    function addVNodeListener(vnode, eventName, handler) {
        if (vnode.componentOptions) {
            addComponentNodeListener(vnode, eventName, handler);
            return;
        }
        addNativeNodeListener(vnode, eventName, handler);
    }
    // Determines if `change` should be used over `input` for listeners.
    function getInputEventName(vnode, model) {
        var _a, _b;
        // Is a component.
        if (vnode.componentOptions) {
            var event_1 = (findModelConfig(vnode) || { event: 'input' }).event;
            return event_1;
        }
        // Lazy Models typically use change event
        if ((_b = (_a = model) === null || _a === void 0 ? void 0 : _a.modifiers) === null || _b === void 0 ? void 0 : _b.lazy) {
            return 'change';
        }
        // is a textual-type input.
        if (isTextInput(vnode)) {
            return 'input';
        }
        return 'change';
    }
    // TODO: Type this one properly.
    function normalizeSlots(slots, ctx) {
        var acc = [];
        return Object.keys(slots).reduce(function (arr, key) {
            slots[key].forEach(function (vnode) {
                if (!vnode.context) {
                    slots[key].context = ctx;
                    if (!vnode.data) {
                        vnode.data = {};
                    }
                    vnode.data.slot = key;
                }
            });
            return arr.concat(slots[key]);
        }, acc);
    }
    function resolveTextualRules(vnode) {
        var _a;
        var attrs = (_a = vnode.data) === null || _a === void 0 ? void 0 : _a.attrs;
        var rules = {};
        if (!attrs)
            return rules;
        if (attrs.type === 'email') {
            rules.email = ['multiple' in attrs];
        }
        if (attrs.pattern) {
            rules.regex = attrs.pattern;
        }
        if (attrs.maxlength >= 0) {
            rules.max = attrs.maxlength;
        }
        if (attrs.minlength >= 0) {
            rules.min = attrs.minlength;
        }
        if (attrs.type === 'number') {
            if (isSpecified(attrs.min)) {
                rules.min_value = Number(attrs.min);
            }
            if (isSpecified(attrs.max)) {
                rules.max_value = Number(attrs.max);
            }
        }
        return rules;
    }
    function resolveRules(vnode) {
        var _a;
        var htmlTags = ['input', 'select'];
        var attrs = (_a = vnode.data) === null || _a === void 0 ? void 0 : _a.attrs;
        if (!includes(htmlTags, vnode.tag) || !attrs) {
            return {};
        }
        var rules = {};
        if ('required' in attrs && attrs.required !== false) {
            rules.required = attrs.type === 'checkbox' ? [true] : true;
        }
        if (isTextInput(vnode)) {
            return normalizeRules(__assign(__assign({}, rules), resolveTextualRules(vnode)));
        }
        return normalizeRules(rules);
    }
    function normalizeChildren(context, slotProps) {
        if (context.$scopedSlots.default) {
            return context.$scopedSlots.default(slotProps) || [];
        }
        return context.$slots.default || [];
    }

    /**
     * Determines if a provider needs to run validation.
     */
    function shouldValidate(ctx, value) {
        // when an immediate/initial validation is needed and wasn't done before.
        if (!ctx._ignoreImmediate && ctx.immediate) {
            return true;
        }
        // when the value changes for whatever reason.
        if (ctx.value !== value && ctx.normalizedEvents.length) {
            return true;
        }
        // when it needs validation due to props/cross-fields changes.
        if (ctx._needsValidation) {
            return true;
        }
        // when the initial value is undefined and the field wasn't rendered yet.
        if (!ctx.initialized && value === undefined) {
            return true;
        }
        return false;
    }
    function createValidationCtx(ctx) {
        return __assign(__assign({}, ctx.flags), { errors: ctx.errors, classes: ctx.classes, failedRules: ctx.failedRules, reset: function () { return ctx.reset(); }, validate: function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                return ctx.validate.apply(ctx, args);
            }, ariaInput: {
                'aria-invalid': ctx.flags.invalid ? 'true' : 'false',
                'aria-required': ctx.isRequired ? 'true' : 'false',
                'aria-errormessage': "vee_" + ctx.id
            }, ariaMsg: {
                id: "vee_" + ctx.id,
                'aria-live': ctx.errors.length ? 'assertive' : 'off'
            } });
    }
    function onRenderUpdate(vm, value) {
        if (!vm.initialized) {
            vm.initialValue = value;
        }
        var validateNow = shouldValidate(vm, value);
        vm._needsValidation = false;
        vm.value = value;
        vm._ignoreImmediate = true;
        if (!validateNow) {
            return;
        }
        vm.validateSilent().then(vm.immediate || vm.flags.validated ? vm.applyResult : identity);
    }
    function computeModeSetting(ctx) {
        var compute = (isCallable(ctx.mode) ? ctx.mode : modes[ctx.mode]);
        return compute(ctx);
    }
    // Creates the common handlers for a validatable context.
    function createCommonHandlers(vm) {
        if (!vm.$veeOnInput) {
            vm.$veeOnInput = function (e) {
                vm.syncValue(e); // track and keep the value updated.
                vm.setFlags({ dirty: true, pristine: false });
            };
        }
        var onInput = vm.$veeOnInput;
        if (!vm.$veeOnBlur) {
            vm.$veeOnBlur = function () {
                vm.setFlags({ touched: true, untouched: false });
            };
        }
        // Blur event listener.
        var onBlur = vm.$veeOnBlur;
        var onValidate = vm.$veeHandler;
        var mode = computeModeSetting(vm);
        // Handle debounce changes.
        if (!onValidate || vm.$veeDebounce !== vm.debounce) {
            onValidate = debounce(function () {
                vm.$nextTick(function () {
                    var pendingPromise = vm.validateSilent();
                    // avoids race conditions between successive validations.
                    vm._pendingValidation = pendingPromise;
                    pendingPromise.then(function (result) {
                        if (pendingPromise === vm._pendingValidation) {
                            vm.applyResult(result);
                            vm._pendingValidation = undefined;
                        }
                    });
                });
            }, mode.debounce || vm.debounce);
            // Cache the handler so we don't create it each time.
            vm.$veeHandler = onValidate;
            // cache the debounce value so we detect if it was changed.
            vm.$veeDebounce = vm.debounce;
        }
        return { onInput: onInput, onBlur: onBlur, onValidate: onValidate };
    }
    // Adds all plugin listeners to the vnode.
    function addListeners(vm, node) {
        var _a;
        var value = findValue(node);
        // cache the input eventName.
        vm._inputEventName = vm._inputEventName || getInputEventName(node, findModel(node));
        onRenderUpdate(vm, (_a = value) === null || _a === void 0 ? void 0 : _a.value);
        var _b = createCommonHandlers(vm), onInput = _b.onInput, onBlur = _b.onBlur, onValidate = _b.onValidate;
        addVNodeListener(node, vm._inputEventName, onInput);
        addVNodeListener(node, 'blur', onBlur);
        // add the validation listeners.
        vm.normalizedEvents.forEach(function (evt) {
            addVNodeListener(node, evt, onValidate);
        });
        vm.initialized = true;
    }

    var PROVIDER_COUNTER = 0;
    function data() {
        var errors = [];
        var defaultValues = {
            errors: errors,
            value: undefined,
            initialized: false,
            initialValue: undefined,
            flags: createFlags(),
            failedRules: {},
            isActive: true,
            id: ''
        };
        return defaultValues;
    }
    var ValidationProvider = Vue.extend({
        inject: {
            $_veeObserver: {
                from: '$_veeObserver',
                default: function () {
                    if (!this.$vnode.context.$_veeObserver) {
                        this.$vnode.context.$_veeObserver = createObserver();
                    }
                    return this.$vnode.context.$_veeObserver;
                }
            }
        },
        props: {
            vid: {
                type: String,
                default: ''
            },
            name: {
                type: String,
                default: null
            },
            mode: {
                type: [String, Function],
                default: function () {
                    return getConfig().mode;
                }
            },
            rules: {
                type: [Object, String],
                default: null
            },
            immediate: {
                type: Boolean,
                default: false
            },
            bails: {
                type: Boolean,
                default: function () { return getConfig().bails; }
            },
            skipIfEmpty: {
                type: Boolean,
                default: function () { return getConfig().skipOptional; }
            },
            debounce: {
                type: Number,
                default: 0
            },
            tag: {
                type: String,
                default: 'span'
            },
            slim: {
                type: Boolean,
                default: false
            },
            disabled: {
                type: Boolean,
                default: false
            },
            customMessages: {
                type: Object,
                default: function () {
                    return {};
                }
            }
        },
        watch: {
            rules: {
                deep: true,
                handler: function (val, oldVal) {
                    this._needsValidation = !isEqual(val, oldVal);
                }
            }
        },
        data: data,
        computed: {
            fieldDeps: function () {
                var _this = this;
                return Object.keys(this.normalizedRules).reduce(function (acc, rule) {
                    var deps = extractLocators(_this.normalizedRules[rule]).map(function (dep) { return dep.__locatorRef; });
                    acc.push.apply(acc, deps);
                    deps.forEach(function (depName) {
                        watchCrossFieldDep(_this, depName);
                    });
                    return acc;
                }, []);
            },
            normalizedEvents: function () {
                var _this = this;
                var on = computeModeSetting(this).on;
                return (on || []).map(function (e) {
                    if (e === 'input') {
                        return _this._inputEventName;
                    }
                    return e;
                });
            },
            isRequired: function () {
                var rules = __assign(__assign({}, this._resolvedRules), this.normalizedRules);
                var isRequired = Object.keys(rules).some(RuleContainer.isRequireRule);
                this.flags.required = !!isRequired;
                return isRequired;
            },
            classes: function () {
                var names = getConfig().classes;
                return computeClassObj(names, this.flags);
            },
            normalizedRules: function () {
                return normalizeRules(this.rules);
            }
        },
        created: function () {
            var _this = this;
            var onLocaleChanged = function () {
                if (!_this.flags.validated) {
                    return;
                }
                var regenerateMap = _this._regenerateMap;
                if (regenerateMap) {
                    var errors_1 = [];
                    var failedRules_1 = {};
                    Object.keys(regenerateMap).forEach(function (rule) {
                        var msg = regenerateMap[rule]();
                        errors_1.push(msg);
                        failedRules_1[rule] = msg;
                    });
                    _this.applyResult({ errors: errors_1, failedRules: failedRules_1, regenerateMap: regenerateMap });
                    return;
                }
                _this.validate();
            };
            EVENT_BUS.$on('change:locale', onLocaleChanged);
            this.$on('hook:beforeDestroy', function () {
                EVENT_BUS.$off('change:locale', onLocaleChanged);
            });
        },
        render: function (h) {
            var _this = this;
            this.registerField();
            var ctx = createValidationCtx(this);
            var children = normalizeChildren(this, ctx);
            // Handle single-root slot.
            extractVNodes(children).forEach(function (input) {
                // resolved rules are not reactive because it has a new reference each time.
                // causing infinite render-loops.
                // So we are comparing them manually to decide if we need to validate or not.
                var resolved = getConfig().useConstraintAttrs ? resolveRules(input) : {};
                if (!isEqual(_this._resolvedRules, resolved)) {
                    _this._needsValidation = true;
                }
                _this._resolvedRules = resolved;
                addListeners(_this, input);
            });
            return this.slim && children.length <= 1 ? children[0] : h(this.tag, children);
        },
        beforeDestroy: function () {
            // cleanup reference.
            this.$_veeObserver.unsubscribe(this.id);
        },
        activated: function () {
            this.isActive = true;
        },
        deactivated: function () {
            this.isActive = false;
        },
        methods: {
            setFlags: function (flags) {
                var _this = this;
                Object.keys(flags).forEach(function (flag) {
                    _this.flags[flag] = flags[flag];
                });
            },
            syncValue: function (v) {
                var value = normalizeEventValue(v);
                this.value = value;
                this.flags.changed = this.initialValue !== value;
            },
            reset: function () {
                this.errors = [];
                this.initialValue = this.value;
                var flags = createFlags();
                flags.required = this.isRequired;
                this.setFlags(flags);
                this.validateSilent();
            },
            validate: function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                return __awaiter(this, void 0, void 0, function () {
                    var result;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                if (args.length > 0) {
                                    this.syncValue(args[0]);
                                }
                                return [4 /*yield*/, this.validateSilent()];
                            case 1:
                                result = _a.sent();
                                this.applyResult(result);
                                return [2 /*return*/, result];
                        }
                    });
                });
            },
            validateSilent: function () {
                return __awaiter(this, void 0, void 0, function () {
                    var rules, result;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0:
                                this.setFlags({ pending: true });
                                rules = __assign(__assign({}, this._resolvedRules), this.normalizedRules);
                                Object.defineProperty(rules, '_$$isNormalized', {
                                    value: true,
                                    writable: false,
                                    enumerable: false,
                                    configurable: false
                                });
                                return [4 /*yield*/, validate(this.value, rules, {
                                        name: this.name,
                                        values: createValuesLookup(this),
                                        bails: this.bails,
                                        skipIfEmpty: this.skipIfEmpty,
                                        isInitial: !this.initialized,
                                        customMessages: this.customMessages
                                    })];
                            case 1:
                                result = _a.sent();
                                this.setFlags({
                                    pending: false,
                                    valid: result.valid,
                                    invalid: !result.valid
                                });
                                return [2 /*return*/, result];
                        }
                    });
                });
            },
            setErrors: function (errors) {
                this.applyResult({ errors: errors, failedRules: {} });
            },
            applyResult: function (_a) {
                var errors = _a.errors, failedRules = _a.failedRules, regenerateMap = _a.regenerateMap;
                this.errors = errors;
                this._regenerateMap = regenerateMap;
                this.failedRules = __assign({}, (failedRules || {}));
                this.setFlags({
                    valid: !errors.length,
                    passed: !errors.length,
                    invalid: !!errors.length,
                    failed: !!errors.length,
                    validated: true,
                    changed: this.value !== this.initialValue
                });
            },
            registerField: function () {
                updateRenderingContextRefs(this);
            }
        }
    });
    function computeClassObj(names, flags) {
        var acc = {};
        var keys = Object.keys(flags);
        var length = keys.length;
        var _loop_1 = function (i) {
            var flag = keys[i];
            var className = (names && names[flag]) || flag;
            var value = flags[flag];
            if (isNullOrUndefined(value)) {
                return "continue";
            }
            if ((flag === 'valid' || flag === 'invalid') && !flags.validated) {
                return "continue";
            }
            if (typeof className === 'string') {
                acc[className] = value;
            }
            else if (Array.isArray(className)) {
                className.forEach(function (cls) {
                    acc[cls] = value;
                });
            }
        };
        for (var i = 0; i < length; i++) {
            _loop_1(i);
        }
        return acc;
    }
    function createValuesLookup(vm) {
        var providers = vm.$_veeObserver.refs;
        var reduced = {};
        return vm.fieldDeps.reduce(function (acc, depName) {
            if (!providers[depName]) {
                return acc;
            }
            acc[depName] = providers[depName].value;
            return acc;
        }, reduced);
    }
    function extractId(vm) {
        if (vm.vid) {
            return vm.vid;
        }
        if (vm.name) {
            return vm.name;
        }
        if (vm.id) {
            return vm.id;
        }
        PROVIDER_COUNTER++;
        return "_vee_" + PROVIDER_COUNTER;
    }
    function updateRenderingContextRefs(vm) {
        var providedId = extractId(vm);
        var id = vm.id;
        // Nothing has changed.
        if (!vm.isActive || (id === providedId && vm.$_veeObserver.refs[id])) {
            return;
        }
        // vid was changed.
        if (id !== providedId && vm.$_veeObserver.refs[id] === vm) {
            vm.$_veeObserver.unsubscribe(id);
        }
        vm.id = providedId;
        vm.$_veeObserver.subscribe(vm);
    }
    function createObserver() {
        return {
            refs: {},
            subscribe: function (vm) {
                this.refs[vm.id] = vm;
            },
            unsubscribe: function (id) {
                delete this.refs[id];
            }
        };
    }
    function watchCrossFieldDep(ctx, depName, withHooks) {
        if (withHooks === void 0) { withHooks = true; }
        var providers = ctx.$_veeObserver.refs;
        if (!ctx._veeWatchers) {
            ctx._veeWatchers = {};
        }
        if (!providers[depName] && withHooks) {
            return ctx.$once('hook:mounted', function () {
                watchCrossFieldDep(ctx, depName, false);
            });
        }
        if (!isCallable(ctx._veeWatchers[depName]) && providers[depName]) {
            ctx._veeWatchers[depName] = providers[depName].$watch('value', function () {
                if (ctx.flags.validated) {
                    ctx._needsValidation = true;
                    ctx.validate();
                }
            });
        }
    }

    var FLAGS_STRATEGIES = [
        ['pristine', 'every'],
        ['dirty', 'some'],
        ['touched', 'some'],
        ['untouched', 'every'],
        ['valid', 'every'],
        ['invalid', 'some'],
        ['pending', 'some'],
        ['validated', 'every'],
        ['changed', 'some'],
        ['passed', 'every'],
        ['failed', 'some']
    ];
    var OBSERVER_COUNTER = 0;
    function data$1() {
        var refs = {};
        var errors = {};
        var flags = {};
        // FIXME: Not sure of this one can be typed, circular type reference.
        var observers = [];
        return {
            id: '',
            refs: refs,
            observers: observers,
            errors: errors,
            flags: flags
        };
    }
    function provideSelf() {
        return {
            $_veeObserver: this
        };
    }
    var ValidationObserver = Vue.extend({
        name: 'ValidationObserver',
        provide: provideSelf,
        inject: {
            $_veeObserver: {
                from: '$_veeObserver',
                default: function () {
                    if (!this.$vnode.context.$_veeObserver) {
                        return null;
                    }
                    return this.$vnode.context.$_veeObserver;
                }
            }
        },
        props: {
            tag: {
                type: String,
                default: 'span'
            },
            vid: {
                type: String,
                default: function () {
                    return "obs_" + OBSERVER_COUNTER++;
                }
            },
            slim: {
                type: Boolean,
                default: false
            },
            disabled: {
                type: Boolean,
                default: false
            }
        },
        data: data$1,
        created: function () {
            var _this = this;
            this.id = this.vid;
            register(this);
            var onChange = debounce(function (_a) {
                var errors = _a.errors, flags = _a.flags;
                _this.errors = errors;
                _this.flags = flags;
            }, 16);
            this.$watch(function () {
                var vms = __spreadArrays(values(_this.refs), _this.observers);
                var errors = {};
                var flags = {};
                var length = vms.length;
                for (var i = 0; i < length; i++) {
                    var vm = vms[i];
                    errors[vm.id] = vm.errors;
                }
                FLAGS_STRATEGIES.forEach(function (_a) {
                    var flag = _a[0], method = _a[1];
                    flags[flag] = vms[method](function (vm) { return vm.flags[flag]; });
                });
                return { errors: errors, flags: flags };
            }, onChange);
        },
        activated: function () {
            register(this);
        },
        deactivated: function () {
            unregister(this);
        },
        beforeDestroy: function () {
            unregister(this);
        },
        render: function (h) {
            var children = normalizeChildren(this, prepareSlotProps(this));
            return this.slim && children.length <= 1 ? children[0] : h(this.tag, { on: this.$listeners }, children);
        },
        methods: {
            subscribe: function (subscriber, kind) {
                var _a;
                if (kind === void 0) { kind = 'provider'; }
                if (kind === 'observer') {
                    this.observers.push(subscriber);
                    return;
                }
                this.refs = __assign(__assign({}, this.refs), (_a = {}, _a[subscriber.id] = subscriber, _a));
            },
            unsubscribe: function (id, kind) {
                if (kind === void 0) { kind = 'provider'; }
                if (kind === 'provider') {
                    var provider = this.refs[id];
                    if (!provider) {
                        return;
                    }
                    this.$delete(this.refs, id);
                    return;
                }
                var idx = findIndex(this.observers, function (o) { return o.id === id; });
                if (idx !== -1) {
                    this.observers.splice(idx, 1);
                }
            },
            validate: function (_a) {
                var _b = (_a === void 0 ? {} : _a).silent, silent = _b === void 0 ? false : _b;
                return __awaiter(this, void 0, void 0, function () {
                    var results;
                    return __generator(this, function (_c) {
                        switch (_c.label) {
                            case 0: return [4 /*yield*/, Promise.all(__spreadArrays(values(this.refs)
                                    .filter(function (r) { return !r.disabled; })
                                    .map(function (ref) { return ref[silent ? 'validateSilent' : 'validate']().then(function (r) { return r.valid; }); }), this.observers.filter(function (o) { return !o.disabled; }).map(function (obs) { return obs.validate({ silent: silent }); })))];
                            case 1:
                                results = _c.sent();
                                return [2 /*return*/, results.every(function (r) { return r; })];
                        }
                    });
                });
            },
            handleSubmit: function (cb) {
                return __awaiter(this, void 0, void 0, function () {
                    var isValid;
                    return __generator(this, function (_a) {
                        switch (_a.label) {
                            case 0: return [4 /*yield*/, this.validate()];
                            case 1:
                                isValid = _a.sent();
                                if (!isValid || !cb) {
                                    return [2 /*return*/];
                                }
                                return [2 /*return*/, cb()];
                        }
                    });
                });
            },
            reset: function () {
                return __spreadArrays(values(this.refs), this.observers).forEach(function (ref) { return ref.reset(); });
            },
            setErrors: function (errors) {
                var _this = this;
                Object.keys(errors).forEach(function (key) {
                    var provider = _this.refs[key];
                    if (!provider)
                        return;
                    provider.setErrors(errors[key] || []);
                });
                this.observers.forEach(function (observer) {
                    observer.setErrors(errors);
                });
            }
        }
    });
    function unregister(vm) {
        if (vm.$_veeObserver) {
            vm.$_veeObserver.unsubscribe(vm.id, 'observer');
        }
    }
    function register(vm) {
        if (vm.$_veeObserver) {
            vm.$_veeObserver.subscribe(vm, 'observer');
        }
    }
    function prepareSlotProps(vm) {
        return __assign(__assign({}, vm.flags), { errors: vm.errors, validate: vm.validate, passes: vm.handleSubmit, handleSubmit: vm.handleSubmit, reset: vm.reset });
    }

    function withValidation(component, mapProps) {
        if (mapProps === void 0) { mapProps = identity; }
        var _a, _b;
        var options = 'options' in component ? component.options : component;
        var providerOpts = ValidationProvider.options;
        var hoc = {
            name: (options.name || 'AnonymousHoc') + "WithValidation",
            props: __assign({}, providerOpts.props),
            data: providerOpts.data,
            computed: __assign({}, providerOpts.computed),
            methods: __assign({}, providerOpts.methods),
            beforeDestroy: providerOpts.beforeDestroy,
            inject: providerOpts.inject
        };
        var eventName = ((_b = (_a = options) === null || _a === void 0 ? void 0 : _a.model) === null || _b === void 0 ? void 0 : _b.event) || 'input';
        hoc.render = function (h) {
            var _a;
            var _b, _c;
            this.registerField();
            var vctx = createValidationCtx(this);
            var listeners = __assign({}, this.$listeners);
            var model = findModel(this.$vnode);
            this._inputEventName = this._inputEventName || getInputEventName(this.$vnode, model);
            var value = findValue(this.$vnode);
            onRenderUpdate(this, (_b = value) === null || _b === void 0 ? void 0 : _b.value);
            var _d = createCommonHandlers(this), onInput = _d.onInput, onBlur = _d.onBlur, onValidate = _d.onValidate;
            mergeVNodeListeners(listeners, eventName, onInput);
            mergeVNodeListeners(listeners, 'blur', onBlur);
            this.normalizedEvents.forEach(function (evt) {
                mergeVNodeListeners(listeners, evt, onValidate);
            });
            // Props are any attrs not associated with ValidationProvider Plus the model prop.
            // WARNING: Accidental prop overwrite will probably happen.
            var prop = (findModelConfig(this.$vnode) || { prop: 'value' }).prop;
            var props = __assign(__assign(__assign({}, this.$attrs), (_a = {}, _a[prop] = (_c = model) === null || _c === void 0 ? void 0 : _c.value, _a)), mapProps(vctx));
            return h(options, {
                attrs: this.$attrs,
                props: props,
                on: listeners
            }, normalizeSlots(this.$slots, this.$vnode.context));
        };
        return hoc;
    }

    var version = '3.1.1';

    exports.ValidationObserver = ValidationObserver;
    exports.ValidationProvider = ValidationProvider;
    exports.configure = configure;
    exports.extend = extend;
    exports.localeChanged = localeChanged;
    exports.localize = localize;
    exports.normalizeRules = normalizeRules;
    exports.setInteractionMode = setInteractionMode;
    exports.validate = validate;
    exports.version = version;
    exports.withValidation = withValidation;

    Object.defineProperty(exports, '__esModule', { value: true });

})));
/*
    Sticky-kit v1.1.2 | WTFPL | Leaf Corcoran 2015 | http://leafo.net
    https://leafo.net/sticky-kit/#reference
*/
(function(){var b,f;b=this.jQuery||window.jQuery;f=b(window);b.fn.stick_in_parent=function(d){var A,w,J,n,B,K,p,q,k,E,t;null==d&&(d={});t=d.sticky_class;B=d.inner_scrolling;E=d.recalc_every;k=d.parent;q=d.offset_top;p=d.spacer;w=d.bottoming;null==q&&(q=0);null==k&&(k=void 0);null==B&&(B=!0);null==t&&(t="is_stuck");A=b(document);null==w&&(w=!0);J=function(a,d,n,C,F,u,r,G){var v,H,m,D,I,c,g,x,y,z,h,l;if(!a.data("sticky_kit")){a.data("sticky_kit",!0);I=A.height();g=a.parent();null!=k&&(g=g.closest(k));
if(!g.length)throw"failed to find stick parent";v=m=!1;(h=null!=p?p&&a.closest(p):b("<div />"))&&h.css("position",a.css("position"));x=function(){var c,f,e;if(!G&&(I=A.height(),c=parseInt(g.css("border-top-width"),10),f=parseInt(g.css("padding-top"),10),d=parseInt(g.css("padding-bottom"),10),n=g.offset().top+c+f,C=g.height(),m&&(v=m=!1,null==p&&(a.insertAfter(h),h.detach()),a.css({position:"",top:"",width:"",bottom:""}).removeClass(t),e=!0),F=a.offset().top-(parseInt(a.css("margin-top"),10)||0)-q,
u=a.outerHeight(!0),r=a.css("float"),h&&h.css({width:a.outerWidth(!0),height:u,display:a.css("display"),"vertical-align":a.css("vertical-align"),"float":r}),e))return l()};x();if(u!==C)return D=void 0,c=q,z=E,l=function(){var b,l,e,k;if(!G&&(e=!1,null!=z&&(--z,0>=z&&(z=E,x(),e=!0)),e||A.height()===I||x(),e=f.scrollTop(),null!=D&&(l=e-D),D=e,m?(w&&(k=e+u+c>C+n,v&&!k&&(v=!1,a.css({position:"fixed",bottom:"",top:c}).trigger("sticky_kit:unbottom"))),e<F&&(m=!1,c=q,null==p&&("left"!==r&&"right"!==r||a.insertAfter(h),
h.detach()),b={position:"",width:"",top:""},a.css(b).removeClass(t).trigger("sticky_kit:unstick")),B&&(b=f.height(),u+q>b&&!v&&(c-=l,c=Math.max(b-u,c),c=Math.min(q,c),m&&a.css({top:c+"px"})))):e>F&&(m=!0,b={position:"fixed",top:c},b.width="border-box"===a.css("box-sizing")?a.outerWidth()+"px":a.width()+"px",a.css(b).addClass(t),null==p&&(a.after(h),"left"!==r&&"right"!==r||h.append(a)),a.trigger("sticky_kit:stick")),m&&w&&(null==k&&(k=e+u+c>C+n),!v&&k)))return v=!0,"static"===g.css("position")&&g.css({position:"relative"}),
a.css({position:"absolute",bottom:d,top:"auto"}).trigger("sticky_kit:bottom")},y=function(){x();return l()},H=function(){G=!0;f.off("touchmove",l);f.off("scroll",l);f.off("resize",y);b(document.body).off("sticky_kit:recalc",y);a.off("sticky_kit:detach",H);a.removeData("sticky_kit");a.css({position:"",bottom:"",top:"",width:""});g.position("position","");if(m)return null==p&&("left"!==r&&"right"!==r||a.insertAfter(h),h.remove()),a.removeClass(t)},f.on("touchmove",l),f.on("scroll",l),f.on("resize",
y),b(document.body).on("sticky_kit:recalc",y),a.on("sticky_kit:detach",H),setTimeout(l,0)}};n=0;for(K=this.length;n<K;n++)d=this[n],J(b(d));return this}}).call(this);


/* 
Sample usage:
========================
<general-dropdown
    name="site-dropdown"
    :options="[
        { label: 'Business', value: 'business' },
        { label: 'Personal', value: 'personal' },
        { label: 'Preferred', value: 'preferred' },
    ]"
    default-value="preferred"
/>
*/
Vue.component('general-dropdown', {
    template: $('[data-template-id="vue-general-dropdown"]').html(),
    name: 'general-dropdown',
    // mixins: [SmoothReflow],
    data: function () {
        return {
            isExpanded: false,
            selected: {},
            hoverIndex: -1,
        }
    },
    props: {
        placeholder: { type: String, default: 'Select' },
        name: { type: String },
        options: { type: Array },
        defaultValue: { type: String },
        value: { type: String },
        required: { type: Boolean, default: false },
        readOnly: { type: Boolean, default: false },
    },
    created: function () {
        var context = this;
        if (context.defaultValue) {
            context.selected = context.options.find(function (item) { return item.value === context.defaultValue })||{};
        }
    },
    methods: {
        handleClickOutside: function (event) {
            this.isExpanded = false;
        },
        handleOptionClick: function (item) {
            this.$emit('input', item.value);
            this.isExpanded = false;
            if (this.value) return;
            this.selected = item;
        },
        handleBlur: function () {
            this.isExpanded = false;
        },
        handleKeydown: function (event) {
            var newIndex = this.hoverIndex;
            // console.log('event.key = ', event.key);
            switch (event.key) {
                case 'Down':
                case 'ArrowDown':
                    event.preventDefault();
                    this.isExpanded = true;
                    newIndex++;
                    break;
                    
                case 'Up':
                case 'ArrowUp':
                    event.preventDefault();
                    this.isExpanded = true;
                    newIndex--;
                    break;
                
                case 'Spacebar':
                case ' ':
                case 'Enter':
                    event.preventDefault();
                    this.handleOptionClick(this.options[newIndex]);
                    break;
                    
                case 'Esc':
                case 'Escape':
                    event.preventDefault();
                    this.isExpanded = false;
                    break;
            }
            
            this.hoverIndex = Math.min(Math.max(0, newIndex), this.options.length-1 );
        },
    },
    watch: {
        value: {
            handler: function (newValue) {
                // if (!Array.isArray(this.options)) {
                //     this.selected = {};
                //     return;
                // }
                this.selected = this.options.find(function (opt) {
                    return opt.value == newValue;
                }) || {};
            },
            immediate: true
        },
    },
    mounted: function () {
        // this.$smoothReflow();
    },
});



/* 
Sample usage:
========================
<vue-radio>
	<div value="A">Option A</div>
	<div value="B">Option B</div>
	<div value="C">Option C</div>
</vue-radio>

!!! IMPORTANT !!!
	- Each slot will be treated as 1 radio button
	- Each slot must have "value" attribute
*/
Vue.component('vue-radio', {
    template: $('[data-template-id="vue-radio"]').html(),
    name: 'vue-radio',
    data: function () {
        return {
            dataVal: '',
        }
    },
    props: {
        name: { type: String, required: true },
        defaultValue: { type: String },
        value: { type: String },
    },
    created: function () {
        var context = this;
        if (this.defaultValue) {
        	this.dataVal = this.defaultValue;
        }
    },
    methods: {
        handleOptionClick: function (item) {
            this.$emit('input', item.value);
            this.isExpanded = false;
            if (this.value) return;
            this.selected = item;
        },
        handleRadioChange: function (event) {
            this.$emit('input', event.target.value);
            if (this.value) return;
            this.dataVal = event.target.value;
        },
    },
    computed: {
        defaultSlots: function () {
            // remove whitespace node
            if (!this.$slots.default) return [];
            return this.$slots.default.filter(function (node) {
            	var elm = node.elm;
                var textTrimmed = node.text ? node.text.trim() : undefined;
                if (!elm && textTrimmed === '' && !node.tag) {
            		return false;
            	}
            	return true;
            });
        }
    },
});



/* 
Sample usage:
========================
<vue-overlay>
	<!-- your content -->
</vue-overlay>
*/
Vue.component('vue-overlay', {
    template: $('[data-template-id="vue-overlay"]').html(),
    name: 'vue-overlay',
    inheritAttrs: false,
    data: function () {
        return {
            internal_isVisible: true,
        }
    },
    props: {
        visible: { type: Boolean, default: true },
        backdropClosable: { type: Boolean, default: true },
        showCloseBtn: { type: Boolean, default: true },
    },
    created: function () {
        
    },
    methods: {
        handleCloseOverlay: function () {
            this.$emit('on-close');
            this.internal_isVisible = false;
        }
    },
    computed: {
        isVisible: function () {
            if (typeof this.visible === 'boolean') {
                return this.visible;
            }
            return this.internal_isVisible;
        },
    },
    watch: {
        isVisible: {
            immediate: true,
            handler: function (value) {
                if (value) {
                    this._documentOriginalOverflow = $('html').css('overflow');
                    $('html').css('overflow', 'hidden');
                } else {
                    $('html').css('overflow', this._documentOriginalOverflow||'auto');
                }
            },
        }
    },
});


(function () {
	window.modalPopupInstance = null;
	
	if ($('modal-popup').length > 0) {
		var el = $('modal-popup').get(0);
		
		window.modalPopupInstance = new Vue({
			el: el,
			template: el.innerHTML,
			name: 'modal-popup',
			data: function () {
				return {
					showModal: false,
					modalUrl: '',
					isFetching: false,

					modalRawHTML: '', // fetched content (async computed)
				}
			},
			computed: {
				/* Why we need this "modalRawHTML_processed" property:
					- In AEM's rich text component when adding an extra line (not line break), AEM essentially print one extra <p> with a space as content.
					- This causes browser to render an extra line with width 100% and some height (since <p> is block content).
					
					- HOWEVER, when during Vue's runtime complilation, it interprets <p> as an empty node (space is ignored).
					- This empty <p> causes browser to collapse the <p> in DOM (no width, no height).
					- To solve this, this computed property force Vue to render it with a space by forcing a "&nbsp;" in between the tag.
				*/
				modalRawHTML_processed: function () {
					return this.modalRawHTML.replace(/<p> <\/p>/gi, '<p>&nbsp;</p>') || '';
				},
				mountingNode: function () {
					return {
						template: this.modalRawHTML_processed || '<div></div>',
					}
				},
			},
			methods: {
				fetchRawHTML: function (url) {
					var context = this;
					context.isFetching = true;
					$.ajax({
						url: url,
					}).done(function (resp) {
						context.modalRawHTML = resp;
						context.isFetching = false;
						context.initModalContent();
					}).fail(function (resp) {
						context.isFetching = false;
					});
				},
				simulateWindowResize: function () {
					this.$nextTick(function () {
						window.dispatchEvent(new Event('resize'));
					});
				},
				initializeComponents: function () {
					var context = this;
					this.$nextTick(function () {
						var tableEl = context.$el.querySelectorAll('.cmp-table');
						if (tableEl.length > 0) {
							tableEl.forEach(function (el) {
								window.initComponent['table'](el);
							});
						}
					});
				},
				
				initModalContent: function () {
					this.simulateWindowResize();
					this.initializeComponents();
				},
			},
			watch: {
				modalUrl: function (newVal) {
					var url = null;
                    var runMode = window.runMode || "";
					try {
						url = new URL(newVal);
					} catch (err) {
						try {
							url = new URL(window.location.origin + newVal);
						} catch (err) {
							console.error(newVal, ' is not a valid url. Unable to proceed to fetch its content.');
							return;
						}
					}
					url.pathname = url.pathname.replace(/\.html$/i, '') + '/jcr:content/root.html';
                    if(runMode.indexOf("author")>0)
						url.searchParams.set('wcmmode', 'disabled');
					this.fetchRawHTML(url.href);
				},
				showModal: function (newVal) {
					if (newVal) this.initModalContent();
					$(window).trigger('modal-popup:visibility', {
						visibility: newVal,
					});
				},
			},
		});
	}
	
	window.modalPopup = function modalPopup (options) {
		if (window.modalPopupInstance) {
			window.modalPopupInstance.showModal = !!options.show;
			window.modalPopupInstance.modalUrl = options.contentUrl;
		}
	};
})();


/* Legacy code, not using - keeping for reference only */
/*
$('[data-component="modal-popup"]').each(function (index, el) {
	var elementID = el.id;

	window.components[elementID] = new Vue({
		el: el,
		name: 'cta-modal',
		data: function () {
			return {
				showModal: false,
				modalUrl: '',

				modalRawHTML: '', // fetched on mounted()
			}
		},
		computed: {
			source_rootOnly: function () {
				var url = new URL(window.location.origin + this.modalUrl);
				url.pathname = url.pathname.replace(/\.html$/i, '') + '/jcr:content/root.html';
				url.searchParams.set('wcmmode', 'disabled');
				return url.href;
			},
			mountingNode: function () {
				return {
					template: this.modalRawHTML || '<div></div>',
				}
			},
		},
		mounted: function () {
			var context = this;
			$.ajax({
				url: this.source_rootOnly,
			}).done(function (resp) {
				context.modalRawHTML = resp;
			}).fail(function (resp) {

			});
		},
		methods: {

		},
	});
});
*/
/*
  Github: https://github.com/NightCatSama/vue-slider-component
  Version: 3.0.39
*/
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory(require("vue"));
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["vue-slider-component"] = factory(require("vue"));
	else
		root["vue-slider-component"] = factory(root["Vue"]);
})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__8bbf__) {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "fb15");
/******/ })
/************************************************************************/
/******/ ({

/***/ "2350":
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function(useSourceMap) {
	var list = [];

	// return the list of modules as css string
	list.toString = function toString() {
		return this.map(function (item) {
			var content = cssWithMappingToString(item, useSourceMap);
			if(item[2]) {
				return "@media " + item[2] + "{" + content + "}";
			} else {
				return content;
			}
		}).join("");
	};

	// import a list of modules into the list
	list.i = function(modules, mediaQuery) {
		if(typeof modules === "string")
			modules = [[null, modules, ""]];
		var alreadyImportedModules = {};
		for(var i = 0; i < this.length; i++) {
			var id = this[i][0];
			if(typeof id === "number")
				alreadyImportedModules[id] = true;
		}
		for(i = 0; i < modules.length; i++) {
			var item = modules[i];
			// skip already imported module
			// this implementation is not 100% perfect for weird media query combinations
			//  when a module is imported multiple times with different media queries.
			//  I hope this will never occur (Hey this way we have smaller bundles)
			if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
				if(mediaQuery && !item[2]) {
					item[2] = mediaQuery;
				} else if(mediaQuery) {
					item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
				}
				list.push(item);
			}
		}
	};
	return list;
};

function cssWithMappingToString(item, useSourceMap) {
	var content = item[1] || '';
	var cssMapping = item[3];
	if (!cssMapping) {
		return content;
	}

	if (useSourceMap && typeof btoa === 'function') {
		var sourceMapping = toComment(cssMapping);
		var sourceURLs = cssMapping.sources.map(function (source) {
			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'
		});

		return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
	}

	return [content].join('\n');
}

// Adapted from convert-source-map (MIT)
function toComment(sourceMap) {
	// eslint-disable-next-line no-undef
	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;

	return '/*# ' + data + ' */';
}


/***/ }),

/***/ "2638":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
function _extends(){return _extends=Object.assign||function(a){for(var b,c=1;c<arguments.length;c++)for(var d in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,d)&&(a[d]=b[d]);return a},_extends.apply(this,arguments)}var normalMerge=["attrs","props","domProps"],toArrayMerge=["class","style","directives"],functionalMerge=["on","nativeOn"],mergeJsxProps=function(a){return a.reduce(function(c,a){for(var b in a)if(!c[b])c[b]=a[b];else if(-1!==normalMerge.indexOf(b))c[b]=_extends({},c[b],a[b]);else if(-1!==toArrayMerge.indexOf(b)){var d=c[b]instanceof Array?c[b]:[c[b]],e=a[b]instanceof Array?a[b]:[a[b]];c[b]=d.concat(e)}else if(-1!==functionalMerge.indexOf(b)){for(var f in a[b])if(c[b][f]){var g=c[b][f]instanceof Array?c[b][f]:[c[b][f]],h=a[b][f]instanceof Array?a[b][f]:[a[b][f]];c[b][f]=g.concat(h)}else c[b][f]=a[b][f];}else if("hook"==b)for(var i in a[b])c[b][i]=c[b][i]?mergeFn(c[b][i],a[b][i]):a[b][i];else c[b]=a[b];return c},{})},mergeFn=function(a,b){return function(){a&&a.apply(this,arguments),b&&b.apply(this,arguments)}};module.exports=mergeJsxProps;


/***/ }),

/***/ "499e":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/vue-style-loader/lib/listToStyles.js
/**
 * Translates the list format produced by css-loader into something
 * easier to manipulate.
 */
function listToStyles (parentId, list) {
  var styles = []
  var newStyles = {}
  for (var i = 0; i < list.length; i++) {
    var item = list[i]
    var id = item[0]
    var css = item[1]
    var media = item[2]
    var sourceMap = item[3]
    var part = {
      id: parentId + ':' + i,
      css: css,
      media: media,
      sourceMap: sourceMap
    }
    if (!newStyles[id]) {
      styles.push(newStyles[id] = { id: id, parts: [part] })
    } else {
      newStyles[id].parts.push(part)
    }
  }
  return styles
}

// CONCATENATED MODULE: ./node_modules/vue-style-loader/lib/addStylesClient.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return addStylesClient; });
/*
  MIT License http://www.opensource.org/licenses/mit-license.php
  Author Tobias Koppers @sokra
  Modified by Evan You @yyx990803
*/



var hasDocument = typeof document !== 'undefined'

if (typeof DEBUG !== 'undefined' && DEBUG) {
  if (!hasDocument) {
    throw new Error(
    'vue-style-loader cannot be used in a non-browser environment. ' +
    "Use { target: 'node' } in your Webpack config to indicate a server-rendering environment."
  ) }
}

/*
type StyleObject = {
  id: number;
  parts: Array<StyleObjectPart>
}

type StyleObjectPart = {
  css: string;
  media: string;
  sourceMap: ?string
}
*/

var stylesInDom = {/*
  [id: number]: {
    id: number,
    refs: number,
    parts: Array<(obj?: StyleObjectPart) => void>
  }
*/}

var head = hasDocument && (document.head || document.getElementsByTagName('head')[0])
var singletonElement = null
var singletonCounter = 0
var isProduction = false
var noop = function () {}
var options = null
var ssrIdKey = 'data-vue-ssr-id'

// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
// tags it will allow on a page
var isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\b/.test(navigator.userAgent.toLowerCase())

function addStylesClient (parentId, list, _isProduction, _options) {
  isProduction = _isProduction

  options = _options || {}

  var styles = listToStyles(parentId, list)
  addStylesToDom(styles)

  return function update (newList) {
    var mayRemove = []
    for (var i = 0; i < styles.length; i++) {
      var item = styles[i]
      var domStyle = stylesInDom[item.id]
      domStyle.refs--
      mayRemove.push(domStyle)
    }
    if (newList) {
      styles = listToStyles(parentId, newList)
      addStylesToDom(styles)
    } else {
      styles = []
    }
    for (var i = 0; i < mayRemove.length; i++) {
      var domStyle = mayRemove[i]
      if (domStyle.refs === 0) {
        for (var j = 0; j < domStyle.parts.length; j++) {
          domStyle.parts[j]()
        }
        delete stylesInDom[domStyle.id]
      }
    }
  }
}

function addStylesToDom (styles /* Array<StyleObject> */) {
  for (var i = 0; i < styles.length; i++) {
    var item = styles[i]
    var domStyle = stylesInDom[item.id]
    if (domStyle) {
      domStyle.refs++
      for (var j = 0; j < domStyle.parts.length; j++) {
        domStyle.parts[j](item.parts[j])
      }
      for (; j < item.parts.length; j++) {
        domStyle.parts.push(addStyle(item.parts[j]))
      }
      if (domStyle.parts.length > item.parts.length) {
        domStyle.parts.length = item.parts.length
      }
    } else {
      var parts = []
      for (var j = 0; j < item.parts.length; j++) {
        parts.push(addStyle(item.parts[j]))
      }
      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }
    }
  }
}

function createStyleElement () {
  var styleElement = document.createElement('style')
  styleElement.type = 'text/css'
  head.appendChild(styleElement)
  return styleElement
}

function addStyle (obj /* StyleObjectPart */) {
  var update, remove
  var styleElement = document.querySelector('style[' + ssrIdKey + '~="' + obj.id + '"]')

  if (styleElement) {
    if (isProduction) {
      // has SSR styles and in production mode.
      // simply do nothing.
      return noop
    } else {
      // has SSR styles but in dev mode.
      // for some reason Chrome can't handle source map in server-rendered
      // style tags - source maps in <style> only works if the style tag is
      // created and inserted dynamically. So we remove the server rendered
      // styles and inject new ones.
      styleElement.parentNode.removeChild(styleElement)
    }
  }

  if (isOldIE) {
    // use singleton mode for IE9.
    var styleIndex = singletonCounter++
    styleElement = singletonElement || (singletonElement = createStyleElement())
    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)
    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)
  } else {
    // use multi-style-tag mode in all other cases
    styleElement = createStyleElement()
    update = applyToTag.bind(null, styleElement)
    remove = function () {
      styleElement.parentNode.removeChild(styleElement)
    }
  }

  update(obj)

  return function updateStyle (newObj /* StyleObjectPart */) {
    if (newObj) {
      if (newObj.css === obj.css &&
          newObj.media === obj.media &&
          newObj.sourceMap === obj.sourceMap) {
        return
      }
      update(obj = newObj)
    } else {
      remove()
    }
  }
}

var replaceText = (function () {
  var textStore = []

  return function (index, replacement) {
    textStore[index] = replacement
    return textStore.filter(Boolean).join('\n')
  }
})()

function applyToSingletonTag (styleElement, index, remove, obj) {
  var css = remove ? '' : obj.css

  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = replaceText(index, css)
  } else {
    var cssNode = document.createTextNode(css)
    var childNodes = styleElement.childNodes
    if (childNodes[index]) styleElement.removeChild(childNodes[index])
    if (childNodes.length) {
      styleElement.insertBefore(cssNode, childNodes[index])
    } else {
      styleElement.appendChild(cssNode)
    }
  }
}

function applyToTag (styleElement, obj) {
  var css = obj.css
  var media = obj.media
  var sourceMap = obj.sourceMap

  if (media) {
    styleElement.setAttribute('media', media)
  }
  if (options.ssrId) {
    styleElement.setAttribute(ssrIdKey, obj.id)
  }

  if (sourceMap) {
    // https://developer.chrome.com/devtools/docs/javascript-debugging
    // this makes source maps inside style tags work properly in Chrome
    css += '\n/*# sourceURL=' + sourceMap.sources[0] + ' */'
    // http://stackoverflow.com/a/26603875
    css += '\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'
  }

  if (styleElement.styleSheet) {
    styleElement.styleSheet.cssText = css
  } else {
    while (styleElement.firstChild) {
      styleElement.removeChild(styleElement.firstChild)
    }
    styleElement.appendChild(document.createTextNode(css))
  }
}


/***/ }),

/***/ "4abb":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("df80");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__("499e").default
var update = add("3e7284f8", content, true, {"sourceMap":false,"shadowMode":false});

/***/ }),

/***/ "4ed8":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("ae61");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__("499e").default
var update = add("57c2b2f0", content, true, {"sourceMap":false,"shadowMode":false});

/***/ }),

/***/ "556c":
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__("d5ac");
if(typeof content === 'string') content = [[module.i, content, '']];
if(content.locals) module.exports = content.locals;
// add the styles to the DOM
var add = __webpack_require__("499e").default
var update = add("f3ffc7f8", content, true, {"sourceMap":false,"shadowMode":false});

/***/ }),

/***/ "65d9":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/**
  * vue-class-component v7.0.1
  * (c) 2015-present Evan You
  * @license MIT
  */


Object.defineProperty(exports, '__esModule', { value: true });

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var Vue = _interopDefault(__webpack_require__("8bbf"));

// The rational behind the verbose Reflect-feature check below is the fact that there are polyfills
// which add an implementation for Reflect.defineMetadata but not for Reflect.getOwnMetadataKeys.
// Without this check consumers will encounter hard to track down runtime errors.
var reflectionIsSupported = typeof Reflect !== 'undefined' && Reflect.defineMetadata && Reflect.getOwnMetadataKeys;
function copyReflectionMetadata(to, from) {
    forwardMetadata(to, from);
    Object.getOwnPropertyNames(from.prototype).forEach(function (key) {
        forwardMetadata(to.prototype, from.prototype, key);
    });
    Object.getOwnPropertyNames(from).forEach(function (key) {
        forwardMetadata(to, from, key);
    });
}
function forwardMetadata(to, from, propertyKey) {
    var metaKeys = propertyKey
        ? Reflect.getOwnMetadataKeys(from, propertyKey)
        : Reflect.getOwnMetadataKeys(from);
    metaKeys.forEach(function (metaKey) {
        var metadata = propertyKey
            ? Reflect.getOwnMetadata(metaKey, from, propertyKey)
            : Reflect.getOwnMetadata(metaKey, from);
        if (propertyKey) {
            Reflect.defineMetadata(metaKey, metadata, to, propertyKey);
        }
        else {
            Reflect.defineMetadata(metaKey, metadata, to);
        }
    });
}

var fakeArray = { __proto__: [] };
var hasProto = fakeArray instanceof Array;
function createDecorator(factory) {
    return function (target, key, index) {
        var Ctor = typeof target === 'function'
            ? target
            : target.constructor;
        if (!Ctor.__decorators__) {
            Ctor.__decorators__ = [];
        }
        if (typeof index !== 'number') {
            index = undefined;
        }
        Ctor.__decorators__.push(function (options) { return factory(options, key, index); });
    };
}
function mixins() {
    var Ctors = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        Ctors[_i] = arguments[_i];
    }
    return Vue.extend({ mixins: Ctors });
}
function isPrimitive(value) {
    var type = typeof value;
    return value == null || (type !== 'object' && type !== 'function');
}
function warn(message) {
    if (typeof console !== 'undefined') {
        console.warn('[vue-class-component] ' + message);
    }
}

function collectDataFromConstructor(vm, Component) {
    // override _init to prevent to init as Vue instance
    var originalInit = Component.prototype._init;
    Component.prototype._init = function () {
        var _this = this;
        // proxy to actual vm
        var keys = Object.getOwnPropertyNames(vm);
        // 2.2.0 compat (props are no longer exposed as self properties)
        if (vm.$options.props) {
            for (var key in vm.$options.props) {
                if (!vm.hasOwnProperty(key)) {
                    keys.push(key);
                }
            }
        }
        keys.forEach(function (key) {
            if (key.charAt(0) !== '_') {
                Object.defineProperty(_this, key, {
                    get: function () { return vm[key]; },
                    set: function (value) { vm[key] = value; },
                    configurable: true
                });
            }
        });
    };
    // should be acquired class property values
    var data = new Component();
    // restore original _init to avoid memory leak (#209)
    Component.prototype._init = originalInit;
    // create plain data object
    var plainData = {};
    Object.keys(data).forEach(function (key) {
        if (data[key] !== undefined) {
            plainData[key] = data[key];
        }
    });
    if (false) {}
    return plainData;
}

var $internalHooks = [
    'data',
    'beforeCreate',
    'created',
    'beforeMount',
    'mounted',
    'beforeDestroy',
    'destroyed',
    'beforeUpdate',
    'updated',
    'activated',
    'deactivated',
    'render',
    'errorCaptured',
    'serverPrefetch' // 2.6
];
function componentFactory(Component, options) {
    if (options === void 0) { options = {}; }
    options.name = options.name || Component._componentTag || Component.name;
    // prototype props.
    var proto = Component.prototype;
    Object.getOwnPropertyNames(proto).forEach(function (key) {
        if (key === 'constructor') {
            return;
        }
        // hooks
        if ($internalHooks.indexOf(key) > -1) {
            options[key] = proto[key];
            return;
        }
        var descriptor = Object.getOwnPropertyDescriptor(proto, key);
        if (descriptor.value !== void 0) {
            // methods
            if (typeof descriptor.value === 'function') {
                (options.methods || (options.methods = {}))[key] = descriptor.value;
            }
            else {
                // typescript decorated data
                (options.mixins || (options.mixins = [])).push({
                    data: function () {
                        var _a;
                        return _a = {}, _a[key] = descriptor.value, _a;
                    }
                });
            }
        }
        else if (descriptor.get || descriptor.set) {
            // computed properties
            (options.computed || (options.computed = {}))[key] = {
                get: descriptor.get,
                set: descriptor.set
            };
        }
    });
    (options.mixins || (options.mixins = [])).push({
        data: function () {
            return collectDataFromConstructor(this, Component);
        }
    });
    // decorate options
    var decorators = Component.__decorators__;
    if (decorators) {
        decorators.forEach(function (fn) { return fn(options); });
        delete Component.__decorators__;
    }
    // find super
    var superProto = Object.getPrototypeOf(Component.prototype);
    var Super = superProto instanceof Vue
        ? superProto.constructor
        : Vue;
    var Extended = Super.extend(options);
    forwardStaticMembers(Extended, Component, Super);
    if (reflectionIsSupported) {
        copyReflectionMetadata(Extended, Component);
    }
    return Extended;
}
var reservedPropertyNames = [
    // Unique id
    'cid',
    // Super Vue constructor
    'super',
    // Component options that will be used by the component
    'options',
    'superOptions',
    'extendOptions',
    'sealedOptions',
    // Private assets
    'component',
    'directive',
    'filter'
];
function forwardStaticMembers(Extended, Original, Super) {
    // We have to use getOwnPropertyNames since Babel registers methods as non-enumerable
    Object.getOwnPropertyNames(Original).forEach(function (key) {
        // `prototype` should not be overwritten
        if (key === 'prototype') {
            return;
        }
        // Some browsers does not allow reconfigure built-in properties
        var extendedDescriptor = Object.getOwnPropertyDescriptor(Extended, key);
        if (extendedDescriptor && !extendedDescriptor.configurable) {
            return;
        }
        var descriptor = Object.getOwnPropertyDescriptor(Original, key);
        // If the user agent does not support `__proto__` or its family (IE <= 10),
        // the sub class properties may be inherited properties from the super class in TypeScript.
        // We need to exclude such properties to prevent to overwrite
        // the component options object which stored on the extended constructor (See #192).
        // If the value is a referenced value (object or function),
        // we can check equality of them and exclude it if they have the same reference.
        // If it is a primitive value, it will be forwarded for safety.
        if (!hasProto) {
            // Only `cid` is explicitly exluded from property forwarding
            // because we cannot detect whether it is a inherited property or not
            // on the no `__proto__` environment even though the property is reserved.
            if (key === 'cid') {
                return;
            }
            var superDescriptor = Object.getOwnPropertyDescriptor(Super, key);
            if (!isPrimitive(descriptor.value) &&
                superDescriptor &&
                superDescriptor.value === descriptor.value) {
                return;
            }
        }
        // Warn if the users manually declare reserved properties
        if (false) {}
        Object.defineProperty(Extended, key, descriptor);
    });
}

function Component(options) {
    if (typeof options === 'function') {
        return componentFactory(options);
    }
    return function (Component) {
        return componentFactory(Component, options);
    };
}
Component.registerHooks = function registerHooks(keys) {
    $internalHooks.push.apply($internalHooks, keys);
};

exports.default = Component;
exports.createDecorator = createDecorator;
exports.mixins = mixins;


/***/ }),

/***/ "8bbf":
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE__8bbf__;

/***/ }),

/***/ "ae61":
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__("2350")(false);
// imports


// module
exports.push([module.i, ".vue-slider-dot{position:absolute;will-change:transform;-webkit-transition:all 0s;transition:all 0s;z-index:5}.vue-slider-dot-tooltip{position:absolute;visibility:hidden}.vue-slider-dot-tooltip-show{visibility:visible}.vue-slider-dot-tooltip-top{top:-10px;left:50%;-webkit-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.vue-slider-dot-tooltip-bottom{bottom:-10px;left:50%;-webkit-transform:translate(-50%,100%);transform:translate(-50%,100%)}.vue-slider-dot-tooltip-left{left:-10px;top:50%;-webkit-transform:translate(-100%,-50%);transform:translate(-100%,-50%)}.vue-slider-dot-tooltip-right{right:-10px;top:50%;-webkit-transform:translate(100%,-50%);transform:translate(100%,-50%)}", ""]);

// exports


/***/ }),

/***/ "d5ac":
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__("2350")(false);
// imports


// module
exports.push([module.i, ".vue-slider-marks{position:relative;width:100%;height:100%}.vue-slider-mark{position:absolute;z-index:1}.vue-slider-ltr .vue-slider-mark,.vue-slider-rtl .vue-slider-mark{width:0;height:100%;top:50%}.vue-slider-ltr .vue-slider-mark-step,.vue-slider-rtl .vue-slider-mark-step{top:0}.vue-slider-ltr .vue-slider-mark-label,.vue-slider-rtl .vue-slider-mark-label{top:100%;margin-top:10px}.vue-slider-ltr .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ltr .vue-slider-mark-step{left:0}.vue-slider-ltr .vue-slider-mark-label{left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.vue-slider-rtl .vue-slider-mark{-webkit-transform:translate(50%,-50%);transform:translate(50%,-50%)}.vue-slider-rtl .vue-slider-mark-step{right:0}.vue-slider-rtl .vue-slider-mark-label{right:50%;-webkit-transform:translateX(50%);transform:translateX(50%)}.vue-slider-btt .vue-slider-mark,.vue-slider-ttb .vue-slider-mark{width:100%;height:0;left:50%}.vue-slider-btt .vue-slider-mark-step,.vue-slider-ttb .vue-slider-mark-step{left:0}.vue-slider-btt .vue-slider-mark-label,.vue-slider-ttb .vue-slider-mark-label{left:100%;margin-left:10px}.vue-slider-btt .vue-slider-mark{-webkit-transform:translate(-50%,50%);transform:translate(-50%,50%)}.vue-slider-btt .vue-slider-mark-step{top:0}.vue-slider-btt .vue-slider-mark-label{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.vue-slider-ttb .vue-slider-mark{-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.vue-slider-ttb .vue-slider-mark-step{bottom:0}.vue-slider-ttb .vue-slider-mark-label{bottom:50%;-webkit-transform:translateY(50%);transform:translateY(50%)}.vue-slider-mark-label,.vue-slider-mark-step{position:absolute}", ""]);

// exports


/***/ }),

/***/ "df80":
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__("2350")(false);
// imports


// module
exports.push([module.i, ".vue-slider{position:relative;-webkit-box-sizing:content-box;box-sizing:content-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:block;touch-action:none;-ms-touch-action:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.vue-slider-rail{position:relative;width:100%;height:100%;-webkit-transition-property:width,height,left,right,top,bottom;transition-property:width,height,left,right,top,bottom}.vue-slider-process{position:absolute;z-index:1}", ""]);

// exports


/***/ }),

/***/ "fb15":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);

// CONCATENATED MODULE: ./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js
// This file is imported into lib/wc client bundles.

if (typeof window !== 'undefined') {
  var setPublicPath_i
  if ((setPublicPath_i = window.document.currentScript) && (setPublicPath_i = setPublicPath_i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))) {
    __webpack_require__.p = setPublicPath_i[1] // eslint-disable-line
  }
}

// Indicate to webpack that this file can be concatenated
/* harmony default export */ var setPublicPath = (null);

// EXTERNAL MODULE: ./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js
var helper = __webpack_require__("2638");
var helper_default = /*#__PURE__*/__webpack_require__.n(helper);

// CONCATENATED MODULE: ./node_modules/tslib/tslib.es6.js
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __exportStar(m, exports) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}

function __values(o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];
    result.default = mod;
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

// EXTERNAL MODULE: external {"commonjs":"vue","commonjs2":"vue","root":"Vue"}
var external_commonjs_vue_commonjs2_vue_root_Vue_ = __webpack_require__("8bbf");
var external_commonjs_vue_commonjs2_vue_root_Vue_default = /*#__PURE__*/__webpack_require__.n(external_commonjs_vue_commonjs2_vue_root_Vue_);

// EXTERNAL MODULE: ./node_modules/vue-class-component/dist/vue-class-component.common.js
var vue_class_component_common = __webpack_require__("65d9");
var vue_class_component_common_default = /*#__PURE__*/__webpack_require__.n(vue_class_component_common);

// CONCATENATED MODULE: ./node_modules/vue-property-decorator/lib/vue-property-decorator.js
/** vue-property-decorator verson 8.0.0 MIT LICENSE copyright 2018 kaorun343 */




/**
 * decorator of an inject
 * @param from key
 * @return PropertyDecorator
 */
function Inject(options) {
    return Object(vue_class_component_common["createDecorator"])(function (componentOptions, key) {
        if (typeof componentOptions.inject === 'undefined') {
            componentOptions.inject = {};
        }
        if (!Array.isArray(componentOptions.inject)) {
            componentOptions.inject[key] = options || key;
        }
    });
}
/**
 * decorator of a provide
 * @param key key
 * @return PropertyDecorator | void
 */
function Provide(key) {
    return Object(vue_class_component_common["createDecorator"])(function (componentOptions, k) {
        var provide = componentOptions.provide;
        if (typeof provide !== 'function' || !provide.managed) {
            var original_1 = componentOptions.provide;
            provide = componentOptions.provide = function () {
                var rv = Object.create((typeof original_1 === 'function' ? original_1.call(this) : original_1) || null);
                for (var i in provide.managed)
                    rv[provide.managed[i]] = this[i];
                return rv;
            };
            provide.managed = {};
        }
        provide.managed[k] = key || k;
    });
}
/**
 * decorator of model
 * @param  event event name
 * @param options options
 * @return PropertyDecorator
 */
function Model(event, options) {
    if (options === void 0) { options = {}; }
    return Object(vue_class_component_common["createDecorator"])(function (componentOptions, k) {
        (componentOptions.props || (componentOptions.props = {}))[k] = options;
        componentOptions.model = { prop: k, event: event || k };
    });
}
/**
 * decorator of a prop
 * @param  options the options for the prop
 * @return PropertyDecorator | void
 */
function Prop(options) {
    if (options === void 0) { options = {}; }
    return Object(vue_class_component_common["createDecorator"])(function (componentOptions, k) {
        (componentOptions.props || (componentOptions.props = {}))[k] = options;
    });
}
/**
 * decorator of a watch function
 * @param  path the path or the expression to observe
 * @param  WatchOption
 * @return MethodDecorator
 */
function Watch(path, options) {
    if (options === void 0) { options = {}; }
    var _a = options.deep, deep = _a === void 0 ? false : _a, _b = options.immediate, immediate = _b === void 0 ? false : _b;
    return Object(vue_class_component_common["createDecorator"])(function (componentOptions, handler) {
        if (typeof componentOptions.watch !== 'object') {
            componentOptions.watch = Object.create(null);
        }
        var watch = componentOptions.watch;
        if (typeof watch[path] === 'object' && !Array.isArray(watch[path])) {
            watch[path] = [watch[path]];
        }
        else if (typeof watch[path] === 'undefined') {
            watch[path] = [];
        }
        watch[path].push({ handler: handler, deep: deep, immediate: immediate });
    });
}
// Code copied from Vue/src/shared/util.js
var hyphenateRE = /\B([A-Z])/g;
var hyphenate = function (str) { return str.replace(hyphenateRE, '-$1').toLowerCase(); };
/**
 * decorator of an event-emitter function
 * @param  event The name of the event
 * @return MethodDecorator
 */
function Emit(event) {
    return function (_target, key, descriptor) {
        key = hyphenate(key);
        var original = descriptor.value;
        descriptor.value = function emitter() {
            var _this = this;
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var emit = function (returnValue) {
                if (returnValue !== undefined)
                    args.unshift(returnValue);
                _this.$emit.apply(_this, [event || key].concat(args));
            };
            var returnValue = original.apply(this, args);
            if (isPromise(returnValue)) {
                returnValue.then(function (returnValue) {
                    emit(returnValue);
                });
            }
            else {
                emit(returnValue);
            }
        };
    };
}
function isPromise(obj) {
    return obj instanceof Promise || (obj && typeof obj.then === 'function');
}

// EXTERNAL MODULE: ./lib/styles/dot.scss
var dot = __webpack_require__("4ed8");

// CONCATENATED MODULE: ./lib/vue-slider-dot.tsx
function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }





var VueSliderDot =
/*#__PURE__*/
function (_Vue) {
  _inherits(VueSliderDot, _Vue);

  function VueSliderDot() {
    _classCallCheck(this, VueSliderDot);

    return _possibleConstructorReturn(this, _getPrototypeOf(VueSliderDot).apply(this, arguments));
  }

  _createClass(VueSliderDot, [{
    key: "dragStart",
    value: function dragStart(e) {
      if (this.disabled) {
        return false;
      }

      this.$emit('drag-start');
    }
  }, {
    key: "render",
    value: function render() {
      var h = arguments[0];
      return h("div", {
        "ref": "dot",
        "class": this.dotClasses,
        "on": {
          "mousedown": this.dragStart,
          "touchstart": this.dragStart
        }
      }, [this.$slots.dot || h("div", {
        "class": this.handleClasses,
        "style": this.dotStyle
      }), this.tooltip !== 'none' ? h("div", {
        "class": this.tooltipClasses
      }, [this.$slots.tooltip || h("div", {
        "class": this.tooltipInnerClasses,
        "style": this.tooltipStyle
      }, [h("span", {
        "class": 'vue-slider-dot-tooltip-text'
      }, [this.tooltipValue])])]) : null]);
    }
  }, {
    key: "dotClasses",
    get: function get() {
      return ['vue-slider-dot', {
        'vue-slider-dot-disabled': this.disabled,
        'vue-slider-dot-focus': this.focus
      }];
    }
  }, {
    key: "handleClasses",
    get: function get() {
      return ['vue-slider-dot-handle', {
        'vue-slider-dot-handle-disabled': this.disabled,
        'vue-slider-dot-handle-focus': this.focus
      }];
    }
  }, {
    key: "tooltipClasses",
    get: function get() {
      return ['vue-slider-dot-tooltip', ["vue-slider-dot-tooltip-".concat(this.tooltipPlacement)], {
        'vue-slider-dot-tooltip-show': this.showTooltip
      }];
    }
  }, {
    key: "tooltipInnerClasses",
    get: function get() {
      return ['vue-slider-dot-tooltip-inner', ["vue-slider-dot-tooltip-inner-".concat(this.tooltipPlacement)], {
        'vue-slider-dot-tooltip-inner-disabled': this.disabled,
        'vue-slider-dot-tooltip-inner-focus': this.focus
      }];
    }
  }, {
    key: "showTooltip",
    get: function get() {
      switch (this.tooltip) {
        case 'always':
          return true;

        case 'none':
          return false;

        case 'focus':
          return !!this.focus;

        default:
          return false;
      }
    }
  }, {
    key: "tooltipValue",
    get: function get() {
      if (this.tooltipFormatter) {
        return typeof this.tooltipFormatter === 'string' ? this.tooltipFormatter.replace(/\{value\}/, String(this.value)) : this.tooltipFormatter(this.value);
      } else {
        return this.value;
      }
    }
  }]);

  return VueSliderDot;
}(external_commonjs_vue_commonjs2_vue_root_Vue_default.a);

__decorate([Prop({
  default: 0
})], VueSliderDot.prototype, "value", void 0);

__decorate([Prop()], VueSliderDot.prototype, "tooltip", void 0);

__decorate([Prop()], VueSliderDot.prototype, "dotStyle", void 0);

__decorate([Prop()], VueSliderDot.prototype, "tooltipStyle", void 0);

__decorate([Prop({
  type: String,
  validator: function validator(val) {
    return ['top', 'right', 'bottom', 'left'].indexOf(val) > -1;
  },
  required: true
})], VueSliderDot.prototype, "tooltipPlacement", void 0);

__decorate([Prop({
  type: [String, Function]
})], VueSliderDot.prototype, "tooltipFormatter", void 0);

__decorate([Prop({
  type: Boolean,
  default: false
})], VueSliderDot.prototype, "focus", void 0);

__decorate([Prop({
  default: false
})], VueSliderDot.prototype, "disabled", void 0);

VueSliderDot = __decorate([vue_class_component_common_default.a], VueSliderDot);
/* harmony default export */ var vue_slider_dot = (VueSliderDot);
// EXTERNAL MODULE: ./lib/styles/mark.scss
var mark = __webpack_require__("556c");

// CONCATENATED MODULE: ./lib/vue-slider-mark.tsx
function vue_slider_mark_typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { vue_slider_mark_typeof = function _typeof(obj) { return typeof obj; }; } else { vue_slider_mark_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return vue_slider_mark_typeof(obj); }

function vue_slider_mark_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function vue_slider_mark_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function vue_slider_mark_createClass(Constructor, protoProps, staticProps) { if (protoProps) vue_slider_mark_defineProperties(Constructor.prototype, protoProps); if (staticProps) vue_slider_mark_defineProperties(Constructor, staticProps); return Constructor; }

function vue_slider_mark_possibleConstructorReturn(self, call) { if (call && (vue_slider_mark_typeof(call) === "object" || typeof call === "function")) { return call; } return vue_slider_mark_assertThisInitialized(self); }

function vue_slider_mark_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function vue_slider_mark_getPrototypeOf(o) { vue_slider_mark_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return vue_slider_mark_getPrototypeOf(o); }

function vue_slider_mark_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) vue_slider_mark_setPrototypeOf(subClass, superClass); }

function vue_slider_mark_setPrototypeOf(o, p) { vue_slider_mark_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return vue_slider_mark_setPrototypeOf(o, p); }





var VueSlideMark =
/*#__PURE__*/
function (_Vue) {
  vue_slider_mark_inherits(VueSlideMark, _Vue);

  function VueSlideMark() {
    vue_slider_mark_classCallCheck(this, VueSlideMark);

    return vue_slider_mark_possibleConstructorReturn(this, vue_slider_mark_getPrototypeOf(VueSlideMark).apply(this, arguments));
  }

  vue_slider_mark_createClass(VueSlideMark, [{
    key: "labelClickHandle",
    value: function labelClickHandle(e) {
      e.stopPropagation();
      this.$emit('pressLabel', this.mark.pos);
    }
  }, {
    key: "render",
    value: function render() {
      var h = arguments[0];
      var mark = this.mark;
      return h("div", {
        "class": this.marksClasses
      }, [this.$slots.step || h("div", {
        "class": this.stepClasses,
        "style": [this.stepStyle, mark.style, mark.active ? this.stepActiveStyle : null, mark.active ? mark.activeStyle : null]
      }), !this.hideLabel ? this.$slots.label || h("div", {
        "class": this.labelClasses,
        "style": [this.labelStyle, mark.labelStyle, mark.active ? this.labelActiveStyle : null, mark.active ? mark.labelActiveStyle : null],
        "on": {
          "click": this.labelClickHandle
        }
      }, [mark.label]) : null]);
    }
  }, {
    key: "marksClasses",
    get: function get() {
      return ['vue-slider-mark', {
        'vue-slider-mark-active': this.mark.active
      }];
    }
  }, {
    key: "stepClasses",
    get: function get() {
      return ['vue-slider-mark-step', {
        'vue-slider-mark-step-active': this.mark.active
      }];
    }
  }, {
    key: "labelClasses",
    get: function get() {
      return ['vue-slider-mark-label', {
        'vue-slider-mark-label-active': this.mark.active
      }];
    }
  }]);

  return VueSlideMark;
}(external_commonjs_vue_commonjs2_vue_root_Vue_default.a);

__decorate([Prop({
  required: true
})], VueSlideMark.prototype, "mark", void 0);

__decorate([Prop(Boolean)], VueSlideMark.prototype, "hideLabel", void 0);

__decorate([Prop()], VueSlideMark.prototype, "stepStyle", void 0);

__decorate([Prop()], VueSlideMark.prototype, "stepActiveStyle", void 0);

__decorate([Prop()], VueSlideMark.prototype, "labelStyle", void 0);

__decorate([Prop()], VueSlideMark.prototype, "labelActiveStyle", void 0);

VueSlideMark = __decorate([vue_class_component_common_default.a], VueSlideMark);
/* harmony default export */ var vue_slider_mark = (VueSlideMark);
// CONCATENATED MODULE: ./lib/utils/index.ts
var getSize = function getSize(value) {
  return typeof value === 'number' ? "".concat(value, "px") : value;
};
/** Get the distance of the element from the top/left of the page */

var getOffset = function getOffset(elem) {
  var doc = document.documentElement;
  var body = document.body;
  var rect = elem.getBoundingClientRect();
  var offset = {
    y: rect.top + (window.pageYOffset || doc.scrollTop) - (doc.clientTop || body.clientTop || 0),
    x: rect.left + (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || body.clientLeft || 0)
  };
  return offset;
};
/**
 * Get the position of the mouse/finger in the element
 * @param e Trigger event
 * @param elem Container element
 * @param isReverse From the right/bottom
 */

var getPos = function getPos(e, elem, isReverse) {
  var event = 'targetTouches' in e ? e.targetTouches[0] : e;
  var offset = getOffset(elem);
  var posObj = {
    x: event.pageX - offset.x,
    y: event.pageY - offset.y
  };
  return {
    x: isReverse ? elem.offsetWidth - posObj.x : posObj.x,
    y: isReverse ? elem.offsetHeight - posObj.y : posObj.y
  };
};
var KEY_CODE;

(function (KEY_CODE) {
  KEY_CODE[KEY_CODE["PAGE_UP"] = 33] = "PAGE_UP";
  KEY_CODE[KEY_CODE["PAGE_DOWN"] = 34] = "PAGE_DOWN";
  KEY_CODE[KEY_CODE["END"] = 35] = "END";
  KEY_CODE[KEY_CODE["HOME"] = 36] = "HOME";
  KEY_CODE[KEY_CODE["LEFT"] = 37] = "LEFT";
  KEY_CODE[KEY_CODE["UP"] = 38] = "UP";
  KEY_CODE[KEY_CODE["RIGHT"] = 39] = "RIGHT";
  KEY_CODE[KEY_CODE["DOWN"] = 40] = "DOWN";
})(KEY_CODE || (KEY_CODE = {}));

var getKeyboardHandleFunc = function getKeyboardHandleFunc(e, params) {
  if (params.hook) {
    var result = params.hook(e);
    if (typeof result === 'function') return result;
    if (!result) return null;
  }

  switch (e.keyCode) {
    case KEY_CODE.UP:
      return function (i) {
        return params.direction === 'ttb' ? i - 1 : i + 1;
      };

    case KEY_CODE.RIGHT:
      return function (i) {
        return params.direction === 'rtl' ? i - 1 : i + 1;
      };

    case KEY_CODE.DOWN:
      return function (i) {
        return params.direction === 'ttb' ? i + 1 : i - 1;
      };

    case KEY_CODE.LEFT:
      return function (i) {
        return params.direction === 'rtl' ? i + 1 : i - 1;
      };

    case KEY_CODE.END:
      return function () {
        return params.max;
      };

    case KEY_CODE.HOME:
      return function () {
        return params.min;
      };

    case KEY_CODE.PAGE_UP:
      return function (i) {
        return i + 10;
      };

    case KEY_CODE.PAGE_DOWN:
      return function (i) {
        return i - 10;
      };

    default:
      return null;
  }
};
// CONCATENATED MODULE: ./lib/utils/decimal.ts
function decimal_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function decimal_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function decimal_createClass(Constructor, protoProps, staticProps) { if (protoProps) decimal_defineProperties(Constructor.prototype, protoProps); if (staticProps) decimal_defineProperties(Constructor, staticProps); return Constructor; }

/**
 * For any precise floating point calculation
 *
 * @export
 * @class Decimal
 */
var Decimal =
/*#__PURE__*/
function () {
  function Decimal(num) {
    decimal_classCallCheck(this, Decimal);

    this.num = num;
  }

  decimal_createClass(Decimal, [{
    key: "decimal",
    value: function decimal(num2, operator) {
      var num1 = this.num;
      var len1 = this.getDecimalLen(num1);
      var len2 = this.getDecimalLen(num2);
      var base = 0;

      switch (operator) {
        case '+':
          base = this.getExponent(len1, len2);
          this.num = (this.safeRoundUp(num1, base) + this.safeRoundUp(num2, base)) / base;
          break;

        case '-':
          base = this.getExponent(len1, len2);
          this.num = (this.safeRoundUp(num1, base) - this.safeRoundUp(num2, base)) / base;
          break;

        case '*':
          this.num = this.safeRoundUp(this.safeRoundUp(num1, this.getExponent(len1)), this.safeRoundUp(num2, this.getExponent(len2))) / this.getExponent(len1 + len2);
          break;

        case '/':
          base = this.getExponent(len1, len2);
          this.num = this.safeRoundUp(num1, base) / this.safeRoundUp(num2, base);
          break;

        case '%':
          base = this.getExponent(len1, len2);
          this.num = this.safeRoundUp(num1, base) % this.safeRoundUp(num2, base) / base;
          break;
      }

      return this;
    }
  }, {
    key: "plus",
    value: function plus(num2) {
      return this.decimal(num2, '+');
    }
  }, {
    key: "minus",
    value: function minus(num2) {
      return this.decimal(num2, '-');
    }
  }, {
    key: "multiply",
    value: function multiply(num2) {
      return this.decimal(num2, '*');
    }
  }, {
    key: "divide",
    value: function divide(num2) {
      return this.decimal(num2, '/');
    }
  }, {
    key: "remainder",
    value: function remainder(num2) {
      return this.decimal(num2, '%');
    }
  }, {
    key: "toNumber",
    value: function toNumber() {
      return this.num;
    }
  }, {
    key: "getDecimalLen",
    value: function getDecimalLen(num) {
      return ("".concat(num).split('.')[1] || '').length;
    }
  }, {
    key: "getExponent",
    value: function getExponent(num1, num2) {
      return Math.pow(10, num2 !== void 0 ? Math.max(num1, num2) : num1);
    } // fix: 9999999.99995 * 100000 = 999999999994.9999

  }, {
    key: "safeRoundUp",
    value: function safeRoundUp(num, exponent) {
      return Math.round(num * exponent);
    }
  }]);

  return Decimal;
}();


// CONCATENATED MODULE: ./lib/utils/control.ts
var _ERROR_MSG;

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function control_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function control_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function control_createClass(Constructor, protoProps, staticProps) { if (protoProps) control_defineProperties(Constructor.prototype, protoProps); if (staticProps) control_defineProperties(Constructor, staticProps); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


var ERROR_TYPE;

(function (ERROR_TYPE) {
  ERROR_TYPE[ERROR_TYPE["VALUE"] = 1] = "VALUE";
  ERROR_TYPE[ERROR_TYPE["INTERVAL"] = 2] = "INTERVAL";
  ERROR_TYPE[ERROR_TYPE["MIN"] = 3] = "MIN";
  ERROR_TYPE[ERROR_TYPE["MAX"] = 4] = "MAX";
  ERROR_TYPE[ERROR_TYPE["ORDER"] = 5] = "ORDER";
})(ERROR_TYPE || (ERROR_TYPE = {}));

var ERROR_MSG = (_ERROR_MSG = {}, _defineProperty(_ERROR_MSG, ERROR_TYPE.VALUE, 'The type of the "value" is illegal'), _defineProperty(_ERROR_MSG, ERROR_TYPE.INTERVAL, 'The prop "interval" is invalid, "(max - min)" cannot be divisible by "interval"'), _defineProperty(_ERROR_MSG, ERROR_TYPE.MIN, 'The "value" cannot be less than the minimum.'), _defineProperty(_ERROR_MSG, ERROR_TYPE.MAX, 'The "value" cannot be greater than the maximum.'), _defineProperty(_ERROR_MSG, ERROR_TYPE.ORDER, 'When "order" is false, the parameters "minRange", "maxRange", "fixed", "enabled" are invalid.'), _ERROR_MSG);
/**
 * Slider logic control center
 *
 * @export
 * @class Control
 */

var control_Control =
/*#__PURE__*/
function () {
  function Control(options) {
    control_classCallCheck(this, Control);

    this.dotsPos = []; // The position of each slider

    this.dotsValue = []; // The value of each slider

    this.data = options.data;
    this.max = options.max;
    this.min = options.min;
    this.interval = options.interval;
    this.order = options.order;
    this.marks = options.marks;
    this.included = options.included;
    this.process = options.process;
    this.adsorb = options.adsorb;
    this.dotOptions = options.dotOptions;
    this.onError = options.onError;

    if (this.order) {
      this.minRange = options.minRange || 0;
      this.maxRange = options.maxRange || 0;
      this.enableCross = options.enableCross;
      this.fixed = options.fixed;
    } else {
      if (options.minRange || options.maxRange || !options.enableCross || options.fixed) {
        this.emitError(ERROR_TYPE.ORDER);
      }

      this.minRange = 0;
      this.maxRange = 0;
      this.enableCross = true;
      this.fixed = false;
    }

    this.setValue(options.value);
  }

  control_createClass(Control, [{
    key: "setValue",
    value: function setValue(value) {
      this.setDotsValue(Array.isArray(value) ? _toConsumableArray(value) : [value], true);
    }
  }, {
    key: "setDotsValue",
    value: function setDotsValue(value, syncPos) {
      this.dotsValue = value;

      if (syncPos) {
        this.syncDotsPos();
      }
    } // Set the slider position

  }, {
    key: "setDotsPos",
    value: function setDotsPos(dotsPos) {
      var _this = this;

      var list = this.order ? _toConsumableArray(dotsPos).sort(function (a, b) {
        return a - b;
      }) : dotsPos;
      this.dotsPos = list;
      this.setDotsValue(list.map(function (dotPos) {
        return _this.getValueByPos(dotPos);
      }), this.adsorb);
    } // Get value by position

  }, {
    key: "getValueByPos",
    value: function getValueByPos(pos) {
      var value = this.parsePos(pos); // When included is true, the return value is the value of the nearest mark

      if (this.included) {
        var dir = 100;
        this.markList.forEach(function (mark) {
          var curDir = Math.abs(mark.pos - pos);

          if (curDir < dir) {
            dir = curDir;
            value = mark.value;
          }
        });
      }

      return value;
    } // Sync slider position

  }, {
    key: "syncDotsPos",
    value: function syncDotsPos() {
      var _this2 = this;

      this.dotsPos = this.dotsValue.map(function (v) {
        return _this2.parseValue(v);
      });
    }
    /**
     * Get all the marks
     *
     * @readonly
     * @type {Mark[]}
     * @memberof Control
     */

  }, {
    key: "getRecentDot",

    /**
     * Get the most recent slider index by position
     *
     * @param {number} pos
     * @returns {number}
     * @memberof Control
     */
    value: function getRecentDot(pos) {
      var arr = this.dotsPos.map(function (dotPos) {
        return Math.abs(dotPos - pos);
      });
      return arr.indexOf(Math.min.apply(Math, _toConsumableArray(arr)));
    }
    /**
     * Get index by value
     *
     * @param {Value} value
     * @returns {number}
     * @memberof Control
     */

  }, {
    key: "getIndexByValue",
    value: function getIndexByValue(value) {
      if (this.data) {
        return this.data.indexOf(value);
      }

      return new Decimal(+value).minus(this.min).divide(this.interval).toNumber();
    }
    /**
     * Get value by index
     *
     * @param {index} number
     * @returns {Value}
     * @memberof Control
     */

  }, {
    key: "getValueByIndex",
    value: function getValueByIndex(index) {
      if (index < 0) {
        index = 0;
      } else if (index > this.total) {
        index = this.total;
      }

      return this.data ? this.data[index] : new Decimal(index).multiply(this.interval).plus(this.min).toNumber();
    }
    /**
     * Set the position of a single slider
     *
     * @param {number} pos
     * @param {number} index
     */

  }, {
    key: "setDotPos",
    value: function setDotPos(pos, index) {
      pos = this.getValidPos(pos, index).pos;
      var changePos = pos - this.dotsPos[index];

      if (!changePos) {
        return;
      }

      var changePosArr = new Array(this.dotsPos.length);

      if (this.fixed) {
        changePosArr = this.getFixedChangePosArr(changePos, index);
      } else if (this.minRange || this.maxRange) {
        changePosArr = this.getLimitRangeChangePosArr(pos, changePos, index);
      } else {
        changePosArr[index] = changePos;
      }

      this.setDotsPos(this.dotsPos.map(function (curPos, i) {
        return curPos + (changePosArr[i] || 0);
      }));
    }
    /**
     * In fixed mode, get the position of all slider changes
     *
     * @param {number} changePos Change distance of a single slider
     * @param {number} index slider index
     * @returns {DotsPosChangeArray}
     * @memberof Control
     */

  }, {
    key: "getFixedChangePosArr",
    value: function getFixedChangePosArr(changePos, index) {
      var _this3 = this;

      this.dotsPos.forEach(function (originPos, i) {
        if (i !== index) {
          var _this3$getValidPos = _this3.getValidPos(originPos + changePos, i),
              lastPos = _this3$getValidPos.pos,
              inRange = _this3$getValidPos.inRange;

          if (!inRange) {
            changePos = Math.min(Math.abs(lastPos - originPos), Math.abs(changePos)) * (changePos < 0 ? -1 : 1);
          }
        }
      });
      return this.dotsPos.map(function (_) {
        return changePos;
      });
    }
    /**
     * In minRange/maxRange mode, get the position of all slider changes
     *
     * @param {number} pos position of a single slider
     * @param {number} changePos Change distance of a single slider
     * @param {number} index slider index
     * @returns {DotsPosChangeArray}
     * @memberof Control
     */

  }, {
    key: "getLimitRangeChangePosArr",
    value: function getLimitRangeChangePosArr(pos, changePos, index) {
      var _this4 = this;

      var changeDots = [{
        index: index,
        changePos: changePos
      }];
      var newChangePos = changePos;
      [this.minRange, this.maxRange].forEach(function (isLimitRange, rangeIndex) {
        if (!isLimitRange) {
          return false;
        }

        var isMinRange = rangeIndex === 0;
        var isForward = changePos > 0;
        var next = 0;

        if (isMinRange) {
          next = isForward ? 1 : -1;
        } else {
          next = isForward ? -1 : 1;
        } // Determine if the two positions are within the legal interval


        var inLimitRange = function inLimitRange(pos2, pos1) {
          var diff = Math.abs(pos2 - pos1);
          return isMinRange ? diff < _this4.minRangeDir : diff > _this4.maxRangeDir;
        };

        var i = index + next;
        var nextPos = _this4.dotsPos[i];
        var curPos = pos;

        while (_this4.isPos(nextPos) && inLimitRange(nextPos, curPos)) {
          var _this4$getValidPos = _this4.getValidPos(nextPos + newChangePos, i),
              lastPos = _this4$getValidPos.pos;

          changeDots.push({
            index: i,
            changePos: lastPos - nextPos
          });
          i = i + next;
          curPos = lastPos;
          nextPos = _this4.dotsPos[i];
        }
      });
      return this.dotsPos.map(function (_, i) {
        var changeDot = changeDots.filter(function (dot) {
          return dot.index === i;
        });
        return changeDot.length ? changeDot[0].changePos : 0;
      });
    }
  }, {
    key: "isPos",
    value: function isPos(pos) {
      return typeof pos === 'number';
    }
    /**
     * Get a valid position by pos
     *
     * @param {number} pos
     * @param {number} index
     * @returns {{ pos: number, inRange: boolean }}
     */

  }, {
    key: "getValidPos",
    value: function getValidPos(pos, index) {
      var range = this.valuePosRange[index];
      var inRange = true;

      if (pos < range[0]) {
        pos = range[0];
        inRange = false;
      } else if (pos > range[1]) {
        pos = range[1];
        inRange = false;
      }

      return {
        pos: pos,
        inRange: inRange
      };
    }
    /**
     * Calculate the position of the slider by value
     *
     * @param {Value} val
     * @returns {number}
     */

  }, {
    key: "parseValue",
    value: function parseValue(val) {
      if (this.data) {
        val = this.data.indexOf(val);
      } else if (typeof val === 'number' || typeof val === 'string') {
        val = +val;

        if (val < this.min) {
          this.emitError(ERROR_TYPE.MIN);
          return 0;
        }

        if (val > this.max) {
          this.emitError(ERROR_TYPE.MAX);
          return 0;
        }

        if (typeof val !== 'number' || val !== val) {
          this.emitError(ERROR_TYPE.VALUE);
          return 0;
        }

        val = new Decimal(val).minus(this.min).divide(this.interval).toNumber();
      }

      var pos = new Decimal(val).multiply(this.gap).toNumber();
      return pos < 0 ? 0 : pos > 100 ? 100 : pos;
    }
    /**
     * Calculate the value by position
     *
     * @param {number} pos
     * @returns {Value}
     * @memberof Control
     */

  }, {
    key: "parsePos",
    value: function parsePos(pos) {
      var index = Math.round(pos / this.gap);
      return this.getValueByIndex(index);
    }
    /**
     * Determine if the location is active
     *
     * @param {number} pos
     * @returns {boolean}
     * @memberof Control
     */

  }, {
    key: "isActiveByPos",
    value: function isActiveByPos(pos) {
      return this.processArray.some(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
            start = _ref2[0],
            end = _ref2[1];

        return pos >= start && pos <= end;
      });
    }
    /**
     * Get each value
     *
     * @returns {Value[]}
     * @memberof Control
     */

  }, {
    key: "getValues",
    value: function getValues() {
      if (this.data) {
        return this.data;
      } else {
        var values = [];

        for (var i = 0; i <= this.total; i++) {
          values.push(new Decimal(i).multiply(this.interval).plus(this.min).toNumber());
        }

        return values;
      }
    }
  }, {
    key: "emitError",
    value: function emitError(type) {
      if (this.onError) {
        this.onError(type, ERROR_MSG[type]);
      }
    }
  }, {
    key: "getDotRange",
    value: function getDotRange(index, key, defaultValue) {
      if (!this.dotOptions) {
        return defaultValue;
      }

      var option = Array.isArray(this.dotOptions) ? this.dotOptions[index] : this.dotOptions;
      return option && option[key] !== void 0 ? this.parseValue(option[key]) : defaultValue;
    }
    /**
     * Sliding range of each slider
     *
     * @type {Array<[number, number]>}
     * @memberof Control
     */

  }, {
    key: "markList",
    get: function get() {
      var _this5 = this;

      if (!this.marks) {
        return [];
      }

      var getMarkByValue = function getMarkByValue(value, mark) {
        var pos = _this5.parseValue(value);

        return _objectSpread({
          pos: pos,
          value: value,
          label: value,
          active: _this5.isActiveByPos(pos)
        }, mark);
      };

      if (this.marks === true) {
        return this.getValues().map(function (value) {
          return getMarkByValue(value);
        });
      } else if (Object.prototype.toString.call(this.marks) === '[object Object]') {
        return Object.keys(this.marks).sort(function (a, b) {
          return +a - +b;
        }).map(function (value) {
          var item = _this5.marks[value];
          return getMarkByValue(value, typeof item !== 'string' ? item : {
            label: item
          });
        });
      } else if (Array.isArray(this.marks)) {
        return this.marks.map(function (value) {
          return getMarkByValue(value);
        });
      } else if (typeof this.marks === 'function') {
        return this.getValues().map(function (value) {
          return {
            value: value,
            result: _this5.marks(value)
          };
        }).filter(function (_ref3) {
          var result = _ref3.result;
          return !!result;
        }).map(function (_ref4) {
          var value = _ref4.value,
              result = _ref4.result;
          return getMarkByValue(value, result);
        });
      } else {
        return [];
      }
    }
  }, {
    key: "processArray",
    get: function get() {
      if (this.process) {
        if (typeof this.process === 'function') {
          return this.process(this.dotsPos);
        } else if (this.dotsPos.length === 1) {
          return [[0, this.dotsPos[0]]];
        } else if (this.dotsPos.length > 1) {
          return [[Math.min.apply(Math, _toConsumableArray(this.dotsPos)), Math.max.apply(Math, _toConsumableArray(this.dotsPos))]];
        }
      }

      return [];
    }
    /**
     * The total number of values
     *
     * @type {number}
     * @memberof Control
     */

  }, {
    key: "total",
    get: function get() {
      var total = 0;

      if (this.data) {
        total = this.data.length - 1;
      } else {
        total = new Decimal(this.max).minus(this.min).divide(this.interval).toNumber();
      }

      if (total - Math.floor(total) !== 0) {
        this.emitError(ERROR_TYPE.INTERVAL);
        return 0;
      }

      return total;
    } // Distance between each value

  }, {
    key: "gap",
    get: function get() {
      return 100 / this.total;
    } // The minimum distance between the two sliders

  }, {
    key: "minRangeDir",
    get: function get() {
      return this.minRange ? this.minRange * this.gap : 0;
    } // Maximum distance between the two sliders

  }, {
    key: "maxRangeDir",
    get: function get() {
      return this.maxRange ? this.maxRange * this.gap : 100;
    }
  }, {
    key: "valuePosRange",
    get: function get() {
      var _this6 = this;

      var dotsPos = this.dotsPos;
      var valuePosRange = [];
      dotsPos.forEach(function (pos, i) {
        valuePosRange.push([Math.max(_this6.minRange ? _this6.minRangeDir * i : 0, !_this6.enableCross ? dotsPos[i - 1] || 0 : 0, _this6.getDotRange(i, 'min', 0)), Math.min(_this6.minRange ? 100 - _this6.minRangeDir * (dotsPos.length - 1 - i) : 100, !_this6.enableCross ? dotsPos[i + 1] || 100 : 100, _this6.getDotRange(i, 'max', 100))]);
      });
      return valuePosRange;
    }
  }, {
    key: "dotsIndex",
    get: function get() {
      var _this7 = this;

      return this.dotsValue.map(function (val) {
        return _this7.getIndexByValue(val);
      });
    }
  }]);

  return Control;
}();


// CONCATENATED MODULE: ./lib/utils/state.ts
function state_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function state_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function state_createClass(Constructor, protoProps, staticProps) { if (protoProps) state_defineProperties(Constructor.prototype, protoProps); if (staticProps) state_defineProperties(Constructor, staticProps); return Constructor; }

var State =
/*#__PURE__*/
function () {
  function State(map) {
    state_classCallCheck(this, State);

    this.states = 0;
    this.map = map;
  }

  state_createClass(State, [{
    key: "add",
    value: function add(state) {
      this.states |= state;
    }
  }, {
    key: "delete",
    value: function _delete(state) {
      this.states &= ~state;
    }
  }, {
    key: "toggle",
    value: function toggle(state) {
      if (this.has(state)) {
        this.delete(state);
      } else {
        this.add(state);
      }
    }
  }, {
    key: "has",
    value: function has(state) {
      return !!(this.states & state);
    }
  }]);

  return State;
}();


// EXTERNAL MODULE: ./lib/styles/slider.scss
var slider = __webpack_require__("4abb");

// CONCATENATED MODULE: ./lib/vue-slider.tsx


function vue_slider_typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { vue_slider_typeof = function _typeof(obj) { return typeof obj; }; } else { vue_slider_typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return vue_slider_typeof(obj); }

function vue_slider_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { vue_slider_defineProperty(target, key, source[key]); }); } return target; }

function vue_slider_slicedToArray(arr, i) { return vue_slider_arrayWithHoles(arr) || vue_slider_iterableToArrayLimit(arr, i) || vue_slider_nonIterableRest(); }

function vue_slider_nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance"); }

function vue_slider_iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function vue_slider_arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function vue_slider_defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function vue_slider_toConsumableArray(arr) { return vue_slider_arrayWithoutHoles(arr) || vue_slider_iterableToArray(arr) || vue_slider_nonIterableSpread(); }

function vue_slider_nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance"); }

function vue_slider_iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter); }

function vue_slider_arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }

function vue_slider_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function vue_slider_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function vue_slider_createClass(Constructor, protoProps, staticProps) { if (protoProps) vue_slider_defineProperties(Constructor.prototype, protoProps); if (staticProps) vue_slider_defineProperties(Constructor, staticProps); return Constructor; }

function vue_slider_possibleConstructorReturn(self, call) { if (call && (vue_slider_typeof(call) === "object" || typeof call === "function")) { return call; } return vue_slider_assertThisInitialized(self); }

function vue_slider_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function vue_slider_getPrototypeOf(o) { vue_slider_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return vue_slider_getPrototypeOf(o); }

function vue_slider_inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) vue_slider_setPrototypeOf(subClass, superClass); }

function vue_slider_setPrototypeOf(o, p) { vue_slider_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return vue_slider_setPrototypeOf(o, p); }










var SliderState = {
  None: 0,
  Drag: 1 << 1,
  Focus: 1 << 2
};
var DEFAULT_SLIDER_SIZE = 4;

var vue_slider_VueSlider =
/*#__PURE__*/
function (_Vue) {
  vue_slider_inherits(VueSlider, _Vue);

  function VueSlider() {
    var _this;

    vue_slider_classCallCheck(this, VueSlider);

    _this = vue_slider_possibleConstructorReturn(this, vue_slider_getPrototypeOf(VueSlider).apply(this, arguments));
    _this.states = new State(SliderState); // The width of the component is divided into one hundred, the width of each one.

    _this.scale = 1; // Currently dragged slider index

    _this.focusDotIndex = 0;
    return _this;
  }

  vue_slider_createClass(VueSlider, [{
    key: "onValueChanged",
    value: function onValueChanged() {
      if (!this.states.has(SliderState.Drag) && this.isNotSync) {
        this.control.setValue(this.value);
      }
    }
  }, {
    key: "created",
    value: function created() {
      this.initControl();
    }
  }, {
    key: "mounted",
    value: function mounted() {
      this.bindEvent();
    }
  }, {
    key: "beforeDestroy",
    value: function beforeDestroy() {
      this.unbindEvent();
    }
  }, {
    key: "bindEvent",
    value: function bindEvent() {
      document.addEventListener('touchmove', this.dragMove, {
        passive: false
      });
      document.addEventListener('touchend', this.dragEnd, {
        passive: false
      });
      document.addEventListener('mousedown', this.blurHandle);
      document.addEventListener('mousemove', this.dragMove);
      document.addEventListener('mouseup', this.dragEnd);
      document.addEventListener('mouseleave', this.dragEnd);
      document.addEventListener('keydown', this.keydownHandle);
    }
  }, {
    key: "unbindEvent",
    value: function unbindEvent() {
      document.removeEventListener('touchmove', this.dragMove);
      document.removeEventListener('touchend', this.dragEnd);
      document.removeEventListener('mousedown', this.blurHandle);
      document.removeEventListener('mousemove', this.dragMove);
      document.removeEventListener('mouseup', this.dragEnd);
      document.removeEventListener('mouseleave', this.dragEnd);
      document.removeEventListener('keydown', this.keydownHandle);
    }
  }, {
    key: "setScale",
    value: function setScale() {
      this.scale = new Decimal(Math.floor(this.isHorizontal ? this.$el.offsetWidth : this.$el.offsetHeight)).divide(100).toNumber();
    }
  }, {
    key: "initControl",
    value: function initControl() {
      var _this2 = this;

      this.control = new control_Control({
        value: this.value,
        data: this.data,
        enableCross: this.enableCross,
        fixed: this.fixed,
        max: this.max,
        min: this.min,
        interval: this.interval,
        minRange: this.minRange,
        maxRange: this.maxRange,
        order: this.order,
        marks: this.marks,
        included: this.included,
        process: this.process,
        adsorb: this.adsorb,
        dotOptions: this.dotOptions,
        onError: this.emitError
      });
      ['data', 'enableCross', 'fixed', 'max', 'min', 'interval', 'minRange', 'maxRange', 'order', 'marks', 'process', 'adsorb', 'included', 'dotOptions'].forEach(function (name) {
        _this2.$watch(name, function (val) {
          if (name === 'data' && Array.isArray(_this2.control.data) && Array.isArray(val) && _this2.control.data.length === val.length && val.every(function (item, index) {
            return item === _this2.control.data[index];
          })) {
            return false;
          }

          ;
          _this2.control[name] = val;

          if (['data', 'max', 'min', 'interval'].indexOf(name) > -1) {
            _this2.control.syncDotsPos();
          }
        });
      });
    }
  }, {
    key: "syncValueByPos",
    value: function syncValueByPos() {
      var values = this.control.dotsValue;

      if (this.isDiff(values, Array.isArray(this.value) ? this.value : [this.value])) {
        this.$emit('change', values.length === 1 ? values[0] : vue_slider_toConsumableArray(values));
      }
    } // Slider value and component internal value are inconsistent

  }, {
    key: "isDiff",
    value: function isDiff(value1, value2) {
      return value1.length !== value2.length || value1.some(function (val, index) {
        return val !== value2[index];
      });
    }
  }, {
    key: "emitError",
    value: function emitError(type, message) {
      if (!this.silent) {
        console.error("[VueSlider error]: ".concat(message));
      }

      this.$emit('error', type, message);
    }
    /**
     * Get the drag range of the slider
     *
     * @private
     * @param {number} index slider index
     * @returns {[number, number]} range [start, end]
     * @memberof VueSlider
     */

  }, {
    key: "dragStart",
    value: function dragStart(index) {
      this.focusDotIndex = index;
      this.setScale();
      this.states.add(SliderState.Drag);
      this.states.add(SliderState.Focus);
      this.$emit('drag-start');
    }
  }, {
    key: "dragMove",
    value: function dragMove(e) {
      if (!this.states.has(SliderState.Drag)) {
        return false;
      }

      e.preventDefault();
      var pos = this.getPosByEvent(e);
      this.isCrossDot(pos);
      this.control.setDotPos(pos, this.focusDotIndex);

      if (!this.lazy) {
        this.syncValueByPos();
      }

      var value = this.control.dotsValue;
      this.$emit('dragging', value.length === 1 ? value[0] : vue_slider_toConsumableArray(value));
    } // If the component is sorted, then when the slider crosses, toggle the currently selected slider index

  }, {
    key: "isCrossDot",
    value: function isCrossDot(pos) {
      if (this.canSort) {
        var curIndex = this.focusDotIndex;
        var curPos = pos;

        if (curPos > this.dragRange[1]) {
          curPos = this.dragRange[1];
          this.focusDotIndex++;
        } else if (curPos < this.dragRange[0]) {
          curPos = this.dragRange[0];
          this.focusDotIndex--;
        }

        if (curIndex !== this.focusDotIndex) {
          this.control.setDotPos(curPos, curIndex);
        }
      }
    }
  }, {
    key: "dragEnd",
    value: function dragEnd() {
      var _this3 = this;

      if (!this.states.has(SliderState.Drag)) {
        return false;
      }

      setTimeout(function () {
        if (_this3.included && _this3.isNotSync) {
          _this3.control.setValue(_this3.value);
        } else {
          // Sync slider position
          _this3.control.syncDotsPos();
        }

        if (_this3.lazy) {
          _this3.syncValueByPos();
        }

        _this3.states.delete(SliderState.Drag); // If useKeyboard is true, keep focus status after dragging


        if (!_this3.useKeyboard) {
          _this3.states.delete(SliderState.Focus);
        }

        _this3.$emit('drag-end');
      });
    }
  }, {
    key: "blurHandle",
    value: function blurHandle(e) {
      if (!this.states.has(SliderState.Focus) || !this.$refs.container || this.$refs.container.contains(e.target)) {
        return false;
      }

      this.states.delete(SliderState.Focus);
    }
  }, {
    key: "clickHandle",
    value: function clickHandle(e) {
      if (!this.clickable || this.disabled) {
        return false;
      }

      if (this.states.has(SliderState.Drag)) {
        return;
      }

      this.setScale();
      var pos = this.getPosByEvent(e);
      this.setValueByPos(pos);
    }
  }, {
    key: "focus",
    value: function focus() {
      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
      this.states.add(SliderState.Focus);
      this.focusDotIndex = index;
    }
  }, {
    key: "blur",
    value: function blur() {
      this.states.delete(SliderState.Focus);
    }
  }, {
    key: "getValue",
    value: function getValue() {
      var values = this.control.dotsValue;
      return values.length === 1 ? values[0] : values;
    }
  }, {
    key: "getIndex",
    value: function getIndex() {
      var indexes = this.control.dotsIndex;
      return indexes.length === 1 ? indexes[0] : indexes;
    }
  }, {
    key: "setValue",
    value: function setValue(value) {
      this.control.setValue(Array.isArray(value) ? vue_slider_toConsumableArray(value) : [value]);
      this.syncValueByPos();
    }
  }, {
    key: "setIndex",
    value: function setIndex(index) {
      var _this4 = this;

      var value = Array.isArray(index) ? index.map(function (n) {
        return _this4.control.getValueByIndex(n);
      }) : this.control.getValueByIndex(index);
      this.setValue(value);
    }
  }, {
    key: "setValueByPos",
    value: function setValueByPos(pos) {
      var _this5 = this;

      var index = this.control.getRecentDot(pos);

      if (this.disabled || this.dots[index].disabled) {
        return false;
      }

      this.focusDotIndex = index;
      this.control.setDotPos(pos, index);
      this.syncValueByPos();

      if (this.useKeyboard) {
        this.states.add(SliderState.Focus);
      }

      setTimeout(function () {
        if (_this5.included && _this5.isNotSync) {
          _this5.control.setValue(_this5.value);
        } else {
          _this5.control.syncDotsPos();
        }
      });
    }
  }, {
    key: "keydownHandle",
    value: function keydownHandle(e) {
      var _this6 = this;

      if (!this.useKeyboard || !this.states.has(SliderState.Focus)) {
        return false;
      }

      var isInclude = this.included && this.marks;
      var handleFunc = getKeyboardHandleFunc(e, {
        direction: this.direction,
        max: isInclude ? this.control.markList.length - 1 : this.control.total,
        min: 0,
        hook: this.keydownHook
      });

      if (handleFunc) {
        e.preventDefault();
        var newIndex = -1;
        var pos = 0;

        if (isInclude) {
          this.control.markList.some(function (mark, index) {
            if (mark.value === _this6.control.dotsValue[_this6.focusDotIndex]) {
              newIndex = handleFunc(index);
              return true;
            }

            return false;
          });

          if (newIndex < 0) {
            newIndex = 0;
          } else if (newIndex > this.control.markList.length - 1) {
            newIndex = this.control.markList.length - 1;
          }

          pos = this.control.markList[newIndex].pos;
        } else {
          newIndex = handleFunc(this.control.getIndexByValue(this.control.dotsValue[this.focusDotIndex]));
          pos = this.control.parseValue(this.control.getValueByIndex(newIndex));
        }

        this.isCrossDot(pos);
        this.control.setDotPos(pos, this.focusDotIndex);
        this.syncValueByPos();
      }
    }
  }, {
    key: "getPosByEvent",
    value: function getPosByEvent(e) {
      return getPos(e, this.$el, this.isReverse)[this.isHorizontal ? 'x' : 'y'] / this.scale;
    }
  }, {
    key: "renderSlot",
    value: function renderSlot(name, data, defaultSlot, isDefault) {
      var h = this.$createElement;
      var scopedSlot = this.$scopedSlots[name];
      return scopedSlot ? isDefault ? scopedSlot(data) : h("template", {
        "slot": name
      }, [scopedSlot(data)]) : defaultSlot;
    }
  }, {
    key: "render",
    value: function render() {
      var _this7 = this;

      var h = arguments[0];
      return h("div", helper_default()([{
        "ref": "container",
        "class": this.containerClasses,
        "style": this.containerStyles,
        "on": {
          "click": this.clickHandle
        }
      }, this.$attrs]), [h("div", {
        "class": "vue-slider-rail",
        "style": this.railStyle
      }, [this.processArray.map(function (item, index) {
        return _this7.renderSlot('process', item, h("div", {
          "class": "vue-slider-process",
          "key": "process-".concat(index),
          "style": item.style
        }), true);
      }), this.marks ? h("div", {
        "class": "vue-slider-marks"
      }, [this.control.markList.map(function (mark, index) {
        var _style;

        return _this7.renderSlot('mark', mark, h("vue-slider-mark", {
          "key": "mark-".concat(index),
          "attrs": {
            "mark": mark,
            "hideLabel": _this7.hideLabel,
            "stepStyle": _this7.stepStyle,
            "stepActiveStyle": _this7.stepActiveStyle,
            "labelStyle": _this7.labelStyle,
            "labelActiveStyle": _this7.labelActiveStyle
          },
          "style": (_style = {}, vue_slider_defineProperty(_style, _this7.isHorizontal ? 'height' : 'width', '100%'), vue_slider_defineProperty(_style, _this7.isHorizontal ? 'width' : 'height', _this7.tailSize), vue_slider_defineProperty(_style, _this7.mainDirection, "".concat(mark.pos, "%")), _style),
          "on": {
            "pressLabel": function pressLabel(pos) {
              return _this7.setValueByPos(pos);
            }
          }
        }, [_this7.renderSlot('step', mark, null), _this7.renderSlot('label', mark, null)]), true);
      })]) : null, this.dots.map(function (dot, index) {
        var _ref;

        return h("vue-slider-dot", {
          "ref": "dot-".concat(index),
          "key": "dot-".concat(index),
          "attrs": {
            "value": dot.value,
            "disabled": dot.disabled,
            "focus": dot.focus,
            "dot-style": [dot.style, dot.disabled ? dot.disabledStyle : null, dot.focus ? dot.focusStyle : null],
            "tooltip": dot.tooltip || _this7.tooltip,
            "tooltip-style": [_this7.tooltipStyle, dot.tooltipStyle, dot.disabled ? dot.tooltipDisabledStyle : null, dot.focus ? dot.tooltipFocusStyle : null],
            "tooltip-formatter": Array.isArray(_this7.tooltipFormatter) ? _this7.tooltipFormatter[index] : _this7.tooltipFormatter,
            "tooltip-placement": _this7.tooltipDirections[index]
          },
          "style": [_this7.dotBaseStyle, (_ref = {}, vue_slider_defineProperty(_ref, _this7.mainDirection, "".concat(dot.pos, "%")), vue_slider_defineProperty(_ref, "transition", "".concat(_this7.mainDirection, " ").concat(_this7.animateTime, "s")), _ref)],
          "on": {
            "drag-start": function dragStart() {
              return _this7.dragStart(index);
            }
          }
        }, [_this7.renderSlot('dot', dot, null), _this7.renderSlot('tooltip', dot, null)]);
      }), this.renderSlot('default', null, null, true)])]);
    }
  }, {
    key: "tailSize",
    get: function get() {
      return getSize((this.isHorizontal ? this.height : this.width) || DEFAULT_SLIDER_SIZE);
    }
  }, {
    key: "containerClasses",
    get: function get() {
      return ['vue-slider', ["vue-slider-".concat(this.direction)], {
        'vue-slider-disabled': this.disabled
      }];
    }
  }, {
    key: "containerStyles",
    get: function get() {
      var _ref2 = Array.isArray(this.dotSize) ? this.dotSize : [this.dotSize, this.dotSize],
          _ref3 = vue_slider_slicedToArray(_ref2, 2),
          dotWidth = _ref3[0],
          dotHeight = _ref3[1];

      var containerWidth = this.width ? getSize(this.width) : this.isHorizontal ? 'auto' : getSize(DEFAULT_SLIDER_SIZE);
      var containerHeight = this.height ? getSize(this.height) : this.isHorizontal ? getSize(DEFAULT_SLIDER_SIZE) : 'auto';
      return {
        padding: this.contained ? "".concat(dotHeight / 2, "px ").concat(dotWidth / 2, "px") : this.isHorizontal ? "".concat(dotHeight / 2, "px 0") : "0 ".concat(dotWidth / 2, "px"),
        width: containerWidth,
        height: containerHeight
      };
    }
  }, {
    key: "processArray",
    get: function get() {
      var _this8 = this;

      return this.control.processArray.map(function (_ref4) {
        var _objectSpread2;

        var _ref5 = vue_slider_slicedToArray(_ref4, 3),
            start = _ref5[0],
            end = _ref5[1],
            style = _ref5[2];

        if (start > end) {
          /* tslint:disable:semicolon */
          ;
          var _ref6 = [end, start];
          start = _ref6[0];
          end = _ref6[1];
        }

        var sizeStyleKey = _this8.isHorizontal ? 'width' : 'height';
        return {
          start: start,
          end: end,
          style: vue_slider_objectSpread((_objectSpread2 = {}, vue_slider_defineProperty(_objectSpread2, _this8.isHorizontal ? 'height' : 'width', '100%'), vue_slider_defineProperty(_objectSpread2, _this8.isHorizontal ? 'top' : 'left', 0), vue_slider_defineProperty(_objectSpread2, _this8.mainDirection, "".concat(start, "%")), vue_slider_defineProperty(_objectSpread2, sizeStyleKey, "".concat(end - start, "%")), vue_slider_defineProperty(_objectSpread2, "transitionProperty", "".concat(sizeStyleKey, ",").concat(_this8.mainDirection)), vue_slider_defineProperty(_objectSpread2, "transitionDuration", "".concat(_this8.animateTime, "s")), _objectSpread2), _this8.processStyle, style)
        };
      });
    }
  }, {
    key: "dotBaseStyle",
    get: function get() {
      var _ref7 = Array.isArray(this.dotSize) ? this.dotSize : [this.dotSize, this.dotSize],
          _ref8 = vue_slider_slicedToArray(_ref7, 2),
          dotWidth = _ref8[0],
          dotHeight = _ref8[1];

      var dotPos;

      if (this.isHorizontal) {
        dotPos = vue_slider_defineProperty({
          transform: "translate(".concat(this.isReverse ? '50%' : '-50%', ", -50%)"),
          WebkitTransform: "translate(".concat(this.isReverse ? '50%' : '-50%', ", -50%)"),
          top: '50%'
        }, this.direction === 'ltr' ? 'left' : 'right', '0');
      } else {
        dotPos = vue_slider_defineProperty({
          transform: "translate(-50%, ".concat(this.isReverse ? '50%' : '-50%', ")"),
          WebkitTransform: "translate(-50%, ".concat(this.isReverse ? '50%' : '-50%', ")"),
          left: '50%'
        }, this.direction === 'btt' ? 'bottom' : 'top', '0');
      }

      return vue_slider_objectSpread({
        width: "".concat(dotWidth, "px"),
        height: "".concat(dotHeight, "px")
      }, dotPos);
    }
  }, {
    key: "mainDirection",
    get: function get() {
      switch (this.direction) {
        case 'ltr':
          return 'left';

        case 'rtl':
          return 'right';

        case 'btt':
          return 'bottom';

        case 'ttb':
          return 'top';
      }
    }
  }, {
    key: "isHorizontal",
    get: function get() {
      return this.direction === 'ltr' || this.direction === 'rtl';
    }
  }, {
    key: "isReverse",
    get: function get() {
      return this.direction === 'rtl' || this.direction === 'btt';
    }
  }, {
    key: "tooltipDirections",
    get: function get() {
      var dir = this.tooltipPlacement || (this.isHorizontal ? 'top' : 'left');

      if (Array.isArray(dir)) {
        return dir;
      } else {
        return this.dots.map(function () {
          return dir;
        });
      }
    }
  }, {
    key: "dots",
    get: function get() {
      var _this9 = this;

      return this.control.dotsPos.map(function (pos, index) {
        return vue_slider_objectSpread({
          pos: pos,
          index: index,
          value: _this9.control.dotsValue[index],
          focus: _this9.states.has(SliderState.Focus) && _this9.focusDotIndex === index,
          disabled: _this9.disabled,
          style: _this9.dotStyle
        }, (Array.isArray(_this9.dotOptions) ? _this9.dotOptions[index] : _this9.dotOptions) || {});
      });
    }
  }, {
    key: "animateTime",
    get: function get() {
      if (this.states.has(SliderState.Drag)) {
        return 0;
      }

      return this.duration;
    }
  }, {
    key: "canSort",
    get: function get() {
      return this.order && !this.minRange && !this.maxRange && !this.fixed && this.enableCross;
    }
  }, {
    key: "isNotSync",
    get: function get() {
      var values = this.control.dotsValue;
      return Array.isArray(this.value) ? this.value.length !== values.length || this.value.some(function (val, index) {
        return val !== values[index];
      }) : this.value !== values[0];
    }
  }, {
    key: "dragRange",
    get: function get() {
      var prevDot = this.dots[this.focusDotIndex - 1];
      var nextDot = this.dots[this.focusDotIndex + 1];
      return [prevDot ? prevDot.pos : -Infinity, nextDot ? nextDot.pos : Infinity];
    }
  }]);

  return VueSlider;
}(external_commonjs_vue_commonjs2_vue_root_Vue_default.a);

__decorate([Model('change', {
  default: 0
})], vue_slider_VueSlider.prototype, "value", void 0);

__decorate([Prop({
  type: Boolean,
  default: false
})], vue_slider_VueSlider.prototype, "silent", void 0);

__decorate([Prop({
  default: 'ltr',
  validator: function validator(dir) {
    return ['ltr', 'rtl', 'ttb', 'btt'].indexOf(dir) > -1;
  }
})], vue_slider_VueSlider.prototype, "direction", void 0);

__decorate([Prop({
  type: [Number, String]
})], vue_slider_VueSlider.prototype, "width", void 0);

__decorate([Prop({
  type: [Number, String]
})], vue_slider_VueSlider.prototype, "height", void 0);

__decorate([Prop({
  default: 14
})], vue_slider_VueSlider.prototype, "dotSize", void 0);

__decorate([Prop({
  default: false
})], vue_slider_VueSlider.prototype, "contained", void 0);

__decorate([Prop({
  type: Number,
  default: 0
})], vue_slider_VueSlider.prototype, "min", void 0);

__decorate([Prop({
  type: Number,
  default: 100
})], vue_slider_VueSlider.prototype, "max", void 0);

__decorate([Prop({
  type: Number,
  default: 1
})], vue_slider_VueSlider.prototype, "interval", void 0);

__decorate([Prop({
  type: Boolean,
  default: false
})], vue_slider_VueSlider.prototype, "disabled", void 0);

__decorate([Prop({
  type: Boolean,
  default: true
})], vue_slider_VueSlider.prototype, "clickable", void 0);

__decorate([Prop({
  type: Number,
  default: 0.5
})], vue_slider_VueSlider.prototype, "duration", void 0);

__decorate([Prop(Array)], vue_slider_VueSlider.prototype, "data", void 0);

__decorate([Prop({
  type: Boolean,
  default: false
})], vue_slider_VueSlider.prototype, "lazy", void 0);

__decorate([Prop({
  type: String,
  validator: function validator(val) {
    return ['none', 'always', 'focus'].indexOf(val) > -1;
  },
  default: 'focus'
})], vue_slider_VueSlider.prototype, "tooltip", void 0);

__decorate([Prop({
  type: [String, Array],
  validator: function validator(data) {
    return (Array.isArray(data) ? data : [data]).every(function (val) {
      return ['top', 'right', 'bottom', 'left'].indexOf(val) > -1;
    });
  }
})], vue_slider_VueSlider.prototype, "tooltipPlacement", void 0);

__decorate([Prop({
  type: [String, Array, Function]
})], vue_slider_VueSlider.prototype, "tooltipFormatter", void 0);

__decorate([Prop({
  type: Boolean,
  default: false
})], vue_slider_VueSlider.prototype, "useKeyboard", void 0);

__decorate([Prop(Function)], vue_slider_VueSlider.prototype, "keydownHook", void 0);

__decorate([Prop({
  type: Boolean,
  default: true
})], vue_slider_VueSlider.prototype, "enableCross", void 0);

__decorate([Prop({
  type: Boolean,
  default: false
})], vue_slider_VueSlider.prototype, "fixed", void 0);

__decorate([Prop({
  type: Boolean,
  default: true
})], vue_slider_VueSlider.prototype, "order", void 0);

__decorate([Prop(Number)], vue_slider_VueSlider.prototype, "minRange", void 0);

__decorate([Prop(Number)], vue_slider_VueSlider.prototype, "maxRange", void 0);

__decorate([Prop({
  type: [Boolean, Object, Array, Function],
  default: false
})], vue_slider_VueSlider.prototype, "marks", void 0);

__decorate([Prop({
  type: [Boolean, Function],
  default: true
})], vue_slider_VueSlider.prototype, "process", void 0);

__decorate([Prop(Boolean)], vue_slider_VueSlider.prototype, "included", void 0);

__decorate([Prop(Boolean)], vue_slider_VueSlider.prototype, "adsorb", void 0);

__decorate([Prop(Boolean)], vue_slider_VueSlider.prototype, "hideLabel", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "dotOptions", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "railStyle", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "processStyle", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "dotStyle", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "tooltipStyle", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "stepStyle", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "stepActiveStyle", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "labelStyle", void 0);

__decorate([Prop()], vue_slider_VueSlider.prototype, "labelActiveStyle", void 0);

__decorate([Watch('value')], vue_slider_VueSlider.prototype, "onValueChanged", null);

vue_slider_VueSlider = __decorate([vue_class_component_common_default()({
  data: function data() {
    return {
      control: null
    };
  },
  components: {
    VueSliderDot: vue_slider_dot,
    VueSliderMark: vue_slider_mark
  }
})], vue_slider_VueSlider);
/* harmony default export */ var vue_slider = (vue_slider_VueSlider);
// CONCATENATED MODULE: ./lib/index.ts
/* tslint:disable:import-spacing */




vue_slider.VueSliderMark = vue_slider_mark;
vue_slider.VueSliderDot = vue_slider_dot;
/* harmony default export */ var lib = (vue_slider);

// CONCATENATED MODULE: ./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js
/* concated harmony reexport ERROR_TYPE */__webpack_require__.d(__webpack_exports__, "ERROR_TYPE", function() { return ERROR_TYPE; });
/* concated harmony reexport VueSliderMark */__webpack_require__.d(__webpack_exports__, "VueSliderMark", function() { return vue_slider_mark; });
/* concated harmony reexport VueSliderDot */__webpack_require__.d(__webpack_exports__, "VueSliderDot", function() { return vue_slider_dot; });


/* harmony default export */ var entry_lib = __webpack_exports__["default"] = (lib);



/***/ })

/******/ })["default"];
});
//# sourceMappingURL=vue-slider-component.umd.js.map

 /*! 
  * portal-vue © Thorsten Lünborg, 2019 
  * 
  * Version: 2.1.7
  * 
  * LICENCE: MIT 
  * 
  * https://github.com/linusborg/portal-vue
  * 
 */

(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('vue')) :
  typeof define === 'function' && define.amd ? define(['exports', 'vue'], factory) :
  (factory((global.PortalVue = {}),global.Vue));
}(this, (function (exports,Vue) { 'use strict';

  Vue = Vue && Vue.hasOwnProperty('default') ? Vue['default'] : Vue;

  function _typeof(obj) {
    if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
      _typeof = function (obj) {
        return typeof obj;
      };
    } else {
      _typeof = function (obj) {
        return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
      };
    }

    return _typeof(obj);
  }

  function _toConsumableArray(arr) {
    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread();
  }

  function _arrayWithoutHoles(arr) {
    if (Array.isArray(arr)) {
      for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

      return arr2;
    }
  }

  function _iterableToArray(iter) {
    if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === "[object Arguments]") return Array.from(iter);
  }

  function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance");
  }

  var inBrowser = typeof window !== 'undefined';
  function freeze(item) {
    if (Array.isArray(item) || _typeof(item) === 'object') {
      return Object.freeze(item);
    }

    return item;
  }
  function combinePassengers(transports) {
    var slotProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    return transports.reduce(function (passengers, transport) {
      var temp = transport.passengers[0];
      var newPassengers = typeof temp === 'function' ? temp(slotProps) : transport.passengers;
      return passengers.concat(newPassengers);
    }, []);
  }
  function stableSort(array, compareFn) {
    return array.map(function (v, idx) {
      return [idx, v];
    }).sort(function (a, b) {
      return compareFn(a[1], b[1]) || a[0] - b[0];
    }).map(function (c) {
      return c[1];
    });
  }
  function pick(obj, keys) {
    return keys.reduce(function (acc, key) {
      if (obj.hasOwnProperty(key)) {
        acc[key] = obj[key];
      }

      return acc;
    }, {});
  }

  var transports = {};
  var targets = {};
  var sources = {};
  var Wormhole = Vue.extend({
    data: function data() {
      return {
        transports: transports,
        targets: targets,
        sources: sources,
        trackInstances: inBrowser
      };
    },
    methods: {
      open: function open(transport) {
        if (!inBrowser) return;
        var to = transport.to,
            from = transport.from,
            passengers = transport.passengers,
            _transport$order = transport.order,
            order = _transport$order === void 0 ? Infinity : _transport$order;
        if (!to || !from || !passengers) return;
        var newTransport = {
          to: to,
          from: from,
          passengers: freeze(passengers),
          order: order
        };
        var keys = Object.keys(this.transports);

        if (keys.indexOf(to) === -1) {
          Vue.set(this.transports, to, []);
        }

        var currentIndex = this.$_getTransportIndex(newTransport); // Copying the array here so that the PortalTarget change event will actually contain two distinct arrays

        var newTransports = this.transports[to].slice(0);

        if (currentIndex === -1) {
          newTransports.push(newTransport);
        } else {
          newTransports[currentIndex] = newTransport;
        }

        this.transports[to] = stableSort(newTransports, function (a, b) {
          return a.order - b.order;
        });
      },
      close: function close(transport) {
        var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
        var to = transport.to,
            from = transport.from;
        if (!to || !from && force === false) return;

        if (!this.transports[to]) {
          return;
        }

        if (force) {
          this.transports[to] = [];
        } else {
          var index = this.$_getTransportIndex(transport);

          if (index >= 0) {
            // Copying the array here so that the PortalTarget change event will actually contain two distinct arrays
            var newTransports = this.transports[to].slice(0);
            newTransports.splice(index, 1);
            this.transports[to] = newTransports;
          }
        }
      },
      registerTarget: function registerTarget(target, vm, force) {
        if (!inBrowser) return;

        if (this.trackInstances && !force && this.targets[target]) {
          console.warn("[portal-vue]: Target ".concat(target, " already exists"));
        }

        this.$set(this.targets, target, Object.freeze([vm]));
      },
      unregisterTarget: function unregisterTarget(target) {
        this.$delete(this.targets, target);
      },
      registerSource: function registerSource(source, vm, force) {
        if (!inBrowser) return;

        if (this.trackInstances && !force && this.sources[source]) {
          console.warn("[portal-vue]: source ".concat(source, " already exists"));
        }

        this.$set(this.sources, source, Object.freeze([vm]));
      },
      unregisterSource: function unregisterSource(source) {
        this.$delete(this.sources, source);
      },
      hasTarget: function hasTarget(to) {
        return !!(this.targets[to] && this.targets[to][0]);
      },
      hasSource: function hasSource(to) {
        return !!(this.sources[to] && this.sources[to][0]);
      },
      hasContentFor: function hasContentFor(to) {
        return !!this.transports[to] && !!this.transports[to].length;
      },
      // Internal
      $_getTransportIndex: function $_getTransportIndex(_ref) {
        var to = _ref.to,
            from = _ref.from;

        for (var i in this.transports[to]) {
          if (this.transports[to][i].from === from) {
            return +i;
          }
        }

        return -1;
      }
    }
  });
  var wormhole = new Wormhole(transports);

  var _id = 1;
  var Portal = Vue.extend({
    name: 'portal',
    props: {
      disabled: {
        type: Boolean
      },
      name: {
        type: String,
        default: function _default() {
          return String(_id++);
        }
      },
      order: {
        type: Number,
        default: 0
      },
      slim: {
        type: Boolean
      },
      slotProps: {
        type: Object,
        default: function _default() {
          return {};
        }
      },
      tag: {
        type: String,
        default: 'DIV'
      },
      to: {
        type: String,
        default: function _default() {
          return String(Math.round(Math.random() * 10000000));
        }
      }
    },
    created: function created() {
      var _this = this;

      this.$nextTick(function () {
        wormhole.registerSource(_this.name, _this);
      });
    },
    mounted: function mounted() {
      if (!this.disabled) {
        this.sendUpdate();
      }
    },
    updated: function updated() {
      if (this.disabled) {
        this.clear();
      } else {
        this.sendUpdate();
      }
    },
    beforeDestroy: function beforeDestroy() {
      wormhole.unregisterSource(this.name);
      this.clear();
    },
    watch: {
      to: function to(newValue, oldValue) {
        oldValue && oldValue !== newValue && this.clear(oldValue);
        this.sendUpdate();
      }
    },
    methods: {
      clear: function clear(target) {
        var closer = {
          from: this.name,
          to: target || this.to
        };
        wormhole.close(closer);
      },
      normalizeSlots: function normalizeSlots() {
        return this.$scopedSlots.default ? [this.$scopedSlots.default] : this.$slots.default;
      },
      normalizeOwnChildren: function normalizeOwnChildren(children) {
        return typeof children === 'function' ? children(this.slotProps) : children;
      },
      sendUpdate: function sendUpdate() {
        var slotContent = this.normalizeSlots();

        if (slotContent) {
          var transport = {
            from: this.name,
            to: this.to,
            passengers: _toConsumableArray(slotContent),
            order: this.order
          };
          wormhole.open(transport);
        } else {
          this.clear();
        }
      }
    },
    render: function render(h) {
      var children = this.$slots.default || this.$scopedSlots.default || [];
      var Tag = this.tag;

      if (children && this.disabled) {
        return children.length <= 1 && this.slim ? this.normalizeOwnChildren(children)[0] : h(Tag, [this.normalizeOwnChildren(children)]);
      } else {
        return this.slim ? h() : h(Tag, {
          class: {
            'v-portal': true
          },
          style: {
            display: 'none'
          },
          key: 'v-portal-placeholder'
        });
      }
    }
  });

  var PortalTarget = Vue.extend({
    name: 'portalTarget',
    props: {
      multiple: {
        type: Boolean,
        default: false
      },
      name: {
        type: String,
        required: true
      },
      slim: {
        type: Boolean,
        default: false
      },
      slotProps: {
        type: Object,
        default: function _default() {
          return {};
        }
      },
      tag: {
        type: String,
        default: 'div'
      },
      transition: {
        type: [String, Object, Function]
      }
    },
    data: function data() {
      return {
        transports: wormhole.transports,
        firstRender: true
      };
    },
    created: function created() {
      var _this = this;

      this.$nextTick(function () {
        wormhole.registerTarget(_this.name, _this);
      });
    },
    watch: {
      ownTransports: function ownTransports() {
        this.$emit('change', this.children().length > 0);
      },
      name: function name(newVal, oldVal) {
        /**
         * TODO
         * This should warn as well ...
         */
        wormhole.unregisterTarget(oldVal);
        wormhole.registerTarget(newVal, this);
      }
    },
    mounted: function mounted() {
      var _this2 = this;

      if (this.transition) {
        this.$nextTick(function () {
          // only when we have a transition, because it causes a re-render
          _this2.firstRender = false;
        });
      }
    },
    beforeDestroy: function beforeDestroy() {
      wormhole.unregisterTarget(this.name);
    },
    computed: {
      ownTransports: function ownTransports() {
        var transports = this.transports[this.name] || [];

        if (this.multiple) {
          return transports;
        }

        return transports.length === 0 ? [] : [transports[transports.length - 1]];
      },
      passengers: function passengers() {
        return combinePassengers(this.ownTransports, this.slotProps);
      }
    },
    methods: {
      // can't be a computed prop because it has to "react" to $slot changes.
      children: function children() {
        return this.passengers.length !== 0 ? this.passengers : this.$scopedSlots.default ? this.$scopedSlots.default(this.slotProps) : this.$slots.default || [];
      },
      // can't be a computed prop because it has to "react" to this.children().
      noWrapper: function noWrapper() {
        var noWrapper = this.slim && !this.transition;

        if (noWrapper && this.children().length > 1) {
          console.warn('[portal-vue]: PortalTarget with `slim` option received more than one child element.');
        }

        return noWrapper;
      }
    },
    render: function render(h) {
      var noWrapper = this.noWrapper();
      var children = this.children();
      var Tag = this.transition || this.tag;
      return noWrapper ? children[0] : this.slim && !Tag ? h() : h(Tag, {
        props: {
          // if we have a transition component, pass the tag if it exists
          tag: this.transition && this.tag ? this.tag : undefined
        },
        class: {
          'vue-portal-target': true
        }
      }, children);
    }
  });

  var _id$1 = 0;
  var portalProps = ['disabled', 'name', 'order', 'slim', 'slotProps', 'tag', 'to'];
  var targetProps = ['multiple', 'transition'];
  var MountingPortal = Vue.extend({
    name: 'MountingPortal',
    inheritAttrs: false,
    props: {
      append: {
        type: [Boolean, String]
      },
      bail: {
        type: Boolean
      },
      mountTo: {
        type: String,
        required: true
      },
      // Portal
      disabled: {
        type: Boolean
      },
      // name for the portal
      name: {
        type: String,
        default: function _default() {
          return 'mounted_' + String(_id$1++);
        }
      },
      order: {
        type: Number,
        default: 0
      },
      slim: {
        type: Boolean
      },
      slotProps: {
        type: Object,
        default: function _default() {
          return {};
        }
      },
      tag: {
        type: String,
        default: 'DIV'
      },
      // name for the target
      to: {
        type: String,
        default: function _default() {
          return String(Math.round(Math.random() * 10000000));
        }
      },
      // Target
      multiple: {
        type: Boolean,
        default: false
      },
      targetSlim: {
        type: Boolean
      },
      targetSlotProps: {
        type: Object,
        default: function _default() {
          return {};
        }
      },
      targetTag: {
        type: String,
        default: 'div'
      },
      transition: {
        type: [String, Object, Function]
      }
    },
    created: function created() {
      if (typeof document === 'undefined') return;
      var el = document.querySelector(this.mountTo);

      if (!el) {
        console.error("[portal-vue]: Mount Point '".concat(this.mountTo, "' not found in document"));
        return;
      }

      var props = this.$props; // Target already exists

      if (wormhole.targets[props.name]) {
        if (props.bail) {
          console.warn("[portal-vue]: Target ".concat(props.name, " is already mounted.\n        Aborting because 'bail: true' is set"));
        } else {
          this.portalTarget = wormhole.targets[props.name];
        }

        return;
      }

      var append = props.append;

      if (append) {
        var type = typeof append === 'string' ? append : 'DIV';
        var mountEl = document.createElement(type);
        el.appendChild(mountEl);
        el = mountEl;
      } // get props for target from $props
      // we have to rename a few of them


      var _props = pick(this.$props, targetProps);

      _props.slim = this.targetSlim;
      _props.tag = this.targetTag;
      _props.slotProps = this.targetSlotProps;
      _props.name = this.to;
      this.portalTarget = new PortalTarget({
        el: el,
        parent: this.$parent || this,
        propsData: _props
      });
    },
    beforeDestroy: function beforeDestroy() {
      var target = this.portalTarget;

      if (this.append) {
        var el = target.$el;
        el.parentNode.removeChild(el);
      }

      target.$destroy();
    },
    render: function render(h) {
      if (!this.portalTarget) {
        console.warn("[portal-vue] Target wasn't mounted");
        return h();
      } // if there's no "manual" scoped slot, so we create a <Portal> ourselves


      if (!this.$scopedSlots.manual) {
        var props = pick(this.$props, portalProps);
        return h(Portal, {
          props: props,
          attrs: this.$attrs,
          on: this.$listeners,
          scopedSlots: this.$scopedSlots
        }, this.$slots.default);
      } // else, we render the scoped slot


      var content = this.$scopedSlots.manual({
        to: this.to
      }); // if user used <template> for the scoped slot
      // content will be an array

      if (Array.isArray(content)) {
        content = content[0];
      }

      if (!content) return h();
      return content;
    }
  });

  function install(Vue$$1) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    Vue$$1.component(options.portalName || 'Portal', Portal);
    Vue$$1.component(options.portalTargetName || 'PortalTarget', PortalTarget);
    Vue$$1.component(options.MountingPortalName || 'MountingPortal', MountingPortal);
  }

  if ( // @ts-ignore
  typeof window !== 'undefined' && window.Vue && window.Vue === Vue) {
    window.Vue.use({
      install: install
    });
  }

  var index = {
    install: install
  };

  exports.default = index;
  exports.Portal = Portal;
  exports.PortalTarget = PortalTarget;
  exports.MountingPortal = MountingPortal;
  exports.Wormhole = wormhole;

  Object.defineProperty(exports, '__esModule', { value: true });

})));
var hashID = (function () {
    var HashID = {};

    /**
     * The default alphabet is 25 numbers and lowercase letters.
     * Any numbers that look like letters and vice versa are removed:
     * 1 l, 0 o.
     * Also the following letters are not present, to prevent any
     * expletives: cfhistu
     */
    var ALPHABET = '23456789abdegjkmnpqrvwxyz';

    var ALPHABET_LENGTH = ALPHABET.length;

    // Governs the length of the ID.
    // With an alphabet of 25 chars,
    // a length of 9 gives us 25^9 or
    // 3,814,697,265,625 possibilities.
    // Should be enough...
    var ID_LENGTH = 9;

    /**
     * Returns a randomly-generated friendly ID.
     * Note that the friendly ID is not guaranteed to be
     * unique to any other ID generated by this same method,
     * so it is up to you to check for uniqueness.
     * @return {String} friendly ID.
     */
    HashID.generate = function () {
        var rtn = '';
        for (var i = 0; i < ID_LENGTH; i++) {
            rtn += ALPHABET.charAt(Math.floor(Math.random() * ALPHABET_LENGTH));
        }
        return rtn;
    };

    var previous = [];

    /**
     * Tries to generate a unique ID that is not defined in the
     * `previous` array.
     * @return {String} A unique ID, or `null` if one could not be generated.
     */
    var UNIQUE_RETRIES = 9999;
    HashID.generateUnique = function () {
        var retries = 0;
        var id;

        // Try to generate a unique ID, one that isn't in the previous.
        while (!id && retries < UNIQUE_RETRIES) {
            id = HashID.generate();
            if (previous.indexOf(id) !== -1) {
                id = null;
                retries++;
            }
        }
        previous.push(id);
        return id;
    };

    return HashID;
})();

$('[data-component]').each(function (index, el) {
    $(el).attr('id', hashID.generateUnique());
});


function getVueAttrDataFromEl(el) {
    var vueDefaultAttr = $(el).attr('data-vue-default');
    var result = {};
    if (vueDefaultAttr) {
        try {
            result = JSON5.parse(vueDefaultAttr);
        } catch (err) {
            // is not object syntax in attr, ignoring
        }
    }
    return result;
}


/* Svg icon */
$(document).ready(function () {
    var svgDefsContainer = $('<svg class="w-0 h-0 overflow-hidden" id="svgDefsContainer"><defs></defs></svg>').prependTo('body');
    var svgDef = svgDefsContainer.find('defs');
    
    var requestedIcons = [];
    
    window.requestExternalSVGIcon = function (parentFinder) {
        var parentDOM = $('html');
        if ((typeof parentFinder === 'string') || (parentFinder instanceof HTMLElement)) {
            parentDOM = $(parentFinder);
        } else if (parentFinder instanceof jQuery) {
            parentDOM = parentFinder;
        }
        
        parentDOM.find('use[data-use-external-svg]').each(function (index, el) {
            var useDOM = $(el);
            var externalLink = useDOM.attr('data-use-external-svg');
            // var filename = _.last(externalLink.split('/'));
            // var iconID = filename.replace('.svg', '');
            var iconID = externalLink;
            useDOM.attr('xlink:href', '#' + iconID);
            
            if (requestedIcons.includes(externalLink)) {
                return;
            }
            
            // store a reference so if this file got referenced again we skip ajax call
            requestedIcons.push(externalLink);

            $.ajax({
                url: externalLink,
            }).done(function (resp) {
                var respDom = $(resp).find('svg:first');

                // force an id so that it can be referenced
                respDom.attr('id', iconID);
                // remove width and height from reference svg so that width and height can be controlled by <svg></svg>
                respDom.removeAttr('width');
                respDom.removeAttr('height');

                // put into dom
                svgDef.append(respDom);
            });
        });
    }
    
    window.requestExternalSVGIcon();
});


$.get('/etc.clientlibs/cimb/clientlibs/clientlib-base/resources/svg/icon-symbols.svg', function (data) {
    var div = document.createElement('div');
    div.className = 'w-0 h-0 overflow-hidden';
    div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);
    document.body.insertBefore(div, document.body.childNodes[0]);
});



// global scroll to element script
function scrollToElement(selector, topOffset, duration) {
    var headerHeight = $('.main-global-header').height();
    var fromTop = topOffset || headerHeight; // set from top offset
    var duration = duration || 500; // duration of the animation
    var element = (typeof selector === 'string' || !(selector instanceof jQuery)) ? $(selector) : selector;
    if (element.length === 0) return;
    return new Promise(function (resolve, reject) {
        $('html, body').animate({ scrollTop: element.offset().top - fromTop }, {
            duration: duration,
            complete: function () {
                resolve();
            },
        });
    });
}

function isEditorMode () {
    return window.top.location.pathname.startsWith('/editor.html/');
}

function isIE () {
    ua = navigator.userAgent;
    var is_ie = ua.indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1;
    return is_ie;
}

function isSafari () {
    return /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);
}

$(document).ready(function () {
    objectFitImages();
    
    $('a[data-modal="modalpopup"]').click(function (event) {
        event.preventDefault();
        window.modalPopup({
            show: true,
            contentUrl: event.currentTarget.getAttribute('href'),
        });
    });
});

Vue.component('vue-slider', window['vue-slider-component']);

//global event hub
Vue.prototype.$eventHub = new Vue();



function getCookie (cname) {
    var name = cname + '=';
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return '';
}

function setCookie (cname, cvalue, exdays) {
    var d = new Date();
    d.setHours(23, 59, 59, 0); // set hours to today's 11.59pm
    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
    var expires = 'expires=' + d.toUTCString();
    document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/';
}

/**
 * A global function to calculate the width of a given text. It appends a hidden div to the DOM, then gets the width
 * of a given text in pixels. By default, it assumes that the text is sized at 1rem.
 *
 * @param text
 * @param rems
 * @returns width
 */
function calculateTextWidth(text, rems) {
    if (typeof rems === "undefined") {
        rems = 1;
    }

    var $textDiv = $("<p>").css({
        "font-size": convertRemToPixels(rems) + "px",
        "position": "fixed",
        "right": "9999px"
    });

    $("body").append($textDiv);

    $textDiv.text(text);
    var width = $textDiv.width();

    $textDiv.remove();

    return width;
}

/**
 * A global function to convert rem to pixels. It gets the document root font size and multiplies it by a given factor.
 * @param factor
 * @returns {number}
 */
function convertRemToPixels(factor) {
    return factor * parseFloat(getComputedStyle(document.documentElement).fontSize);
}



/* _satellite tracking global method */
function fireSatellite(eventName) {
	if(_satellite){
			_satellite.track(eventName);
	}
}


function updateStickiesPosition () {
	var stickiesArr = Array.from(document.querySelectorAll('[data-sticky-bottom]'));
	stickiesArr.sort(function (a, b) {
		// sort by their stacking index. For e.g. data-sticky-bottom="1" is less than data-sticky-bottom="0" (due reverse)
		return (parseInt(b.getAttribute('data-sticky-bottom'), 10) || 0) - (parseInt(a.getAttribute('data-sticky-bottom'), 10) || 0);
	});
	
	var stackingHeight = 0;
	stickiesArr.reverse().forEach(function (el) {
		var jEl = $(el);
		if (jEl.hasClass('unstick') || jEl.hasClass('hidden')) return;

		jEl.css({
			bottom: stackingHeight,
		});
		stackingHeight += jEl.outerHeight(true);
	});
	
}

$(window).on('load', function () {
	if (window.isEditorMode()) return;
	window.updateStickiesPosition();
});


/*! jssocials - v1.4.0 - 2016-10-10
* http://js-socials.com
* Copyright (c) 2016 Artem Tabalin; Licensed MIT */
(function(window, $, undefined) {

    var JSSOCIALS = "JSSocials",
        JSSOCIALS_DATA_KEY = JSSOCIALS;

    var getOrApply = function(value, context) {
        if($.isFunction(value)) {
            return value.apply(context, $.makeArray(arguments).slice(2));
        }
        return value;
    };

    var IMG_SRC_REGEX = /(\.(jpeg|png|gif|bmp|svg)$|^data:image\/(jpeg|png|gif|bmp|svg\+xml);base64)/i;
    var URL_PARAMS_REGEX = /(&?[a-zA-Z0-9]+=)?\{([a-zA-Z0-9]+)\}/g;

    var MEASURES = {
        "G": 1000000000,
        "M": 1000000,
        "K": 1000
    };

    var shares = {};

    function Socials(element, config) {
        var $element = $(element);

        $element.data(JSSOCIALS_DATA_KEY, this);

        this._$element = $element;

        this.shares = [];

        this._init(config);
        this._render();
    }

    Socials.prototype = {
        url: "",
        text: "",
        shareIn: "blank",

        showLabel: function(screenWidth) {
            return (this.showCount === false) ?
                (screenWidth > this.smallScreenWidth) :
                (screenWidth >= this.largeScreenWidth);
        },

        showCount: function(screenWidth) {
            return (screenWidth <= this.smallScreenWidth) ? "inside" : true;
        },

        smallScreenWidth: 640,
        largeScreenWidth: 1024,

        resizeTimeout: 200,

        elementClass: "jssocials",
        sharesClass: "jssocials-shares",
        shareClass: "jssocials-share",
        shareButtonClass: "jssocials-share-button",
        shareLinkClass: "jssocials-share-link",
        shareLogoClass: "jssocials-share-logo",
        shareLabelClass: "jssocials-share-label",
        shareLinkCountClass: "jssocials-share-link-count",
        shareCountBoxClass: "jssocials-share-count-box",
        shareCountClass: "jssocials-share-count",
        shareZeroCountClass: "jssocials-share-no-count",

        _init: function(config) {
            this._initDefaults();
            $.extend(this, config);
            this._initShares();
            this._attachWindowResizeCallback();
        },

        _initDefaults: function() {
            this.url = window.location.href;
            this.text = $.trim($("meta[name=description]").attr("content") || $("title").text());
        },

        _initShares: function() {
            this.shares = $.map(this.shares, $.proxy(function(shareConfig) {
                if(typeof shareConfig === "string") {
                    shareConfig = { share: shareConfig };
                }

                var share = (shareConfig.share && shares[shareConfig.share]);

                if(!share && !shareConfig.renderer) {
                    throw Error("Share '" + shareConfig.share + "' is not found");
                }

                return $.extend({ url: this.url, text: this.text }, share, shareConfig);
            }, this));
        },

        _attachWindowResizeCallback: function() {
            $(window).on("resize", $.proxy(this._windowResizeHandler, this));
        },

        _detachWindowResizeCallback: function() {
            $(window).off("resize", this._windowResizeHandler);
        },

        _windowResizeHandler: function() {
            if($.isFunction(this.showLabel) || $.isFunction(this.showCount)) {
                window.clearTimeout(this._resizeTimer);
                this._resizeTimer = setTimeout($.proxy(this.refresh, this), this.resizeTimeout);
            }
        },

        _render: function() {
            this._clear();

            this._defineOptionsByScreen();

            this._$element.addClass(this.elementClass);

            this._$shares = $("<div>").addClass(this.sharesClass)
                .appendTo(this._$element);

            this._renderShares();
        },

        _defineOptionsByScreen: function() {
            this._screenWidth = $(window).width();
            this._showLabel = getOrApply(this.showLabel, this, this._screenWidth);
            this._showCount = getOrApply(this.showCount, this, this._screenWidth);
        },

        _renderShares: function() {
            $.each(this.shares, $.proxy(function(_, share) {
                this._renderShare(share);
            }, this));
        },

        _renderShare: function(share) {
            var $share;

            if($.isFunction(share.renderer)) {
                $share = $(share.renderer());
            } else {
                $share = this._createShare(share);
            }

            $share.addClass(this.shareClass)
                .addClass(share.share ? "jssocials-share-" + share.share : "")
                .addClass(share.css)
                .appendTo(this._$shares);
        },

        _createShare: function(share) {
            var $result = $("<div>");
            var $shareLink = this._createShareLink(share).appendTo($result);

            if(this._showCount) {
                var isInsideCount = (this._showCount === "inside");
                var $countContainer = isInsideCount ? $shareLink : $("<div>").addClass(this.shareCountBoxClass).appendTo($result);
                $countContainer.addClass(isInsideCount ? this.shareLinkCountClass : this.shareCountBoxClass);
                this._renderShareCount(share, $countContainer);
            }

            return $result;
        },

        _createShareLink: function(share) {
            var shareStrategy = this._getShareStrategy(share);

            var $result = shareStrategy.call(share, {
                shareUrl: this._getShareUrl(share)
            });

            $result.addClass(this.shareLinkClass)
                .append(this._createShareLogo(share));

            if(this._showLabel) {
                $result.append(this._createShareLabel(share));
            }

            $.each(this.on || {}, function(event, handler) {
                if($.isFunction(handler)) {
                    $result.on(event, $.proxy(handler, share));
                }
            });

            return $result;
        },

        _getShareStrategy: function(share) {
            var result = shareStrategies[share.shareIn || this.shareIn];

            if(!result)
                throw Error("Share strategy '" + this.shareIn + "' not found");

            return result;
        },

        _getShareUrl: function(share) {
            var shareUrl = getOrApply(share.shareUrl, share);
            return this._formatShareUrl(shareUrl, share);
        },

        _createShareLogo: function(share) {
            var logo = share.logo;

            var $result = IMG_SRC_REGEX.test(logo) ?
                $("<img>").attr("src", share.logo) :
                $("<i>").addClass(logo);

            $result.addClass(this.shareLogoClass);

            return $result;
        },

        _createShareLabel: function(share) {
            return $("<span>").addClass(this.shareLabelClass)
                .text(share.label);
        },

        _renderShareCount: function(share, $container) {
            var $count = $("<span>").addClass(this.shareCountClass);

            $container.addClass(this.shareZeroCountClass)
                .append($count);

            this._loadCount(share).done($.proxy(function(count) {
                if(count) {
                    $container.removeClass(this.shareZeroCountClass);
                    $count.text(count);
                }
            }, this));
        },

        _loadCount: function(share) {
            var deferred = $.Deferred();
            var countUrl = this._getCountUrl(share);

            if(!countUrl) {
                return deferred.resolve(0).promise();
            }

            var handleSuccess = $.proxy(function(response) {
                deferred.resolve(this._getCountValue(response, share));
            }, this);

            $.getJSON(countUrl).done(handleSuccess)
                .fail(function() {
                    $.get(countUrl).done(handleSuccess)
                        .fail(function() {
                            deferred.resolve(0);
                        });
                });

            return deferred.promise();
        },

        _getCountUrl: function(share) {
            var countUrl = getOrApply(share.countUrl, share);
            return this._formatShareUrl(countUrl, share);
        },

        _getCountValue: function(response, share) {
            var count = ($.isFunction(share.getCount) ? share.getCount(response) : response) || 0;
            return (typeof count === "string") ? count : this._formatNumber(count);
        },

        _formatNumber: function(number) {
            $.each(MEASURES, function(letter, value) {
                if(number >= value) {
                    number = parseFloat((number / value).toFixed(2)) + letter;
                    return false;
                }
            });

            return number;
        },

        _formatShareUrl: function(url, share) {
            return url.replace(URL_PARAMS_REGEX, function(match, key, field) {
                var value = share[field] || "";
                return value ? (key || "") + window.encodeURIComponent(value) : "";
            });
        },

        _clear: function() {
            window.clearTimeout(this._resizeTimer);
            this._$element.empty();
        },

        _passOptionToShares: function(key, value) {
            var shares = this.shares;

            $.each(["url", "text"], function(_, optionName) {
                if(optionName !== key)
                    return;

                $.each(shares, function(_, share) {
                    share[key] = value;
                });
            });
        },

        _normalizeShare: function(share) {
            if($.isNumeric(share)) {
                return this.shares[share];
            }

            if(typeof share === "string") {
                return $.grep(this.shares, function(s) {
                    return s.share === share;
                })[0];
            }

            return share;
        },

        refresh: function() {
            this._render();
        },

        destroy: function() {
            this._clear();
            this._detachWindowResizeCallback();

            this._$element
                .removeClass(this.elementClass)
                .removeData(JSSOCIALS_DATA_KEY);
        },

        option: function(key, value) {
            if(arguments.length === 1) {
                return this[key];
            }

            this[key] = value;

            this._passOptionToShares(key, value);

            this.refresh();
        },

        shareOption: function(share, key, value) {
            share = this._normalizeShare(share);

            if(arguments.length === 2) {
                return share[key];
            }

            share[key] = value;
            this.refresh();
        }
    };


    $.fn.jsSocials = function(config) {
        var args = $.makeArray(arguments),
            methodArgs = args.slice(1),
            result = this;

        this.each(function() {
            var $element = $(this),
                instance = $element.data(JSSOCIALS_DATA_KEY),
                methodResult;

            if(instance) {
                if(typeof config === "string") {
                    methodResult = instance[config].apply(instance, methodArgs);
                    if(methodResult !== undefined && methodResult !== instance) {
                        result = methodResult;
                        return false;
                    }
                } else {
                    instance._detachWindowResizeCallback();
                    instance._init(config);
                    instance._render();
                }
            } else {
                new Socials($element, config);
            }
        });

        return result;
    };

    var setDefaults = function(config) {
        var component;

        if($.isPlainObject(config)) {
            component = Socials.prototype;
        } else {
            component = shares[config];
            config = arguments[1] || {};
        }

        $.extend(component, config);
    };

    var shareStrategies = {
        popup: function(args) {
            return $("<a>").attr("href", "#")
                .on("click", function() {
                    window.open(args.shareUrl, null, "width=600, height=400, location=0, menubar=0, resizeable=0, scrollbars=0, status=0, titlebar=0, toolbar=0");
                    return false;
                });
        },

        blank: function(args) {
            return $("<a>").attr({ target: "_blank", href: args.shareUrl });
        },

        self: function(args) {
            return $("<a>").attr({ target: "_self", href: args.shareUrl });
        }
    };

    window.jsSocials = {
        Socials: Socials,
        shares: shares,
        shareStrategies: shareStrategies,
        setDefaults: setDefaults
    };

}(window, jQuery));


(function(window, $, jsSocials, undefined) {

    $.extend(jsSocials.shares, {

        email: {
            label: "E-mail",
            logo: "fa fa-at",
            shareUrl: "mailto:{to}?subject={text}&body={url}",
            countUrl: "",
            shareIn: "self"
        },

        twitter: {
            label: "Tweet",
            logo: "fa fa-twitter",
            shareUrl: "https://twitter.com/share?url={url}&text={text}&via={via}&hashtags={hashtags}",
            countUrl: ""
        },

        facebook: {
            label: "Like",
            logo: "fa fa-facebook",
            shareUrl: "https://facebook.com/sharer/sharer.php?u={url}",
            countUrl: "https://graph.facebook.com/?id={url}",
            getCount: function(data) {
                return data.share && data.share.share_count || 0;
            }
        },

        vkontakte: {
            label: "Like",
            logo: "fa fa-vk",
            shareUrl: "https://vk.com/share.php?url={url}&title={title}&description={text}",
            countUrl: "https://vk.com/share.php?act=count&index=1&url={url}",
            getCount: function(data) {
                return parseInt(data.slice(15, -2).split(', ')[1]);
            }
        },

        googleplus: {
            label: "+1",
            logo: "fa fa-google",
            shareUrl: "https://plus.google.com/share?url={url}",
            countUrl: ""
        },

        linkedin: {
            label: "Share",
            logo: "fa fa-linkedin",
            shareUrl: "https://www.linkedin.com/shareArticle?mini=true&url={url}",
            countUrl: "https://www.linkedin.com/countserv/count/share?format=jsonp&url={url}&callback=?",
            getCount: function(data) {
                return data.count;
            }
        },

        pinterest: {
            label: "Pin it",
            logo: "fa fa-pinterest",
            shareUrl: "https://pinterest.com/pin/create/bookmarklet/?media={media}&url={url}&description={text}",
            countUrl: "https://api.pinterest.com/v1/urls/count.json?&url={url}&callback=?",
            getCount: function(data) {
                return data.count;
            }
        },

        stumbleupon: {
            label: "Share",
            logo: "fa fa-stumbleupon",
            shareUrl: "http://www.stumbleupon.com/submit?url={url}&title={title}",
            countUrl:  "https://cors-anywhere.herokuapp.com/https://www.stumbleupon.com/services/1.01/badge.getinfo?url={url}",
            getCount: function(data) {
                return data.result.views;
            }
        },

        telegram: {
            label: "Telegram",
            logo: "fa fa-paper-plane",
            shareUrl: "tg://msg?text={url} {text}",
            countUrl: "",
            shareIn: "self"
        },

        whatsapp: {
            label: "WhatsApp",
            logo: "fa fa-whatsapp",
            shareUrl: "whatsapp://send?text={url} {text}",
            countUrl: "",
            shareIn: "self"
        },

        line: {
            label: "LINE",
            logo: "fa fa-comment",
            shareUrl: "http://line.me/R/msg/text/?{text} {url}",
            countUrl: ""
        },

        viber: {
            label: "Viber",
            logo: "fa fa-volume-control-phone",
            shareUrl: "viber://forward?text={url} {text}",
            countUrl: "",
            shareIn: "self"
        },

        pocket: {
            label: "Pocket",
            logo: "fa fa-get-pocket",
            shareUrl: "https://getpocket.com/save?url={url}&title={title}",
            countUrl: ""
        },

        messenger: {
            label: "Share",
            logo: "fa fa-commenting",
            shareUrl: "fb-messenger://share?link={url}",
            countUrl: "",
            shareIn: "self"
        }

    });

}(window, jQuery, window.jsSocials));


(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
	typeof define === 'function' && define.amd ? define(['exports'], factory) :
	(factory((global.VuePlyr = {})));
}(this, (function (exports) { 'use strict';

	var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};

	function createCommonjsModule(fn, module) {
		return module = { exports: {} }, fn(module, module.exports), module.exports;
	}

	var plyr_min = createCommonjsModule(function (module, exports) {
	"object"==typeof navigator&&function(e,t){module.exports=t();}(commonjsGlobal,function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i);}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],i=!0,a=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,s=e;}finally{try{i||null==r.return||r.return();}finally{if(a)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o={addCSS:!0,thumbWidth:15,watch:!0};var r=function(e){return null!=e?e.constructor:null},l=function(e,t){return Boolean(e&&t&&e instanceof t)},c=function(e){return null==e},u=function(e){return r(e)===Object},d=function(e){return r(e)===String},h=function(e){return Array.isArray(e)},m=function(e){return l(e,NodeList)},p={nullOrUndefined:c,object:u,number:function(e){return r(e)===Number&&!Number.isNaN(e)},string:d,boolean:function(e){return r(e)===Boolean},function:function(e){return r(e)===Function},array:h,nodeList:m,element:function(e){return l(e,Element)},event:function(e){return l(e,Event)},empty:function(e){return c(e)||(d(e)||h(e)||m(e))&&!e.length||u(e)&&!Object.keys(e).length}};function f(e,t){if(t<1){var n=(i="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0)):0;return parseFloat(e.toFixed(n))}var i;return Math.round(e/t)*t}var g=function(){function t(n,i){e(this,t),p.element(n)?this.element=n:p.string(n)&&(this.element=document.querySelector(n)),p.element(this.element)&&p.empty(this.element.rangeTouch)&&(this.config=Object.assign({},o,i),this.init());}return n(t,[{key:"init",value:function(){t.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this);}},{key:"destroy",value:function(){t.enabled&&(this.listeners(!1),this.element.rangeTouch=null);}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(e){t.element[n](e,function(e){return t.set(e)},!1);});}},{key:"get",value:function(e){if(!t.enabled||!p.event(e))return null;var n,i=e.target,a=e.changedTouches[0],s=parseFloat(i.getAttribute("min"))||0,o=parseFloat(i.getAttribute("max"))||100,r=parseFloat(i.getAttribute("step"))||1,l=o-s,c=i.getBoundingClientRect(),u=100/c.width*(this.config.thumbWidth/2)/100;return (n=100/c.width*(a.clientX-c.left))<0?n=0:n>100&&(n=100),n<50?n-=(100-2*n)*u:n>50&&(n+=2*(n-50)*u),s+f(l*(n/100),r)}},{key:"set",value:function(e){t.enabled&&p.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(e,t){if(e&&t){var n=new Event(t);e.dispatchEvent(n);}}(e.target,"touchend"===e.type?"change":"input"));}}],[{key:"setup",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;if(p.empty(e)||p.string(e)?i=Array.from(document.querySelectorAll(p.string(e)?e:'input[type="range"]')):p.element(e)?i=[e]:p.nodeList(e)?i=Array.from(e):p.array(e)&&(i=e.filter(p.element)),p.empty(i))return null;var a=Object.assign({},o,n);p.string(e)&&a.watch&&new MutationObserver(function(n){Array.from(n).forEach(function(n){Array.from(n.addedNodes).forEach(function(n){if(p.element(n)&&function(){return Array.from(document.querySelectorAll(i)).includes(this)}.call(n,i=e)){var i;new t(n,a);}});});}).observe(document.body,{childList:!0,subtree:!0});return i.map(function(e){return new t(e,n)})}},{key:"enabled",get:function(){return "ontouchstart"in document.documentElement}}]),t}(),y=function(e){return null!=e?e.constructor:null},v=function(e,t){return Boolean(e&&t&&e instanceof t)},b=function(e){return null==e},k=function(e){return y(e)===Object},w=function(e){return y(e)===String},T=function(e){return Array.isArray(e)},C=function(e){return v(e,NodeList)},A=function(e){return b(e)||(w(e)||T(e)||C(e))&&!e.length||k(e)&&!Object.keys(e).length},E={nullOrUndefined:b,object:k,number:function(e){return y(e)===Number&&!Number.isNaN(e)},string:w,boolean:function(e){return y(e)===Boolean},function:function(e){return y(e)===Function},array:T,weakMap:function(e){return v(e,WeakMap)},nodeList:C,element:function(e){return v(e,Element)},textNode:function(e){return y(e)===Text},event:function(e){return v(e,Event)},keyboardEvent:function(e){return v(e,KeyboardEvent)},cue:function(e){return v(e,window.TextTrackCue)||v(e,window.VTTCue)},track:function(e){return v(e,TextTrack)||!b(e)&&w(e.kind)},promise:function(e){return v(e,Promise)},url:function(e){if(v(e,window.URL))return !0;if(!w(e))return !1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return !A(new URL(t).hostname)}catch(e){return !1}},empty:A},S=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t);}catch(e){}return e}();function P(e,t,n){var i=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!E.empty(t)&&E.function(n)){var r=t.split(" "),l=o;S&&(l={passive:s,capture:o}),r.forEach(function(t){i&&i.eventListeners&&a&&i.eventListeners.push({element:e,type:t,callback:n,options:l}),e[a?"addEventListener":"removeEventListener"](t,n,l);});}}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];P.call(this,e,t,n,!0,i,a);}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];P.call(this,e,t,n,!1,i,a);}function x(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];P.call(this,e,n,function o(){M(e,n,o,a,s);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];i.apply(t,l);},!0,a,s);}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(E.element(e)&&!E.empty(t)){var a=new CustomEvent(t,{bubbles:n,detail:Object.assign({},i,{plyr:this})});e.dispatchEvent(a);}}function L(e,t){var n=e.length?e:[e];Array.from(n).reverse().forEach(function(e,n){var i=n>0?t.cloneNode(!0):t,a=e.parentNode,s=e.nextSibling;i.appendChild(e),s?a.insertBefore(i,s):a.appendChild(i);});}function _(e,t){E.element(e)&&!E.empty(t)&&Object.entries(t).filter(function(e){var t=a(e,2)[1];return !E.nullOrUndefined(t)}).forEach(function(t){var n=a(t,2),i=n[0],s=n[1];return e.setAttribute(i,s)});}function O(e,t,n){var i=document.createElement(e);return E.object(t)&&_(i,t),E.string(n)&&(i.innerText=n),i}function j(e,t,n,i){E.element(t)&&t.appendChild(O(e,n,i));}function q(e){E.nodeList(e)||E.array(e)?Array.from(e).forEach(q):E.element(e)&&E.element(e.parentNode)&&e.parentNode.removeChild(e);}function D(e){if(E.element(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1;}function F(e,t){return E.element(t)&&E.element(t.parentNode)&&E.element(e)?(t.parentNode.replaceChild(e,t),e):null}function H(e,t){if(!E.string(e)||E.empty(e))return {};var n={},i=t;return e.split(",").forEach(function(e){var t=e.trim(),a=t.replace(".",""),s=t.replace(/[[\]]/g,"").split("="),o=s[0],r=s.length>1?s[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":E.object(i)&&E.string(i.class)&&(i.class+=" ".concat(a)),n.class=a;break;case"#":n.id=t.replace("#","");break;case"[":n[o]=r;}}),n}function R(e,t){if(E.element(e)){var n=t;E.boolean(n)||(n=!e.hidden),n?e.setAttribute("hidden",""):e.removeAttribute("hidden");}}function B(e,t,n){if(E.nodeList(e))return Array.from(e).map(function(e){return B(e,t,n)});if(E.element(e)){var i="toggle";return void 0!==n&&(i=n?"add":"remove"),e.classList[i](t),e.classList.contains(t)}return !1}function V(e,t){return E.element(e)&&e.classList.contains(t)}function U(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}function z(e){return this.elements.container.querySelectorAll(e)}function W(e){return this.elements.container.querySelector(e)}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];E.element(e)&&(e.focus({preventScroll:!0}),t&&B(e,this.config.classNames.tabFocus));}var Y,Q,X,J=(Y=document.createElement("span"),Q={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},X=Object.keys(Q).find(function(e){return void 0!==Y.style[e]}),!!E.string(X)&&Q[X]);function $(e){setTimeout(function(){try{R(e,!0),e.offsetHeight,R(e,!1);}catch(e){}},0);}var G,Z={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)},ee={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},te={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,n){var i=Z.isIPhone&&n&&te.playsinline,a=te[e]||"html5"!==t;return {api:a,ui:a&&te.rangeInput&&("video"!==e||!Z.isIPhone||i)}},pip:!(Z.isIPhone||!E.function(O("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||O("video").disablePictureInPicture)),airplay:E.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(E.empty(e))return !1;var t=a(e.split("/"),1)[0],n=e;if(!this.isHTML5||t!==this.type)return !1;Object.keys(ee).includes(n)&&(n+='; codecs="'.concat(ee[e],'"'));try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return !1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(G=document.createElement("input"),G.type="range","range"===G.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==J,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},ne={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(function(t){var n=t.getAttribute("type");return !!E.empty(n)||te.mime.call(e,n)}):[]},getQualityOptions:function(){return ne.getSources.call(this).map(function(e){return Number(e.getAttribute("size"))}).filter(Boolean)},extend:function(){if(this.isHTML5){var e=this;Object.defineProperty(e.media,"quality",{get:function(){var t=ne.getSources.call(e).find(function(t){return t.getAttribute("src")===e.source});return t&&Number(t.getAttribute("size"))},set:function(t){var n=ne.getSources.call(e).find(function(e){return Number(e.getAttribute("size"))===t});if(n){var i=e.media,a=i.currentTime,s=i.paused,o=i.preload,r=i.readyState;e.media.src=n.getAttribute("src"),("none"!==o||r)&&(e.once("loadedmetadata",function(){e.currentTime=a,s||e.play();}),e.media.load()),I.call(e,e.media,"qualitychange",!1,{quality:t});}}});}},cancelRequests:function(){this.isHTML5&&(q(ne.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"));}};function ie(e){return E.array(e)?e.filter(function(t,n){return e.indexOf(t)===n}):e}function ae(e,t){return t.split(".").reduce(function(e,t){return e&&e[t]},e)}function se(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var s=n.shift();return E.object(s)?(Object.keys(s).forEach(function(t){E.object(s[t])?(Object.keys(e).includes(t)||Object.assign(e,i({},t,{})),se(e[t],s[t])):Object.assign(e,i({},t,s[t]));}),se.apply(void 0,[e].concat(n))):e}function oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return E.empty(e)?e:e.toString().replace(/{(\d+)}/g,function(e,t){return n[t].toString()})}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"),n.toString())}function le(){return (arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function ce(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return (e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return e=re(e,"-"," "),e=re(e,"_"," "),re(e=le(e)," ","")}(e)).charAt(0).toLowerCase()+e.slice(1)}function ue(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var de={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(E.empty(e)||E.empty(t))return "";var n=ae(t.i18n,e);if(E.empty(n))return Object.keys(de).includes(e)?de[e]:"";var i={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(i).forEach(function(e){var t=a(e,2),i=t[0],s=t[1];n=re(n,i,s);}),n},me=function(){function t(n){e(this,t),this.enabled=n.config.storage.enabled,this.key=n.config.storage.key;}return n(t,[{key:"get",value:function(e){if(!t.supported||!this.enabled)return null;var n=window.localStorage.getItem(this.key);if(E.empty(n))return null;var i=JSON.parse(n);return E.string(e)&&e.length?i[e]:i}},{key:"set",value:function(e){if(t.supported&&this.enabled&&E.object(e)){var n=this.get();E.empty(n)&&(n={}),se(n,e),window.localStorage.setItem(this.key,JSON.stringify(n));}}}],[{key:"supported",get:function(){try{if(!("localStorage"in window))return !1;return window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0}catch(e){return !1}}}]),t}();function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise(function(n,i){try{var a=new XMLHttpRequest;if(!("withCredentials"in a))return;a.addEventListener("load",function(){if("text"===t)try{n(JSON.parse(a.responseText));}catch(e){n(a.responseText);}else n(a.response);}),a.addEventListener("error",function(){throw new Error(a.status)}),a.open("GET",e,!0),a.responseType=t,a.send();}catch(e){i(e);}})}function fe(e,t){if(E.string(e)){var n=E.string(t),i=function(){return null!==document.getElementById(t)},a=function(e,t){e.innerHTML=t,n&&i()||document.body.insertAdjacentElement("afterbegin",e);};if(!n||!i()){var s=me.supported,o=document.createElement("div");if(o.setAttribute("hidden",""),n&&o.setAttribute("id",t),s){var r=window.localStorage.getItem("".concat("cache","-").concat(t));if(null!==r){var l=JSON.parse(r);a(o,l.content);}}pe(e).then(function(e){E.empty(e)||(s&&window.localStorage.setItem("".concat("cache","-").concat(t),JSON.stringify({content:e})),a(o,e));}).catch(function(){});}}}var ge=function(e){return Math.trunc(e/60/60%60,10)},ye=function(e){return Math.trunc(e/60%60,10)},ve=function(e){return Math.trunc(e%60,10)};function be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!E.number(e))return be(null,t,n);var i=function(e){return "0".concat(e).slice(-2)},a=ge(e),s=ye(e),o=ve(e);return a=t||a>0?"".concat(a,":"):"","".concat(n&&e>0?"-":"").concat(a).concat(i(s),":").concat(i(o))}var ke={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||Z.isIE&&!window.svg4everybody;return {url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=W.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:z.call(this,this.config.selectors.buttons.play),pause:W.call(this,this.config.selectors.buttons.pause),restart:W.call(this,this.config.selectors.buttons.restart),rewind:W.call(this,this.config.selectors.buttons.rewind),fastForward:W.call(this,this.config.selectors.buttons.fastForward),mute:W.call(this,this.config.selectors.buttons.mute),pip:W.call(this,this.config.selectors.buttons.pip),airplay:W.call(this,this.config.selectors.buttons.airplay),settings:W.call(this,this.config.selectors.buttons.settings),captions:W.call(this,this.config.selectors.buttons.captions),fullscreen:W.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=W.call(this,this.config.selectors.progress),this.elements.inputs={seek:W.call(this,this.config.selectors.inputs.seek),volume:W.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:W.call(this,this.config.selectors.display.buffer),currentTime:W.call(this,this.config.selectors.display.currentTime),duration:W.call(this,this.config.selectors.display.duration)},E.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n=ke.getIconUrl.call(this),i="".concat(n.cors?"":n.url,"#").concat(this.config.iconPrefix),a=document.createElementNS("http://www.w3.org/2000/svg","svg");_(a,se(t,{role:"presentation",focusable:"false"}));var s=document.createElementNS("http://www.w3.org/2000/svg","use"),o="".concat(i,"-").concat(e);return "href"in s&&s.setAttributeNS("http://www.w3.org/1999/xlink","href",o),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),a.appendChild(s),a},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=he(e,this.config);return O("span",Object.assign({},t,{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),n)},createBadge:function(e){if(E.empty(e))return null;var t=O("span",{class:this.config.classNames.menu.value});return t.appendChild(O("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=Object.assign({},t),i=ce(e),a={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(function(e){Object.keys(n).includes(e)&&(a[e]=n[e],delete n[e]);}),"button"!==a.element||Object.keys(n).includes("type")||(n.type="button"),Object.keys(n).includes("class")?n.class.includes(this.config.classNames.control)||(n.class+=" ".concat(this.config.classNames.control)):n.class=this.config.classNames.control,e){case"play":a.toggle=!0,a.label="play",a.labelPressed="pause",a.icon="play",a.iconPressed="pause";break;case"mute":a.toggle=!0,a.label="mute",a.labelPressed="unmute",a.icon="volume",a.iconPressed="muted";break;case"captions":a.toggle=!0,a.label="enableCaptions",a.labelPressed="disableCaptions",a.icon="captions-off",a.iconPressed="captions-on";break;case"fullscreen":a.toggle=!0,a.label="enterFullscreen",a.labelPressed="exitFullscreen",a.icon="enter-fullscreen",a.iconPressed="exit-fullscreen";break;case"play-large":n.class+=" ".concat(this.config.classNames.control,"--overlaid"),i="play",a.label="play",a.icon="play";break;default:E.empty(a.label)&&(a.label=i),E.empty(a.icon)&&(a.icon=e);}var s=O(a.element);return a.toggle?(s.appendChild(ke.createIcon.call(this,a.iconPressed,{class:"icon--pressed"})),s.appendChild(ke.createIcon.call(this,a.icon,{class:"icon--not-pressed"})),s.appendChild(ke.createLabel.call(this,a.labelPressed,{class:"label--pressed"})),s.appendChild(ke.createLabel.call(this,a.label,{class:"label--not-pressed"}))):(s.appendChild(ke.createIcon.call(this,a.icon)),s.appendChild(ke.createLabel.call(this,a.label))),se(n,H(this.config.selectors.buttons[i],n)),_(s,n),"play"===i?(E.array(this.elements.buttons[i])||(this.elements.buttons[i]=[]),this.elements.buttons[i].push(s)):this.elements.buttons[i]=s,s},createRange:function(e,t){var n=O("input",se(H(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":he(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,ke.updateRangeFill.call(this,n),g.setup(n),n},createProgress:function(e,t){var n=O("progress",se(H(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(O("span",null,"0"));var i={played:"played",buffer:"buffered"}[e],a=i?he(i,this.config):"";n.innerText="% ".concat(a.toLowerCase());}return this.elements.display[e]=n,n},createTime:function(e){var t=H(this.config.selectors.display[e]),n=O("div",se(t,{class:"".concat(this.config.classNames.display.time," ").concat(t.class?t.class:"").trim(),"aria-label":he(e,this.config)}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts:function(e,t){var n=this;N(e,"keydown keyup",function(i){if([32,38,39,40].includes(i.which)&&(i.preventDefault(),i.stopPropagation(),"keydown"!==i.type)){var a,s=U(e,'[role="menuitemradio"]');if(!s&&[32,39].includes(i.which))ke.showMenuPanel.call(n,t,!0);else 32!==i.which&&(40===i.which||s&&39===i.which?(a=e.nextElementSibling,E.element(a)||(a=e.parentNode.firstElementChild)):(a=e.previousElementSibling,E.element(a)||(a=e.parentNode.lastElementChild)),K.call(n,a,!0));}},!1),N(e,"keyup",function(e){13===e.which&&ke.focusFirstMenuItem.call(n,null,!0);});},createMenuItem:function(e){var t=this,n=e.value,i=e.list,a=e.type,s=e.title,o=e.badge,r=void 0===o?null:o,l=e.checked,c=void 0!==l&&l,u=H(this.config.selectors.inputs[a]),d=O("button",se(u,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(u.class?u.class:"").trim(),"aria-checked":c,value:n})),h=O("span");h.innerHTML=s,E.element(r)&&h.appendChild(r),d.appendChild(h),Object.defineProperty(d,"checked",{enumerable:!0,get:function(){return "true"===d.getAttribute("aria-checked")},set:function(e){e&&Array.from(d.parentNode.children).filter(function(e){return U(e,'[role="menuitemradio"]')}).forEach(function(e){return e.setAttribute("aria-checked","false")}),d.setAttribute("aria-checked",e?"true":"false");}}),this.listeners.bind(d,"click keyup",function(e){if(!E.keyboardEvent(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),d.checked=!0,a){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n);}ke.showMenuPanel.call(t,"home",E.keyboardEvent(e));}},a,!1),ke.bindMenuItemShortcuts.call(this,d,a),i.appendChild(d);},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return E.number(e)?be(e,ge(this.duration)>0,t):e},updateTimeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];E.element(e)&&E.number(t)&&(e.innerText=ke.formatTime(t,n));},updateVolume:function(){this.supported.ui&&(E.element(this.elements.inputs.volume)&&ke.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),E.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume));},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;E.element(e)&&(e.value=t,ke.updateRangeFill.call(this,e));},updateProgress:function(e){var t=this;if(this.supported.ui&&E.event(e)){var n,i,a=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=this.currentTime,i=this.duration,a=0===n||0===i||Number.isNaN(n)||Number.isNaN(i)?0:(n/i*100).toFixed(2),"timeupdate"===e.type&&ke.setRange.call(this,this.elements.inputs.seek,a);break;case"playing":case"progress":!function(e,n){var i=E.number(n)?n:0,a=E.element(e)?e:t.elements.display.buffer;if(E.element(a)){a.value=i;var s=a.getElementsByTagName("span")[0];E.element(s)&&(s.childNodes[0].nodeValue=i);}}(this.elements.display.buffer,100*this.buffered);}}},updateRangeFill:function(e){var t=E.event(e)?e.target:e;if(E.element(t)&&"range"===t.getAttribute("type")){if(U(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var n=ke.formatTime(this.currentTime),i=ke.formatTime(this.duration),a=he("seekLabel",this.config);t.setAttribute("aria-valuetext",a.replace("{currentTime}",n).replace("{duration}",i));}else if(U(t,this.config.selectors.inputs.volume)){var s=100*t.value;t.setAttribute("aria-valuenow",s),t.setAttribute("aria-valuetext","".concat(s.toFixed(1),"%"));}else t.setAttribute("aria-valuenow",t.value);Z.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"));}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&E.element(this.elements.inputs.seek)&&E.element(this.elements.display.seekTooltip)&&0!==this.duration){var n=0,i=this.elements.progress.getBoundingClientRect(),a="".concat(this.config.classNames.tooltip,"--visible"),s=function(e){B(t.elements.display.seekTooltip,a,e);};if(this.touch)s(!1);else{if(E.event(e))n=100/i.width*(e.pageX-i.left);else{if(!V(this.elements.display.seekTooltip,a))return;n=parseFloat(this.elements.display.seekTooltip.style.left,10);}n<0?n=0:n>100&&(n=100),ke.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*n),this.elements.display.seekTooltip.style.left="".concat(n,"%"),E.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&s("mouseenter"===e.type);}}},timeUpdate:function(e){var t=!E.element(this.elements.display.duration)&&this.config.invertTime;ke.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||ke.updateProgress.call(this,e);},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return R(this.elements.display.currentTime,!0),void R(this.elements.progress,!0);E.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=E.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&ke.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&ke.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),ke.updateSeekTooltip.call(this);}},toggleMenuButton:function(e,t){R(this.elements.settings.buttons[e],!t);},updateSetting:function(e,t,n){var i=this.elements.settings.panels[e],a=null,s=t;if("captions"===e)a=this.currentTrack;else{if(a=E.empty(n)?this[e]:n,E.empty(a)&&(a=this.config[e].default),!E.empty(this.options[e])&&!this.options[e].includes(a))return void this.debug.warn("Unsupported value of '".concat(a,"' for ").concat(e));if(!this.config[e].options.includes(a))return void this.debug.warn("Disabled value of '".concat(a,"' for ").concat(e))}if(E.element(s)||(s=i&&i.querySelector('[role="menu"]')),E.element(s)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=ke.getLabel.call(this,e,a);var o=s&&s.querySelector('[value="'.concat(a,'"]'));E.element(o)&&(o.checked=!0);}},getLabel:function(e,t){switch(e){case"speed":return 1===t?he("normal",this.config):"".concat(t,"&times;");case"quality":if(E.number(t)){var n=he("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return le(t);case"captions":return Ce.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(E.element(this.elements.settings.panels.quality)){var n=this.elements.settings.panels.quality.querySelector('[role="menu"]');E.array(e)&&(this.options.quality=ie(e).filter(function(e){return t.config.quality.options.includes(e)}));var i=!E.empty(this.options.quality)&&this.options.quality.length>1;if(ke.toggleMenuButton.call(this,"quality",i),D(n),ke.checkMenu.call(this),i){var a=function(e){var n=he("qualityBadge.".concat(e),t.config);return n.length?ke.createBadge.call(t,n):null};this.options.quality.sort(function(e,n){var i=t.config.quality.options;return i.indexOf(e)>i.indexOf(n)?1:-1}).forEach(function(e){ke.createMenuItem.call(t,{value:e,list:n,type:"quality",title:ke.getLabel.call(t,"quality",e),badge:a(e)});}),ke.updateSetting.call(this,"quality",n);}}},setCaptionsMenu:function(){var e=this;if(E.element(this.elements.settings.panels.captions)){var t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),n=Ce.getTracks.call(this),i=Boolean(n.length);if(ke.toggleMenuButton.call(this,"captions",i),D(t),ke.checkMenu.call(this),i){var a=n.map(function(n,i){return {value:i,checked:e.captions.toggled&&e.currentTrack===i,title:Ce.getLabel.call(e,n),badge:n.language&&ke.createBadge.call(e,n.language.toUpperCase()),list:t,type:"language"}});a.unshift({value:-1,checked:!this.captions.toggled,title:he("disabled",this.config),list:t,type:"language"}),a.forEach(ke.createMenuItem.bind(this)),ke.updateSetting.call(this,"captions",t);}}},setSpeedMenu:function(e){var t=this;if(E.element(this.elements.settings.panels.speed)){var n=this.elements.settings.panels.speed.querySelector('[role="menu"]');E.array(e)?this.options.speed=e:(this.isHTML5||this.isVimeo)&&(this.options.speed=[.5,.75,1,1.25,1.5,1.75,2]),this.options.speed=this.options.speed.filter(function(e){return t.config.speed.options.includes(e)});var i=!E.empty(this.options.speed)&&this.options.speed.length>1;ke.toggleMenuButton.call(this,"speed",i),D(n),ke.checkMenu.call(this),i&&(this.options.speed.forEach(function(e){ke.createMenuItem.call(t,{value:e,list:n,type:"speed",title:ke.getLabel.call(t,"speed",e)});}),ke.updateSetting.call(this,"speed",n));}},checkMenu:function(){var e=this.elements.settings.buttons,t=!E.empty(e)&&Object.values(e).some(function(e){return !e.hidden});R(this.elements.settings.menu,!t);},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var n=e;E.element(n)||(n=Object.values(this.elements.settings.panels).find(function(e){return !e.hidden}));var i=n.querySelector('[role^="menuitem"]');K.call(this,i,t);}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(E.element(t)&&E.element(n)){var i=t.hidden,a=i;if(E.boolean(e))a=e;else if(E.keyboardEvent(e)&&27===e.which)a=!1;else if(E.event(e)){var s=t.contains(e.target);if(s||!s&&e.target!==n&&a)return}n.setAttribute("aria-expanded",a),R(t,!a),B(this.elements.container,this.config.classNames.menu.open,a),a&&E.keyboardEvent(e)?ke.focusFirstMenuItem.call(this,null,!0):a||i||K.call(this,n,E.keyboardEvent(e));}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,i=t.scrollHeight;return q(t),{width:n,height:i}},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=document.getElementById("plyr-settings-".concat(this.id,"-").concat(t));if(E.element(i)){var a=i.parentNode,s=Array.from(a.children).find(function(e){return !e.hidden});if(te.transitions&&!te.reducedMotion){a.style.width="".concat(s.scrollWidth,"px"),a.style.height="".concat(s.scrollHeight,"px");var o=ke.getMenuSize.call(this,i);N.call(this,a,J,function t(n){n.target===a&&["width","height"].includes(n.propertyName)&&(a.style.width="",a.style.height="",M.call(e,a,J,t));}),a.style.width="".concat(o.width,"px"),a.style.height="".concat(o.height,"px");}R(s,!0),R(i,!1),ke.focusFirstMenuItem.call(this,i,n);}},setDownloadLink:function(){var e=this.elements.buttons.download;E.element(e)&&e.setAttribute("href",this.download);},create:function(e){var t=this,n=O("div",H(this.config.selectors.controls.wrapper));if(this.config.controls.includes("restart")&&n.appendChild(ke.createButton.call(this,"restart")),this.config.controls.includes("rewind")&&n.appendChild(ke.createButton.call(this,"rewind")),this.config.controls.includes("play")&&n.appendChild(ke.createButton.call(this,"play")),this.config.controls.includes("fast-forward")&&n.appendChild(ke.createButton.call(this,"fast-forward")),this.config.controls.includes("progress")){var i=O("div",H(this.config.selectors.progress));if(i.appendChild(ke.createRange.call(this,"seek",{id:"plyr-seek-".concat(e.id)})),i.appendChild(ke.createProgress.call(this,"buffer")),this.config.tooltips.seek){var a=O("span",{class:this.config.classNames.tooltip},"00:00");i.appendChild(a),this.elements.display.seekTooltip=a;}this.elements.progress=i,n.appendChild(this.elements.progress);}if(this.config.controls.includes("current-time")&&n.appendChild(ke.createTime.call(this,"currentTime")),this.config.controls.includes("duration")&&n.appendChild(ke.createTime.call(this,"duration")),this.config.controls.includes("mute")||this.config.controls.includes("volume")){var s=O("div",{class:"plyr__volume"});if(this.config.controls.includes("mute")&&s.appendChild(ke.createButton.call(this,"mute")),this.config.controls.includes("volume")){var o={max:1,step:.05,value:this.config.volume};s.appendChild(ke.createRange.call(this,"volume",se(o,{id:"plyr-volume-".concat(e.id)}))),this.elements.volume=s;}n.appendChild(s);}if(this.config.controls.includes("captions")&&n.appendChild(ke.createButton.call(this,"captions")),this.config.controls.includes("settings")&&!E.empty(this.config.settings)){var r=O("div",{class:"plyr__menu",hidden:""});r.appendChild(ke.createButton.call(this,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var l=O("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),c=O("div"),u=O("div",{id:"plyr-settings-".concat(e.id,"-home")}),d=O("div",{role:"menu"});u.appendChild(d),c.appendChild(u),this.elements.settings.panels.home=u,this.config.settings.forEach(function(n){var i=O("button",se(H(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));ke.bindMenuItemShortcuts.call(t,i,n),N(i,"click",function(){ke.showMenuPanel.call(t,n,!1);});var a=O("span",null,he(n,t.config)),s=O("span",{class:t.config.classNames.menu.value});s.innerHTML=e[n],a.appendChild(s),i.appendChild(a),d.appendChild(i);var o=O("div",{id:"plyr-settings-".concat(e.id,"-").concat(n),hidden:""}),r=O("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});r.appendChild(O("span",{"aria-hidden":!0},he(n,t.config))),r.appendChild(O("span",{class:t.config.classNames.hidden},he("menuBack",t.config))),N(o,"keydown",function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),ke.showMenuPanel.call(t,"home",!0));},!1),N(r,"click",function(){ke.showMenuPanel.call(t,"home",!1);}),o.appendChild(r),o.appendChild(O("div",{role:"menu"})),c.appendChild(o),t.elements.settings.buttons[n]=i,t.elements.settings.panels[n]=o;}),l.appendChild(c),r.appendChild(l),n.appendChild(r),this.elements.settings.popup=l,this.elements.settings.menu=r;}if(this.config.controls.includes("pip")&&te.pip&&n.appendChild(ke.createButton.call(this,"pip")),this.config.controls.includes("airplay")&&te.airplay&&n.appendChild(ke.createButton.call(this,"airplay")),this.config.controls.includes("download")){var h={element:"a",href:this.download,target:"_blank"},m=this.config.urls.download;!E.url(m)&&this.isEmbed&&se(h,{icon:"logo-".concat(this.provider),label:this.provider}),n.appendChild(ke.createButton.call(this,"download",h));}return this.config.controls.includes("fullscreen")&&n.appendChild(ke.createButton.call(this,"fullscreen")),this.config.controls.includes("play-large")&&this.elements.container.appendChild(ke.createButton.call(this,"play-large")),this.elements.controls=n,this.isHTML5&&ke.setQualityMenu.call(this,ne.getQualityOptions.call(this)),ke.setSpeedMenu.call(this),n},inject:function(){var e=this;if(this.config.loadSprite){var t=ke.getIconUrl.call(this);t.cors&&fe(t.url,"sprite-plyr");}this.id=Math.floor(1e4*Math.random());var n=null;this.elements.controls=null;var i={id:this.id,seektime:this.config.seekTime,title:this.config.title},s=!0;E.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,i)),this.config.controls||(this.config.controls=[]),E.element(this.config.controls)||E.string(this.config.controls)?n=this.config.controls:(n=ke.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:Ce.getLabel.call(this)}),s=!1);var o,r=function(e){var t=e;return Object.entries(i).forEach(function(e){var n=a(e,2),i=n[0],s=n[1];t=re(t,"{".concat(i,"}"),s);}),t};if(s&&(E.string(this.config.controls)?n=r(n):E.element(n)&&(n.innerHTML=r(n.innerHTML))),E.string(this.config.selectors.controls.container)&&(o=document.querySelector(this.config.selectors.controls.container)),E.element(o)||(o=this.elements.container),o[E.element(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),E.element(this.elements.controls)||ke.findElements.call(this),!E.empty(this.elements.buttons)){var l=function(t){var n=e.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return V(t,n)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];B(t,n,e);}});};Object.values(this.elements.buttons).filter(Boolean).forEach(function(e){E.array(e)||E.nodeList(e)?Array.from(e).filter(Boolean).forEach(l):l(e);});}if(Z.isEdge&&$(o),this.config.tooltips.controls){var c=this.config,u=c.classNames,d=c.selectors,h="".concat(d.controls.wrapper," ").concat(d.labels," .").concat(u.hidden),m=z.call(this,h);Array.from(m).forEach(function(t){B(t,e.config.classNames.hidden,!1),B(t,e.config.classNames.tooltip,!0);});}}};function we(e){var t=e;if(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]){var n=document.createElement("a");n.href=t,t=n.href;}try{return new URL(t)}catch(e){return null}}function Te(e){var t=new URLSearchParams;return E.object(e)&&Object.entries(e).forEach(function(e){var n=a(e,2),i=n[0],s=n[1];t.set(i,s);}),t}var Ce={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!te.textTracks)E.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&ke.setCaptionsMenu.call(this);else{var e,t;if(E.element(this.elements.captions)||(this.elements.captions=O("div",H(this.config.selectors.captions)),e=this.elements.captions,t=this.elements.wrapper,E.element(e)&&E.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)),Z.isIE&&window.URL){var n=this.media.querySelectorAll("track");Array.from(n).forEach(function(e){var t=e.getAttribute("src"),n=we(t);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&pe(t,"blob").then(function(t){e.setAttribute("src",window.URL.createObjectURL(t));}).catch(function(){q(e);});});}var i=ie((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(function(e){return e.split("-")[0]})),s=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();if("auto"===s)s=a(i,1)[0];var o=this.storage.get("captions");if(E.boolean(o)||(o=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:o,language:s,languages:i}),this.isHTML5){var r=this.config.captions.update?"addtrack removetrack":"removetrack";N.call(this,this.media.textTracks,r,Ce.update.bind(this));}setTimeout(Ce.update.bind(this),0);}},update:function(){var e=this,t=Ce.getTracks.call(this,!0),n=this.captions,i=n.active,a=n.language,s=n.meta,o=n.currentTrackNode,r=Boolean(t.find(function(e){return e.language===a}));this.isHTML5&&this.isVideo&&t.filter(function(e){return !s.get(e)}).forEach(function(t){e.debug.log("Track added",t),s.set(t,{default:"showing"===t.mode}),t.mode="hidden",N.call(e,t,"cuechange",function(){return Ce.updateCues.call(e)});}),(r&&this.language!==a||!t.includes(o))&&(Ce.setLanguage.call(this,a),Ce.toggle.call(this,i&&r)),B(this.elements.container,this.config.classNames.captions.enabled,!E.empty(t)),(this.config.controls||[]).includes("settings")&&this.config.settings.includes("captions")&&ke.setCaptionsMenu.call(this);},toggle:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var n=this.captions.toggled,i=this.config.classNames.captions.active,a=E.nullOrUndefined(e)?!n:e;if(a!==n){if(t||(this.captions.active=a,this.storage.set({captions:a})),!this.language&&a&&!t){var o=Ce.getTracks.call(this),r=Ce.findTrack.call(this,[this.captions.language].concat(s(this.captions.languages)),!0);return this.captions.language=r.language,void Ce.set.call(this,o.indexOf(r))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=a),B(this.elements.container,i,a),this.captions.toggled=a,ke.updateSetting.call(this,"captions"),I.call(this,this.media,a?"captionsenabled":"captionsdisabled");}}},set:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Ce.getTracks.call(this);if(-1!==e)if(E.number(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var i=n[e],a=(i||{}).language;this.captions.currentTrackNode=i,ke.updateSetting.call(this,"captions"),t||(this.captions.language=a,this.storage.set({language:a})),this.isVimeo&&this.embed.enableTextTrack(a),I.call(this,this.media,"languagechange");}Ce.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&Ce.updateCues.call(this);}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else Ce.toggle.call(this,!1,t);},setLanguage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(E.string(e)){var n=e.toLowerCase();this.captions.language=n;var i=Ce.getTracks.call(this),a=Ce.findTrack.call(this,[n]);Ce.set.call(this,i.indexOf(a),t);}else this.debug.warn("Invalid language argument",e);},getTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Array.from((this.media||{}).textTracks||[]).filter(function(n){return !e.isHTML5||t||e.captions.meta.has(n)}).filter(function(e){return ["captions","subtitles"].includes(e.kind)})},findTrack:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Ce.getTracks.call(this),s=function(e){return Number((n.captions.meta.get(e)||{}).default)},o=Array.from(a).sort(function(e,t){return s(t)-s(e)});return e.every(function(e){return !(t=o.find(function(t){return t.language===e}))}),t||(i?o[0]:void 0)},getCurrentTrack:function(){return Ce.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return !E.track(t)&&te.textTracks&&this.captions.toggled&&(t=Ce.getCurrentTrack.call(this)),E.track(t)?E.empty(t.label)?E.empty(t.language)?he("enabled",this.config):e.language.toUpperCase():t.label:he("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(E.element(this.elements.captions))if(E.nullOrUndefined(e)||Array.isArray(e)){var t=e;if(!t){var n=Ce.getCurrentTrack.call(this);t=Array.from((n||{}).activeCues||[]).map(function(e){return e.getCueAsHTML()}).map(ue);}var i=t.map(function(e){return e.trim()}).join("\n");if(i!==this.elements.captions.innerHTML){D(this.elements.captions);var a=O("span",H(this.config.selectors.caption));a.innerHTML=i,this.elements.captions.appendChild(a),I.call(this,this.media,"cuechange");}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to");}},Ae={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:"16:9",clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.5.2/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240]},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/v2/video/{0}.json"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://www.googleapis.com/youtube/v3/videos?id={0}&key={1}&fields=items(snippet(title))&part=snippet"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption",menu:{quality:".js-plyr__menu__list--quality"}},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},keys:{google:null},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1},youtube:{noCookie:!1,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}},Ee="picture-in-picture",Se="inline",Pe={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ne={audio:"audio",video:"video"};var Me=function(){},xe=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,t),this.enabled=window.console&&n,this.enabled&&this.log("Debugging enabled");}return n(t,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):Me}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):Me}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):Me}}]),t}();function Ie(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;E.element(e)&&(e.pressed=this.active),I.call(this.player,this.target,this.active?"enterfullscreen":"exitfullscreen",!0),Z.isIos||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(E.element(e)){var n=z.call(this,"button:not(:disabled), input:not(:disabled), [tabindex]"),i=n[0],a=n[n.length-1];P.call(this,this.elements.container,"keydown",function(e){if("Tab"===e.key&&9===e.keyCode){var t=document.activeElement;t!==a||e.shiftKey?t===i&&e.shiftKey&&(a.focus(),e.preventDefault()):(i.focus(),e.preventDefault());}},t,!1);}}.call(this.player,this.target,this.active);}}function Le(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=t?"hidden":"",B(this.target,this.player.config.classNames.fullscreen.fallback,t),Z.isIos){var n=document.head.querySelector('meta[name="viewport"]'),i="viewport-fit=cover";n||(n=document.createElement("meta")).setAttribute("name","viewport");var a=E.string(n.content)&&n.content.includes(i);t?(this.cleanupViewport=!a,a||(n.content+=",".concat(i))):this.cleanupViewport&&(n.content=n.content.split(",").filter(function(e){return e.trim()!==i}).join(",")),setTimeout(function(){return $(e.target)},100);}Ie.call(this);}var _e=function(){function t(n){var i=this;e(this,t),this.player=n,this.prefix=t.prefix,this.property=t.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===n.config.fullscreen.fallback,N.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),function(){Ie.call(i);}),N.call(this.player,this.player.elements.container,"dblclick",function(e){E.element(i.player.elements.controls)&&i.player.elements.controls.contains(e.target)||i.toggle();}),this.update();}return n(t,[{key:"update",value:function(){var e;this.enabled?(e=this.forceFallback?"Fallback (forced)":t.native?"Native":"Fallback",this.player.debug.log("".concat(e," fullscreen enabled"))):this.player.debug.log("Fullscreen not supported and fallback disabled");B(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled);}},{key:"enter",value:function(){this.enabled&&(Z.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!t.native||this.forceFallback?Le.call(this,!0):this.prefix?E.empty(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen());}},{key:"exit",value:function(){if(this.enabled)if(Z.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),this.player.play();else if(!t.native||this.forceFallback)Le.call(this,!1);else if(this.prefix){if(!E.empty(this.prefix)){var e="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(e).concat(this.property)]();}}else(document.cancelFullScreen||document.exitFullscreen).call(document);}},{key:"toggle",value:function(){this.active?this.exit():this.enter();}},{key:"usingNative",get:function(){return t.native&&!this.forceFallback}},{key:"enabled",get:function(){return (t.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){return !!this.enabled&&(!t.native||this.forceFallback?V(this.target,this.player.config.classNames.fullscreen.fallback):(this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement)===this.target)}},{key:"target",get:function(){return Z.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.container}}],[{key:"native",get:function(){return !!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(E.function(document.exitFullscreen))return "";var e="";return ["webkit","moz","ms"].some(function(t){return !(!E.function(document["".concat(t,"ExitFullscreen")])&&!E.function(document["".concat(t,"CancelFullScreen")]))&&(e=t,!0)}),e}},{key:"property",get:function(){return "moz"===this.prefix?"FullScreen":"Fullscreen"}}]),t}();function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise(function(n,i){var a=new Image,s=function(){delete a.onload,delete a.onerror,(a.naturalWidth>=t?n:i)(a);};Object.assign(a,{onload:s,onerror:s,src:e});})}var je={addStyleHook:function(){B(this.elements.container,this.config.selectors.container.replace(".",""),!0),B(this.elements.container,this.config.classNames.uiSupported,this.supported.ui);},toggleNativeControls:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls");},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void je.toggleNativeControls.call(this,!0);E.element(this.elements.controls)||(ke.inject.call(this),this.listeners.controls()),je.toggleNativeControls.call(this),this.isHTML5&&Ce.setup.call(this),this.volume=null,this.muted=null,this.speed=null,this.loop=null,this.quality=null,ke.updateVolume.call(this),ke.timeUpdate.call(this),je.checkPlaying.call(this),B(this.elements.container,this.config.classNames.pip.supported,te.pip&&this.isHTML5&&this.isVideo),B(this.elements.container,this.config.classNames.airplay.supported,te.airplay&&this.isHTML5),B(this.elements.container,this.config.classNames.isIos,Z.isIos),B(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(function(){I.call(e,e.media,"ready");},0),je.setTitle.call(this),this.poster&&je.setPoster.call(this,this.poster,!1).catch(function(){}),this.config.duration&&ke.durationUpdate.call(this);},setTitle:function(){var e=he("play",this.config);if(E.string(this.config.title)&&!E.empty(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach(function(t){t.setAttribute("aria-label",e);}),this.isEmbed){var t=W.call(this,"iframe");if(!E.element(t))return;var n=E.empty(this.config.title)?"video":this.config.title,i=he("frameTitle",this.config);t.setAttribute("title",i.replace("{title}",n));}},togglePoster:function(e){B(this.elements.container,this.config.classNames.posterEnabled,e);},setPoster:function(e){var t=this;return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]||!this.poster?(this.media.setAttribute("poster",e),function(){var e=this;return new Promise(function(t){return e.ready?setTimeout(t,0):N.call(e,e.elements.container,"ready",t)}).then(function(){})}.call(this).then(function(){return Oe(e)}).catch(function(n){throw e===t.poster&&je.togglePoster.call(t,!1),n}).then(function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),je.togglePoster.call(t,!0),e})):Promise.reject(new Error("Poster already set"))},checkPlaying:function(e){var t=this;B(this.elements.container,this.config.classNames.playing,this.playing),B(this.elements.container,this.config.classNames.paused,this.paused),B(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(function(e){e.pressed=t.playing;}),E.event(e)&&"timeupdate"===e.type||je.toggleControls.call(this);},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(function(){B(t.elements.container,t.config.classNames.loading,t.loading),je.toggleControls.call(t);},this.loading?250:0);},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n));}}};function qe(e){var t=e;E.string(t)||E.nullOrUndefined(this.embed)||(t=this.embed.ratio),E.string(t)||(t=this.config.ratio);var n=a(t.split(":").map(Number),2),i=100/n[0]*n[1];if(this.elements.wrapper.style.paddingBottom="".concat(i,"%"),this.isVimeo&&this.supported.ui){var s=(240-i)/4.8;this.media.style.transform="translateY(-".concat(s,"%)");}return {padding:i,ratio:t}}var De=function(){function t(n){e(this,t),this.player=n,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this);}return n(t,[{key:"handleKey",value:function(e){var t=this.player,n=t.elements,i=e.keyCode?e.keyCode:e.which,a="keydown"===e.type,s=a&&i===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&E.number(i)){if(a){var o=document.activeElement;if(E.element(o)){var r=t.config.selectors.editable;if(o!==n.inputs.seek&&U(o,r))return;if(32===e.which&&U(o,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:s||(t.currentTime=t.duration/10*(i-48));break;case 32:case 75:s||t.togglePlay();break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:s||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:s||t.toggleCaptions();break;case 76:t.loop=!t.loop;}27===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i;}else this.lastKey=null;}}},{key:"toggleMenu",value:function(e){ke.toggleMenu.call(this.player,e);}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,B(t.container,e.config.classNames.isTouch,!0);}},{key:"setTabFocus",value:function(e){var t=this.player,n=t.elements;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var i,a=e.timeStamp-this.lastKeyDown<=20;if("focus"!==e.type||a)i=t.config.classNames.tabFocus,B(z.call(t,".".concat(i)),i,!1),this.focusTimer=setTimeout(function(){var e=document.activeElement;n.container.contains(e)&&B(document.activeElement,t.config.classNames.tabFocus,!0);},10);}}},{key:"global",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&P.call(t,window,"keydown keyup",this.handleKey,e,!1),P.call(t,document.body,"click",this.toggleMenu,e),x.call(t,document.body,"touchstart",this.firstTouch),P.call(t,document.body,"keydown focus blur",this.setTabFocus,e,!1,!0);}},{key:"container",value:function(){var e=this.player,t=e.config,n=e.elements,i=e.timers;!t.keyboard.global&&t.keyboard.focused&&N.call(e,n.container,"keydown keyup",this.handleKey,!1),N.call(e,n.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",function(t){var a=n.controls;a&&"enterfullscreen"===t.type&&(a.pressed=!1,a.hover=!1);var s=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(je.toggleControls.call(e,!0),s=e.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout(function(){return je.toggleControls.call(e,!1)},s);});var s=function(t){if(!t)return qe.call(e);var i=n.container.getBoundingClientRect(),a=i.width,s=i.height;return qe.call(e,"".concat(a,":").concat(s))},o=function(){window.clearTimeout(i.resized),i.resized=window.setTimeout(s,50);};N.call(e,n.container,"enterfullscreen exitfullscreen",function(t){var i=e.fullscreen,r=i.target,l=i.usingNative;if(e.isEmbed&&r===n.container){var c="enterfullscreen"===t.type,u=s(c);u.padding;!function(t,n,i){if(e.isVimeo){var s=e.elements.wrapper.firstChild,o=a(t.split(":").map(Number),2)[1],r=a(e.embed.ratio.split(":").map(Number),2),l=r[0],c=r[1];s.style.maxWidth=i?"".concat(o/c*l,"px"):null,s.style.margin=i?"0 auto":null;}}(u.ratio,0,c),l||(c?N.call(e,window,"resize",o):M.call(e,window,"resize",o));}});}},{key:"media",value:function(){var e=this,t=this.player,n=t.elements;if(N.call(t,t.media,"timeupdate seeking seeked",function(e){return ke.timeUpdate.call(t,e)}),N.call(t,t.media,"durationchange loadeddata loadedmetadata",function(e){return ke.durationUpdate.call(t,e)}),N.call(t,t.media,"canplay loadeddata",function(){R(n.volume,!t.hasAudio),R(n.buttons.mute,!t.hasAudio);}),N.call(t,t.media,"ended",function(){t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&t.restart();}),N.call(t,t.media,"progress playing seeking seeked",function(e){return ke.updateProgress.call(t,e)}),N.call(t,t.media,"volumechange",function(e){return ke.updateVolume.call(t,e)}),N.call(t,t.media,"playing play pause ended emptied timeupdate",function(e){return je.checkPlaying.call(t,e)}),N.call(t,t.media,"waiting canplay seeked playing",function(e){return je.checkLoading.call(t,e)}),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){var i=W.call(t,".".concat(t.config.classNames.video));if(!E.element(i))return;N.call(t,n.container,"click",function(a){([n.container,i].includes(a.target)||i.contains(a.target))&&(t.touch&&t.config.hideControls||(t.ended?(e.proxy(a,t.restart,"restart"),e.proxy(a,t.play,"play")):e.proxy(a,t.togglePlay,"play")));});}t.supported.ui&&t.config.disableContextMenu&&N.call(t,n.wrapper,"contextmenu",function(e){e.preventDefault();},!1),N.call(t,t.media,"volumechange",function(){t.storage.set({volume:t.volume,muted:t.muted});}),N.call(t,t.media,"ratechange",function(){ke.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed});}),N.call(t,t.media,"qualitychange",function(e){ke.updateSetting.call(t,"quality",null,e.detail.quality);}),N.call(t,t.media,"ready qualitychange",function(){ke.setDownloadLink.call(t);});var a=t.config.events.concat(["keyup","keydown"]).join(" ");N.call(t,t.media,a,function(e){var i=e.detail,a=void 0===i?{}:i;"error"===e.type&&(a=t.media.error),I.call(t,n.container,e.type,!0,a);});}},{key:"proxy",value:function(e,t,n){var i=this.player,a=i.config.listeners[n],s=!0;E.function(a)&&(s=a.call(i,e)),s&&E.function(t)&&t.call(i,e);}},{key:"bind",value:function(e,t,n,i){var a=this,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.player,r=o.config.listeners[i],l=E.function(r);N.call(o,e,t,function(e){return a.proxy(e,n,i)},s&&!l);}},{key:"controls",value:function(){var e=this,t=this.player,n=t.elements,i=Z.isIE?"change":"input";if(n.buttons.play&&Array.from(n.buttons.play).forEach(function(n){e.bind(n,"click",t.togglePlay,"play");}),this.bind(n.buttons.restart,"click",t.restart,"restart"),this.bind(n.buttons.rewind,"click",t.rewind,"rewind"),this.bind(n.buttons.fastForward,"click",t.forward,"fastForward"),this.bind(n.buttons.mute,"click",function(){t.muted=!t.muted;},"mute"),this.bind(n.buttons.captions,"click",function(){return t.toggleCaptions()}),this.bind(n.buttons.download,"click",function(){I.call(t,t.media,"download");},"download"),this.bind(n.buttons.fullscreen,"click",function(){t.fullscreen.toggle();},"fullscreen"),this.bind(n.buttons.pip,"click",function(){t.pip="toggle";},"pip"),this.bind(n.buttons.airplay,"click",t.airplay,"airplay"),this.bind(n.buttons.settings,"click",function(e){e.stopPropagation(),ke.toggleMenu.call(t,e);}),this.bind(n.buttons.settings,"keyup",function(e){var n=e.which;[13,32].includes(n)&&(13!==n?(e.preventDefault(),e.stopPropagation(),ke.toggleMenu.call(t,e)):ke.focusFirstMenuItem.call(t,null,!0));},null,!1),this.bind(n.settings.menu,"keydown",function(e){27===e.which&&ke.toggleMenu.call(t,e);}),this.bind(n.inputs.seek,"mousedown mousemove",function(e){var t=n.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",i);}),this.bind(n.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",function(e){var n=e.currentTarget,i=e.keyCode?e.keyCode:e.which;if(!E.keyboardEvent(e)||39===i||37===i){t.lastSeekTime=Date.now();var a=n.hasAttribute("play-on-seeked"),s=["mouseup","touchend","keyup"].includes(e.type);a&&s?(n.removeAttribute("play-on-seeked"),t.play()):!s&&t.playing&&(n.setAttribute("play-on-seeked",""),t.pause());}}),Z.isIos){var s=z.call(t,'input[type="range"]');Array.from(s).forEach(function(t){return e.bind(t,i,function(e){return $(e.target)})});}this.bind(n.inputs.seek,i,function(e){var n=e.currentTarget,i=n.getAttribute("seek-value");E.empty(i)&&(i=n.value),n.removeAttribute("seek-value"),t.currentTime=i/n.max*t.duration;},"seek"),this.bind(n.progress,"mouseenter mouseleave mousemove",function(e){return ke.updateSeekTooltip.call(t,e)}),this.bind(n.progress,"mousemove touchmove",function(e){var n=t.previewThumbnails;n&&n.loaded&&n.startMove(e);}),this.bind(n.progress,"mouseleave click",function(){var e=t.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0);}),this.bind(n.progress,"mousedown touchstart",function(e){var n=t.previewThumbnails;n&&n.loaded&&n.startScrubbing(e);}),this.bind(n.progress,"mouseup touchend",function(e){var n=t.previewThumbnails;n&&n.loaded&&n.endScrubbing(e);}),Z.isWebkit&&Array.from(z.call(t,'input[type="range"]')).forEach(function(n){e.bind(n,"input",function(e){return ke.updateRangeFill.call(t,e.target)});}),t.config.toggleInvert&&!E.element(n.display.duration)&&this.bind(n.display.currentTime,"click",function(){0!==t.currentTime&&(t.config.invertTime=!t.config.invertTime,ke.timeUpdate.call(t));}),this.bind(n.inputs.volume,i,function(e){t.volume=e.target.value;},"volume"),this.bind(n.controls,"mouseenter mouseleave",function(e){n.controls.hover=!t.touch&&"mouseenter"===e.type;}),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",function(e){n.controls.pressed=["mousedown","touchstart"].includes(e.type);}),this.bind(n.controls,"focusin",function(){var n=t.config,i=t.elements,a=t.timers;B(i.controls,n.classNames.noTransition,!0),je.toggleControls.call(t,!0),setTimeout(function(){B(i.controls,n.classNames.noTransition,!1);},0);var s=e.touch?3e3:4e3;clearTimeout(a.controls),a.controls=setTimeout(function(){return je.toggleControls.call(t,!1)},s);}),this.bind(n.inputs.volume,"wheel",function(e){var n=e.webkitDirectionInvertedFromDevice,i=a([e.deltaX,-e.deltaY].map(function(e){return n?-e:e}),2),s=i[0],o=i[1],r=Math.sign(Math.abs(s)>Math.abs(o)?s:o);t.increaseVolume(r/50);var l=t.media.volume;(1===r&&l<1||-1===r&&l>0)&&e.preventDefault();},"volume",!1);}}]),t}();var Fe,He=(function(e,t){e.exports=function(){var e=function(){},t={},n={},i={};function a(e,t){if(e){var a=i[e];if(n[e]=t,a)for(;a.length;)a[0](e,t),a.splice(0,1);}}function s(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t);}function o(t,n,i,a){var s,r,l=document,c=i.async,u=(i.numRetries||0)+1,d=i.before||e,h=t.replace(/^(css|img)!/,"");a=a||0,/(^css!|\.css$)/.test(t)?(s=!0,(r=l.createElement("link")).rel="stylesheet",r.href=h):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(r=l.createElement("img")).src=h:((r=l.createElement("script")).src=t,r.async=void 0===c||c),r.onload=r.onerror=r.onbeforeload=function(e){var l=e.type[0];if(s&&"hideFocus"in r)try{r.sheet.cssText.length||(l="e");}catch(e){18!=e.code&&(l="e");}if("e"==l&&(a+=1)<u)return o(t,n,i,a);n(t,l,e.defaultPrevented);},!1!==d(t,r)&&l.head.appendChild(r);}function r(e,n,i){var r,l;if(n&&n.trim&&(r=n),l=(r?i:n)||{},r){if(r in t)throw"LoadJS";t[r]=!0;}!function(e,t,n){var i,a,s=(e=e.push?e:[e]).length,r=s,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e);}--s||t(l);},a=0;a<r;a++)o(e[a],i,n);}(e,function(e){s(l,e),a(r,e);},l);}return r.ready=function(e,t){return function(e,t){e=e.push?e:[e];var a,s,o,r=[],l=e.length,c=l;for(a=function(e,n){n.length&&r.push(e),--c||t(r);};l--;)s=e[l],(o=n[s])?a(s,o):(i[s]=i[s]||[]).push(a);}(e,function(e){s(t,e);}),r},r.done=function(e){a(e,[]);},r.reset=function(){t={},n={},i={};},r.isDefined=function(e){return e in t},r}();}(Fe={exports:{}},Fe.exports),Fe.exports);function Re(e){return new Promise(function(t,n){He(e,{success:t,error:n});})}function Be(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,I.call(this,this.media,e?"play":"pause"));}var Ve={setup:function(){var e=this;B(this.elements.wrapper,this.config.classNames.embed,!0),qe.call(this),E.object(window.Vimeo)?Ve.ready.call(this):Re(this.config.urls.vimeo.sdk).then(function(){Ve.ready.call(e);}).catch(function(t){e.debug.warn("Vimeo API failed to load",t);});},ready:function(){var e=this,t=this,n=t.config.vimeo,i=Te(se({},{loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},n)),s=t.media.getAttribute("src");E.empty(s)&&(s=t.media.getAttribute(t.config.attributes.embed.id));var o,r=(o=s,E.empty(o)?null:E.number(Number(o))?o:o.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:o),l=O("iframe"),c=oe(t.config.urls.vimeo.iframe,r,i);l.setAttribute("src",c),l.setAttribute("allowfullscreen",""),l.setAttribute("allowtransparency",""),l.setAttribute("allow","autoplay");var u=O("div",{poster:t.poster,class:t.config.classNames.embedContainer});u.appendChild(l),t.media=F(u,t.media),pe(oe(t.config.urls.vimeo.api,r),"json").then(function(e){if(!E.empty(e)){var n=new URL(e[0].thumbnail_large);n.pathname="".concat(n.pathname.split("_")[0],".jpg"),je.setPoster.call(t,n.href).catch(function(){});}}),t.embed=new window.Vimeo.Player(l,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return Be.call(t,!0),t.embed.play()},t.media.pause=function(){return Be.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0;};var d=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return d},set:function(e){var n=t.embed,i=t.media,a=t.paused,s=t.volume,o=a&&!n.hasPlayed;i.seeking=!0,I.call(t,i,"seeking"),Promise.resolve(o&&n.setVolume(0)).then(function(){return n.setCurrentTime(e)}).then(function(){return o&&n.pause()}).then(function(){return o&&n.setVolume(s)}).catch(function(){});}});var h=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return h},set:function(e){t.embed.setPlaybackRate(e).then(function(){h=e,I.call(t,t.media,"ratechange");}).catch(function(e){"Error"===e.name&&ke.setSpeedMenu.call(t,[]);});}});var m=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return m},set:function(e){t.embed.setVolume(e).then(function(){m=e,I.call(t,t.media,"volumechange");});}});var p=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return p},set:function(e){var n=!!E.boolean(e)&&e;t.embed.setVolume(n?0:t.config.volume).then(function(){p=n,I.call(t,t.media,"volumechange");});}});var f,g=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return g},set:function(e){var n=E.boolean(e)?e:t.config.loop.active;t.embed.setLoop(n).then(function(){g=n;});}}),t.embed.getVideoUrl().then(function(e){f=e,ke.setDownloadLink.call(t);}).catch(function(t){e.debug.warn(t);}),Object.defineProperty(t.media,"currentSrc",{get:function(){return f}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then(function(n){var i=a(n,2),s=i[0],o=i[1];t.embed.ratio="".concat(s,":").concat(o),qe.call(e,t.embed.ratio);}),t.embed.setAutopause(t.config.autopause).then(function(e){t.config.autopause=e;}),t.embed.getVideoTitle().then(function(n){t.config.title=n,je.setTitle.call(e);}),t.embed.getCurrentTime().then(function(e){d=e,I.call(t,t.media,"timeupdate");}),t.embed.getDuration().then(function(e){t.media.duration=e,I.call(t,t.media,"durationchange");}),t.embed.getTextTracks().then(function(e){t.media.textTracks=e,Ce.setup.call(t);}),t.embed.on("cuechange",function(e){var n=e.cues,i=(void 0===n?[]:n).map(function(e){return t=e.text,n=document.createDocumentFragment(),i=document.createElement("div"),n.appendChild(i),i.innerHTML=t,n.firstChild.innerText;var t,n,i;});Ce.updateCues.call(t,i);}),t.embed.on("loaded",function(){(t.embed.getPaused().then(function(e){Be.call(t,!e),e||I.call(t,t.media,"playing");}),E.element(t.embed.element)&&t.supported.ui)&&t.embed.element.setAttribute("tabindex",-1);}),t.embed.on("play",function(){Be.call(t,!0),I.call(t,t.media,"playing");}),t.embed.on("pause",function(){Be.call(t,!1);}),t.embed.on("timeupdate",function(e){t.media.seeking=!1,d=e.seconds,I.call(t,t.media,"timeupdate");}),t.embed.on("progress",function(e){t.media.buffered=e.percent,I.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&I.call(t,t.media,"canplaythrough"),t.embed.getDuration().then(function(e){e!==t.media.duration&&(t.media.duration=e,I.call(t,t.media,"durationchange"));});}),t.embed.on("seeked",function(){t.media.seeking=!1,I.call(t,t.media,"seeked");}),t.embed.on("ended",function(){t.media.paused=!0,I.call(t,t.media,"ended");}),t.embed.on("error",function(e){t.media.error=e,I.call(t,t.media,"error");}),setTimeout(function(){return je.build.call(t)},0);}};function Ue(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,I.call(this,this.media,e?"play":"pause"));}var ze,We={setup:function(){var e=this;B(this.elements.wrapper,this.config.classNames.embed,!0),qe.call(this),E.object(window.YT)&&E.function(window.YT.Player)?We.ready.call(this):(Re(this.config.urls.youtube.sdk).catch(function(t){e.debug.warn("YouTube API failed to load",t);}),window.onYouTubeReadyCallbacks=window.onYouTubeReadyCallbacks||[],window.onYouTubeReadyCallbacks.push(function(){We.ready.call(e);}),window.onYouTubeIframeAPIReady=function(){window.onYouTubeReadyCallbacks.forEach(function(e){e();});});},getTitle:function(e){var t=this;if(E.function(this.embed.getVideoData)){var n=this.embed.getVideoData().title;if(E.empty(n))return this.config.title=n,void je.setTitle.call(this)}var i=this.config.keys.google;E.string(i)&&!E.empty(i)&&pe(oe(this.config.urls.youtube.api,e,i)).then(function(e){E.object(e)&&(t.config.title=e.items[0].snippet.title,je.setTitle.call(t));}).catch(function(){});},ready:function(){var e=this,t=e.media.getAttribute("id");if(E.empty(t)||!t.startsWith("youtube-")){var n=e.media.getAttribute("src");E.empty(n)&&(n=e.media.getAttribute(this.config.attributes.embed.id));var i,a,s=(i=n,E.empty(i)?null:i.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:i),o=(a=e.provider,"".concat(a,"-").concat(Math.floor(1e4*Math.random()))),r=O("div",{id:o,poster:e.poster});e.media=F(r,e.media);var l=function(e){return "https://img.youtube.com/vi/".concat(s,"/").concat(e,"default.jpg")};Oe(l("maxres"),121).catch(function(){return Oe(l("sd"),121)}).catch(function(){return Oe(l("hq"))}).then(function(t){return je.setPoster.call(e,t.src)}).then(function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover");}).catch(function(){});var c=e.config.youtube;e.embed=new window.YT.Player(o,{videoId:s,host:c.noCookie?"https://www.youtube-nocookie.com":void 0,playerVars:se({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},c),events:{onError:function(t){if(!e.media.error){var n=t.data,i={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[n]||"An unknown error occured";e.media.error={code:n,message:i},I.call(e,e.media,"error");}},onPlaybackRateChange:function(t){var n=t.target;e.media.playbackRate=n.getPlaybackRate(),I.call(e,e.media,"ratechange");},onReady:function(t){if(!E.function(e.media.play)){var n=t.target;We.getTitle.call(e,s),e.media.play=function(){Ue.call(e,!0),n.playVideo();},e.media.pause=function(){Ue.call(e,!1),n.pauseVideo();},e.media.stop=function(){n.stopVideo();},e.media.duration=n.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(n.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,I.call(e,e.media,"seeking"),n.seekTo(t);}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return n.getPlaybackRate()},set:function(e){n.setPlaybackRate(e);}});var i=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return i},set:function(t){i=t,n.setVolume(100*i),I.call(e,e.media,"volumechange");}});var a=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return a},set:function(t){var i=E.boolean(t)?t:a;a=i,n[i?"mute":"unMute"](),I.call(e,e.media,"volumechange");}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return n.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}}),e.options.speed=n.getAvailablePlaybackRates(),e.supported.ui&&e.media.setAttribute("tabindex",-1),I.call(e,e.media,"timeupdate"),I.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(function(){e.media.buffered=n.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&I.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),I.call(e,e.media,"canplaythrough"));},200),setTimeout(function(){return je.build.call(e)},50);}},onStateChange:function(t){var n=t.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(t.data)&&(e.media.seeking=!1,I.call(e,e.media,"seeked")),t.data){case-1:I.call(e,e.media,"timeupdate"),e.media.buffered=n.getVideoLoadedFraction(),I.call(e,e.media,"progress");break;case 0:Ue.call(e,!1),e.media.loop?(n.stopVideo(),n.playVideo()):I.call(e,e.media,"ended");break;case 1:e.media.paused&&!e.embed.hasPlayed?e.media.pause():(Ue.call(e,!0),I.call(e,e.media,"playing"),e.timers.playing=setInterval(function(){I.call(e,e.media,"timeupdate");},50),e.media.duration!==n.getDuration()&&(e.media.duration=n.getDuration(),I.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),Ue.call(e,!1);}I.call(e,e.elements.container,"statechange",!1,{code:t.data});}}});}}},Ke={setup:function(){this.media?(B(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),B(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&B(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=O("div",{class:this.config.classNames.video}),L(this.media,this.elements.wrapper),this.elements.poster=O("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?ne.extend.call(this):this.isYouTube?We.setup.call(this):this.isVimeo&&Ve.setup.call(this)):this.debug.warn("No media element found!");}},Ye=function(){function t(n){var i=this;e(this,t),this.player=n,this.config=n.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise(function(e,t){i.on("loaded",e),i.on("error",t);}),this.load();}return n(t,[{key:"load",value:function(){var e=this;this.enabled&&(E.object(window.google)&&E.object(window.google.ima)?this.ready():Re(this.player.config.urls.googleIMA.sdk).then(function(){e.ready();}).catch(function(){e.trigger("error",new Error("Google IMA SDK failed to load"));}));}},{key:"ready",value:function(){var e=this;this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(function(){e.clearSafetyTimer("onAdsManagerLoaded()");}),this.listeners(),this.setupIMA();}},{key:"setupIMA",value:function(){this.elements.container=O("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.requestAds();}},{key:"requestAds",value:function(){var e=this,t=this.player.elements.container;try{this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){return e.onAdsManagerLoaded(t)},!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(t){return e.onAdError(t)},!1);var n=new google.ima.AdsRequest;n.adTagUrl=this.tagUrl,n.linearAdSlotWidth=t.offsetWidth,n.linearAdSlotHeight=t.offsetHeight,n.nonLinearAdSlotWidth=t.offsetWidth,n.nonLinearAdSlotHeight=t.offsetHeight,n.forceNonLinearFullSlot=!1,n.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(n);}catch(e){this.onAdError(e);}}},{key:"pollCountdown",value:function(){var e=this;if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0]))return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(function(){var t=be(Math.max(e.manager.getRemainingTime(),0)),n="".concat(he("advertisement",e.player.config)," - ").concat(t);e.elements.container.setAttribute("data-badge-text",n);},100);}},{key:"onAdsManagerLoaded",value:function(e){var t=this;if(this.enabled){var n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=e.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.setVolume(this.player.volume),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){return t.onAdError(e)}),Object.keys(google.ima.AdEvent.Type).forEach(function(e){t.manager.addEventListener(google.ima.AdEvent.Type[e],function(e){return t.onAdEvent(e)});}),this.trigger("loaded");}}},{key:"addCuePoints",value:function(){var e=this;E.empty(this.cuePoints)||this.cuePoints.forEach(function(t){if(0!==t&&-1!==t&&t<e.player.duration){var n=e.player.elements.progress;if(E.element(n)){var i=100/e.player.duration*t,a=O("span",{class:e.player.config.classNames.cues});a.style.left="".concat(i.toString(),"%"),n.appendChild(a);}}});}},{key:"onAdEvent",value:function(e){var t=this,n=this.player.elements.container,i=e.getAd(),a=e.getAdData(),s=function(e){var n="ads".concat(e.replace(/_/g,"").toLowerCase());I.call(t.player,t.player.media,n);};switch(e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),s(e.type),this.pollCountdown(!0),i.isLinear()||(i.width=n.offsetWidth,i.height=n.offsetHeight);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:s(e.type),this.loadAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:s(e.type),this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:s(e.type),this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.STARTED:case google.ima.AdEvent.Type.MIDPOINT:case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.IMPRESSION:case google.ima.AdEvent.Type.CLICK:s(e.type);break;case google.ima.AdEvent.Type.LOG:a.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(a.adError.getMessage()));}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e);}},{key:"listeners",value:function(){var e,t=this,n=this.player.elements.container;this.player.on("canplay",function(){t.addCuePoints();}),this.player.on("ended",function(){t.loader.contentComplete();}),this.player.on("timeupdate",function(){e=t.player.currentTime;}),this.player.on("seeked",function(){var n=t.player.currentTime;E.empty(t.cuePoints)||t.cuePoints.forEach(function(i,a){e<i&&i<n&&(t.manager.discardAdBreak(),t.cuePoints.splice(a,1));});}),window.addEventListener("resize",function(){t.manager&&t.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL);});}},{key:"play",value:function(){var e=this,t=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then(function(){e.elements.displayContainer.initialize();try{e.initialized||(e.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),e.manager.start()),e.initialized=!0;}catch(t){e.onAdError(t);}}).catch(function(){});}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,this.player.media.play();}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause();}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds();}},{key:"loadAds",value:function(){var e=this;this.managerPromise.then(function(){e.manager&&e.manager.destroy(),e.managerPromise=new Promise(function(t){e.on("loaded",t),e.player.debug.log(e.manager);}),e.requestAds();}).catch(function(){});}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=this.events[e];E.array(s)&&s.forEach(function(e){E.function(e)&&e.apply(t,i);});}},{key:"on",value:function(e,t){return E.array(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var n=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout(function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()");},e);}},{key:"clearSafetyTimer",value:function(e){E.nullOrUndefined(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null);}},{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!E.empty(e.publisherId)||E.url(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if(E.url(e.tagUrl))return e.tagUrl;var t={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:this.publisherId};return "".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(Te(t))}}]),t}(),Qe=function(){function t(n){e(this,t),this.player=n,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load();}return n(t,[{key:"load",value:function(){var e=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(function(){e.render(),e.determineContainerAutoSizing(),e.loaded=!0;});}},{key:"getThumbnails",value:function(){var e=this;return new Promise(function(t){var n=e.player.config.previewThumbnails.src;if(E.empty(n))throw new Error("Missing previewThumbnails.src config attribute");var i=(E.string(n)?[n]:n).map(function(t){return e.getThumbnail(t)});Promise.all(i).then(function(){e.thumbnails.sort(function(e,t){return e.height-t.height}),e.player.debug.log("Preview thumbnails",e.thumbnails),t();});})}},{key:"getThumbnail",value:function(e){var t=this;return new Promise(function(n){pe(e).then(function(i){var s,o,r={frames:(s=i,o=[],s.split(/\r\n\r\n|\n\n|\r\r/).forEach(function(e){var t={};e.split(/\r\n|\n|\r/).forEach(function(e){if(E.number(t.startTime)){if(!E.empty(e.trim())&&E.empty(t.text)){var n=e.trim().split("#xywh="),i=a(n,1);if(t.text=i[0],n[1]){var s=a(n[1].split(","),4);t.x=s[0],t.y=s[1],t.w=s[2],t.h=s[3];}}}else{var o=e.match(/([0-9]{2}):([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2}):([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);o&&(t.startTime=60*Number(o[1])*60+60*Number(o[2])+Number(o[3])+Number("0.".concat(o[4])),t.endTime=60*Number(o[6])*60+60*Number(o[7])+Number(o[8])+Number("0.".concat(o[9])));}}),t.text&&o.push(t);}),o),height:null,urlPrefix:""};r.frames[0].text.startsWith("/")||(r.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var l=new Image;l.onload=function(){r.height=l.naturalHeight,r.width=l.naturalWidth,t.thumbnails.push(r),n();},l.src=r.urlPrefix+r.frames[0].text;});})}},{key:"startMove",value:function(e){if(this.loaded&&E.event(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t=this.player.elements.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(n/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=be(this.seekTime);}this.showImageAtCurrentTime();}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0);}},{key:"startScrubbing",value:function(e){!1!==e.button&&0!==e.button||(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()));}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):x.call(this.player,this.player.media,"timeupdate",function(){e.mouseDown||e.toggleScrubbingContainer(!1);});}},{key:"listeners",value:function(){var e=this;this.player.on("play",function(){e.toggleThumbContainer(!1,!0);}),this.player.on("seeked",function(){e.toggleThumbContainer(!1);}),this.player.on("timeupdate",function(){e.lastTime=e.player.media.currentTime;});}},{key:"render",value:function(){this.elements.thumb.container=O("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=O("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=O("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=O("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=O("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container);}},{key:"showImageAtCurrentTime",value:function(){var e=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var t=this.thumbnails[0].frames.findIndex(function(t){return e.seekTime>=t.startTime&&e.seekTime<=t.endTime}),n=t>=0,i=0;this.mouseDown||this.toggleThumbContainer(n),n&&(this.thumbnails.forEach(function(n,a){e.loadedImages.includes(n.frames[t].text)&&(i=a);}),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(i)));}},{key:"loadImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.showingThumb,i=this.thumbnails[t],a=i.urlPrefix,s=i.frames[n],o=i.frames[n].text,r=a+o;if(this.currentImageElement&&this.currentImageElement.dataset.filename===o)this.showImage(this.currentImageElement,s,t,n,o,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var l=new Image;l.src=r,l.dataset.index=n,l.dataset.filename=o,this.showingThumbFilename=o,this.player.debug.log("Loading image: ".concat(r)),l.onload=function(){return e.showImage(l,s,t,n,o,!0)},this.loadingImage=l,this.removeOldImages(l);}}},{key:"showImage",value:function(e,t,n,i,a){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(a,". num: ").concat(i,". qual: ").concat(n,". newimg: ").concat(s)),this.setImageSizeAndOffset(e,t),s&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(a)||this.loadedImages.push(a)),this.preloadNearby(i,!0).then(this.preloadNearby(i,!1)).then(this.getHigherQuality(n,e,t,a));}},{key:"removeOldImages",value:function(e){var t=this;Array.from(this.currentImageContainer.children).forEach(function(n){if("img"===n.tagName.toLowerCase()){var i=t.usingSprites?500:1e3;if(n.dataset.index!==e.dataset.index&&!n.dataset.deleting){n.dataset.deleting=!0;var a=t.currentImageContainer;setTimeout(function(){a.removeChild(n),t.player.debug.log("Removing thumb: ".concat(n.dataset.filename));},i);}}});}},{key:"preloadNearby",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise(function(i){setTimeout(function(){var a=t.thumbnails[0].frames[e].text;if(t.showingThumbFilename===a){var s;s=n?t.thumbnails[0].frames.slice(e):t.thumbnails[0].frames.slice(0,e).reverse();var o=!1;s.forEach(function(e){var n=e.text;if(n!==a&&!t.loadedImages.includes(n)){o=!0,t.player.debug.log("Preloading thumb filename: ".concat(n));var s=t.thumbnails[0].urlPrefix+n,r=new Image;r.src=s,r.onload=function(){t.player.debug.log("Preloaded thumb filename: ".concat(n)),t.loadedImages.includes(n)||t.loadedImages.push(n),i();};}}),o||i();}},300);})}},{key:"getHigherQuality",value:function(e,t,n,i){var a=this;if(e<this.thumbnails.length-1){var s=t.naturalHeight;this.usingSprites&&(s=n.h),s<this.thumbContainerHeight&&setTimeout(function(){a.showingThumbFilename===i&&(a.player.debug.log("Showing higher quality thumb for: ".concat(i)),a.loadImage(e+1));},300);}}},{key:"toggleThumbContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(n,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null);}},{key:"toggleScrubbingContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null);}},{key:"determineContainerAutoSizing",value:function(){this.elements.thumb.imageContainer.clientHeight>20&&(this.sizeSpecifiedInCSS=!0);}},{key:"setThumbContainerSizeAndPos",value:function(){if(!this.sizeSpecifiedInCSS){var e=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(e,"px");}this.setThumbContainerPos();}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),n=this.elements.thumb.container,i=t.left-e.left+10,a=t.right-e.left-n.clientWidth-10,s=this.mousePosX-e.left-n.clientWidth/2;s<i&&(s=i),s>a&&(s=a),n.style.left="".concat(s,"px");}},{key:"setScrubbingContainerSize",value:function(){this.elements.scrubbing.container.style.width="".concat(this.player.media.clientWidth,"px"),this.elements.scrubbing.container.style.height="".concat(this.player.media.clientWidth/this.thumbAspectRatio,"px");}},{key:"setImageSizeAndOffset",value:function(e,t){if(this.usingSprites){var n=this.thumbContainerHeight/t.h;e.style.height="".concat(Math.floor(e.naturalHeight*n),"px"),e.style.width="".concat(Math.floor(e.naturalWidth*n),"px"),e.style.left="-".concat(t.x*n,"px"),e.style.top="-".concat(t.y*n,"px");}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?Math.floor(this.player.media.clientWidth/this.thumbAspectRatio):Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e;}}]),t}(),Xe={insertElements:function(e,t){var n=this;E.string(t)?j(e,this.media,{src:t}):E.array(t)&&t.forEach(function(t){j(e,n.media,t);});},change:function(e){var t=this;ae(e,"sources.length")?(ne.cancelRequests.call(this),this.destroy.call(this,function(){t.options.quality=[],q(t.media),t.media=null,E.element(t.elements.container)&&t.elements.container.removeAttribute("class");var n=e.sources,i=e.type,s=a(n,1)[0],o=s.provider,r=void 0===o?Pe.html5:o,l=s.src,c="html5"===r?i:"div",u="html5"===r?{}:{src:l};Object.assign(t,{provider:r,type:i,supported:te.check(i,r,t.config.playsinline),media:O(c,u)}),t.elements.container.appendChild(t.media),E.boolean(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),E.empty(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),je.addStyleHook.call(t),t.isHTML5&&Xe.insertElements.call(t,"source",n),t.config.title=e.title,Ke.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&Xe.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&je.build.call(t),t.isHTML5&&t.media.load(),t.previewThumbnails&&t.previewThumbnails.load(),t.fullscreen.update();},!0)):this.debug.warn("Invalid source format");}},Je=function(){function t(n,i){var a=this;if(e(this,t),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=te.touch,this.media=n,E.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||E.nodeList(this.media)||E.array(this.media))&&(this.media=this.media[0]),this.config=se({},Ae,t.defaults,i||{},function(){try{return JSON.parse(a.media.getAttribute("data-plyr-config"))}catch(e){return {}}}()),this.elements={container:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new xe(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",te),!E.nullOrUndefined(this.media)&&E.element(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(te.check().api){var s=this.media.cloneNode(!0);s.autoplay=!1,this.elements.original=s;var o=this.media.tagName.toLowerCase(),r=null,l=null;switch(o){case"div":if(r=this.media.querySelector("iframe"),E.element(r)){if(l=we(r.getAttribute("src")),this.provider=function(e){return /^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?Pe.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?Pe.vimeo:null}(l.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",l.search.length){var c=["1","true"];c.includes(l.searchParams.get("autoplay"))&&(this.config.autoplay=!0),c.includes(l.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=c.includes(l.searchParams.get("playsinline")),this.config.youtube.hl=l.searchParams.get("hl")):this.config.playsinline=!0;}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(E.empty(this.provider)||!Object.keys(Pe).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Ne.video;break;case"video":case"audio":this.type=o,this.provider=Pe.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=te.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new De(this),this.storage=new me(this),this.media.plyr=this,E.element(this.elements.container)||(this.elements.container=O("div",{tabindex:0}),L(this.media,this.elements.container)),je.addStyleHook.call(this),Ke.setup.call(this),this.config.debug&&N.call(this,this.elements.container,this.config.events.join(" "),function(e){a.debug.log("event: ".concat(e.type));}),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&je.build.call(this),this.listeners.container(),this.listeners.global(),this.fullscreen=new _e(this),this.config.ads.enabled&&(this.ads=new Ye(this)),this.config.autoplay&&this.play(),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Qe(this))):this.debug.error("Setup failed: no support");}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed");}return n(t,[{key:"play",value:function(){var e=this;return E.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(function(){return e.ads.play()}).catch(function(){return e.media.play()}),this.media.play()):null}},{key:"pause",value:function(){this.playing&&E.function(this.media.pause)&&this.media.pause();}},{key:"togglePlay",value:function(e){(E.boolean(e)?e:!this.playing)?this.play():this.pause();}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):E.function(this.media.stop)&&this.media.stop();}},{key:"restart",value:function(){this.currentTime=0;}},{key:"rewind",value:function(e){this.currentTime=this.currentTime-(E.number(e)?e:this.config.seekTime);}},{key:"forward",value:function(e){this.currentTime=this.currentTime+(E.number(e)?e:this.config.seekTime);}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(E.number(e)?e:0);}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e);}},{key:"toggleCaptions",value:function(e){Ce.toggle.call(this,e,!1);}},{key:"airplay",value:function(){te.airplay&&this.media.webkitShowPlaybackTargetPicker();}},{key:"toggleControls",value:function(e){if(this.supported.ui&&!this.isAudio){var t=V(this.elements.container,this.config.classNames.hideControls),n=void 0===e?void 0:!e,i=B(this.elements.container,this.config.classNames.hideControls,n);if(i&&this.config.controls.includes("settings")&&!E.empty(this.config.settings)&&ke.toggleMenu.call(this,!1),i!==t){var a=i?"controlshidden":"controlsshown";I.call(this,this.media,a);}return !i}return !1}},{key:"on",value:function(e,t){N.call(this,this.elements.container,e,t);}},{key:"once",value:function(e,t){x.call(this,this.elements.container,e,t);}},{key:"off",value:function(e,t){M(this.elements.container,e,t);}},{key:"destroy",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ready){var i=function(){document.body.style.overflow="",t.embed=null,n?(Object.keys(t.elements).length&&(q(t.elements.buttons.play),q(t.elements.captions),q(t.elements.controls),q(t.elements.wrapper),t.elements.buttons.play=null,t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null),E.function(e)&&e()):(function(){this&&this.eventListeners&&(this.eventListeners.forEach(function(e){var t=e.element,n=e.type,i=e.callback,a=e.options;t.removeEventListener(n,i,a);}),this.eventListeners=[]);}.call(t),F(t.elements.original,t.elements.container),I.call(t,t.elements.original,"destroyed",!0),E.function(e)&&e.call(t.elements.original),t.ready=!1,setTimeout(function(){t.elements=null,t.media=null;},200));};this.stop(),this.isHTML5?(clearTimeout(this.timers.loading),je.toggleNativeControls.call(this,!0),i()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&E.function(this.embed.destroy)&&this.embed.destroy(),i()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(i),setTimeout(i,200));}}},{key:"supports",value:function(e){return te.mime.call(this,e)}},{key:"isHTML5",get:function(){return Boolean(this.provider===Pe.html5)}},{key:"isEmbed",get:function(){return Boolean(this.isYouTube||this.isVimeo)}},{key:"isYouTube",get:function(){return Boolean(this.provider===Pe.youtube)}},{key:"isVimeo",get:function(){return Boolean(this.provider===Pe.vimeo)}},{key:"isVideo",get:function(){return Boolean(this.type===Ne.video)}},{key:"isAudio",get:function(){return Boolean(this.type===Ne.audio)}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=E.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"));}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return E.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=E.number(t)&&t!==1/0?t:0;return e||n}},{key:"volume",set:function(e){var t=e;E.string(t)&&(t=Number(t)),E.number(t)||(t=this.storage.get("volume")),E.number(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!E.empty(e)&&this.muted&&t>0&&(this.muted=!1);},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;E.boolean(t)||(t=this.storage.get("muted")),E.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t;},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return !this.isHTML5||(!!this.isAudio||(Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)))}},{key:"speed",set:function(e){var t=null;E.number(e)&&(t=e),E.number(t)||(t=this.storage.get("speed")),E.number(t)||(t=this.config.speed.selected),t<.1&&(t=.1),t>2&&(t=2),this.config.speed.options.includes(t)?(this.config.speed.selected=t,this.media.playbackRate=t):this.debug.warn("Unsupported speed (".concat(t,")"));},get:function(){return Number(this.media.playbackRate)}},{key:"quality",set:function(e){var t=this.config.quality,n=this.options.quality;if(n.length){var i=[!E.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(E.number),a=!0;if(!n.includes(i)){var s=function(e,t){return E.array(e)&&e.length?e.reduce(function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e}):null}(n,i);this.debug.warn("Unsupported quality option: ".concat(i,", using ").concat(s," instead")),i=s,a=!1;}t.selected=i,this.media.quality=i,a&&this.storage.set({quality:i});}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=E.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t;},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){Xe.change.call(this,e);},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return E.url(e)?e:this.source}},{key:"poster",set:function(e){this.isVideo?je.setPoster.call(this,e,!1).catch(function(){}):this.debug.warn("Poster can only be set for video");},get:function(){return this.isVideo?this.media.getAttribute("poster"):null}},{key:"autoplay",set:function(e){var t=E.boolean(e)?e:this.config.autoplay;this.config.autoplay=t;},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){Ce.set.call(this,e,!1);},get:function(){var e=this.captions,t=e.toggled,n=e.currentTrack;return t?n:-1}},{key:"language",set:function(e){Ce.setLanguage.call(this,e,!1);},get:function(){return (Ce.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(te.pip){var t=E.boolean(e)?e:!this.pip;E.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?Ee:Se),E.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture());}},get:function(){return te.pip?E.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===Ee:null}}],[{key:"supported",value:function(e,t,n){return te.check(e,t,n)}},{key:"loadSprite",value:function(e,t){return fe(e,t)}},{key:"setup",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;return E.string(e)?i=Array.from(document.querySelectorAll(e)):E.nodeList(e)?i=Array.from(e):E.array(e)&&(i=e.filter(E.element)),E.empty(i)?null:i.map(function(e){return new t(e,n)})}}]),t}();return Je.defaults=(ze=Ae,JSON.parse(JSON.stringify(ze))),Je});

	});

	//
	var script = {
	  name: 'vue-plyr',
	  props: {
	    /** Options object for plyr config. **/
	    options: {
	      type: Object,
	      required: false,
	      default: function _default() {
	        return {};
	      }
	    },

	    /** Array of events to emit from the plyr object **/
	    emit: {
	      type: Array,
	      required: false,
	      default: function _default() {
	        return [];
	      }
	    }
	  },
	  data: function data() {
	    return {
	      player: {}
	    };
	  },
	  mounted: function mounted() {
	    var _this = this;

	    this.player = new plyr_min(this.$el.firstChild, this.opts);
	    this.$emit('player', this.player);
	    this.emit.forEach(function (element) {
	      _this.player.on(element, _this.emitPlayerEvent);
	    });
	  },
	  beforeDestroy: function beforeDestroy() {
	    try {
	      this.player.destroy();
	    } catch (e) {
	      if (!(this.opts.hideYouTubeDOMError && e.message === 'The YouTube player is not attached to the DOM.')) {
	        console.error(e);
	      }
	    }
	  },
	  methods: {
	    emitPlayerEvent: function emitPlayerEvent(event) {
	      this.$emit(event.type, event);
	    }
	  },
	  computed: {
	    opts: function opts() {
	      var options = this.options;

	      if (!this.options.hasOwnProperty('hideYouTubeDOMError')) {
	        options.hideYouTubeDOMError = true;
	      }

	      return options;
	    }
	  }
	};

	function normalizeComponent(compiledTemplate, injectStyle, defaultExport, scopeId, isFunctionalTemplate, moduleIdentifier /* server only */, isShadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
	    if (typeof isShadowMode === 'function') {
	        createInjectorSSR = createInjector;
	        createInjector = isShadowMode;
	        isShadowMode = false;
	    }
	    // Vue.extend constructor export interop
	    var options = typeof defaultExport === 'function' ? defaultExport.options : defaultExport;
	    // render functions
	    if (compiledTemplate && compiledTemplate.render) {
	        options.render = compiledTemplate.render;
	        options.staticRenderFns = compiledTemplate.staticRenderFns;
	        options._compiled = true;
	        // functional template
	        if (isFunctionalTemplate) {
	            options.functional = true;
	        }
	    }
	    // scopedId
	    if (scopeId) {
	        options._scopeId = scopeId;
	    }
	    var hook;
	    if (moduleIdentifier) {
	        // server build
	        hook = function (context) {
	            // 2.3 injection
	            context =
	                context || // cached call
	                    (this.$vnode && this.$vnode.ssrContext) || // stateful
	                    (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext); // functional
	            // 2.2 with runInNewContext: true
	            if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {
	                context = __VUE_SSR_CONTEXT__;
	            }
	            // inject component styles
	            if (injectStyle) {
	                injectStyle.call(this, createInjectorSSR(context));
	            }
	            // register component module identifier for async chunk inference
	            if (context && context._registeredComponents) {
	                context._registeredComponents.add(moduleIdentifier);
	            }
	        };
	        // used by ssr in case component is cached and beforeCreate
	        // never gets called
	        options._ssrRegister = hook;
	    }
	    else if (injectStyle) {
	        hook = isShadowMode
	            ? function () {
	                injectStyle.call(this, createInjectorShadow(this.$root.$options.shadowRoot));
	            }
	            : function (context) {
	                injectStyle.call(this, createInjector(context));
	            };
	    }
	    if (hook) {
	        if (options.functional) {
	            // register for functional component in vue file
	            var originalRender = options.render;
	            options.render = function renderWithStyleInjection(h, context) {
	                hook.call(context);
	                return originalRender(h, context);
	            };
	        }
	        else {
	            // inject component registration as beforeCreate hook
	            var existing = options.beforeCreate;
	            options.beforeCreate = existing ? [].concat(existing, hook) : [hook];
	        }
	    }
	    return defaultExport;
	}

	/* script */
	var __vue_script__ = script;
	// For security concerns, we use only base name in production mode. See https://github.com/vuejs/rollup-plugin-vue/issues/258
	script.__file = "VuePlyr.vue";
	/* template */
	var __vue_render__ = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t("default")],2)};
	var __vue_staticRenderFns__ = [];

	  /* style */
	  var __vue_inject_styles__ = undefined;
	  /* scoped */
	  var __vue_scope_id__ = undefined;
	  /* module identifier */
	  var __vue_module_identifier__ = undefined;
	  /* functional template */
	  var __vue_is_functional_template__ = false;
	  /* style inject */
	  
	  /* style inject SSR */
	  

	  
	  var VuePlyr = normalizeComponent(
	    { render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ },
	    __vue_inject_styles__,
	    __vue_script__,
	    __vue_scope_id__,
	    __vue_is_functional_template__,
	    __vue_module_identifier__,
	    undefined,
	    undefined
	  );

	var Components = {
	  VuePlyr: VuePlyr
	};
	var VuePlyrPlugin = {
	  install: function install(Vue, options) {
	    Object.keys(Components).forEach(function (component) {
	      Vue.component(Components[component].name, Components[component]);
	    });
	  }
	}; // Credit to https://github.com/irazasyed for this auto Vue.use() when
	// installing from unpkg or similar.

	if (typeof window !== 'undefined' && window.Vue) {
	  window.Vue.use(VuePlyrPlugin);
	}

	exports.VuePlyr = VuePlyr;
	exports.VuePlyrPlugin = VuePlyrPlugin;
	exports.default = VuePlyrPlugin;

	Object.defineProperty(exports, '__esModule', { value: true });

})));
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VueInputAutoWidth=t()}(this,function(){"use strict";function e(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),o=1;o<arguments.length;o++){var i=arguments[o];if(null!=i)for(var r=Object.keys(Object(i)),d=0,a=r.length;d<a;d++){var l=r[d],u=Object.getOwnPropertyDescriptor(i,l);void 0!==u&&u.enumerable&&(n[l]=i[l])}}return n}function t(e,t){var n=document.querySelector(".vue-input-autowidth-mirror-".concat(e.dataset.uuid)),o=Object.assign({},{maxWidth:"none",minWidth:"none",comfortZone:0},t.value);e.style.maxWidth=o.maxWidth,e.style.minWidth=o.minWidth;var i=e.value;for(i||(i=e.placeholder||"");n.childNodes.length;)n.removeChild(n.childNodes[0]);n.appendChild(document.createTextNode(i));var r=n.scrollWidth+o.comfortZone+2;r!=e.scrollWidth&&(e.style.width="".concat(r,"px"))}({assign:e,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:e})}}).polyfill();var n={bind:function(e){if("INPUT"!==e.tagName.toLocaleUpperCase())throw new Error("v-input-autowidth can only be used on input elements.");e.dataset.uuid=Math.random().toString(36).slice(-5),e.style.boxSizing="content-box"},inserted:function(e,n){var o=window.getComputedStyle(e);e.mirror=document.createElement("span"),Object.assign(e.mirror.style,{position:"absolute",top:"0",left:"0",visibility:"hidden",height:"0",overflow:"scroll",whiteSpace:"pre",fontSize:o.fontSize,fontFamily:o.fontFamily,fontWeight:o.fontWeight,fontStyle:o.fontStyle,letterSpacing:o.letterSpacing,textTransform:o.textTransform}),e.mirror.classList.add("vue-input-autowidth-mirror-".concat(e.dataset.uuid)),e.mirror.setAttribute("aria-hidden","true"),document.body.appendChild(e.mirror),t(e,n)},componentUpdated:function(e,n){t(e,n)},unbind:function(e){document.body.removeChild(e.mirror)}},o=function(e){e.directive("autowidth",n)};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),n.install=o,n});
//# sourceMappingURL=index.umd.min.js.map
